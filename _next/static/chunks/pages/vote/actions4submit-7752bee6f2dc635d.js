(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4468],{1709:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(37876);let a=e=>{var t=e.title;return(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:t})})}},7446:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(11713).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12293:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(37876),a=r(7446);let s=()=>(0,n.jsx)(a.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var n=r(76200);class a extends n.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function s(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new a({value:e});let[r,n="0"]=e.split("."),s=r.startsWith("-");if(s&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${n}`))&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>t){let[e,a,s]=[n.slice(0,t-1),n.slice(t-1,t),n.slice(t)],o=Math.round(Number(`${a}.${s}`));(n=o>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${o}`).length>t&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,t)}else n=n.padEnd(t,"0");return BigInt(`${s?"-":""}${r}${n}`)}},26269:(e,t,r)=>{"use strict";var n=r(99680),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,s,o,c,l,i,u,d,p=!1;t||(t={}),o=t.debug||!1;try{if(l=n(),i=document.createRange(),u=document.getSelection(),(d=document.createElement("span")).textContent=e,d.ariaHidden="true",d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var n=a[t.format]||a.default;window.clipboardData.setData(n,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(d),i.selectNodeContents(d),u.addRange(i),!document.execCommand("copy"))throw Error("copy command was unsuccessful");p=!0}catch(n){o&&console.error("unable to copy using execCommand: ",n),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),p=!0}catch(n){o&&console.error("unable to copy using clipboardData: ",n),o&&console.error("falling back to prompt"),r="message"in t?t.message:"Copy to clipboard: #{key}, Enter",s=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",c=r.replace(/#{\s*key\s*}/g,s),window.prompt(c,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(i):u.removeAllRanges()),d&&document.body.removeChild(d),l()}return p}},28638:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>p,ZB:()=>u,Zp:()=>l,aR:()=>i,wL:()=>f});var n=r(3576),a=r(65699),s=r(37876),o=r(14232),c=r(30684),l=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},o))});l.displayName="Card";var i=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",r)},o))});i.displayName="CardHeader";var u=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",r)},o))});u.displayName="CardTitle";var d=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("text-sm text-muted-foreground",r)},o))});d.displayName="CardDescription";var p=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("p-6 pt-0",r)},o))});p.displayName="CardContent";var f=o.forwardRef((e,t)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,s.jsx)("div",(0,n._)({ref:t,className:(0,c.cn)("flex items-center p-6 pt-0",r)},o))});f.displayName="CardFooter"},33276:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(11713).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},46852:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var a=c(r(14232)),s=c(r(26269)),o=["text","onCopy","options","children"];function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&u(l,e);var t,r,c=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=p(l);return e=t?Reflect.construct(r,arguments,p(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return d(e)}(this,e)});function l(){var e;if(!(this instanceof l))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return f(d(e=c.call.apply(c,[this].concat(r))),"onClick",function(t){var r=e.props,n=r.text,o=r.onCopy,c=r.children,l=r.options,i=a.default.Children.only(c),u=(0,s.default)(n,l);o&&o(n,u),i&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(t)}),e}return r=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),n=a.default.Children.only(t);return a.default.cloneElement(n,i(i({},r),{},{onClick:this.onClick}))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(l.prototype,r),Object.defineProperty(l,"prototype",{writable:!1}),l}(a.default.PureComponent);t.CopyToClipboard=y,f(y,"defaultProps",{onCopy:void 0,options:void 0})},48447:(e,t,r)=>{"use strict";var n=r(46852).CopyToClipboard;n.CopyToClipboard=n,e.exports=n},70801:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(11713).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},71938:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r(37876),a=r(14232),s=r(89099),o=r(83416),c=r(64115),l=r(20451),i=r(66663),u=r(6960),d=r(28638),p=r(48230),f=r.n(p),y=r(12293),m=r(1709),x=r(87577),b=r(91754);let h=e=>{var t,r=e.currentRound,s=((0,a.useContext)(o.N)||{}).token,i=(0,c.Vg)((null==s?void 0:s.address)||"",0n,100n,!1),p=i.actionInfos,h=i.isPending,v=i.error,g=(0,c.VD)((null==s?void 0:s.address)||"",r),j=g.actionSubmits,N=g.isPending,w=g.error,C=(0,l.g)().handleContractError;return((0,a.useEffect)(()=>{v&&C(v,"submit"),w&&C(w,"submit")},[v,w]),s)?(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)(m.A,{title:"未推举的行动"}),(0,n.jsx)(u.$,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(f(),{href:"/action/new?symbol=".concat(s.symbol),children:"发起新行动"})})]}),h||N?(0,n.jsx)(y.A,{}):(0,n.jsxs)("div",{className:"space-y-4",children:[(null==p?void 0:p.length)===0&&(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"暂无行动"}),p&&(null==p?void 0:p.length)>0&&(null==p||null==(t=p.filter(e=>!(null==j?void 0:j.some(t=>t.actionId===e.head.id))))?void 0:t.map((e,t)=>(0,n.jsx)(d.Zp,{className:"shadow-none",children:(0,n.jsxs)(f(),{href:"/action/".concat(e.head.id,"?symbol=").concat(s.symbol,"&type=submit&submitted=false"),children:[(0,n.jsxs)(d.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,n.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,n.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.head.id)}),(0,n.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.body.action)})]}),(0,n.jsxs)(d.Wu,{className:"px-3 pt-1 pb-2",children:[(0,n.jsx)("div",{className:"text-base text-greyscale-600",children:e.body.consensus}),(0,n.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)(b.A,{className:"text-greyscale-400 mr-1 h-3 w-3 -translate-y-0.5"}),(0,n.jsx)("span",{className:"text-greyscale-400",children:(0,n.jsx)(x.A,{address:e.head.author,showCopyButton:!1,colorClassName2:"text-secondary"})})]}),(0,n.jsx)("span",{className:"text-sm text-greyscale-600",children:"未推举"})]})]})]},e.head.id)},e.head.id)))]})]}):(0,n.jsx)(y.A,{})},v=()=>{var e=(0,c.vC)(),t=e.currentRound,r=e.isPending,u=e.error,d=(0,l.g)().handleContractError;(0,a.useEffect)(()=>{u&&d(u,"submit")},[u]);var p=(0,s.useRouter)(),f=((0,a.useContext)(o.N)||{}).token;return(0,a.useEffect)(()=>{f&&!f.hasEnded?p.push("/launch?symbol=".concat(f.symbol)):f&&!f.initialStakeRound&&p.push("/gov/stakelp/?symbol=".concat(f.symbol,"&first=true"))},[f]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{title:"推举"}),(0,n.jsx)("main",{className:"flex-grow",children:r?(0,n.jsx)(y.A,{}):(0,n.jsx)(h,{currentRound:t})})]})}},77328:(e,t,r)=>{e.exports=r(89836)},86739:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(11713).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},87577:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(40854),a=r(37876),s=r(14232),o=r(48447),c=r(33276),l=r(70801),i=r(97685),u=r(20442);let d=e=>{var t=e.address,r=e.word,d=e.showCopyButton,p=e.showAddress,f=void 0===p||p,y=e.colorClassName,m=void 0===y?"":y,x=e.colorClassName2,b=void 0===x?"":x,h=(0,n._)((0,s.useState)(!1),2),v=h[0],g=h[1];return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[r&&(0,a.jsx)("span",{className:"text-xs",children:r}),f&&!b&&(0,a.jsx)("span",{className:"text-xs ".concat(null!=m?m:"text-greyscale-500"),children:(0,u.W_)(t)}),f&&b&&(0,a.jsxs)("span",{className:"text-[0px]",children:[(0,a.jsx)("span",{className:"text-xs ".concat(null!=m?m:"text-greyscale-500"),children:"".concat(t.substring(0,6),"...")}),(0,a.jsx)("span",{className:"text-xs ".concat(b),children:"".concat(t.substring(t.length-4))})]}),(void 0===d||d)&&(0,a.jsx)(o.CopyToClipboard,{text:t,onCopy:(e,t)=>{t?g(!0):i.Ay.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:v?(0,a.jsx)(c.A,{className:"h-4 w-4 ".concat(null!=m?m:"text-greyscale-500")}):(0,a.jsx)(l.A,{className:"h-4 w-4 ".concat(null!=m?m:"text-greyscale-500")})})})]})}},91754:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n=(0,r(11713).A)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},96688:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions4submit",function(){return r(71938)}])},99680:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(t){e.addRange(t)}),t&&t.focus()}}}},e=>{var t=t=>e(e.s=t);e.O(0,[8230,2569,2840,636,6593,8792],()=>t(96688)),_N_E=e.O()}]);