(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4468],{1709:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(37876);let t=e=>{var s=e.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:s})})}},7446:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var r=(0,a(11713).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12293:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var r=a(37876),t=a(7446);let n=()=>(0,r.jsx)(t.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},28638:(e,s,a)=>{"use strict";a.d(s,{BT:()=>m,Wu:()=>x,ZB:()=>o,Zp:()=>d,aR:()=>i,wL:()=>u});var r=a(3576),t=a(65699),n=a(37876),l=a(14232),c=a(30684),d=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a)},l))});d.displayName="Card";var i=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",a)},l))});i.displayName="CardHeader";var o=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",a)},l))});o.displayName="CardTitle";var m=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a)},l))});m.displayName="CardDescription";var x=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("p-6 pt-0",a)},l))});x.displayName="CardContent";var u=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("flex items-center p-6 pt-0",a)},l))});u.displayName="CardFooter"},71938:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var r=a(37876),t=a(14232),n=a(89099),l=a(83416),c=a(64115),d=a(20451),i=a(66663),o=a(6960),m=a(28638),x=a(48230),u=a.n(x),N=a(12293),f=a(1709);let h=e=>{var s=e.currentRound,a=((0,t.useContext)(l.N)||{}).token,n=(0,c.Vg)((null==a?void 0:a.address)||"",0n,100n,!1),i=n.actionInfos,x=n.isPending,h=n.error,v=(0,c.VD)((null==a?void 0:a.address)||"",s),y=v.actionSubmits,p=v.isPending,j=v.error,b=(0,d.g)().handleContractError;return((0,t.useEffect)(()=>{h&&b(h,"submit"),j&&b(j,"submit")},[h,j]),a)?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(f.A,{title:"所有行动"}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,r.jsx)(u(),{href:"/action/new?symbol=".concat(a.symbol),children:"发起新行动"})})]}),x||p?(0,r.jsx)(N.A,{}):(0,r.jsxs)("div",{className:"space-y-4",children:[(null==i?void 0:i.length)===0&&(0,r.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"暂无行动"}),i&&(null==i?void 0:i.length)>0&&(null==i?void 0:i.map((e,s)=>{var t=null==y?void 0:y.some(s=>s.actionId===e.head.id);return(0,r.jsx)(m.Zp,{className:"shadow-none",children:(0,r.jsxs)(u(),{href:"/action/".concat(e.head.id,"?symbol=").concat(a.symbol,"&type=submit&submitted=").concat(t),children:[(0,r.jsxs)(m.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,r.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.head.id)}),(0,r.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.body.action)})]}),(0,r.jsxs)(m.Wu,{className:"px-3 pt-1 pb-2",children:[(0,r.jsx)("div",{className:"text-base text-greyscale-600",children:e.body.consensus}),(0,r.jsx)("div",{className:"flex justify-between mt-1 text-sm",children:(0,r.jsx)("span",{className:"text-sm",children:t?(0,r.jsx)("span",{className:"text-secondary",children:"已推举"}):(0,r.jsx)("span",{className:"text-greyscale-600",children:"未推举"})})})]})]},e.head.id)},e.head.id)}))]})]}):(0,r.jsx)(N.A,{})},v=()=>{var e=(0,c.vC)(),s=e.currentRound,a=e.isPending,o=e.error,m=(0,d.g)().handleContractError;(0,t.useEffect)(()=>{o&&m(o,"submit")},[o]);var x=(0,n.useRouter)(),u=((0,t.useContext)(l.N)||{}).token;return(0,t.useEffect)(()=>{u&&!u.hasEnded?x.push("/launch?symbol=".concat(u.symbol)):u&&!u.initialStakeRound&&x.push("/gov/stakelp/?symbol=".concat(u.symbol,"&first=true"))},[u]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:"推举"}),(0,r.jsx)("main",{className:"flex-grow",children:a?(0,r.jsx)(N.A,{}):(0,r.jsx)(h,{currentRound:s})})]})}},77328:(e,s,a)=>{e.exports=a(89836)},86739:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var r=(0,a(11713).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},96688:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions4submit",function(){return a(71938)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[2569,4115,636,6593,8792],()=>s(96688)),_N_E=e.O()}]);