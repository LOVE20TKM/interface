try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="fb9353ca-a762-4c58-8769-dd9c2f99e04a",e._sentryDebugIdIdentifier="sentry-dbid-fb9353ca-a762-4c58-8769-dd9c2f99e04a")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1445],{21784:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions",function(){return n(92147)}])},34680:function(e,s,n){"use strict";n.d(s,{Ol:function(){return i},SZ:function(){return u},Zb:function(){return l},aY:function(){return x},eW:function(){return m},ll:function(){return d}});var t=n(72253),a=n(47702),r=n(85893),c=n(67294),o=n(40108),l=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},c))});l.displayName="Card";var i=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",n)},c))});i.displayName="CardHeader";var d=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",n)},c))});d.displayName="CardTitle";var u=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("text-sm text-muted-foreground",n)},c))});u.displayName="CardDescription";var x=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("p-6 pt-0",n)},c))});x.displayName="CardContent";var m=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,o.cn)("flex items-center p-6 pt-0",n)},c))});m.displayName="CardFooter"},24920:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var t=(0,n(31134).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},27460:function(e,s,n){"use strict";var t=n(91309),a=n(85893),r=n(67294),c=n(74855),o=n(78865),l=n(18289),i=n(86501),d=n(91529);s.Z=function(e){var s=e.address,n=e.word,u=e.showCopyButton,x=e.showCopyLast4Button,m=e.showAddress,f=void 0===m||m,h=e.colorClassName,p=void 0===h?"":h,N=e.colorClassName2,v=void 0===N?"":N,y=(0,t._)((0,r.useState)(!1),2),b=y[0],g=y[1],j=(0,t._)((0,r.useState)(!1),2),w=j[0],C=j[1];(0,r.useEffect)(function(){g(!1),C(!1)},[s]);var _=function(e){e.preventDefault(),e.stopPropagation()};return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[n&&(0,a.jsx)("span",{className:"text-xs",children:n}),f&&!v&&(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:(0,d.Vu)(s)}),f&&v&&(0,a.jsxs)("span",{className:"text-[0px]",children:[(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:"".concat(s.substring(0,6),"...")}),(0,a.jsx)("span",{className:"font-mono text-xs ".concat(v),children:"".concat(s.substring(s.length-4))})]}),(void 0===u||u)&&(0,a.jsx)(c.CopyToClipboard,{text:s,onCopy:function(e,s){s?(g(!0),setTimeout(function(){return g(!1)},2e3)):i.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:_,"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:b?(0,a.jsx)(o.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")}):(0,a.jsx)(l.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")})})}),void 0!==x&&x&&(0,a.jsx)(c.CopyToClipboard,{text:s.substring(s.length-4),onCopy:function(e,s){s?(C(!0),i.ZP.success("已复制后4位"),setTimeout(function(){return C(!1)},2e3)):i.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none active:bg-gray-200 md:hover:bg-gray-100 transition-colors",onClick:_,"aria-label":"复制地址后4位",style:{WebkitTapHighlightColor:"transparent"},children:w?(0,a.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"已复制"}):(0,a.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"后4位"})})})]})}},92147:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return j}});var t=n(85893),a=n(67294),r=n(72260),c=n(73591),o=n(83494),l=n(24920),i=n(4307),d=n(42130),u=n(27245),x=n(34680),m=n(41664),f=n.n(m),h=n(90278),p=n(93778),N=n(27460),v=n(64777),y=n(42083),b=n(91529),g=function(e){var s,n=e.currentRound,r=(0,d.m)().address,o=((0,a.useContext)(p.M)||{}).token,m=(0,h.YK)((null==o?void 0:o.address)||"",n,r),g=m.votingActions,j=m.isPending,w=m.error,C=(0,h._H)((null==o?void 0:o.address)||""),_=C.govData,k=C.isPending,Z=g.reduce(function(e,s){return e+s.votesNum},BigInt(0)),E=Number("30")/10,T=(0,c.S)().handleContractError;return((0,a.useEffect)(function(){w&&T(w,"vote")},[w,T]),j||k)?(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(y.Z,{})}):o?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(v.Z,{title:"投票中的行动"}),o&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(u.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,t.jsx)(f(),{href:"/submit/actions?symbol=".concat(null==o?void 0:o.symbol),children:"推举其他行动"})}),(0,t.jsx)(u.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,t.jsx)(f(),{href:"/gov?symbol=".concat(null==o?void 0:o.symbol),children:"返回治理"})})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:g.length>0?(0,t.jsx)(t.Fragment,{children:null===(s=g.sort(function(e,s){return Number(s.votesNum-e.votesNum)}))||void 0===s?void 0:s.map(function(e,s){var n=e.action,a=(null==_?void 0:_.govVotes)&&_.govVotes!==BigInt(0)?100*Number(e.votesNum)/Number(_.govVotes):0,r=a<E;return(0,t.jsx)(x.Zb,{className:"shadow-none flex items-center relative ".concat(r?"border-red-500 border-2":""),children:(0,t.jsxs)(f(),{href:"/action/info/?id=".concat(n.head.id,"&symbol=").concat(null==o?void 0:o.symbol,"&tab=vote"),className:"w-full",children:[(0,t.jsxs)(x.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,t.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(n.head.id)}),(0,t.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(n.body.title)})]}),(0,t.jsxs)(x.aY,{className:"px-3 pt-1 pb-2 pr-10",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-0 mt-1 text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(l.Z,{className:"text-greyscale-400 mr-1 h-3 w-3 -translate-y-0.5"}),(0,t.jsx)("span",{className:"text-greyscale-400",children:(0,t.jsx)(N.Z,{address:n.head.author,showCopyButton:!1,colorClassName2:"text-secondary"})})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票数"}),(0,t.jsx)("span",{className:"text-secondary",children:(0,b.LH)(e.votesNum)})]})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-0 mt-1 text-sm",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"占已投票"}),(0,t.jsx)("span",{className:"text-secondary",children:Z===BigInt(0)?"-":(0,b.rl)(100*Number(e.votesNum)/Number(Z))})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"".concat(r?"text-red-500":"text-secondary"," mr-1"),children:"占总治理票"}),(0,t.jsx)("span",{className:r?"text-red-500":"text-secondary",children:(null==_?void 0:_.govVotes)&&_.govVotes!==BigInt(0)?(0,b.rl)(a):"-"})]})]})]}),(0,t.jsx)(i.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]},n.head.id)},n.head.id)})}):(0,t.jsxs)("div",{className:"text-center mt-8",children:[(0,t.jsx)("div",{className:"text-base text-greyscale-500 mb-4",children:"还没有推举行动，请先推举！"}),(0,t.jsx)(u.z,{asChild:!0,children:(0,t.jsx)(f(),{href:"/submit/actions?symbol=".concat(null==o?void 0:o.symbol),children:"去推举行动"})})]})})]}):(0,t.jsx)(y.Z,{})},j=function(){var e=(0,r.Bk)(),s=e.currentRound,n=e.isPending,l=e.error,i=(0,c.S)().handleContractError;return(0,a.useEffect)(function(){l&&i(l,"vote")},[l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{title:"投票中的行动",showBackButton:!0}),(0,t.jsx)("main",{className:"flex-grow",children:n?(0,t.jsx)(y.Z,{}):(0,t.jsx)(g,{currentRound:s})})]})}}},function(e){e.O(0,[8501,4463,3494,3591,9419,2888,9774,179],function(){return e(e.s=21784)}),_N_E=e.O()}]);