try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="890ba71f-b0db-47fb-ae4d-c1acac7b152b",e._sentryDebugIdIdentifier="sentry-dbid-890ba71f-b0db-47fb-ae4d-c1acac7b152b")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9236],{89245:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my",function(){return t(76064)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return o},SZ:function(){return x},Zb:function(){return i},aY:function(){return m},eW:function(){return u},ll:function(){return d}});var n=t(72253),a=t(47702),r=t(85893),c=t(67294),l=t(40108),i=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},c))});i.displayName="Card";var o=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t)},c))});o.displayName="CardHeader";var d=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t)},c))});d.displayName="CardTitle";var x=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t)},c))});x.displayName="CardDescription";var m=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("p-6 pt-0",t)},c))});m.displayName="CardContent";var u=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t)},c))});u.displayName="CardFooter"},24920:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var n=(0,t(31134).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},21338:function(e,s,t){"use strict";var n=t(91309),a=t(85893),r=t(67294),c=t(88504),l=t(93778),i=t(74089),o=t(42083);s.Z=function(e){var s=e.currentRound,t=e.roundType,d=e.showCountdown,x=(0,c.O)().data,m=(0,r.useContext)(l.M),u=m?m.token:void 0,h=!x||!u||void 0===u.voteOriginBlocks,f=(0,n._)((0,r.useState)(BigInt(0)),2),j=f[0],N=f[1],y=Number("30126")||0,v=Number("2868")||0,g=u?Number(u.voteOriginBlocks):0,b=y-(Number(x)-g)%y,p=b>0?Math.ceil(b*v/1e3):0,k=(0,n._)((0,r.useState)(p),2),w=k[0],_=k[1];(0,r.useEffect)(function(){if(x){var e=y-(Number(x)-g)%y;_(e>0?Math.ceil(e*v/1e3):0)}},[x,y,v,g]),(0,r.useEffect)(function(){s>BigInt(0)&&N(s)},[s]);var Z=null!=j?j.toString():"0";return j<=BigInt(0)?(0,a.jsx)(a.Fragment,{}):h||null==j||j<BigInt(0)?((null==j||j<BigInt(0))&&(console.log("currentTokenRound",j),console.log("currentRound",s)),(0,a.jsx)(o.Z,{})):(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-greyscale-400",children:["(第",(0,a.jsx)("span",{className:"text-greyscale-400",children:Z}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,a.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*w/v)}),(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===d||d?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Z,{initialTimeLeft:p,onTick:_})}):(0,a.jsx)("span",{className:"text-greyscale-400",children:w<60?"".concat(w,"秒"):w<=300?"".concat(Math.floor(w/60),"分钟").concat(w%60,"秒"):w<3600?"".concat(Math.floor(w/60),"分钟"):"".concat(Math.floor(w/3600),"小时").concat(Math.floor(w%3600/60),"分钟")}),(0,a.jsx)("span",{className:"text-greyscale-400",children:")"})]})})}},76064:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var n=t(91309),a=t(85893),r=t(67294),c=t(42130),l=t(41664),i=t.n(l),o=t(27245),d=t(93778),x=t(83494),m=t(64777),u=t(91529),h=t(85794),f=t(73591),j=t(42083),N=t(53696),y=function(e){var s=e.token,t=(0,c.m)().address,n=(0,h.hS)(null==s?void 0:s.address,t),l=n.balance,d=n.isPending,x=n.error,y=(0,h.hS)(null==s?void 0:s.parentTokenAddress,t),v=y.balance,g=y.isPending,b=y.error,p=(0,f.S)().handleContractError;return((0,r.useEffect)(function(){x&&p(x,"token"),b&&p(b,"token")},[x,b]),s)?t?(0,a.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(m.Z,{title:"我的代币"}),(0,a.jsx)(o.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/token/transfer?symbol=".concat(s.symbol),children:"转账"})})]}),(0,a.jsxs)("div",{className:"stats bg-gray-100 w-full grid grid-cols-2 divide-x-0",children:[(0,a.jsxs)("div",{className:"stat place-items-center pb-3",children:[(0,a.jsxs)("div",{className:"stat-title text-sm flex items-center font-mono",children:["持有 ",null==s?void 0:s.symbol,(0,a.jsx)(N.Z,{tokenAddress:s.address,tokenSymbol:s.symbol,tokenDecimals:s.decimals})]}),(0,a.jsx)("div",{className:"stat-value text-xl",children:d?(0,a.jsx)(j.Z,{}):(0,u.LH)(l||BigInt(0))}),(0,a.jsx)("div",{className:"stat-desc mt-0 text-xs text-greyscale-400 font-light",children:"不包含治理质押和行动参与"})]}),(0,a.jsxs)("div",{className:"stat place-items-center pb-3",children:[(0,a.jsxs)("div",{className:"stat-title text-sm flex items-center font-mono",children:["持有 ",null==s?void 0:s.parentTokenSymbol,(0,a.jsx)(N.Z,{tokenAddress:s.parentTokenAddress,tokenSymbol:s.parentTokenSymbol,tokenDecimals:s.decimals})]}),(0,a.jsx)("div",{className:"stat-value text-xl",children:g?(0,a.jsx)(j.Z,{}):(0,u.LH)(v||BigInt(0))}),(0,a.jsx)("div",{className:"stat-desc mt-0 text-xs text-greyscale-400 font-light"})]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,a.jsx)(m.Z,{title:"我的代币"}),(0,a.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):(0,a.jsx)(j.Z,{})},v=t(40057),g=t(4586),b=t(34680),p=t(24920),k=t(4307),w=t(20442),_=t(90278),Z=t(8345),C=t(21338),S=t(27460),T=function(e){var s=e.token,t=e.onActionStatusChange,n=(0,w.Bk)().currentRound,l=(0,c.m)().address,d=(0,_.dB)(null==s?void 0:s.address,l),x=d.joinedActions,h=d.isPending,N=d.error,y=(0,Z.s)({tokenAddress:null==s?void 0:s.address,account:l}),v=y.joinedExtensionActions,T=y.isPending,E=y.error,R=(0,r.useMemo)(function(){var e=x||[],s=v||[];if(0===e.length&&0===s.length)return[];var t=new Set(e.map(function(e){return e.action.head.id.toString()})),n=s.filter(function(e){return!t.has(e.action.head.id.toString())});return(0,g._)(e).concat((0,g._)(n))},[x,v]),A=h||T;(0,r.useEffect)(function(){t&&!A&&t(!!(R&&R.length>0))},[R,A,t]);var B=(0,f.S)().handleContractError;return((0,r.useEffect)(function(){N&&B(N,"dataViewer"),E&&B(E,"extension")},[N,E,B]),A)?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"pt-4 px-4",children:[(0,a.jsx)(m.Z,{title:"我参与的行动"}),(0,a.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:(0,a.jsx)(j.Z,{})})]})}):(0,a.jsxs)("div",{className:"pt-4 px-4",children:[(0,a.jsx)(m.Z,{title:"我参与的行动"}),(0,a.jsx)(C.Z,{currentRound:n,roundType:"act"}),(null==R?void 0:R.length)?(0,a.jsx)("div",{className:"mt-4 space-y-4",children:(0,g._)(R).sort(function(e,s){var t=e.hasReward&&e.votesNum>0,n=s.hasReward&&s.votesNum>0;return t&&!n?-1:!t&&n?1:0}).map(function(e,t){var n=e.hasReward&&e.votesNum>0;return(0,a.jsx)(b.Zb,{className:n?"shadow-none":"shadow-none bg-gray-50",children:(0,a.jsxs)(i(),{href:"/my/myaction?id=".concat(e.action.head.id,"&symbol=").concat(null==s?void 0:s.symbol),className:"relative block",children:[(0,a.jsxs)(b.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-between items-baseline",children:[(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,a.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,a.jsx)("span",{className:"font-bold ".concat(n?"text-greyscale-800":"text-greyscale-400"),children:"".concat(e.action.body.title)})]}),e.votesNum>0?e.hasReward?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("span",{className:"text-error text-xs",children:"无铸币激励"}):(0,a.jsx)("span",{className:"text-error text-xs",children:"未投票"})]}),(0,a.jsx)(b.aY,{className:"px-3 pt-1 pb-2",children:(0,a.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"text-greyscale-400 mr-1 h-3 w-3 -translate-y-0.5"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:(0,a.jsx)(S.Z,{address:e.action.head.author,showCopyButton:!1,colorClassName2:"text-secondary"})})]}),e.votesNum>0&&(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票"}),(0,a.jsx)("span",{className:"text-secondary",children:(0,u.rl)(Number(e.votePercentPerTenThousand)/100)})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"我参与代币"}),(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(e.joinedAmountOfAccount)})]})]})}),(0,a.jsx)(k.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]},e.action.head.id)},e.action.head.id)})}):(0,a.jsx)("div",{className:"text-sm text-greyscale-500 text-center my-6",children:"没有参与行动，请先参与"}),(0,a.jsx)("div",{className:"flex justify-center space-x-4 mt-4",children:(0,a.jsx)(o.z,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:(null==R?void 0:R.length)?"/my/actionrewards?symbol=".concat(null==s?void 0:s.symbol):"/my/queryaction/?symbol=".concat(null==s?void 0:s.symbol),children:(null==R?void 0:R.length)?"铸造 行动激励 >>":"查看 行动激励 >>"})})})]})},E=t(66247),R=function(){var e=((0,r.useContext)(d.M)||{}).token,s=(0,c.m)().isConnected,t=(0,n._)((0,r.useState)(!1),2),l=t[0],u=t[1],h=(0,n._)((0,r.useState)(!1),2),f=h[0],N=h[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{title:"我的"}),(0,a.jsx)("main",{className:"flex-grow",children:s?e?e&&!e.hasEnded?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,a.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能查看个人资产"}),(0,a.jsx)(o.z,{className:"w-1/2",asChild:!0,children:(0,a.jsx)(i(),{href:"/launch?symbol=".concat(e.symbol),children:"查看公平发射"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y,{token:e}),!l&&f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{token:e,onActionStatusChange:N}),(0,a.jsxs)("div",{className:"flex-col items-center p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)(m.Z,{title:"我的治理资产"}),l&&(0,a.jsx)(o.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/stake/unstake?symbol=".concat(null==e?void 0:e.symbol),children:"取消质押"})})]}),(0,a.jsx)(v.Z,{token:e,onStakeStatusChange:u})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-col items-center p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)(m.Z,{title:"我的治理资产"}),l&&(0,a.jsx)(o.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/stake/unstake?symbol=".concat(null==e?void 0:e.symbol),children:"取消质押"})})]}),(0,a.jsx)(v.Z,{token:e,onStakeStatusChange:u})]}),(0,a.jsx)(T,{token:e,onActionStatusChange:N})]})]}):(0,a.jsx)(j.Z,{}):(0,a.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,a.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}}},function(e){e.O(0,[8501,4463,3798,8139,246,3494,3591,9419,2494,7224,4762,57,2888,9774,179],function(){return e(e.s=89245)}),_N_E=e.O()}]);