try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5e8759b8-65fc-48e2-80fd-922841878b62",e._sentryDebugIdIdentifier="sentry-dbid-5e8759b8-65fc-48e2-80fd-922841878b62")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4484],{53364:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/token/transfer",function(){return r(13291)}])},34680:function(e,n,r){"use strict";r.d(n,{Ol:function(){return l},SZ:function(){return u},Zb:function(){return c},aY:function(){return f},eW:function(){return m},ll:function(){return d}});var t=r(72253),s=r(47702),a=r(85893),i=r(67294),o=r(40108),c=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},i))});c.displayName="Card";var l=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r)},i))});l.displayName="CardHeader";var d=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r)},i))});d.displayName="CardTitle";var u=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("text-sm text-muted-foreground",r)},i))});u.displayName="CardDescription";var f=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("p-6 pt-0",r)},i))});f.displayName="CardContent";var m=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,o.cn)("flex items-center p-6 pt-0",r)},i))});m.displayName="CardFooter"},74193:function(e,n,r){"use strict";r.d(n,{NI:function(){return N},Wi:function(){return p},l0:function(){return h},lX:function(){return b},pf:function(){return _},xJ:function(){return y},zG:function(){return j}});var t=r(34788),s=r(12796),a=r(72253),i=r(14932),o=r(47702),c=r(85893),l=r(67294),d=r(88426),u=r(87536),f=r(40108),m=r(94193),h=u.RV,x=l.createContext({}),p=function(e){var n=(0,t._)({},(0,s._)(e));return(0,c.jsx)(x.Provider,{value:{name:n.name},children:(0,c.jsx)(u.Qr,(0,a._)({},n))})},v=function(){var e=l.useContext(x),n=l.useContext(g),r=(0,u.Gc)(),t=r.getFieldState,s=r.formState,i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");var o=n.id;return(0,a._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},i)},g=l.createContext({}),y=l.forwardRef(function(e,n){var r=e.className,t=(0,o._)(e,["className"]),s=l.useId();return(0,c.jsx)(g.Provider,{value:{id:s},children:(0,c.jsx)("div",(0,a._)({ref:n,className:(0,f.cn)("space-y-2",r)},t))})});y.displayName="FormItem";var b=l.forwardRef(function(e,n){var r=e.className,t=(0,o._)(e,["className"]),s=v(),i=s.error,l=s.formItemId;return(0,c.jsx)(m._,(0,a._)({ref:n,className:(0,f.cn)(i&&"text-destructive",r),htmlFor:l},t))});b.displayName="FormLabel";var N=l.forwardRef(function(e,n){var r=(0,t._)({},(0,s._)(e)),i=v(),o=i.error,l=i.formItemId,u=i.formDescriptionId,f=i.formMessageId;return(0,c.jsx)(d.g7,(0,a._)({ref:n,id:l,"aria-describedby":o?"".concat(u," ").concat(f):"".concat(u),"aria-invalid":!!o},r))});N.displayName="FormControl";var _=l.forwardRef(function(e,n){var r=e.className,t=(0,o._)(e,["className"]),s=v().formDescriptionId;return(0,c.jsx)("p",(0,a._)({ref:n,id:s,className:(0,f.cn)("text-sm text-muted-foreground",r)},t))});_.displayName="FormDescription";var j=l.forwardRef(function(e,n){var r=e.className,t=e.children,s=(0,o._)(e,["className","children"]),l=v(),d=l.error,u=l.formMessageId,m=d?String(null==d?void 0:d.message):t;return m?(0,c.jsx)("p",(0,i._)((0,a._)({ref:n,id:u,className:(0,f.cn)("text-sm font-medium text-destructive",r)},s),{children:m})):null});j.displayName="FormMessage"},94193:function(e,n,r){"use strict";r.d(n,{_:function(){return u}});var t=r(72253),s=r(47702),a=r(85893),i=r(67294),o=r(49102),c=r(12003),l=r(40108),d=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)(o.f,(0,t._)({ref:n,className:(0,l.cn)(d(),r)},i))});u.displayName=o.f.displayName},88659:function(e,n,r){"use strict";r.d(n,{Bw:function(){return g},Ph:function(){return m},Ql:function(){return y},i4:function(){return x},ki:function(){return h}});var t=r(72253),s=r(14932),a=r(47702),i=r(85893),o=r(67294),c=r(76405),l=r(42171),d=r(15432),u=r(78865),f=r(40108),m=c.fC;c.ZA;var h=c.B4,x=o.forwardRef(function(e,n){var r=e.className,o=e.children,d=(0,a._)(e,["className","children"]);return(0,i.jsxs)(c.xz,(0,s._)((0,t._)({ref:n,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},d),{children:[o,(0,i.jsx)(c.JO,{asChild:!0,children:(0,i.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]}))});x.displayName=c.xz.displayName;var p=o.forwardRef(function(e,n){var r=e.className,o=(0,a._)(e,["className"]);return(0,i.jsx)(c.u_,(0,s._)((0,t._)({ref:n,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",r)},o),{children:(0,i.jsx)(d.Z,{className:"h-4 w-4"})}))});p.displayName=c.u_.displayName;var v=o.forwardRef(function(e,n){var r=e.className,o=(0,a._)(e,["className"]);return(0,i.jsx)(c.$G,(0,s._)((0,t._)({ref:n,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",r)},o),{children:(0,i.jsx)(l.Z,{className:"h-4 w-4"})}))});v.displayName=c.$G.displayName;var g=o.forwardRef(function(e,n){var r=e.className,o=e.children,l=e.position,d=void 0===l?"popper":l,u=(0,a._)(e,["className","children","position"]);return(0,i.jsx)(c.h_,{children:(0,i.jsxs)(c.VY,(0,s._)((0,t._)({ref:n,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:d},u),{children:[(0,i.jsx)(p,{}),(0,i.jsx)(c.l_,{className:(0,f.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,i.jsx)(v,{})]}))})});g.displayName=c.VY.displayName,o.forwardRef(function(e,n){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(c.__,(0,t._)({ref:n,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},s))}).displayName=c.__.displayName;var y=o.forwardRef(function(e,n){var r=e.className,o=e.children,l=(0,a._)(e,["className","children"]);return(0,i.jsxs)(c.ck,(0,s._)((0,t._)({ref:n,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},l),{children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(c.wU,{children:(0,i.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(c.eT,{children:o})]}))});y.displayName=c.ck.displayName,o.forwardRef(function(e,n){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(c.Z0,(0,t._)({ref:n,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",r)},s))}).displayName=c.Z0.displayName},27460:function(e,n,r){"use strict";var t=r(91309),s=r(85893),a=r(67294),i=r(74855),o=r(78865),c=r(18289),l=r(86501),d=r(91529);n.Z=function(e){var n=e.address,r=e.word,u=e.showCopyButton,f=e.showCopyLast4Button,m=e.showAddress,h=void 0===m||m,x=e.colorClassName,p=void 0===x?"":x,v=e.colorClassName2,g=void 0===v?"":v,y=(0,t._)((0,a.useState)(!1),2),b=y[0],N=y[1],_=(0,t._)((0,a.useState)(!1),2),j=_[0],w=_[1];(0,a.useEffect)(function(){N(!1),w(!1)},[n]);var C=function(e){e.preventDefault(),e.stopPropagation()};return(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[r&&(0,s.jsx)("span",{className:"text-xs",children:r}),h&&!g&&(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:(0,d.Vu)(n)}),h&&g&&(0,s.jsxs)("span",{className:"text-[0px]",children:[(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:"".concat(n.substring(0,4),"...")}),(0,s.jsx)("span",{className:"font-mono text-xs ".concat(g),children:"".concat(n.substring(n.length-6))})]}),(void 0===u||u)&&(0,s.jsx)(i.CopyToClipboard,{text:n,onCopy:function(e,n){n?(N(!0),setTimeout(function(){return N(!1)},2e3)):l.ZP.error("复制失败")},children:(0,s.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:C,"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:b?(0,s.jsx)(o.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")}):(0,s.jsx)(c.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")})})}),void 0!==f&&f&&(0,s.jsx)(i.CopyToClipboard,{text:n.substring(n.length-4),onCopy:function(e,n){n?(w(!0),l.ZP.success("已复制后4位"),setTimeout(function(){return w(!1)},2e3)):l.ZP.error("复制失败")},children:(0,s.jsx)("button",{className:"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none active:bg-gray-200 md:hover:bg-gray-100 transition-colors",onClick:C,"aria-label":"复制地址后4位",style:{WebkitTapHighlightColor:"transparent"},children:j?(0,s.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"已复制"}):(0,s.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"后4位"})})})]})}},64777:function(e,n,r){"use strict";var t=r(85893);n.Z=function(e){var n=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:n})})}},42083:function(e,n,r){"use strict";var t=r(85893),s=r(23432);n.Z=function(){return(0,t.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},85794:function(e,n,r){"use strict";r.d(n,{A5:function(){return h},DA:function(){return v},hS:function(){return f},l3:function(){return p},yA:function(){return x},yG:function(){return u},z4:function(){return m}});var t=r(11010),s=r(97582),a=r(67294),i=r(71104),o=r(37541),c=r(37742),l=r(37474),d=r(84689),u=function(e,n,r){var t=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=(0,i.u)({address:e,abi:o.O,functionName:"allowance",args:[n,r],query:{enabled:!!e&&!!n&&!!r&&t}}),a=s.data,l=s.isPending,d=s.error,u=s.refetch;return{allowance:void 0!==a?(0,c.Z)(a):void 0,isPending:l,error:d,refetch:u}},f=function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=(0,i.u)({address:e,abi:o.O,functionName:"balanceOf",args:[n],query:{enabled:!!e&&!!n&&r}}),s=t.data,a=t.isPending,l=t.error,d=t.refetch;return{balance:void 0!==s?(0,c.Z)(s):void 0,isPending:a,error:l,refetch:d}},m=function(e){var n=(0,i.u)({address:e,abi:o.O,functionName:"symbol",args:[],query:{enabled:!!e}});return{symbol:n.data,isPending:n.isPending,error:n.error}},h=function(e){var n=(0,i.u)({address:e,abi:o.O,functionName:"totalSupply",args:[],query:{enabled:!!e}}),r=n.data,t=n.isPending,s=n.error;return{totalSupply:void 0!==r?(0,c.Z)(r):void 0,isPending:t,error:s}};function x(e){var n,r=(0,l.e9)(o.O,e,"approve"),i=r.execute,c=r.isPending,u=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,x=r.isTukeMode,p=(n=(0,t._)(function(n,r){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交approve交易:",{token:e,spender:n,value:r,isTukeMode:x}),[4,i([n,r])];case 1:return[2,t.sent()]}})}),function(e,r){return n.apply(this,arguments)});return(0,a.useEffect)(function(){h&&console.log("approve tx hash:",h),m&&(console.log("提交approve交易错误:"),(0,d.Vh)(m),(0,d.H)(m))},[h,m]),{approve:p,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:h,isTukeMode:x}}function p(e){var n,r=(0,l.e9)(o.O,e,"burnForParentToken"),i=r.execute,c=r.isPending,u=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,x=r.isTukeMode,p=(n=(0,t._)(function(n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return console.log("提交burnForParentToken交易:",{token:e,amount:n,isTukeMode:x}),[4,i([n])];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)});return(0,a.useEffect)(function(){h&&console.log("burnForParentToken tx hash:",h),m&&(console.log("提交burnForParentToken交易错误:"),(0,d.Vh)(m),(0,d.H)(m))},[h,m]),{burnForParentToken:p,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:h,isTukeMode:x}}function v(e){var n,r=(0,l.e9)(o.O,e,"transfer"),i=r.execute,c=r.isPending,u=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,x=r.isTukeMode,p=(n=(0,t._)(function(n,r){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交transfer交易:",{token:e,to:n,amount:r,isTukeMode:x}),[4,i([n,r])];case 1:return[2,t.sent()]}})}),function(e,r){return n.apply(this,arguments)});return(0,a.useEffect)(function(){h&&console.log("transfer tx hash:",h),m&&(console.log("提交transfer交易错误:"),(0,d.Vh)(m),(0,d.H)(m))},[h,m]),{transfer:p,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:h,isTukeMode:x}}},92429:function(e,n,r){"use strict";r.d(n,{Fw:function(){return h},hq:function(){return p},Hw:function(){return v}});var t=r(48564),s=r(2267),a=r(75766),i=r(45775),o=r(60480),c=r(13550),l=r.n(c),d=function(e,n){for(var r=e;r.length<2*n;)r="0"+r;return r},u=function(e){return(e=(e=e.toUpperCase()).substr(4)+e.substr(0,4)).split("").map(function(e){var n=e.charCodeAt(0);return n>=65&&n<=90?(n-65+10).toString():e}).join("")},f=function(e){for(var n,r=e;r.length>2;)r=(parseInt(n=r.slice(0,9),10)%97).toString()+r.slice(n.length);return parseInt(r,10)%97},m=function(){function e(n){(0,t._)(this,e),(0,a._)(this,"_iban",void 0),this._iban=n}return(0,s._)(e,[{key:"isValid",value:function(){return/^TH[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(this._iban)&&1===f(u(this._iban))}},{key:"isDirect",value:function(){return 34===this._iban.length||35===this._iban.length}},{key:"isIndirect",value:function(){return 20===this._iban.length}},{key:"checksum",value:function(){return this._iban.substr(2,2)}},{key:"toAddress",value:function(){if(this.isDirect()){var e=this._iban.substr(4),n=new(l())(e,36);return(0,i.K)("0x".concat(n.toString(16).padStart(40,"0")))}return""}},{key:"toString",value:function(){return this._iban}}],[{key:"fromAddress",value:function(n){if(!(0,o.U)(n))throw Error("Provided address is not a valid address: "+n);var r=n.replace("0x","").replace("0X",""),t=d(new(l())(r,16).toString(36),15);return e.fromBban(t.toUpperCase())}},{key:"fromBban",value:function(n){return new e("TH"+("0"+(98-f(u("TH00"+n)))).slice(-2)+n)}},{key:"toIban",value:function(n){return e.fromAddress(n).toString()}},{key:"toAddress",value:function(n){var r=new e(n);if(!r.isDirect())throw Error("IBAN is indirect and can't be converted");return r.toAddress()}},{key:"isValid",value:function(n){return new e(n).isValid()}}]),e}();function h(e){return/^0[Xx][A-Fa-f0-9]{40}$/.test(e)}function x(e){try{return m.isValid(e)}catch(e){return!1}}function p(e){if(!e||""===e)return"";var n=e.trim();return h(n)?n.toLowerCase():x(n)?function(e){if(!e||""===e)return"";if("TH48000000000000000000000000001EKI"===e)return"0x0000000000000000000000000000000000010002";try{return m.toAddress(e).toLowerCase()}catch(e){return console.error("转换TH地址为0x失败:",e),""}}(n):""}function v(e){if(!e||""===e.trim())return"请输入收款地址";var n=e.trim();return h(n)||x(n)&&p(n)?null:"请输入有效的地址格式（支持 0x、XE 或 TH 格式）"}},13291:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return z}});var t=r(85893),s=r(67294),a=r(83494),i=r(11010),o=r(72253),c=r(14932),l=r(91309),d=r(97582),u=r(86501),f=r(45901),m=r(56312),h=r(62776),x=r(42130),p=r(87536),v=r(92429),g=r(3628),y=r(27245),b=r(21774),N=r(34680),_=r(88659),j=r(74193),w=r(91529),C=r(73591),k=r(85794),T=r(14744),I=r(35243),P=r(55612),A=r(84689),E=r(48105),S=r(43032),Z=r(64777),B=r(42083),D=r(44576),F=r(27460),R=function(e){var n=[],r=new Set,t=function(e){var t=e.address.toLowerCase();r.has(t)||(r.add(t),n.push(e))};t({symbol:"TKM",address:"NATIVE",decimals:18,isNative:!0,name:"原生代币 (".concat("TKM",")")});var s="TKM20",a="0xc3Da46ED14dBd79922027031BB5D688A81139e01";s&&a&&t({symbol:s,address:a,decimals:18,isNative:!1,name:"包装代币 (".concat(s,")")});var i="TUSDT",o="0x47Ba4471046fC0442078CF1519924cb205F02c7a";return i&&o&&t({symbol:i,address:o,decimals:18,isNative:!1,name:"TUSDT 代币 (".concat(i,")")}),e&&(e.symbol&&e.address&&t({symbol:e.symbol,address:e.address,decimals:18,isNative:!1,name:"当前代币 (".concat(e.symbol,")")}),e.parentTokenSymbol&&e.parentTokenAddress&&t({symbol:e.parentTokenSymbol,address:e.parentTokenAddress,decimals:18,isNative:!1,name:"父币 (".concat(e.parentTokenSymbol,")")}),e.slTokenAddress&&e.symbol&&t({symbol:"sl".concat(e.symbol),address:e.slTokenAddress,decimals:18,isNative:!1,name:"SL代币 (sl".concat(e.symbol,")")}),e.stTokenAddress&&e.symbol&&t({symbol:"st".concat(e.symbol),address:e.stTokenAddress,decimals:18,isNative:!1,name:"ST代币 (st".concat(e.symbol,")")})),n},V=function(e,n){var r=(0,h.K)({address:n,query:{enabled:!!n&&e.isNative}}),t=r.data,s=r.isLoading,a=(0,k.hS)(e.isNative?"0x0000000000000000000000000000000000000000":e.address,n,!e.isNative&&!!n),i=a.balance,o=a.isPending;return{balance:e.isNative?null==t?void 0:t.value:i,isPending:e.isNative?s:o}},M=function(){var e,n,r,a,h,M,H,z,O,L,K,q,J,W,G,U,X,Q,Y,$,ee,en,er=(0,x.m)().address,et=(0,S.Z)().token,es=(0,g.NL)(),ea=(0,s.useMemo)(function(){return R(et)},[et]),ei=(0,l._)((0,s.useState)(),2),eo=ei[0],ec=ei[1],el=(0,l._)((0,s.useState)(!1),2),ed=el[0],eu=el[1],ef=(0,l._)((0,s.useState)(null),2),em=ef[0],eh=ef[1],ex=(0,l._)((0,s.useState)(""),2),ep=ex[0],ev=ex[1],eg=(0,l._)((0,s.useState)(null),2),ey=eg[0],eb=eg[1];(0,s.useEffect)(function(){if(0!==ea.length){var e=et?ea.find(function(e){return e.address===et.address}):null;eo?e&&eo.address!==e.address&&!ed&&(eo.isNative||"0xc3Da46ED14dBd79922027031BB5D688A81139e01"===eo.address)&&ec(e):ec(e||ea[0])}},[ea,eo,et,ed]);var eN=V(eo||ea[0],er),e_=eN.balance,ej=eN.isPending,ew=(0,s.useCallback)(function(){eo&&er&&(eo.isNative?es.invalidateQueries({queryKey:["balance",{address:er}]}):es.invalidateQueries({queryKey:["readContract",{address:eo.address,functionName:"balanceOf",args:[er]}]}))},[eo,er,es]),eC=(0,p.cI)({resolver:(0,m.F)((e=e_||BigInt(0),f.Ry({to:f.Z_().nonempty("请输入目标地址").refine(function(e){return null===(0,v.Hw)(e)},{message:"请输入有效的地址格式（支持 0x、TH 格式）"}),amount:f.Z_().nonempty("请输入转账数量").refine(function(n){if(n.endsWith(".")||"0"===n)return!0;try{var r=(0,w.vz)(n);return r>BigInt(0)&&r<=e}catch(e){return!1}},{message:"转账数量必须大于0且不超过您的可用余额"}),tokenAddress:f.Z_().nonempty("请选择代币")}))),defaultValues:{to:"",amount:"",tokenAddress:""},mode:"onChange"});(0,s.useEffect)(function(){eo&&eC.setValue("tokenAddress",eo.address)},[eo,eC]);var ek=eC.watch("to");(0,s.useEffect)(function(){if(!ek||""===ek.trim()){ev(""),eb(null);return}var e=ek.trim(),n=(0,v.hq)(e);if(!n){ev(""),eb(null);return}e.startsWith("0x")?e.toLowerCase()!==n?(ev("地址已标准化"),eb(n)):(ev(""),eb(null)):(ev("将转换为:"),eb(n))},[ek]);var eT=eC.watch("amount"),eI=(0,l._)((0,s.useState)(BigInt(0)),2),eP=eI[0],eA=eI[1];(0,s.useEffect)(function(){try{var e=(0,w.vz)(eT||"0");eA(e)}catch(e){eA(BigInt(0))}},[eT]);var eE=function(e){if(!(!e_||e_<=BigInt(0))){var n=e_*BigInt(e)/BigInt(100);eC.setValue("amount",(0,w.bM)(n))}},eS=function(){!e_||e_<=BigInt(0)||eC.setValue("amount",(0,w.bM)(e_))},eZ=(0,k.DA)((null==eo?void 0:eo.address)||"0x0000000000000000000000000000000000000000"),eB=eZ.transfer,eD=eZ.isPending,eF=eZ.isConfirming,eR=eZ.isConfirmed,eV=eZ.writeError,eM=eZ.hash,eH=(n=(0,P.ON)(),a=(r=(0,T.p)()).sendTransaction,h=r.isPending,M=r.error,H=r.data,O=(z=(0,I.A)({hash:!n&&H?H:void 0})).isLoading,L=z.isSuccess,K=z.error,J=(q=(0,l._)(s.useState({isPending:!1,isConfirming:!1,isConfirmed:!1,error:null,hash:void 0}),2))[0],W=q[1],G=(0,i._)(function(e,r){var t,s,i;return(0,d.Jh)(this,function(l){switch(l.label){case 0:console.log("发送原生代币转账:",{to:e,amount:r,isTuke:n}),l.label=1;case 1:return l.trys.push([1,10,,11]),[4,(0,E.L)()];case 2:if(!l.sent().isValid)throw Error("网络不匹配！请切换到 ".concat("Thinkium Mainnet Chain 1"," 网络"));if(!n)return[3,8];W(function(e){return(0,c._)((0,o._)({},e),{isPending:!0,error:null,isConfirmed:!1})}),l.label=3;case 3:return l.trys.push([3,6,,7]),[4,window.ethereum.getProvider().getSigner().sendTransaction({to:e,value:r})];case 4:return console.log("TUKE原生代币转账发送成功:",t=l.sent().hash),W(function(e){return(0,c._)((0,o._)({},e),{isPending:!1,hash:t,isConfirming:!0})}),[4,(0,P.R)(t)];case 5:return console.log("TUKE原生代币转账确认成功:",l.sent()),W(function(e){return(0,c._)((0,o._)({},e),{isConfirming:!1,isConfirmed:!0})}),[2,t];case 6:throw console.error("TUKE原生代币转账失败:",s=l.sent()),W(function(e){return(0,c._)((0,o._)({},e),{isPending:!1,isConfirming:!1,error:s})}),s;case 7:return[3,9];case 8:return[2,a({to:e,value:r})];case 9:return[3,11];case 10:throw console.error("原生代币转账失败:",i=l.sent()),(0,A.Vh)(i),(0,A.H)(i),i;case 11:return[2]}})}),U=function(e,n){return G.apply(this,arguments)},X=n?J.isPending:h,Q=n?J.isConfirming:O,Y=n?J.isConfirmed:L,$=n?J.error:M||K,ee=n?J.hash:H,(0,s.useEffect)(function(){ee&&console.log("原生代币转账 tx hash:",ee),$&&(console.log("原生代币转账错误:"),(0,A.Vh)($),(0,A.H)($))},[ee,$]),{transfer:U,isPending:X,isConfirming:Q,isConfirmed:Y,writeError:$,hash:ee,isTukeMode:n}),ez=eH.transfer,eO=eH.isPending,eL=eH.isConfirming,eK=eH.isConfirmed,eq=eH.writeError,eJ=eH.hash,eW=eD||eF||eO||eL,eG=eR||eK;(0,s.useEffect)(function(){var e=eM||eJ;eG&&e&&e!==em&&(u.Am.success("转账 ".concat(null==eo?void 0:eo.symbol," 成功")),eC.setValue("amount",""),ew(),eh(e))},[eG,eM,eJ,em,null==eo?void 0:eo.symbol,eC,ew]);var eU=eC.handleSubmit((en=(0,i._)(function(e){var n,r;return(0,d.Jh)(this,function(t){switch(t.label){case 0:if(!eo||!er)return[2];if(!(n=(0,v.hq)(e.to)))return u.Am.error("地址格式无效，请检查输入"),[2];t.label=1;case 1:if(t.trys.push([1,6,,7]),r=n,!eo.isNative)return[3,3];return console.log("执行原生代币转账:",{to:r,amount:eP,symbol:eo.symbol}),[4,ez(r,eP)];case 2:return t.sent(),[3,5];case 3:return console.log("执行ERC20代币转账:",{token:eo.address,to:r,amount:eP,symbol:eo.symbol}),[4,eB(r,eP)];case 4:t.sent(),t.label=5;case 5:return[3,7];case 6:return console.error("Transfer error:",t.sent()),[3,7];case 7:return[2]}})}),function(e){return en.apply(this,arguments)})),eX=(0,C.S)().handleContractError;if((0,s.useEffect)(function(){[eV,eq].forEach(function(e){e&&eX(e,"transfer")})},[eV,eq,eX]),!et)return(0,t.jsx)(B.Z,{});if(0===ea.length)return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(Z.Z,{title:"转账"}),(0,t.jsx)("div",{className:"text-center text-greyscale-500 mt-4",children:"正在加载代币信息..."})]});var eQ=ej||!eo;return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(Z.Z,{title:"转账"}),(0,t.jsx)("div",{className:"w-full max-w-md mt-4",children:(0,t.jsx)(j.l0,(0,c._)((0,o._)({},eC),{children:(0,t.jsxs)("form",{className:"space-y-4",children:[(0,t.jsx)(j.Wi,{control:eC.control,name:"to",render:function(e){var n=e.field;return(0,t.jsxs)(j.xJ,{children:[(0,t.jsx)(j.lX,{className:"text-sm font-medium text-gray-700",children:"目标地址"}),(0,t.jsx)(j.NI,{children:(0,t.jsx)(b.I,(0,c._)((0,o._)({placeholder:"请输入目标钱包地址（支持 0x、TH 格式）"},n),{disabled:eQ,className:"font-mono text-sm"}))}),ep&&(0,t.jsxs)("div",{className:"text-xs text-blue-600 mt-1 flex items-center gap-1",children:[(0,t.jsx)("span",{children:ep}),ey&&(0,t.jsx)(F.Z,{address:ey,showCopyButton:!0,showAddress:!0,colorClassName:"text-blue-600"})]}),(0,t.jsx)(j.zG,{})]})}}),(0,t.jsx)(j.Wi,{control:eC.control,name:"tokenAddress",render:function(e){var n=e.field;return(0,t.jsxs)(j.xJ,{children:[(0,t.jsx)(j.lX,{className:"text-sm font-medium text-gray-700",children:"选择代币"}),(0,t.jsx)(j.NI,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(_.Ph,{value:n.value,onValueChange:function(e){var r=ea.find(function(n){return n.address===e});r&&(eu(!0),ec(r),n.onChange(e),eC.setValue("amount",""))},disabled:eQ,children:[(0,t.jsx)(_.i4,{className:"flex-1",children:(0,t.jsx)(_.ki,{placeholder:"请选择代币"})}),(0,t.jsx)(_.Bw,{children:ea.map(function(e){return(0,t.jsx)(_.Ql,{value:e.address,children:(0,t.jsx)("span",{className:"font-mono font-medium",children:e.symbol})},e.address)})})]}),eo&&"NATIVE"!==eo.address&&(0,t.jsx)(F.Z,{address:eo.address,showAddress:!1,showCopyButton:!0,colorClassName:"text-gray-600"})]})}),(0,t.jsx)(j.zG,{})]})}}),(0,t.jsx)(j.Wi,{control:eC.control,name:"amount",render:function(e){var n=e.field;return(0,t.jsxs)(j.xJ,{children:[(0,t.jsx)(j.lX,{className:"text-sm font-medium text-gray-700",children:"转账数量"}),(0,t.jsx)(N.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,t.jsxs)(N.aY,{className:"py-4 px-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)(j.NI,{children:(0,t.jsx)(b.I,(0,c._)((0,o._)({type:"number",placeholder:"0"},n),{disabled:eQ||!e_||e_<=BigInt(0),className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"}))}),eo&&(0,t.jsx)("div",{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,t.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:eo.symbol})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex space-x-1",children:[[25,50,75].map(function(e){return(0,t.jsxs)(y.z,{variant:"outline",size:"sm",type:"button",onClick:function(){return eE(e)},disabled:eQ||!e_||e_<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)}),(0,t.jsx)(y.z,{variant:"outline",size:"sm",type:"button",onClick:eS,disabled:eQ||!e_||e_<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),eo&&(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,w.LH)(e_||BigInt(0))," ",eo.symbol]})]})]})}),(0,t.jsx)(j.zG,{})]})}}),(0,t.jsx)("div",{className:"flex space-x-2 pt-4",children:(0,t.jsx)(y.z,{className:"w-full",onClick:eU,disabled:eW||eQ,size:"lg",children:eW?"转账中...":"转账"})})]})}))}),(0,t.jsx)(D.Z,{isLoading:eW,text:"转账中..."})]})},H=r(93778);function z(){return((0,s.useContext)(H.M)||{}).token,(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{title:"转账"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsx)(M,{})})]})}},14744:function(e,n,r){"use strict";r.d(n,{p:function(){return h}});var t=r(72253),s=r(14932),a=r(47702),i=r(96082),o=r(81841),c=r(96128),l=r(81946),d=r(52425),u=r(87831);async function f(e,n){let r;let{account:t,chainId:s,connector:a,gas:i,...f}=n;r="object"==typeof t&&"local"===t.type?e.getClient({chainId:s}):await (0,u.e)(e,{account:t,chainId:s,connector:a});let{connector:m}=(0,d.D)(e),h=await (async()=>{if(!(!("data"in n)||!n.data||(a??m)?.supportsSimulation)&&null!==i)return void 0===i?(0,l.s)(r,o.Q,"estimateGas")({...f,account:t,chain:s?{id:s}:null}):i})(),x=(0,l.s)(r,c.T,"sendTransaction");return await x({...f,...t?{account:t}:{},gas:h,chain:s?{id:s}:null})}var m=r(78942);function h(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mutation,o=(e=(0,m.Z)(n),{mutationFn:n=>f(e,n),mutationKey:["sendTransaction"]}),c=(0,i.D)((0,t._)({},r,o)),l=c.mutate,d=c.mutateAsync,u=(0,a._)(c,["mutate","mutateAsync"]);return(0,s._)((0,t._)({},u),{sendTransaction:l,sendTransactionAsync:d})}}},function(e){e.O(0,[8501,4463,721,5771,3494,3591,2888,9774,179],function(){return e(e.s=53364)}),_N_E=e.O()}]);