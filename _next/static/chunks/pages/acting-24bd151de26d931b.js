try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="11faba78-be97-445d-90d9-5a0c9177975f",e._sentryDebugIdIdentifier="sentry-dbid-11faba78-be97-445d-90d9-5a0c9177975f")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9082],{87869:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/acting",function(){return n(75959)}])},34680:function(e,s,n){"use strict";n.d(s,{Ol:function(){return d},SZ:function(){return u},Zb:function(){return l},aY:function(){return x},eW:function(){return m},ll:function(){return o}});var t=n(72253),a=n(47702),r=n(85893),c=n(67294),i=n(40108),l=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},c))});l.displayName="Card";var d=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n)},c))});d.displayName="CardHeader";var o=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",n)},c))});o.displayName="CardTitle";var u=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("text-sm text-muted-foreground",n)},c))});u.displayName="CardDescription";var x=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("p-6 pt-0",n)},c))});x.displayName="CardContent";var m=c.forwardRef(function(e,s){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,t._)({ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",n)},c))});m.displayName="CardFooter"},24920:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var t=(0,n(31134).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},53696:function(e,s,n){"use strict";n.d(s,{Z:function(){return h}});var t=n(11010),a=n(91309),r=n(97582),c=n(85893),i=n(67294),l=n(23432),d=(0,n(31134).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),o=n(42130),u=n(30246),x=n(86501),m=n(55612);function h(e){var s,n=e.tokenAddress,h=e.tokenSymbol,f=e.tokenDecimals,j=e.tokenImage,p=(0,a._)((0,i.useState)(!1),2),N=p[0],g=p[1],v=(0,o.m)().isConnected,y=(0,u.p)().data,b=(s=(0,t._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:if(!v)return alert("请先连接你的钱包"),[2];g(!0),e.label=1;case 1:if(e.trys.push([1,3,4,5]),!y)return alert("无法获取钱包客户端"),[2];return[4,y.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:h,decimals:f,image:j}}})];case 2:return e.sent()?x.ZP.success("代币已成功添加到 MetaMask 钱包"):x.ZP.error("用户拒绝添加代币"),[3,5];case 3:return e.sent(),x.ZP.error("添加代币失败，请检查控制台以获取更多信息"),[3,5];case 4:return g(!1),[7];case 5:return[2]}})}),function(){return s.apply(this,arguments)});return h.length>11||(0,m.ON)()?null:(0,c.jsx)("button",{onClick:b,disabled:N,className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:N?(0,c.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}):(0,c.jsx)(d,{className:"h-4 w-4 text-greyscale-500"})})}},42083:function(e,s,n){"use strict";var t=n(85893),a=n(23432);s.Z=function(){return(0,t.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},21338:function(e,s,n){"use strict";var t=n(91309),a=n(85893),r=n(67294),c=n(88504),i=n(93778),l=n(74089),d=n(42083);s.Z=function(e){var s=e.currentRound,n=e.roundType,o=e.showCountdown,u=(0,c.O)().data,x=(0,r.useContext)(i.M),m=x?x.token:void 0,h=!u||!m||void 0===m.voteOriginBlocks,f=(0,t._)((0,r.useState)(BigInt(0)),2),j=f[0],p=f[1],N=Number("30126")||0,g=Number("2868")||0,v=m?Number(m.voteOriginBlocks):0,y=N-(Number(u)-v)%N,b=y>0?Math.ceil(y*g/1e3):0,w=(0,t._)((0,r.useState)(b),2),I=w[0],Z=w[1];(0,r.useEffect)(function(){if(u){var e=N-(Number(u)-v)%N;Z(e>0?Math.ceil(e*g/1e3):0)}},[u,N,g,v]),(0,r.useEffect)(function(){s>BigInt(0)&&p(s)},[s]);var B=null!=j?j.toString():"0";return j<=BigInt(0)?(0,a.jsx)(a.Fragment,{}):h||null==j||j<BigInt(0)?(null==j||BigInt(0),(0,a.jsx)(d.Z,{})):(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-greyscale-400",children:["(第",(0,a.jsx)("span",{className:"text-greyscale-400",children:B}),"轮","vote"===n?"投票":"verify"===n?"验证":"行动","阶段，",(0,a.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*I/g)}),(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{initialTimeLeft:b,onTick:Z})}):(0,a.jsx)("span",{className:"text-greyscale-400",children:I<60?"".concat(I,"秒"):I<=300?"".concat(Math.floor(I/60),"分钟").concat(I%60,"秒"):I<3600?"".concat(Math.floor(I/60),"分钟"):"".concat(Math.floor(I/3600),"小时").concat(Math.floor(I%3600/60),"分钟")}),(0,a.jsx)("span",{className:"text-greyscale-400",children:")"})]})})}},66247:function(e,s,n){"use strict";n.d(s,{Z:function(){return y}});var t=n(91309),a=n(85893),r=n(27245),c=n(26986),i=n(35810),l=n(74598),d=n(79995),o=n(67294),u=n(91529),x=n(37413),m=n(93778),h=n(85794),f=n(73591),j=n(42083),p=n(12796),N=n(27460),g=n(53696),v=function(e){(0,p._)(e);var s=((0,o.useContext)(m.M)||{}).token;return s?(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"mr-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-bold text-2xl mr-2 font-mono",children:s.symbol}),(0,a.jsx)(N.Z,{address:s.address}),(0,a.jsx)(g.Z,{tokenAddress:s.address,tokenSymbol:s.symbol||"",tokenDecimals:s.decimals||0})]})})}):(0,a.jsx)(j.Z,{})};function y(){var e=((0,o.useContext)(m.M)||{}).token,s=(0,h.A5)((null==e?void 0:e.address)||""),n=s.totalSupply,p=s.isPending,N=s.error,g=(0,d.Z)("(min-width: 768px)"),y=(0,t._)((0,o.useState)(!1),2),b=y[0],w=y[1],I=(0,f.S)().handleContractError;return((0,o.useEffect)(function(){N&&I(N,"token")},[N]),null==e?void 0:e.address)?(0,a.jsxs)("div",{className:"px-4 pt-0 pb-3",children:[(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 text-sm mt-4",children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",onClick:function(){return w(!0)},children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1 text-greyscale-500 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-greyscale-500 mr-1",children:"已铸币量:"}),(0,a.jsx)("span",{className:"text-sm text-secondary font-mono",children:p?(0,a.jsx)(j.Z,{}):(0,u.LH)(n||BigInt(0))})]})]}),g&&(0,a.jsxs)(i.Vq,{open:b,onOpenChange:w,children:[(0,a.jsx)(i.hg,{children:" "}),(0,a.jsxs)(i.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(i.$N,{children:"经济模型"}),(0,a.jsxs)("div",{className:"px-12 pt-2 pb-4 text-gray-800",children:[(0,a.jsxs)("p",{className:"font-bold text-large mb-2",children:["代币总量：",(0,a.jsx)("span",{children:(0,u.LH)(BigInt(x.v.totalSupply))})]}),(0,a.jsxs)("p",{children:["- 公平发射：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.fairLaunch))})," (10%)"]}),(0,a.jsxs)("p",{children:["- 治理激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.govRewards))})," (45%)"]}),(0,a.jsxs)("p",{children:["- 行动激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.actionRewards))})," (45%)"]})]})]})]}),!g&&(0,a.jsx)(c.dy,{open:b,onOpenChange:w,children:(0,a.jsxs)(c.sc,{children:[(0,a.jsxs)(c.OX,{children:[(0,a.jsx)(c.iI,{children:"经济模型"}),(0,a.jsx)(c.uh,{})]}),(0,a.jsxs)("div",{className:"px-12 pt-2 pb-4 text-gray-800 text-lg",children:[(0,a.jsxs)("p",{className:"font-bold text-xl mb-2",children:["代币总量：",(0,a.jsx)("span",{children:(0,u.LH)(BigInt(x.v.totalSupply))})]}),(0,a.jsxs)("p",{children:["- 公平发射：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.fairLaunch))})," (10%)"]}),(0,a.jsxs)("p",{children:["- 治理激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.govRewards))})," (45%)"]}),(0,a.jsxs)("p",{children:["- 行动激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(BigInt(x.v.actionRewards))})," (45%)"]})]}),(0,a.jsx)(c.ze,{children:(0,a.jsx)(c.uh,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"outline",className:"w-1/2 mx-auto text-secondary border-secondary",children:"关闭"})})})]})})]}):(0,a.jsx)(j.Z,{})}},37413:function(e,s,n){"use strict";n.d(s,{v:function(){return t}});var t={totalSupply:1e28,fairLaunch:1e27,govRewards:45e26,actionRewards:45e26}},99958:function(e,s,n){"use strict";n.d(s,{Cn:function(){return i},IS:function(){return r},Tn:function(){return c},iF:function(){return l}});var t=n(91529),a=n(37742),r=function(e,s,n){if(!e||!s)return"0%";var r=31536e6/Number("2868"),c=(0,a.Zu)("30126");if(0===r||c===BigInt(0))return"0%";var i=(s*BigInt(2)||BigInt(0))+(n||BigInt(0));if(i===BigInt(0))return"0%";var l=Number(e)/Number(i)/(Number(c)/r)*100;return(0,t.rl)(l)},c=function(e,s){if(!e||!s||s===BigInt(0))return"∞";var n=31536e6/Number("2868"),r=(0,a.Zu)("30126");if(0===n||r===BigInt(0))return"0%";var c=Number(e)/Number(s)/(Number(r)/n)*100;return(0,t.rl)(c)},i=function(e){var s,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Number("30126")||0,a=Number("2868")||0,r=e*t,c=Math.ceil(r*a/1e3);s=c>=86400?"".concat(Math.round(c/86400),"天"):c>=3600?"".concat(Math.ceil(c/3600),"小时"):"".concat(Math.ceil(c/60),"分钟");var i="".concat(r.toLocaleString(),"区块，约").concat(s);return n||(i="".concat(e,"个阶段（").concat(i,")")),i},l=function(e,s){if(!e)return BigInt(0);var n=BigInt(1e3)-(0,a.Zu)("1")-(0,a.Zu)("1");return BigInt(0),s<=BigInt(1)?e*(0,a.Zu)("1")/BigInt(1e3):e*n*(0,a.Zu)("1")/BigInt(1e6)}},75959:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return _}});var t=n(85893),a=n(67294),r=n(42130),c=n(27245),i=n(41664),l=n.n(i),d=n(42083),o=n(93778),u=n(73591),x=n(85794),m=n(7208),h=n(91529),f=n(99958),j=function(e){e.currentRound;var s=((0,a.useContext)(o.M)||{}).token,n=(0,x.hS)((null==s?void 0:s.address)||"","0xACea4f086BE05BeA47f3A56788FA3919C7f40799"),r=n.balance,c=n.isPending,i=n.error,l=(0,m.XQ)((null==s?void 0:s.address)||""),j=l.reward,p=l.isPending,N=l.error,g=(0,u.S)().handleContractError;return(0,a.useEffect)(function(){i&&g(i,"join"),N&&g(N,"dataViewer")},[i,N]),(0,t.jsx)("div",{className:"px-4",children:(0,t.jsxs)("div",{className:"w-full border rounded-lg p-0",children:[(0,t.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,t.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,t.jsx)("div",{className:"stat-title text-sm pb-1",children:"参与行动代币总数"}),(0,t.jsx)("div",{className:"stat-value text-xl text-secondary",children:c?(0,t.jsx)(d.Z,{}):(0,h.LH)(null!=r?r:BigInt(0))})]}),(0,t.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,t.jsx)("div",{className:"stat-title text-sm pb-1",children:"预计新增铸币"}),(0,t.jsx)("div",{className:"stat-value text-xl text-secondary",children:p?(0,t.jsx)(d.Z,{}):(0,h.LH)(null!=j?j:BigInt(0))})]})]}),(0,t.jsxs)("div",{className:"text-center text-xs mb-2 text-greyscale-500",children:["预估年化收益率（APY）：",c||p?(0,t.jsx)(d.Z,{}):(0,f.Tn)(j,r)]})]})})},p=n(83494),N=n(24920),g=n(4307),v=n(34680),y=n(93950),b=n(7399),w=n(21338),I=n(64777),Z=n(27460),B=function(e){var s=e.currentRound,n=((0,a.useContext)(o.M)||{}).token,c=(0,r.m)().address,i=(0,y.jA)((null==n?void 0:n.address)||"",s||BigInt(0),c),x=i.joinableActions,m=i.isPending,j=i.error,p=(0,b.CY)((null==n?void 0:n.address)||""),B=p.rewardAvailable,k=p.isPending,C=p.error,_=(null==x?void 0:x.reduce(function(e,s){return e+s.votesNum},BigInt(0)))||BigInt(0),R=n?s-BigInt(n.initialStakeRound)+BigInt(1):BigInt(0),M=(0,f.iF)(B,R),E=(0,u.S)().handleContractError;return(0,a.useEffect)(function(){j&&E(j,"dataViewer"),C&&E(C,"mint")},[j,C]),(0,t.jsxs)("div",{className:"px-4 py-6",children:[(0,t.jsx)(I.Z,{title:"本轮可参与的行动："}),(0,t.jsx)(w.Z,{currentRound:s,roundType:"act"}),!c&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"}),c&&m&&(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(d.Z,{})}),c&&!m&&!(null==x?void 0:x.length)&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮暂无行动"}),!m&&x&&x.length>0&&(0,t.jsx)("div",{className:"mt-2 space-y-4",children:null==x?void 0:x.sort(function(e,s){if(e.hasReward&&!s.hasReward)return -1;if(!e.hasReward&&s.hasReward)return 1;var n=Number(e.votesNum);return Number(s.votesNum)-n}).map(function(e,s){var a=Number(_)>0?Number(x[s].votesNum||BigInt(0))/Number(_):0,r="/action/info?id=".concat(e.action.head.id,"&symbol=").concat(null==n?void 0:n.symbol),c=e.hasReward?"shadow-none":"shadow-none bg-gray-50";return(0,t.jsx)(v.Zb,{className:c,children:(0,t.jsxs)(l(),{href:r,className:"relative block",children:[(0,t.jsx)(v.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-between items-baseline",children:(0,t.jsxs)("div",{className:"flex items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,t.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,t.jsx)("span",{className:"font-bold ".concat(e.hasReward?"text-greyscale-800":"text-greyscale-400"),children:"".concat(e.action.body.title)})]})}),(0,t.jsxs)(v.aY,{className:"px-3 pt-1 pb-2",children:[(0,t.jsx)("div",{className:"flex justify-between text-sm",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(N.Z,{className:"text-greyscale-400 mr-1 h-3 w-3"}),(0,t.jsx)("span",{className:"text-greyscale-400",children:(0,t.jsx)(Z.Z,{address:x[s].action.head.author,showCopyButton:!1})})]})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"投票占"}),(0,t.jsx)("span",{className:"text-secondary text-xs",children:(0,h.rl)(100*a)})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"参与代币"}),(0,t.jsx)("span",{className:"text-secondary text-xs",children:(0,h.LH)(e.joinedAmount)})]}),e.hasReward?(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"APY"}),(0,t.jsx)("span",{className:"text-secondary text-xs",children:k?(0,t.jsx)(d.Z,{}):(0,f.Tn)(BigInt(Math.floor(Number(M||BigInt(0))*a)),x[s].joinedAmount)})]}):(0,t.jsx)("span",{className:"flex justify-between text-error text-sm",children:"无铸币激励"})]})]}),(0,t.jsx)(g.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id)})})]})},k=n(66247),C=n(20442),_=function(){var e=(0,r.m)().isConnected,s=((0,a.useContext)(o.M)||{}).token,n=e&&(null==s?void 0:s.hasEnded)===!0&&(null==s?void 0:s.hasEnded),i=(0,C.Bk)(n),x=i.currentRound,m=i.error,h=i.isPending,f=(0,u.S)().handleContractError;return((0,a.useEffect)(function(){m&&f(m,"join")},[m]),n&&h)?(0,t.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,t.jsx)(d.Z,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{title:"社区首页"}),(0,t.jsx)("main",{className:"flex-grow",children:e?s?s&&!s.hasEnded?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{}),(0,t.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,t.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能参与社区行动"}),(0,t.jsx)(c.z,{className:"w-1/2",asChild:!0,children:(0,t.jsx)(l(),{href:"/launch?symbol=".concat(s.symbol),children:"查看公平发射"})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{currentRound:x}),(0,t.jsx)(B,{currentRound:x})]}):(0,t.jsx)(d.Z,{}):(0,t.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,t.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}}},function(e){e.O(0,[8239,5115,246,1390,3494,3591,3950,6127,7399,7285,2888,9774,179],function(){return e(e.s=87869)}),_N_E=e.O()}]);