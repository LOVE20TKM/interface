try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="16d2b352-2897-47ad-a635-3d487c672c51",e._sentryDebugIdIdentifier="sentry-dbid-16d2b352-2897-47ad-a635-3d487c672c51")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{51436:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/actionrewards",function(){return t(17762)}])},35810:function(e,n,t){"use strict";t.d(n,{$N:function(){return y},Be:function(){return N},Vq:function(){return u},cN:function(){return v},cZ:function(){return x},fK:function(){return g},hg:function(){return f}});var r=t(72253),a=t(14932),s=t(47702),c=t(85893),o=t(67294),i=t(12854),d=t(62190),l=t(40108),u=i.fC,f=i.xz,m=i.h_;i.x8;var h=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.aV,(0,r._)({ref:n,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},a))});h.displayName=i.aV.displayName;var x=o.forwardRef(function(e,n){var t=e.className,o=e.children,u=(0,s._)(e,["className","children"]);return(0,c.jsxs)(m,{children:[(0,c.jsx)(h,{}),(0,c.jsxs)(i.VY,(0,a._)((0,r._)({ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},u),{children:[o,(0,c.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,c.jsx)(d.Z,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});x.displayName=i.VY.displayName;var g=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,c.jsx)("div",(0,r._)({className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n)},t))};g.displayName="DialogHeader";var v=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,c.jsx)("div",(0,r._)({className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},t))};v.displayName="DialogFooter";var y=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.Dx,(0,r._)({ref:n,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t)},a))});y.displayName=i.Dx.displayName;var N=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.dk,(0,r._)({ref:n,className:(0,l.cn)("text-sm text-muted-foreground",t)},a))});N.displayName=i.dk.displayName},26986:function(e,n,t){"use strict";t.d(n,{OX:function(){return g},Qz:function(){return u},dy:function(){return l},iI:function(){return y},sc:function(){return x},u6:function(){return N},uh:function(){return m},ze:function(){return v}});var r=t(72253),a=t(14932),s=t(47702),c=t(85893),o=t(67294),i=t(53798),d=t(40108),l=function(e){var n=e.shouldScaleBackground,t=(0,s._)(e,["shouldScaleBackground"]);return(0,c.jsx)(i.dy.Root,(0,r._)({shouldScaleBackground:void 0===n||n},t))};l.displayName="Drawer";var u=i.dy.Trigger,f=i.dy.Portal,m=i.dy.Close,h=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.dy.Overlay,(0,r._)({ref:n,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80",t)},a))});h.displayName=i.dy.Overlay.displayName;var x=o.forwardRef(function(e,n){var t=e.className,o=e.children,l=(0,s._)(e,["className","children"]);return(0,c.jsxs)(f,{children:[(0,c.jsx)(h,{}),(0,c.jsxs)(i.dy.Content,(0,a._)((0,r._)({ref:n,className:(0,d.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t)},l),{children:[(0,c.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),o]}))]})});x.displayName="DrawerContent";var g=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,c.jsx)("div",(0,r._)({className:(0,d.cn)("grid gap-1.5 p-4 text-center sm:text-left",n)},t))};g.displayName="DrawerHeader";var v=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,c.jsx)("div",(0,r._)({className:(0,d.cn)("mt-auto flex flex-col gap-2 p-4",n)},t))};v.displayName="DrawerFooter";var y=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.dy.Title,(0,r._)({ref:n,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t)},a))});y.displayName=i.dy.Title.displayName;var N=o.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,c.jsx)(i.dy.Description,(0,r._)({ref:n,className:(0,d.cn)("text-sm text-muted-foreground",t)},a))});N.displayName=i.dy.Description.displayName},44746:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(72253),a=t(14932),s=t(91309),c=t(85893),o=t(67294),i=t(74598),d=t(35810),l=t(26986),u=t(79995);function f(e){var n=e.title,t=e.content,f=e.className,m=void 0===f?"":f,h=(0,s._)((0,o.useState)(!1),2),x=h[0],g=h[1],v=(0,u.Z)("(min-width: 768px)"),y=o.forwardRef(function(e,t){return(0,c.jsx)("button",(0,a._)((0,r._)({ref:t,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(m),"aria-label":"查看".concat(n)},e),{children:(0,c.jsx)(i.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});y.displayName="TriggerButton";var N=function(){return(0,c.jsx)("div",{className:"text-gray-700",children:"string"==typeof t?(0,c.jsx)("p",{className:"leading-relaxed text-sm",children:t}):t})};return(0,c.jsxs)(c.Fragment,{children:[v&&(0,c.jsxs)(d.Vq,{open:x,onOpenChange:g,children:[(0,c.jsx)(d.hg,{asChild:!0,children:(0,c.jsx)(y,{})}),(0,c.jsxs)(d.cZ,{className:"sm:max-w-[425px]",children:[(0,c.jsx)(d.$N,{className:"text-lg font-semibold",children:n}),(0,c.jsx)("div",{className:"pt-2 pb-4",children:(0,c.jsx)(N,{})})]})]}),!v&&(0,c.jsxs)(l.dy,{open:x,onOpenChange:g,children:[(0,c.jsx)(l.Qz,{asChild:!0,children:(0,c.jsx)(y,{})}),(0,c.jsxs)(l.sc,{className:"pb-safe",children:[(0,c.jsx)(l.OX,{children:(0,c.jsx)(l.iI,{className:"text-lg font-semibold",children:n})}),(0,c.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,c.jsx)(N,{})})]})]})]})}},64777:function(e,n,t){"use strict";var r=t(85893);n.Z=function(e){var n=e.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:n})})}},42083:function(e,n,t){"use strict";var r=t(85893),a=t(23432);n.Z=function(){return(0,r.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},17762:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(11010),a=t(72253),s=t(14932),c=t(91309),o=t(97582),i=t(85893),d=t(67294),l=t(86501),u=t(42130),f=t(11163),m=t(41664),h=t.n(m),x=t(93778),g=t(7208),v=t(93950),y=t(7399),N=t(59271),p=t(4586),b=t(67516),j=t(98482),_=t(43637),w=t(97995),S=t(45631),I=function(e,n){return"love20_score_cache_".concat(e.toLowerCase(),"_").concat(n.toLowerCase())},B=function(e,n){try{var t=localStorage.getItem(I(e,n));return t?JSON.parse(t):{}}catch(e){return{}}},E=function(e,n,t){try{var r=B(e,n);Object.entries(t).forEach(function(e){var n=(0,c._)(e,2),t=n[0],a=n[1];Object.entries(a).forEach(function(e){var n=(0,c._)(e,2),a=n[0],s=n[1];r["".concat(t,"_").concat(a)]=s})}),localStorage.setItem(I(e,n),JSON.stringify(r))}catch(e){console.error("写入得分缓存失败:",e)}},k=function(e){var n=e.account,t=e.tokenAddress,s=e.actionRoundPairs,i=e.enabled,l=void 0===i||i,u=(0,d.useMemo)(function(){if(!l||0===s.length||!n||!t)return{validActionRoundPairs:[],actionRoundPairsKey:"",cachedScores:{},uncachedPairs:[]};var e=B(n,t),r={},a=[];s.forEach(function(n){var t=e["".concat(n.actionId.toString(),"_").concat(n.round.toString())];if(void 0!==t){var s=n.actionId.toString(),c=n.round.toString();r[s]||(r[s]={}),r[s][c]=t}else a.push(n)});var c=s.map(function(e){return"".concat(e.actionId.toString(),"_").concat(e.round.toString())}).join("|");return console.log("缓存命中: ".concat(Object.keys(e).length," 条, 需要请求: ").concat(a.length," 条")),{validActionRoundPairs:s,actionRoundPairsKey:c,cachedScores:r,uncachedPairs:a}},[s,l,n,t]),f=u.validActionRoundPairs,m=u.actionRoundPairsKey,h=u.cachedScores,x=u.uncachedPairs,g=(0,d.useMemo)(function(){return l&&0!==x.length&&t?x.map(function(e){var n=e.actionId,r=e.round;return{address:"0xACea4f086BE05BeA47f3A56788FA3919C7f40799",abi:j.S,functionName:"randomAccounts",args:[t,r,n]}}):[]},[t,x,l]),v=(0,b.N)({contracts:g,query:{enabled:l&&g.length>0}}),y=v.data,N=v.isLoading,I=v.error,k=v.isSuccess;console.log("randomAccountsData",y);var R=(0,c._)((0,d.useState)({}),2),C=R[0],P=R[1],O=(0,c._)((0,d.useState)(!1),2),L=O[0],Z=O[1],M=(0,c._)((0,d.useState)(null),2),A=M[0],D=M[1],z=(0,c._)((0,d.useState)(!1),2),F=z[0],T=z[1];(0,d.useEffect)(function(){var e;l&&y&&k&&0!==x.length&&t&&n&&(e=(0,r._)(function(){var e,r,s,c,i;return(0,o.Jh)(this,function(d){switch(d.label){case 0:Z(!0),D(null),P({}),e={},r={},d.label=1;case 1:d.trys.push([1,6,,7]),s=function(s){var c,i,d,l,u,f,m,h,g,v,N,b,j,I,B,E,k,R;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(i=(c=x[s]).actionId,d=c.round,(null==(l=y[s])?void 0:l.status)!=="success")return[3,2];return u=l.result,(f=(0,p._)(u)).includes(n)||f.push(n),m=f.map(function(e){return{address:"0x547b4a36980Ec030fBfC0162eE4B4904d9Cc0Da9",abi:_.w,functionName:"scoreByActionIdByAccount",args:[t,d,i,e]}}),console.log("正在加载 actionId=".concat(i,", round=").concat(d," 的分数数据，共 ").concat(m.length," 个账户...")),[4,(0,w.J)(S.v,{contracts:m})];case 1:h=o.sent(),g="".concat(i.toString(),"_").concat(d.toString()),v={},N=!1,h.forEach(function(e,n){if((null==e?void 0:e.status)==="success"){var t=f[n],r=e.result||BigInt(0);v[t]=r}else N=!0,console.warn("获取账户 ".concat(f[n]," 的得分失败:"),null==e?void 0:e.error)}),b=void 0!==v[n],e[g]={actionId:i,round:d,accountScores:v},!N&&b?(j=Object.values(v).reduce(function(e,n){return n>e?n:e},BigInt(0)),I=v[n]||BigInt(0),B="0",j>BigInt(0)&&I>BigInt(0)&&(E=I*BigInt(100)/j,B=(I*BigInt(100)%j*BigInt(2)>=j?Number(E)+1:Number(E)).toString()),k=i.toString(),R=d.toString(),r[k]||(r[k]={}),r[k][R]=B,console.log("完成加载 actionId=".concat(i,", round=").concat(d,"，进度: ").concat(s+1,"/").concat(x.length))):console.warn("跳过缓存 actionId=".concat(i,", round=").concat(d,": ")+"hasFailedRequest=".concat(N,", hasTargetAccountScore=").concat(b)),P((0,a._)({},e)),o.label=2;case 2:return[2]}})},c=0,d.label=2;case 2:if(!(c<x.length))return[3,5];return[5,(0,o.XA)(s(c))];case 3:d.sent(),d.label=4;case 4:return c++,[3,2];case 5:return Object.keys(r).length>0&&(E(n,t,r),console.log("得分数据已写入缓存")),T(!0),Z(!1),[3,7];case 6:return console.error("分批加载分数时出错:",i=d.sent()),D(i),Z(!1),T(!1),[3,7];case 7:return[2]}})}),function(){return e.apply(this,arguments)})()},[l,t,n,m,k]);var q=(0,d.useMemo)(function(){if(!l||0===f.length)return{scores:{},isLoading:!1,hasError:!1,allLoaded:!0};if(I||A)return{scores:{},isLoading:!1,hasError:!0,allLoaded:!1};if(N)return{scores:h,isLoading:x.length>0,hasError:!1,allLoaded:!1};var e={};Object.values(C).forEach(function(t){var r=t.actionId,a=t.round,s=t.accountScores,c=Object.values(s).reduce(function(e,n){return n>e?n:e},BigInt(0)),o=s[n]||BigInt(0),i="0";if(c>BigInt(0)&&o>BigInt(0)){var d=o*BigInt(100)/c;i=(o*BigInt(100)%c*BigInt(2)>=c?Number(d)+1:Number(d)).toString()}var l=r.toString(),u=a.toString();e[l]||(e[l]={}),e[l][u]=i});var t=(0,a._)({},h);Object.entries(e).forEach(function(e){var n=(0,c._)(e,2),r=n[0],a=n[1];t[r]||(t[r]={}),Object.entries(a).forEach(function(e){var n=(0,c._)(e,2),a=n[0],s=n[1];t[r][a]=s})});var r=0===x.length||F&&!L;return{scores:t,isLoading:L,hasError:!1,allLoaded:r}},[l,f,n,N,L,I,A,F,y,k,C,h,x]);return{scores:q.scores,isLoading:q.isLoading,hasError:q.hasError,allLoaded:q.allLoaded}},R=t(73591),C=t(83494),P=t(64777),O=t(42083),L=t(44576),Z=t(44746),M=t(27245),A=t(74598),D=t(26858),z=t(6743),F=BigInt(6),T=function(){var e,n=(0,f.useRouter)(),t=((0,d.useContext)(x.M)||{}).token,m=(0,u.m)().address,p=(0,N.Bk)(),b=p.currentRound,j=p.isPending,_=(0,g.N6)(null==t?void 0:t.address,m,F),w=_.rewards,S=_.isPending,I=_.error,B=(0,v.dB)(null==t?void 0:t.address,m),E=B.joinedActions,T=B.isPending,q=B.error,V=(0,d.useMemo)(function(){if(!E||!w||void 0===b)return[];var e=b>F?b-F-BigInt(1):BigInt(0),n=b-BigInt(1),t=new Map,r=!0,a=!1,s=void 0;try{for(var c,o=w[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var i=c.value;if(!(i.reward<=BigInt(0))){var d=i.actionId.toString(),l=i.round.toString();t.has(d)||t.set(d,new Map),t.get(d).set(l,i)}}}catch(e){a=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}var u=[],f=!0,m=!1,h=void 0;try{for(var x,g=E[Symbol.iterator]();!(f=(x=g.next()).done);f=!0){for(var v=x.value,y=v.action.head.id,N=y.toString(),p=t.get(N),j=[],_=n;_>=e;_--){var S=_.toString(),I=null==p?void 0:p.get(S);I?j.push(I):j.push({actionId:y,round:_,reward:BigInt(0),isMinted:!1,notSelected:!0})}u.push({action:v,rewards:j})}}catch(e){m=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(m)throw h}}return u.sort(function(e,n){return BigInt(e.action.action.head.id)>BigInt(n.action.action.head.id)?-1:1}),u},[E,w,b]),J=(0,d.useMemo)(function(){if(!w||0===w.length)return{actionRoundPairs:[],enabled:!1};var e=w.filter(function(e){return e.reward>BigInt(0)}).map(function(e){return{actionId:e.actionId,round:e.round}}).sort(function(e,n){return e.round>n.round?-1:1});return{actionRoundPairs:e,enabled:e.length>0}},[w]),K=k({account:m,tokenAddress:null==t?void 0:t.address,actionRoundPairs:J.actionRoundPairs,enabled:J.enabled&&!!m&&!!(null==t?void 0:t.address)}),X=K.scores,H=K.isLoading;K.hasError;var Q=(0,y.Rb)(),Y=Q.mintActionReward,$=Q.isPending,G=Q.isConfirming,U=Q.isConfirmed,W=Q.writeError,ee=(0,c._)((0,d.useState)(null),2),en=ee[0],et=ee[1],er=(0,c._)((0,d.useState)(new Set),2),ea=er[0],es=er[1];(0,d.useEffect)(function(){if(U){if(l.ZP.success("铸造成功"),en){var e="".concat(en.actionId.toString(),"-").concat(en.round.toString());es(function(n){var t=new Set(n);return t.add(e),t})}(null==t?void 0:t.address)&&m&&(0,z.j)(m,t.address,!1)}},[U,en,null==t?void 0:t.address,m]),(0,d.useEffect)(function(){es(new Set)},[null==t?void 0:t.address,m]),(0,d.useEffect)(function(){if((null==t?void 0:t.address)&&m&&!S&&w&&!w.some(function(e){return e.reward>BigInt(0)&&!e.isMinted})){var e=(0,z.FP)(m,t.address);if(null==e?void 0:e.needMinted){var n=(0,z.iO)(m,t.address);localStorage.removeItem(n),(0,z.j)(m,t.address,!1)}}},[null==t?void 0:t.address,m,S,w]);var ec=(e=(0,r._)(function(e,n){return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!((null==t?void 0:t.address)&&m))return[3,2];return et({actionId:n,round:e}),[4,Y(t.address,e,n)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(n,t){return e.apply(this,arguments)}),eo=(0,d.useMemo)(function(){return V?V.map(function(e){return(0,s._)((0,a._)({},e),{rewards:e.rewards.map(function(n){var t,r="".concat(BigInt(e.action.action.head.id).toString(),"-").concat(n.round.toString()),c=e.action.action.head.id.toString(),o=n.round.toString(),i=null==X?void 0:null===(t=X[c])||void 0===t?void 0:t[o],d=H&&!i;return(0,s._)((0,a._)({},n),{isMinted:ea.has(r)||n.isMinted,score:i||"0.0",isScoreLoading:d,notSelected:n.notSelected})})})}):[]},[V,ea,X,H]),ei=(0,R.S)().handleContractError;return(0,d.useEffect)(function(){I&&ei(I,"dataViewer"),q&&ei(q,"dataViewer"),W&&ei(W,"mint")},[I,q,W,ei]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{title:"行动激励",showBackButton:!0}),(0,i.jsxs)("main",{className:"flex-grow",children:[t?(0,i.jsxs)("div",{className:"flex flex-col space-y-6 p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)(P.Z,{title:"铸造行动激励"}),(0,i.jsx)("button",{onClick:function(){return n.push("/my/queryaction?symbol=".concat(null==t?void 0:t.symbol))},className:"text-secondary hover:text-secondary/80 text-sm bg-transparent border-none cursor-pointer",children:"查看已退出行动激励\xa0>>"})]}),(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-500 text-sm",children:(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)(A.Z,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"小贴士："}),(0,i.jsx)("br",{}),"如果对激励打分有疑问，可以",(0,i.jsx)("br",{}),"1. 仔细阅读行动打分规则，检查是否按要求打卡；",(0,i.jsx)("br",{}),"2. 请教周围的治理者或志愿者；"]})]})}),S||T||j?(0,i.jsx)(O.Z,{}):eo.length>0?eo.map(function(e){return(0,i.jsxs)("div",{className:"border border-gray-100 rounded-lg p-4 shadow-sm",children:[(0,i.jsx)("div",{className:"flex items-center mb-3",children:(0,i.jsxs)("div",{className:"flex items-baseline  mr-2",children:[(0,i.jsx)("span",{className:"text-greyscale-500",children:"No."}),(0,i.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.action.head.id)}),(0,i.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.action.body.title)})]})}),e.rewards.length>0?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("table",{className:"table w-full table-auto",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,i.jsx)("th",{className:"text-left px-0",children:"轮次"}),(0,i.jsx)("th",{className:"text-center",children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["验证得分",(0,i.jsx)(Z.Z,{title:"验证得分说明",content:"这个得分，是根据最终激励，估算的平均得分。   （具体算法：将所有地址中实际得分最高者，作为100分，然后将你的实际得分等比例换算到0~100）"})]})}),(0,i.jsx)("th",{className:"text-center",children:"可铸造激励"}),(0,i.jsx)("th",{className:"text-center",children:"操作"})]})}),(0,i.jsx)("tbody",{children:e.rewards.map(function(n,r){return(0,i.jsxs)("tr",{className:r===e.rewards.length-1?"border-none":"border-b border-gray-100",children:[(0,i.jsx)("td",{className:"px-1",children:(0,D.cK)(n.round,t).toString()}),(0,i.jsx)("td",{className:"text-center px-1",children:n.isScoreLoading?(0,i.jsx)("div",{className:"flex justify-center items-center",children:(0,i.jsx)(O.Z,{})}):n.score&&parseFloat(n.score)>0?(0,i.jsx)(h(),{href:"/verify/detail?symbol=".concat(null==t?void 0:t.symbol,"&id=").concat(e.action.action.head.id.toString(),"&round=").concat(n.round.toString()),rel:"noopener noreferrer",className:"text-secondary hover:text-secondary/80 underline text-sm",children:n.score}):(0,i.jsx)("span",{className:"text-greyscale-500",children:"-"})}),(0,i.jsx)("td",{className:"text-center px-1",children:n.notSelected?(0,i.jsx)("span",{className:"text-greyscale-500",children:"未抽中"}):(0,D.LH)(n.reward||BigInt(0))}),(0,i.jsx)("td",{className:"text-center px-1",children:n.notSelected?(0,i.jsx)("span",{className:"text-greyscale-500",children:"-"}):n.reward>BigInt(0)&&!n.isMinted?(0,i.jsx)(M.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:function(){return ec(n.round,BigInt(e.action.action.head.id))},disabled:$||G,children:"铸造"}):n.isMinted?(0,i.jsx)("span",{className:"text-greyscale-500",children:"已铸造"}):(0,i.jsx)("span",{className:"text-greyscale-500",children:"-"})})]},"".concat(e.action.action.head.id,"-").concat(n.round.toString()))})})]})}):(0,i.jsxs)("div",{className:"text-center text-greyscale-500 py-4",children:["该行动最近 ",F.toString()," 轮没有获得激励"]}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{onClick:function(){return n.push("/my/rewardsofaction?id=".concat(e.action.action.head.id))},className:"text-secondary hover:text-secondary/80 underline text-sm bg-transparent border-none cursor-pointer",children:"查看更多激励 >>"})})]},e.action.action.head.id)}):(0,i.jsx)("div",{className:"text-center text-greyscale-500 py-8",children:"没有参与任何行动"})]}):(0,i.jsx)(O.Z,{}),(0,i.jsx)(L.Z,{isLoading:$||G,text:$?"提交交易...":"确认交易..."})]})]})}},67516:function(e,n,t){"use strict";t.d(n,{N:function(){return u}});var r=t(72253),a=t(14932),s=t(97995),c=t(36100),o=t(67294),i=t(95159),d=t(39360),l=t(78942);function u(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.contracts,u=void 0===t?[]:t,f=n.query,m=void 0===f?{}:f,h=(0,l.Z)(n),x=(0,d.x)({config:h}),g=function(e,n={}){return{async queryFn({queryKey:t}){let r=[],a=t[1].contracts.length;for(let e=0;e<a;e++){let a=t[1].contracts[e],s=(n.contracts?.[e]).abi;r.push({...a,abi:s})}let{scopeKey:c,...o}=t[1];return(0,s.J)(e,{...o,contracts:r})},queryKey:function(e={}){let n=[];for(let t of e.contracts??[]){let{abi:r,...a}=t;n.push({...a,chainId:a.chainId??e.chainId})}return["readContracts",(0,c.OP)({...e,contracts:n})]}(n)}}(h,(0,a._)((0,r._)({},n),{chainId:x})),v=(0,o.useMemo)(function(){var e,n=!1,t=!0,r=!1,a=void 0;try{for(var s,c=u[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var o=s.value,i=o.abi,d=o.address,l=o.functionName;if(!i||!d||!l){n=!1;break}n=!0}}catch(e){r=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw a}}return!!(n&&(null===(e=m.enabled)||void 0===e||e))},[u,m.enabled]);return(0,i.aM)((0,a._)((0,r._)({},g,m),{enabled:v,structuralSharing:null!==(e=m.structuralSharing)&&void 0!==e?e:c.if}))}}},function(e){e.O(0,[8501,4463,1390,3494,3591,3950,9271,7399,2888,9774,179],function(){return e(e.s=51436)}),_N_E=e.O()}]);