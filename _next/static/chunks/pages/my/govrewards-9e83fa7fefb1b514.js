try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="91e33f4a-d206-4628-9947-884ae07c430b",e._sentryDebugIdIdentifier="sentry-dbid-91e33f4a-d206-4628-9947-884ae07c430b")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},74598:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var s=(0,n(31134).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},64777:function(e,t,n){"use strict";var s=n(85893);t.Z=function(e){var t=e.title;return(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("h1",{className:"text-lg font-bold",children:t})})}},42083:function(e,t,n){"use strict";var s=n(85893),r=n(23432);t.Z=function(){return(0,s.jsx)(r.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},27029:function(e,t,n){"use strict";n.r(t);var s=n(11010),r=n(72253),i=n(14932),a=n(91309),c=n(4586),l=n(97582),d=n(85893),o=n(67294),u=n(42130),x=n(27245),f=n(86501),h=n(41664),g=n.n(h),m=n(74598),j=n(26858),y=n(93778),b=n(7208),p=n(59271),v=n(7399),N=n(73591),w=n(83494),I=n(64777),_=n(42083),k=n(44576),B=BigInt(20);t.default=function(){var e,t=((0,o.useContext)(y.M)||{}).token,n=(0,u.m)().address,h=(0,p.Bk)(),E=h.currentRound,S=h.error,Z=h.isPending,R=(0,a._)((0,o.useState)(BigInt(0)),2),C=R[0],M=R[1],P=(0,a._)((0,o.useState)(BigInt(0)),2),z=P[0],D=P[1],L=(0,a._)((0,o.useState)(!0),2),T=L[0],H=L[1],O=(0,o.useRef)(null);(0,o.useEffect)(function(){void 0!==E&&t&&(E<=BigInt(t.initialStakeRound)?D(BigInt(0)):D(BigInt(E>=BigInt(1)?E-BigInt(1):BigInt(0))))},[E,t]),(0,o.useEffect)(function(){z&&t&&(z-BigInt(t.initialStakeRound)>=B?M(z-B):M(BigInt(t.initialStakeRound)))},[z,t]);var F=(0,b.Ci)(null==t?void 0:t.address,n,C,z),X=F.rewards,G=F.isPending,J=F.error,K=(0,a._)((0,o.useState)([]),2),V=K[0],q=K[1];(0,o.useEffect)(function(){X&&q((0,c._)(X).sort(function(e,t){return e.round>t.round?-1:1}))},[X]),(0,o.useEffect)(function(){t&&H(C>BigInt(t.initialStakeRound))},[C,t]);var A=(0,v.xg)(),Q=A.mintGovReward,U=A.isPending,W=A.isConfirming,Y=A.isConfirmed,$=A.writeError,ee=(0,a._)((0,o.useState)(null),2),et=ee[0],en=ee[1];(0,o.useEffect)(function(){Y&&(q(function(e){return e.map(function(e){return e.round===et?(0,i._)((0,r._)({},e),{isMinted:!0}):e})}),f.ZP.success("铸造成功"))},[Y,et]);var es=(e=(0,s._)(function(e){return(0,l.Jh)(this,function(s){switch(s.label){case 0:if(!((null==t?void 0:t.address)&&n))return[3,2];return en(e),[4,Q(t.address,e)];case 1:s.sent(),s.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),er=(0,N.S)().handleContractError;(0,o.useEffect)(function(){J&&er(J,"dataViewer"),S&&er(S,"mint"),$&&er($,"mint")},[J,S,$,er]);var ei=(0,o.useCallback)(function(){if(t){var e=BigInt(t.initialStakeRound);M(function(t){return t>e?t-B>=e?t-B:e:t})}},[t]);return((0,o.useEffect)(function(){if(O.current){var e=O.current,t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&!G&&T&&ei()})},{root:null,rootMargin:"200px",threshold:0});return t.observe(e),function(){t.unobserve(e),t.disconnect()}}},[ei,G,T]),Z)?(0,d.jsx)(_.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.Z,{title:"治理激励",showBackButton:!0}),(0,d.jsxs)("main",{className:"flex-grow",children:[t?(0,d.jsxs)("div",{className:"flex flex-col space-y-2 p-4",children:[(0,d.jsx)(I.Z,{title:"铸造治理激励"}),z===BigInt(0)&&void 0!==E?(0,d.jsx)("div",{className:"text-center text-gray-500 py-4",children:"当前还不能铸造激励，请耐心等待"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("table",{className:"table w-full table-auto",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("th",{children:"轮次"}),(0,d.jsx)("th",{className:"text-center px-1",children:"总激励"}),(0,d.jsx)("th",{className:"text-center px-2",children:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center",children:[(0,d.jsx)("span",{children:"验证激励"}),(0,d.jsx)(g(),{href:"/stake/stakelp/?symbol=".concat((null==t?void 0:t.symbol)||""),className:"ml-1 text-greyscale-500 hover:text-secondary","aria-label":"验证激励说明",title:"验证激励说明",children:(0,d.jsx)(m.Z,{size:16})})]})}),(0,d.jsx)("th",{className:"text-center px-2",children:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center",children:[(0,d.jsx)("span",{children:"加速激励"}),(0,d.jsx)(g(),{href:"/stake/staketoken/?symbol=".concat((null==t?void 0:t.symbol)||""),className:"ml-1 text-greyscale-500 hover:text-secondary","aria-label":"加速激励说明",title:"加速激励说明",children:(0,d.jsx)(m.Z,{size:16})})]})}),(0,d.jsx)("th",{className:"text-center px-2",children:"结果"})]})}),(0,d.jsx)("tbody",{children:0!==V.length||G?V.map(function(e){return(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("td",{children:t?(0,j.cK)(e.round,t).toString():"-"}),(0,d.jsx)("td",{className:"text-center px-1",children:(0,j.LH)(e.reward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2 bg-greyscale-100",children:(0,j.LH)(e.verifyReward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2 bg-greyscale-100",children:(0,j.LH)(e.boostReward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2",children:e.reward>BigInt(0)&&!e.isMinted?(0,d.jsx)(x.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:function(){return es(e.round)},disabled:U||W,children:"铸造"}):e.isMinted?(0,d.jsx)("span",{className:"text-greyscale-500",children:"已铸造"}):(0,d.jsx)("span",{className:"text-greyscale-500",children:"-"})})]},e.round.toString())}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:3,className:"text-center text-sm text-gray-500 py-4",children:"暂无数据"})})})]}),(0,d.jsx)("div",{ref:O,className:"h-12 flex justify-center items-center",children:G?(0,d.jsx)(_.Z,{}):T?(0,d.jsx)("span",{className:"text-sm text-gray-500",children:"加载更多..."}):(0,d.jsx)("span",{className:"text-sm text-gray-500",children:"没有更多激励"})})]})]}):(0,d.jsx)(_.Z,{}),(0,d.jsx)(k.Z,{isLoading:U||W,text:U?"提交交易...":"确认交易..."})]})]})}}},function(e){e.O(0,[8501,4463,3494,3591,7399,9271,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);