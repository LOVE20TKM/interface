(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9800],{18651:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var l=t(40854),a=t(37876),n=t(14232),r=t(63934),c=t(83416);let i=e=>{var s=e.initialTimeLeft,t=e.onTick,r=(0,l._)((0,n.useState)(Date.now()+1e3*s),2),c=r[0],i=r[1],d=(0,l._)((0,n.useState)(s),2),o=d[0],x=d[1];(0,n.useEffect)(()=>{i(Date.now()+1e3*s)},[s]),(0,n.useEffect)(()=>{var e=setInterval(()=>{var s=Math.max(0,Math.floor((c-Date.now())/1e3));x(s),t&&t(s),s<=0&&(clearInterval(e),window.location.reload())},1e3);return()=>clearInterval(e)},[c,t]);var m=Math.floor(o/86400),v=Math.floor(o%86400/3600),h=Math.floor(o%3600/60);return(0,a.jsxs)("div",{className:"inline-flex gap-1 text-greyscale-400",children:[m>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"countdown font-mono",children:(0,a.jsx)("span",{style:{"--value":m}})}),"天"]}),(v>0||m>0)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"countdown font-mono",children:(0,a.jsx)("span",{style:{"--value":v}})}),"时"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"countdown font-mono",children:(0,a.jsx)("span",{style:{"--value":h}})}),"分"]}),m<=0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"countdown font-mono",children:(0,a.jsx)("span",{style:{"--value":o%60}})}),"秒"]})]})};var d=t(12293);let o=e=>{var s=e.currentRound,t=e.roundType,o=e.showCountdown,x=(0,r.y)().data,m=(0,n.useContext)(c.N),v=m?m.token:void 0,h=!x||!v||void 0===v.voteOriginBlocks,u=(0,l._)((0,n.useState)(0n),2),j=u[0],N=u[1],f=Number("33784")||0,y=Number("255")||0,g=v?Number(v.voteOriginBlocks):0,p=f-(Number(x)-g)%f,b=p>0?Math.ceil(p*y/100):0,w=(0,l._)((0,n.useState)(b),2),A=w[0],k=w[1];(0,n.useEffect)(()=>{if(x){var e=f-(Number(x)-g)%f;k(e>0?Math.ceil(e*y/100):0)}},[x,f,y,g]),(0,n.useEffect)(()=>{v&&s>0n&&N(s-BigInt(v.initialStakeRound)+1n)},[s,v]);var C=null!=j?j.toString():"0";return(null==v?void 0:v.initialStakeRound)&&!(j<=0n)?h||null==j||j<0n?((null==j||j<0n)&&(console.log("currentTokenRound",j),console.log("currentRound",s),console.log("token.initialStakeRound",null==v?void 0:v.initialStakeRound),console.log("token",v)),(0,a.jsx)(d.A,{})):(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,a.jsx)("span",{className:"text-greyscale-400",children:C}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,a.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(100*A/y)}),(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i,{initialTimeLeft:b,onTick:k})}):(0,a.jsx)("span",{className:"text-greyscale-400",children:A<60?"".concat(A,"秒"):A<=300?"".concat(Math.floor(A/60),"分钟").concat(A%60,"秒"):A<3600?"".concat(Math.floor(A/60),"分钟"):"".concat(Math.floor(A/3600),"小时").concat(Math.floor(A%3600/60),"分钟")}),(0,a.jsx)("span",{className:"text-greyscale-400",children:" )"})]})}):(0,a.jsx)(a.Fragment,{})}},33181:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var l=t(37876),a=t(14232),n=t(8047),r=t(6960),c=t(48230),i=t.n(c),d=t(83416),o=t(19591),x=t(20451),m=t(66663),v=t(19593),h=t(78572),u=t(52372),j=t(12293),N=t(4066),f=t(20442);let y=e=>{var s=e.currentRound,t=((0,a.useContext)(d.N)||{}).token,n=(0,u.W6)(null==t?void 0:t.address),c=n.govData,o=n.isPending,m=n.error,v=(0,x.g)().handleContractError;if((0,a.useEffect)(()=>{m&&v(m,"govData")},[m]),!t)return(0,l.jsx)(j.A,{});var y=s-BigInt(t.initialStakeRound)+1n,g=BigInt(0);if(null==c?void 0:c.rewardAvailable){var p=100n-(BigInt("5")+BigInt("5"))/10n;g=1n===y?c.rewardAvailable*BigInt("5")/1000n:2n===y?c.rewardAvailable*p*BigInt("5")/100000n:c.rewardAvailable*p*p*BigInt("5")/1000000n}return(0,l.jsx)("div",{className:"px-4 mb-2",children:(0,l.jsxs)("div",{className:"border rounded-lg p-0",children:[(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,l.jsxs)("div",{className:"stat place-items-center pb-2 pl-1",children:[(0,l.jsx)("div",{className:"stat-title text-sm pb-1",children:"总治理票数"}),(0,l.jsx)("div",{className:"stat-value text-secondary text-xl",children:o?(0,l.jsx)(j.A,{}):(0,f.NJ)((null==c?void 0:c.govVotes)||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center pb-2 pl-1",children:[(0,l.jsx)("div",{className:"stat-title text-sm pb-1",children:"预计新增铸币"}),(0,l.jsx)("div",{className:"stat-value text-secondary text-xl",children:o?(0,l.jsx)(j.A,{}):(0,f.NJ)(g)})]})]}),(0,l.jsxs)("div",{className:"text-center text-xs mx-8 text-greyscale-500 border-b border-greyscale-200 pb-2",children:["预估年化收益率（APY）：",(0,N.bD)(null==c?void 0:c.rewardAvailable,null==c?void 0:c.tokenAmountForSl,null==c?void 0:c.stAmount)]}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 mt-2",children:[(0,l.jsxs)("div",{className:"stat place-items-center pb-0 pt-0 pl-1",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"流动性质押凭证SL代币"}),(0,l.jsx)("div",{className:"stat-value text-lg text-gray-600",children:o?(0,l.jsx)(j.A,{}):(0,l.jsxs)(i(),{href:"/gov/liquid?symbol=".concat(null==t?void 0:t.symbol),className:"flex items-center hover:text-secondary-focus",children:[(0,l.jsx)("span",{className:"cursor-pointer",children:(0,f.NJ)((null==c?void 0:c.slAmount)||BigInt(0))}),(0,l.jsx)(h.A,{size:16,className:"ml-1 text-secondary cursor-pointer"})]})}),(0,l.jsx)("div",{className:"stat-desc text-xs",children:(0,l.jsx)(r.$,{variant:"link",className:"text-secondary font-normal border-secondary pt-0",asChild:!0,children:(0,l.jsx)(i(),{href:"/gov/stakelp/?symbol=".concat(t.symbol),children:"质押 获取治理票\xa0>>"})})})]}),(0,l.jsxs)("div",{className:"stat place-items-center pb-0 pt-0 pl-1",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"代币质押凭证ST代币"}),(0,l.jsx)("div",{className:"stat-value text-lg text-gray-600",children:o?(0,l.jsx)(j.A,{}):(0,f.NJ)((null==c?void 0:c.stAmount)||BigInt(0))}),(0,l.jsx)("div",{className:"stat-desc text-xs",children:(0,l.jsx)(r.$,{variant:"link",className:"text-secondary font-normal border-secondary pt-0",asChild:!0,children:(0,l.jsx)(i(),{href:"/gov/staketoken?symbol=".concat(t.symbol),children:"质押 增加治理收益\xa0>>"})})})]})]})]})})};var g=t(98684),p=t(1709),b=t(18651);let w=e=>{var s=e.currentRound,t=e.validGovVotes,c=e.isPendingValidGovVotes,o=((0,a.useContext)(d.N)||{}).token,m=(0,n.F)().address,v=(0,g.Pb)((null==o?void 0:o.address)||"",s,m||""),h=v.votesNumByAccount,u=v.isPending,N=v.error,y=(0,x.g)().handleContractError;if((0,a.useEffect)(()=>{N&&y(N,"vote")},[N]),!o)return"";if(!m)return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,l.jsx)(p.A,{title:"我的投票"}),(0,l.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})});var w=c||!1,A=t||0n;return(0,l.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)(p.A,{title:"我的投票"}),(0,l.jsx)(r.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,l.jsx)(i(),{href:"/vote/actions/?symbol=".concat(null==o?void 0:o.symbol),children:"投票中的行动"})})]}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,l.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"我的已投票数"}),(0,l.jsx)("div",{className:"stat-value text-xl",children:u?(0,l.jsx)(j.A,{}):(0,f.NJ)(h||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center pt-0 pb-2",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"我的未投票数"}),(0,l.jsx)("div",{className:"stat-value text-xl",children:w||u?(0,l.jsx)(j.A,{}):A?(0,f.NJ)(A-h||BigInt(0)):"0"})]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:w||u?(0,l.jsx)(j.A,{}):A>h+2n?(0,l.jsx)(r.$,{className:"w-1/2",asChild:!0,children:(0,l.jsx)(i(),{href:"/vote?symbol=".concat(o.symbol),children:"去投票"})}):(0,l.jsx)(r.$,{disabled:!0,className:"w-1/2",children:A>0?"已投票":"无治理票，不能投票"})}),(0,l.jsx)("div",{className:"flex justify-center mt-2",children:(0,l.jsx)(b.A,{currentRound:s,roundType:"vote",showCountdown:!1})})]})};var A=t(29898);let k=e=>{var s=e.currentRound,t=e.showBtn,c=void 0===t||t,o=((0,a.useContext)(d.N)||{}).token,m=(0,n.F)().address,v=(0,g.Pb)(null==o?void 0:o.address,s,m||""),h=v.votesNumByAccount,u=v.isPending,N=v.error,y=(0,A.$d)(null==o?void 0:o.address,s,m||""),w=y.scoreByVerifier,k=y.isPending,C=y.error,B=u||k?BigInt(0):h-w,E=(0,x.g)().handleContractError;return((0,a.useEffect)(()=>{N&&E(N,"vote"),C&&E(C,"verify")},[N,C]),o)?m?(0,l.jsxs)("div",{className:"flex-col items-center px-4 pb-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)(p.A,{title:"我的验证"}),c&&s>=1n&&(0,l.jsx)(r.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,l.jsx)(i(),{href:"/verify/actions/?symbol=".concat(null==o?void 0:o.symbol),children:"验证中的行动"})})]}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 mt-2",children:[(0,l.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"已验证票数"}),(0,l.jsx)("div",{className:"stat-value text-xl ".concat(c?"":"text-secondary"),children:k?(0,l.jsx)(j.A,{}):(0,f.NJ)(w||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center pt-0 pb-2",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"未验证票数"}),(0,l.jsx)("div",{className:"stat-value text-xl ".concat(c?"":"text-secondary"),children:u||k?(0,l.jsx)(j.A,{}):(0,f.NJ)(B)})]})]}),c&&(0,l.jsx)("div",{className:"flex justify-center",children:u||k?(0,l.jsx)(j.A,{}):B>5n&&h>w?(0,l.jsx)(r.$,{className:"w-1/2",asChild:!0,children:(0,l.jsx)(i(),{href:"/verify?symbol=".concat(o.symbol),children:"去验证"})}):(0,l.jsx)(r.$,{disabled:!0,className:"w-1/2",children:w>0?"已验证":"未投票，无需验证"})}),(0,l.jsx)("div",{className:"flex justify-center mt-2",children:(0,l.jsx)(b.A,{currentRound:s,roundType:"verify",showCountdown:!1})})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex-col items-center px-4 pt-6 pb-2",children:[(0,l.jsx)(p.A,{title:"行动验证"}),(0,l.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):(0,l.jsx)(j.A,{})};var C=t(65104),B=t(63934),E=t(40752);let I=e=>{var s=e.token,t=(0,B.y)().data,n=(0,E.TU)(s?s.address:"0x0000000000000000000000000000000000000000"),c=n.launchInfo,d=n.isPending,o=n.error,m=(0,x.g)().handleContractError;if(a.useEffect(()=>{o&&m(o,"launch")},[o]),d||!t)return(0,l.jsx)(l.Fragment,{});var v=Number("236488")||0,h=Number(t)-Number((null==c?void 0:c.startBlock)||0),u=v-h;return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)(p.A,{title:"部署子币"}),(0,l.jsx)(r.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,l.jsx)(i(),{href:"/tokens/children/?symbol=".concat(null==s?void 0:s.symbol),children:"子币列表"})})]}),(0,l.jsx)("div",{className:"w-full text-center",children:h<v?(0,l.jsxs)("div",{className:"px-4 pt-4 text-center",children:[(0,l.jsxs)("p",{className:"text-greyscale-500",children:["还剩 ",(0,l.jsx)("span",{className:"font-semibold",children:u})," 区块开放子币部署"]}),(0,l.jsxs)("p",{className:"text-sm mt-1 text-greyscale-400",children:["（约",(e=>{var s=Math.ceil(e*(Number("255")||0)/100),t=Math.floor(s/86400),l=Math.floor(s%86400/3600),a=Math.floor(s%3600/60),n="";return t>0&&(n+="".concat(t,"天")),l>0&&(n+="".concat(l,"小时")),a>0&&(n+="".concat(a,"分钟")),n||"少于1分钟"})(u),"）"]})]}):(0,l.jsx)(r.$,{variant:"outline",size:"sm",className:"mt-2 w-1/2 text-secondary border-secondary",asChild:!0,children:(0,l.jsxs)(i(),{href:"/launch/deploy?symbol=".concat(null==s?void 0:s.symbol),children:[(0,l.jsx)(C.A,{className:"w-4 h-4"}),"去部署"]})})}),(0,l.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-4",children:[(0,l.jsx)("p",{className:"mb-1",children:"说明："}),(0,l.jsxs)("p",{children:["1. 部署者：须持有 ",null==s?void 0:s.symbol,"不少于 0.5%的治理票"]}),(0,l.jsxs)("p",{children:["2. 子币发射目标：须筹集 20,000,000个 ",null==s?void 0:s.symbol]})]})]})},M=()=>{var e=((0,a.useContext)(d.N)||{}).token,s=(0,n.F)(),t=s.address,c=s.isConnected,h=(0,o.vC)(),u=h.currentRound,N=h.error,f=h.isPending,g=(0,o.Fd)((null==e?void 0:e.address)||"",t||""),p=g.validGovVotes,b=g.isPending,A=g.error,C=(0,x.g)().handleContractError;a.useEffect(()=>{A&&C(A,"stake"),N&&C(N,"vote")},[A,N]);var B=p>0n;return c&&(f||b)?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)(j.A,{})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.A,{title:"治理首页"}),(0,l.jsx)("main",{className:"flex-grow",children:c?e?e&&!e.hasEnded?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.A,{}),(0,l.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,l.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能参与治理"}),(0,l.jsx)(r.$,{className:"w-1/2",asChild:!0,children:(0,l.jsx)(i(),{href:"/launch?symbol=".concat(e.symbol),children:"查看公平发射"})})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y,{currentRound:u||0n}),b?(0,l.jsx)("div",{className:"flex justify-center p-4",children:(0,l.jsx)(j.A,{})}):B?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w,{currentRound:u||0n,validGovVotes:p,isPendingValidGovVotes:b}),(0,l.jsx)(k,{currentRound:u>2?u-2n:0n}),(0,l.jsx)(I,{token:e})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,l.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"您当前没有治理票，获取治理票后才能治理"}),(0,l.jsx)(r.$,{className:"w-1/2",asChild:!0,children:(0,l.jsx)(i(),{href:"/gov/stakelp/?symbol=".concat(null==e?void 0:e.symbol),children:"质押获取治理票"})})]})]}):(0,l.jsx)(j.A,{}):(0,l.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,l.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}},65104:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var l=(0,t(11713).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},67717:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return t(33181)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[4571,4112,4267,2569,5139,9591,3356,548,9898,9593,636,6593,8792],()=>s(67717)),_N_E=e.O()}]);