(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6784],{12293:(e,n,r)=>{"use strict";r.d(n,{A:()=>a});var t=r(37876),s=r(7446);let a=()=>(0,t.jsx)(s.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,n,r)=>{"use strict";r.d(n,{X:()=>a});var t=r(76200);class s extends t.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function a(e,n){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new s({value:e});let[r,t="0"]=e.split("."),a=r.startsWith("-");if(a&&(r=r.slice(1)),t=t.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${t}`))&&(r=`${BigInt(r)+1n}`),t="";else if(t.length>n){let[e,s,a]=[t.slice(0,n-1),t.slice(n-1,n),t.slice(n)],i=Math.round(Number(`${s}.${a}`));(t=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>n&&(t=t.slice(1),r=`${BigInt(r)+1n}`),t=t.slice(0,n)}else t=t.padEnd(n,"0");return BigInt(`${a?"-":""}${r}${t}`)}},28638:(e,n,r)=>{"use strict";r.d(n,{BT:()=>d,Wu:()=>m,ZB:()=>u,Zp:()=>l,aR:()=>o,wL:()=>f});var t=r(3576),s=r(65699),a=r(37876),i=r(14232),c=r(30684),l=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},i))});l.displayName="Card";var o=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",r)},i))});o.displayName="CardHeader";var u=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",r)},i))});u.displayName="CardTitle";var d=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("text-sm text-muted-foreground",r)},i))});d.displayName="CardDescription";var m=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("p-6 pt-0",r)},i))});m.displayName="CardContent";var f=i.forwardRef((e,n)=>{var r=e.className,i=(0,s._)(e,["className"]);return(0,a.jsx)("div",(0,t._)({ref:n,className:(0,c.cn)("flex items-center p-6 pt-0",r)},i))});f.displayName="CardFooter"},29852:(e,n,r)=>{"use strict";r.d(n,{A:()=>x});var t=r(40854),s=r(37876),a=r(14232),i=r(6960),c=r(96108),l=r(28638),o=r(97685),u=r(89099),d=r(52372),m=r(20451),f=r(20442),h=r(83416),p=r(12293);function x(e){var n=e.parentTokenAddress,r=(0,u.useRouter)(),x=(0,a.useContext)(h.N)||{},v=x.token,N=x.setToken,g=(0,t._)((0,a.useState)(0n),2),b=g[0],k=g[1],y=(0,t._)((0,a.useState)(BigInt(50)),2),w=y[0],T=y[1],j=(0,t._)((0,a.useState)([]),2),A=j[0],E=j[1];(0,a.useEffect)(()=>{E([]),k(0n),T(BigInt(50))},[n]);var _=n?(0,d.sA)(n,b,w):(0,d.qQ)(b,w),R="childTokens"in _?_.childTokens:_.tokens,C=_.isPending,S=_.error,$=(0,d.XV)(R||[]),B=$.tokens,F=$.launchInfos,I=$.isPending,G=$.error;(0,a.useEffect)(()=>{if(R&&B&&F){console.log("=== 调试发射进度数据 ==="),F.forEach((e,n)=>{var r;console.log("Token ".concat(n,":"),{symbol:null==(r=B[n])?void 0:r.symbol,launchAmount:e.launchAmount.toString(),parentTokenFundraisingGoal:e.parentTokenFundraisingGoal.toString(),totalContributed:e.totalContributed.toString(),hasEnded:e.hasEnded,correctRatio:Number(e.totalContributed)/Number(e.parentTokenFundraisingGoal),wrongRatio:Number(e.launchAmount)/Number(e.parentTokenFundraisingGoal)})});var e=B.map((e,n)=>{var r;return{name:e.name,symbol:e.symbol,address:R[n],decimals:Number(e.decimals),parentTokenAddress:F[n].parentTokenAddress,parentTokenSymbol:e.parentTokenSymbol,slTokenAddress:e.slAddress,stTokenAddress:e.stAddress,initialStakeRound:Number(e.initialStakeRound),hasEnded:F[n].hasEnded,voteOriginBlocks:null!=(r=null==v?void 0:v.voteOriginBlocks)?r:0,totalContributed:F[n].totalContributed,parentTokenFundraisingGoal:F[n].parentTokenFundraisingGoal}});E(n=>{var r=new Set(n.map(e=>e.symbol));return[...n,...e.filter(e=>!r.has(e.symbol))]})}},[B,F]);var O=(0,a.useCallback)(()=>{!C&&B&&B.length>0&&(k(w),T(w+BigInt(50)))},[C,B,w]),D=function(e,n,r){var t=this,s=(0,a.useRef)(null),i=(0,a.useRef)(0),c=(0,a.useRef)(null),l=(0,a.useRef)([]),o=(0,a.useRef)(),u=(0,a.useRef)(),d=(0,a.useRef)(e),m=(0,a.useRef)(!0);d.current=e;var f="undefined"!=typeof window,h=!n&&0!==n&&f;if("function"!=typeof e)throw TypeError("Expected a function");n=+n||0;var p=!!(r=r||{}).leading,x=!("trailing"in r)||!!r.trailing,v="maxWait"in r,N="debounceOnServer"in r&&!!r.debounceOnServer,g=v?Math.max(+r.maxWait||0,n):null;return(0,a.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]),(0,a.useMemo)(function(){var e=function(e){var n=l.current,r=o.current;return l.current=o.current=null,i.current=e,u.current=d.current.apply(r,n)},r=function(e,n){h&&cancelAnimationFrame(c.current),c.current=h?requestAnimationFrame(e):setTimeout(e,n)},a=function(e){if(!m.current)return!1;var r=e-s.current;return!s.current||r>=n||r<0||v&&e-i.current>=g},b=function(n){return c.current=null,x&&l.current?e(n):(l.current=o.current=null,u.current)},k=function e(){var t=Date.now();if(a(t))return b(t);if(m.current){var c=n-(t-s.current);r(e,v?Math.min(c,g-(t-i.current)):c)}},y=function(){if(f||N){var d=Date.now(),h=a(d);if(l.current=[].slice.call(arguments),o.current=t,s.current=d,h){if(!c.current&&m.current)return i.current=s.current,r(k,n),p?e(s.current):u.current;if(v)return r(k,n),e(s.current)}return c.current||r(k,n),u.current}};return y.cancel=function(){c.current&&(h?cancelAnimationFrame(c.current):clearTimeout(c.current)),i.current=0,l.current=s.current=o.current=c.current=null},y.isPending=function(){return!!c.current},y.flush=function(){return c.current?b(Date.now()):u.current},y},[p,v,n,g,x,h,f,N])}(()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&O()},200);(0,a.useEffect)(()=>(window.addEventListener("scroll",D),()=>{window.removeEventListener("scroll",D)}),[D]);var M=e=>{if(!N)return void o.oR.error("请先选择代币");N({name:e.name,symbol:e.symbol,address:e.address,decimals:e.decimals,hasEnded:e.hasEnded,parentTokenAddress:e.parentTokenAddress,parentTokenSymbol:e.parentTokenSymbol,slTokenAddress:e.slTokenAddress,stTokenAddress:e.stTokenAddress,initialStakeRound:e.initialStakeRound,voteOriginBlocks:e.voteOriginBlocks}),e.hasEnded?r.push("/acting/?symbol=".concat(e.symbol)):r.push("/launch/?symbol=".concat(e.symbol))},P=(0,m.g)().handleContractError;return(0,a.useEffect)(()=>{S&&P(S,"launch"),G&&P(G,"dataViewer")},[S,G]),(0,s.jsxs)("div",{className:"space-y-4 m-4",children:[0!==A.length||C||I?A.map((e,n)=>(0,s.jsx)(l.Zp,{onClick:()=>M(e),children:(0,s.jsxs)(l.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"flex items-center",children:(0,s.jsx)("span",{className:"font-semibold",children:e.symbol})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.hasEnded?(0,s.jsx)("span",{className:"text-greyscale-500",children:"发射已完成"}):(0,s.jsxs)("span",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-secondary",children:"发射中"}),(0,s.jsxs)("span",{className:"text-greyscale-500 pl-4",children:["(募资进度："," ",void 0!==e.totalContributed&&e.parentTokenFundraisingGoal?(0,f.Ee)(Number(e.totalContributed)/Number(e.parentTokenFundraisingGoal)*100):"...",")"]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-500 text-sm",children:"父币 "}),(0,s.jsx)("span",{className:"text-sm",children:e.parentTokenSymbol})]}),(0,s.jsx)(i.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]})]})},n)):(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:n?"暂无子币":"代币列表为空"}),(C||I)&&(0,s.jsx)(p.A,{})]})}},50556:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tokens/children",function(){return r(60990)}])},60990:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>l});var t=r(37876),s=r(60154),a=r(29852),i=r(14232),c=r(83416);function l(){var e=(0,i.useContext)(c.N)||{},n=e.token;return e.setToken,(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.A,{title:"代币列表"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)("header",{className:"flex justify-between items-center m-4",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:"子币列表"})}),(0,t.jsx)(a.A,{parentTokenAddress:null==n?void 0:n.address})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[3308,7657,154,3096,636,6593,8792],()=>n(50556)),_N_E=e.O()}]);