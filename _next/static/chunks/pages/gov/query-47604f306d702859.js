try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1e77bb60-86d3-46f9-92de-0693c979716e",e._sentryDebugIdIdentifier="sentry-dbid-1e77bb60-86d3-46f9-92de-0693c979716e")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{60611:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov/query",function(){return r(45099)}])},34680:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return c},aY:function(){return f},eW:function(){return m},ll:function(){return u}});var n=r(72253),a=r(47702),i=r(85893),s=r(67294),o=r(40108),c=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},s))});c.displayName="Card";var l=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r)},s))});l.displayName="CardHeader";var u=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r)},s))});u.displayName="CardTitle";var d=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r)},s))});d.displayName="CardDescription";var f=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("p-6 pt-0",r)},s))});f.displayName="CardContent";var m=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)("div",(0,n._)({ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r)},s))});m.displayName="CardFooter"},94193:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(72253),a=r(47702),i=r(85893),s=r(67294),o=r(49102),c=r(12003),l=r(40108),u=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(function(e,t){var r=e.className,s=(0,a._)(e,["className"]);return(0,i.jsx)(o.f,(0,n._)({ref:t,className:(0,l.cn)(u(),r)},s))});d.displayName=o.f.displayName},42083:function(e,t,r){"use strict";var n=r(85893),a=r(23432);t.Z=function(){return(0,n.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},91529:function(e,t,r){"use strict";r.d(t,{LH:function(){return o},Vu:function(){return i},ZC:function(){return d},bM:function(){return l},cK:function(){return f},eb:function(){return m},kP:function(){return u},rl:function(){return g},tY:function(){return s},vz:function(){return c}});var n=r(21803),a=r(15229),i=function(e){return e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):""},s=function(e){var t=Number(l(e));return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"floor",n=l(e);if(e<BigInt(10))return"0";var a=Number(n),i=a.toString()!==n,s=function(e,t,r){var n=e.split("."),a=n[0],i=n[1]||"";if(0===t){if("floor"===r){var s=parseFloat(a);return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(Math.floor(s))}var o=i.charAt(0),c=parseFloat(a);return o&&parseInt(o)>=5&&(c+=1),new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(c)}var l=i.substring(0,t);if("round"===r&&i.length>t){var u=i.charAt(t);if(u&&parseInt(u)>=5){var d=parseInt(l||"0")+1;if(d>=Math.pow(10,t)){var f=(parseInt(a)+1).toString();l="0".repeat(t);var m=parseFloat("".concat(f,".").concat(l));return new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0}).format(m)}l=d.toString().padStart(t,"0")}}l&&0!==parseInt(l)||(l=l||"0");var x=parseFloat("".concat(a,".").concat(l));return new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0}).format(x)},o=i?function(e,t){return s(n,t,r)}:"floor"===r?function(e,t){if(0===t)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(Math.floor(e));var r=e.toString().split(".");if(1===r.length)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0}).format(e);var n=r[0],a=r[1].substring(0,t),i=parseFloat("".concat(n,".").concat(a||"0"));return new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0}).format(i)}:function(e,t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:t}).format(e)};if(4!==t)return o(a,t);if(a>=1e3)return o(a,0);if(a>=10)return o(a,2);if(a>=1||a>=.001)return o(a,4);if(0===a)return"0";var c=l(e),u=c.split(".");if(u.length<2)return c;var d=u[1],f=0,m=!0,x=!1,g=void 0;try{for(var v,h=d[Symbol.iterator]();!(m=(v=h.next()).done);m=!0){var N=v.value;if("0"===N)f++;else break}}catch(e){x=!0,g=e}finally{try{m||null==h.return||h.return()}finally{if(x)throw g}}var p=d.slice(f,f+4);if("round"===r&&d.length>f+4){var b=d[f+4];if(b&&parseInt(b)>=5){for(var y=1,j=p.split("").map(function(e){return parseInt(e)}),w=j.length-1;w>=0&&y;w--)j[w]+=y,j[w]>=10?(j[w]=0,y=1):y=0;if(y){if(!(f>0))return o(a,4);f--,p="1"+"0".repeat(3)}else p=j.join("")}}return"0.0{".concat(f,"}").concat(p)},c=function(e){var t=parseInt("18",10);try{var r=e.replace(/,/g,"");return(0,n.v)(r,t)}catch(e){return BigInt(0)}},l=function(e){var t=parseInt("18",10);return(0,a.b)(e,t)},u=function(e){return e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e},d=function(e){return e>86400?"".concat(Math.floor(e/86400),"天").concat(Math.floor(e%86400/3600),"小时").concat(Math.floor(e%3600/60),"分"):e>3600?"".concat(Math.floor(e/3600),"小时").concat(Math.floor(e%3600/60),"分"):e>60?"".concat(Math.floor(e/60),"分").concat(Math.ceil(e%60),"秒"):"".concat(Math.ceil(e),"秒")},f=function(e,t){return e&&t?e:BigInt(0)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=Number(e);if(n>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t}).format(n);if(n>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r+1}).format(n);if(0===n)return"0";var a=n.toFixed(r+10),i=a.split(".");if(i.length<2)return a;var s=i[1],o=0,c=!0,l=!1,u=void 0;try{for(var d,f=s[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var m=d.value;if("0"===m)o++;else break}}catch(e){l=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}var x=s.slice(o);return"0.0{".concat(o,"}").concat(x)},x=function(e,t){return e.toFixed(t).replace(/\.?0+$/,"")},g=function(e){if(null==e||isNaN(Number(e)))return"-%";var t="string"==typeof e?parseFloat(e):e,r=Math.abs(t);return 0===r?"0%":r>=100?t.toLocaleString(void 0,{maximumFractionDigits:0})+"%":r>=10?x(t,1)+"%":r>=1?x(t,2)+"%":r>=.1?x(t,3)+"%":r>=.01?x(t,4)+"%":x(t,6)+"%"}},45099:function(e,t,r){"use strict";r.r(t);var n=r(91309),a=r(85893),i=r(67294),s=r(11163),o=r(27245),c=r(21774),l=r(34680),u=r(94193),d=r(60480),f=r(91529),m=r(92180),x=r(93950),g=r(42083),v=r(83494),h=r(78865),N=r(18289),p=r(74855),b=r(86501),y=r(93778);t.default=function(){(0,s.useRouter)().query.symbol;var e=((0,i.useContext)(y.M)||{}).token,t=(0,n._)((0,i.useState)(""),2),r=t[0],j=t[1],w=(0,n._)((0,i.useState)(null),2),F=w[0],_=w[1],I=(0,n._)((0,i.useState)(!1),2),S=I[0],D=I[1],C=(0,n._)((0,i.useState)(!1),2),M=C[0],Z=C[1],k=(0,n._)((0,i.useState)(!1),2),$=k[0],B=k[1],U=(0,m.Ty)((null==e?void 0:e.address)&&F&&S?e.address:"0x0000000000000000000000000000000000000000",F&&S?F:"0x0000000000000000000000000000000000000000"),P=U.validGovVotes,T=U.isPending,R=U.error,E=(0,x._H)(null==e?void 0:e.address),H=E.govData,L=E.isPending,V=E.error,O=(null==H?void 0:H.govVotes)&&P&&S&&F?Number(P)/Number(H.govVotes)*100:0,z=function(e){return e.toFixed(2)+"%"},W=function(){if(!r.trim()){alert("请输入有效的地址");return}if(!(0,d.U)(r)){alert("请输入有效的以太坊地址格式");return}_(r),D(!0)};return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{title:"地址治理票查询",showBackButton:!0}),(0,a.jsx)("main",{className:"flex-grow px-4",children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(l.Zb,{className:"w-full",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)(l.ll,{className:"text-lg",children:"治理票查询"})})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u._,{htmlFor:"address-input",children:"输入要查询的地址:"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(c.I,{id:"address-input",type:"text",placeholder:"0x...",value:r,onChange:function(e){return j(e.target.value)},className:"flex-1",onKeyPress:function(e){"Enter"===e.key&&W()}}),(0,a.jsx)(o.z,{onClick:W,disabled:!r.trim()||S&&(T||L),children:S&&(T||L)?"查询中...":"查询"}),S&&(0,a.jsx)(o.z,{variant:"outline",onClick:function(){j(""),_(null),D(!1)},children:"重置"})]})]}),(R||V)&&S&&(0,a.jsxs)("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:["查询出错：",(null==R?void 0:R.message)||(null==V?void 0:V.message)||"请检查地址格式或稍后重试"]}),S&&F&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"查询地址:"}),(0,a.jsx)("div",{className:"font-mono text-xs mt-1 break-all",children:F})]}),T||L?(0,a.jsx)("div",{className:"flex justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"正在查询中..."})]})}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"该地址治理票数"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,f.LH)(P||BigInt(0))}),(0,a.jsx)(p.CopyToClipboard,{text:(0,f.LH)(P||BigInt(0)),onCopy:function(e,t){t?(Z(!0),b.ZP.success("治理票数已复制"),setTimeout(function(){return Z(!1)},2e3)):b.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制治理票数",children:M?(0,a.jsx)(h.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(N.Z,{className:"h-4 w-4 text-gray-500"})})})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"占总治理票比例"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:z(O)}),(0,a.jsx)(p.CopyToClipboard,{text:z(O),onCopy:function(e,t){t?(B(!0),b.ZP.success("占比已复制"),setTimeout(function(){return B(!1)},2e3)):b.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制占比",children:$?(0,a.jsx)(h.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(N.Z,{className:"h-4 w-4 text-gray-500"})})})]})]})]}),S&&!T&&!L&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"备注："}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"票数为有效治理票；如果已经申请解除治理质押，则治理票为0"})]})]})]})})]})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{title:"地址治理票查询"}),(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(g.Z,{})})]})}},49102:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(67294),a=r(75320),i=r(85893),s=n.forwardRef((e,t)=>(0,i.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var o=s},21803:function(e,t,r){"use strict";function n(e,t){let[r,n="0"]=e.split("."),a=r.startsWith("-");if(a&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${n}`))&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>t){let[e,a,i]=[n.slice(0,t-1),n.slice(t-1,t),n.slice(t)],s=Math.round(Number(`${a}.${i}`));(n=s>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${s}`).length>t&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,t)}else n=n.padEnd(t,"0");return BigInt(`${a?"-":""}${r}${n}`)}r.d(t,{v:function(){return n}})}},function(e){e.O(0,[8239,367,3494,3950,2180,2888,9774,179],function(){return e(e.s=60611)}),_N_E=e.O()}]);