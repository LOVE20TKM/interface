(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1828],{52340:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov/stakelp",function(){return n(85124)}])},34680:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var r=n(85893),s=n(67294),a=n(40108);let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...s})});u.displayName="CardFooter"},76929:function(e,t,n){"use strict";n.d(t,{l0:function(){return u},NI:function(){return v},pf:function(){return g},Wi:function(){return f},xJ:function(){return h},lX:function(){return b},zG:function(){return j}});var r=n(85893),s=n(67294),a=n(4222),l=n(87536),i=n(40108),o=n(41850);let c=(0,n(12003).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.f,{ref:t,className:(0,i.cn)(c(),n),...s})});d.displayName=o.f.displayName;let u=l.RV,m=s.createContext({}),f=e=>{let{...t}=e;return(0,r.jsx)(m.Provider,{value:{name:t.name},children:(0,r.jsx)(l.Qr,{...t})})},x=()=>{let e=s.useContext(m),t=s.useContext(p),{getFieldState:n,formState:r}=(0,l.Gc)(),a=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},p=s.createContext({}),h=s.forwardRef((e,t)=>{let{className:n,...a}=e,l=s.useId();return(0,r.jsx)(p.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...a})})});h.displayName="FormItem";let b=s.forwardRef((e,t)=>{let{className:n,...s}=e,{error:a,formItemId:l}=x();return(0,r.jsx)(d,{ref:t,className:(0,i.cn)(a&&"text-destructive",n),htmlFor:l,...s})});b.displayName="FormLabel";let v=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,r.jsx)(a.g7,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...n})});v.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:a}=x();return(0,r.jsx)("p",{ref:t,id:a,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});g.displayName="FormDescription";let j=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e,{error:l,formMessageId:o}=x(),c=l?String(null==l?void 0:l.message):s;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",n),...a,children:c}):null});j.displayName="FormMessage"},88659:function(e,t,n){"use strict";n.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return h},i4:function(){return m},ki:function(){return u}});var r=n(85893),s=n(67294),a=n(86443),l=n(42171),i=n(15432),o=n(78865),c=n(40108);let d=a.fC;a.ZA;let u=a.B4,m=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,r.jsxs)(a.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...i,children:[s,(0,r.jsx)(a.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=a.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=a.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=a.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:n,children:s,position:l="popper",...i}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsxs)(a.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:l,...i,children:[(0,r.jsx)(f,{}),(0,r.jsx)(a.l_,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});p.displayName=a.VY.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...s})}).displayName=a.__.displayName;let h=s.forwardRef((e,t)=>{let{className:n,children:s,...l}=e;return(0,r.jsxs)(a.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(a.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(a.eT,{children:s})]})});h.displayName=a.ck.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",n),...s})}).displayName=a.Z0.displayName},67997:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},42083:function(e,t,n){"use strict";var r=n(85893),s=n(23432);t.Z=()=>(0,r.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},44576:function(e,t,n){"use strict";var r=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t,text:n="Loading"}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:n})]})}):null}},99958:function(e,t,n){"use strict";n.d(t,{Cn:function(){return a},IS:function(){return r},Tn:function(){return s}});let r=(e,t,n)=>{if(!e||!t)return"0%";let r=31536e5/Number("255"),s=BigInt("33784");if(0===r||0n===s)return console.error("配置错误: NEXT_PUBLIC_BLOCK_TIME 或 NEXT_PUBLIC_PHASE_BLOCKS 未设置"),"0%";let a=e?99n*e*99n/2000000n:BigInt(0),l=(2n*t||BigInt(0))+(n||BigInt(0));if(l===BigInt(0))return"0%";let i=Number(a)/Number(l)/(Number(s)/r)*100;return"".concat(i.toFixed(2).replace(/\.?0+$/,""),"%")},s=(e,t)=>{if(!e||!t||0n===t)return"0%";let n=31536e5/Number("255"),r=BigInt("33784");if(0===n||0n===r)return console.error("配置错误: BLOCK_TIME 或 PHASE_BLOCKS 未设置或为0"),"0%";let s=Number(e)/Number(t)/(Number(r)/n)*100;return"".concat(s.toFixed(2).replace(/\.?0+$/,""),"%")},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Number("33784")||0,r=Number("255")||0,s=e*n,a="".concat(s.toLocaleString(),"区块，约").concat(Math.ceil(Math.ceil(s*r/100)/86400),"天");return t||(a="".concat(e,"个阶段（").concat(a,")")),a}},48105:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(86501);let s=e=>!!e||(r.Am.error("请先将钱包链接 ".concat("thinkium801")),!1)},85124:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(85893),s=n(37436),a=n(67294),l=n(92321),i=n(11163),o=n(86501),c=n(1604),d=n(56312),u=n(87536);let m=(0,n(31134).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var f=n(27245),x=n(76929),p=n(88659),h=n(21774),b=n(34680),v=n(48105);let g=e=>{var t;return(null==e?void 0:e.reason)?e.reason:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)?e.data.message:(null==e?void 0:e.message)?e.message:"发生未知错误"};var j=n(91529),N=n(99958),y=n(93778),k=n(95049),w=n(19638),T=n(45551),C=n(92180),S=n(67068),z=n(64777),R=n(44576),E=n(42083),_=e=>{var t,n,s,_,P,I;let{}=e,{address:Z,chain:B}=(0,l.m)(),L=(0,a.useContext)(y.M);if(!L)throw Error("TokenContext 必须在 TokenProvider 内使用");let{token:F,setToken:A,clearToken:M}=L,{setError:V}=(0,k.V)(),{first:O}=(0,i.useRouter)().query,{pairInfo:W,isPending:H,error:$}=(0,T.sx)(Z,null==F?void 0:F.address,null==F?void 0:F.parentTokenAddress),G=null!==(t=null==W?void 0:W.balanceOfToken)&&void 0!==t?t:0n,Y=null!==(n=null==W?void 0:W.balanceOfParentToken)&&void 0!==n?n:0n,D=null!==(s=null==W?void 0:W.allowanceOfToken)&&void 0!==s?s:0n,X=null!==(_=null==W?void 0:W.allowanceOfParentToken)&&void 0!==_?_:0n,J=W&&W.pairReserveToken>0n&&W.pairReserveParentToken>0n,[U,K]=(0,a.useState)(!1),{initialStakeRound:Q,isPending:q,error:ee}=(0,C.VL)(null==F?void 0:F.address),et=(0,u.cI)({resolver:(0,d.F)((P=Y||0n,I=G||0n,c.z.object({parentToken:c.z.preprocess(e=>{if("string"!=typeof e)return e;let t=e.replace(/。/g,".");return t.startsWith(".")&&(t="0"+t),t},c.z.string().regex(/^\d+(\.\d{1,18})?$/,"请输入合法数值，最多支持18位小数").refine(e=>{let t=(0,j.vz)(e);return null!==t&&t>0n},"质押父币数不能为 0").refine(e=>{let t=(0,j.vz)(e);return null!==t&&t<=P},"质押父币数不能超过当前持有")),stakeToken:c.z.preprocess(e=>{if("string"!=typeof e)return e;let t=e.replace(/。/g,".");return t.startsWith(".")&&(t="0"+t),t},c.z.string().regex(/^\d+(\.\d{1,18})?$/,"请输入合法数值，最多支持18位小数").refine(e=>{let t=(0,j.vz)(e);return null!==t&&t>0n},"质押 token 数不能为 0").refine(e=>{let t=(0,j.vz)(e);return null!==t&&t<=I},"质押 token 数不能超过当前持有")),releasePeriod:c.z.string().min(1,"请选择解锁期")}))),defaultValues:{parentToken:"",stakeToken:"",releasePeriod:""},mode:"onChange"}),{govVotes:en,promisedWaitingPhases:er,isPending:es,error:ea}=(0,C.L)(null==F?void 0:F.address,Z),[el,ei]=(0,a.useState)(!1),[eo,ec]=(0,a.useState)(!1),{approve:ed,isWriting:eu,isConfirming:em,isConfirmed:ef,writeError:ex}=(0,w.yA)(null==F?void 0:F.address),{approve:ep,isWriting:eh,isConfirming:eb,isConfirmed:ev,writeError:eg}=(0,w.yA)(null==F?void 0:F.parentTokenAddress);async function ej(e){if((0,v.S)(B))try{let t=(0,j.vz)(e.stakeToken);if(null===t)throw Error("无效的输入格式");await ed("0x91618bc95d5069B2d7d5B42f6c1292D43ce5Ca3C",t)}catch(e){console.error("Token 授权失败",e),o.Am.error("token 授权失败，请检查输入格式")}}async function eN(e){if((0,v.S)(B))try{let t=(0,j.vz)(e.parentToken);if(null===t)throw Error("无效的输入格式");await ep("0x91618bc95d5069B2d7d5B42f6c1292D43ce5Ca3C",t)}catch(e){console.error("父币授权失败",e),o.Am.error("父币授权失败，请检查输入格式")}}(0,a.useEffect)(()=>{ef&&(ei(!0),o.Am.success("授权".concat(null==F?void 0:F.symbol,"成功")))},[ef]),(0,a.useEffect)(()=>{ev&&(ec(!0),o.Am.success("授权".concat(null==F?void 0:F.parentTokenSymbol,"成功")))},[ev]);let[ey,ek]=(0,a.useState)(!1),[ew,eT]=(0,a.useState)(!1),eC=et.watch("parentToken"),eS=et.watch("stakeToken"),ez=(0,j.vz)(eC),eR=(0,j.vz)(eS);(0,a.useEffect)(()=>{if(J&&ey&&null!==ez&&ez>0n){let e=ez*W.pairReserveToken/W.pairReserveParentToken,t=Number((0,j.bM)(e)).toFixed(12).replace(/\.?0+$/,"");et.setValue("stakeToken",t),ek(!1),eT(!1)}},[J,ey,ez,W,et]),(0,a.useEffect)(()=>{if(J&&ew&&null!==eR&&eR>0n){let e=eR*W.pairReserveParentToken/W.pairReserveToken,t=Number((0,j.bM)(e)).toFixed(12).replace(/\.?0+$/,"");et.setValue("parentToken",t),ek(!1),eT(!1)}},[J,ew,eR,W,et]),(0,a.useEffect)(()=>{ez>0n&&X>=ez?ec(!0):ec(!1)},[ez,X]),(0,a.useEffect)(()=>{eR>0n&&D>=eR?ei(!0):ei(!1)},[eR,D]);let{stakeLiquidity:eE,isWriting:e_,isConfirming:eP,isConfirmed:eI,writeError:eZ}=(0,C.Xc)();async function eB(e){if(!(0,v.S)(B))return;if(!(el&&eo)){o.Am.error("请先完成授权");return}let t=(0,j.vz)(e.stakeToken),n=(0,j.vz)(e.parentToken);if(null===t||null===n){o.Am.error("转换金额时出错，请检查输入格式");return}eE(null==F?void 0:F.address,t,n,BigInt(e.releasePeriod),Z).catch(e=>{let t=g(e);o.Am.error(t||"质押失败，请重试"),console.error("Stake failed",e)})}function eL(){o.Am.success("质押成功"),setTimeout(()=>{window.location.href="".concat("/interface","/my/?symbol=").concat(null==F?void 0:F.symbol)},2e3)}(0,a.useEffect)(()=>{eI&&((null==F?void 0:F.initialStakeRound)&&F.initialStakeRound>0?eL():K(!0))},[eI]),(0,a.useEffect)(()=>{U&&!q&&(Q||M(),eL())},[U,q]),(0,a.useEffect)(()=>{F&&0==F.initialStakeRound&&Q&&Q>0&&A({...F,initialStakeRound:Number(Q)})},[F,Q]);let{handleContractError:eF}=(0,S.S)();(0,a.useEffect)(()=>{$&&eF($,"token"),ex&&eF(ex,"stake"),eg&&eF(eg,"stake"),eZ&&eF(eZ,"stake"),ee&&eF(ee,"stake"),ea&&eF(ea,"stake")},[$,ex,eg,eZ,ee,ea]);let eA=eu||eh,eM=em||eb,eV=eA||eM||el&&eo;(0,a.useEffect)(()=>{!F||"true"!==O||q||Q||V({name:"提示：",message:"新部署的代币，需先质押获取治理票，才能后续操作"})},[F,O,q,Q]),(0,a.useEffect)(()=>{H||G||eV||!F||!F.symbol||V({name:"余额不足",message:"您当前".concat(F.symbol,"数量为0，请先获取").concat(F.symbol)}),H||Y||eV||!F||!F.parentTokenSymbol||V({name:"余额不足",message:"您当前".concat(F.parentTokenSymbol,"数量为0，请先获取").concat(F.parentTokenSymbol)})},[G,Y,F,H]);let eO=(0,a.useRef)(null),eW=(0,a.useRef)(eu);(0,a.useEffect)(()=>{if(eW.current&&!eu){var e;null===(e=eO.current)||void 0===e||e.blur()}eW.current=eu},[eu]);let[eH,e$]=(0,a.useState)(!1);return!F||es||q?(0,r.jsx)(E.Z,{}):(0,r.jsx)("div",{className:"bg-white px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-full mx-auto space-y-4",children:[(0,r.jsx)("div",{className:"w-full flex justify-between items-center",children:(0,r.jsx)(z.Z,{title:"质押获取治理票"})}),(0,r.jsx)(x.l0,{...et,children:(0,r.jsxs)("form",{onSubmit:et.handleSubmit(eB),className:"space-y-3",children:[(0,r.jsx)(b.Zb,{children:(0,r.jsx)(b.aY,{className:"p-3 md:p-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"第1步: 填写存入数量"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,r.jsx)(x.Wi,{control:et.control,name:"parentToken",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(b.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(b.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(h.I,{type:"number",placeholder:"0",...t,disabled:eV,onChange:e=>{t.onChange(e),ek(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium",children:null==F?void 0:F.parentTokenSymbol})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[[25,50,75].map(e=>(0,r.jsxs)(f.z,{variant:"outline",size:"sm",type:"button",onClick:()=>{let t=Y*BigInt(e)/100n;et.setValue("parentToken",(0,j.bM)(t)),ek(!0)},disabled:eV||Y<=0n,className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)),(0,r.jsx)(f.z,{variant:"outline",size:"sm",type:"button",onClick:()=>{et.setValue("parentToken",(0,j.bM)(Y||0n)),ek(!0)},disabled:eV||Y<=0n,className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,j.LH)(Y)," ",null==F?void 0:F.parentTokenSymbol]})]})]})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:et.control,name:"stakeToken",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(b.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(b.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(h.I,{type:"number",placeholder:"0",...t,disabled:eV,onChange:e=>{t.onChange(e),eT(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium",children:null==F?void 0:F.symbol})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[[25,50,75].map(e=>(0,r.jsxs)(f.z,{variant:"outline",size:"sm",type:"button",onClick:()=>{let t=G*BigInt(e)/100n;et.setValue("stakeToken",(0,j.bM)(t)),eT(!0)},disabled:eV||G<=0n,className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)),(0,r.jsx)(f.z,{variant:"outline",size:"sm",type:"button",onClick:()=>{et.setValue("stakeToken",(0,j.bM)(G||0n)),eT(!0)},disabled:eV||G<=0n,className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,j.LH)(G)," ",null==F?void 0:F.symbol]})]})]})}),(0,r.jsx)(x.zG,{})]})}})]}),J&&(0,r.jsxs)("div",{className:"space-y-1 text-sm mt-2",children:[(0,r.jsx)("div",{className:"text-gray-600",children:"备注：比例按当前价格计算"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-gray-600",children:eH?(0,r.jsxs)(r.Fragment,{children:["1 ",null==F?void 0:F.symbol," ="," ",(0,j.LH)(W.pairReserveParentToken*10n**18n/W.pairReserveToken)," ",null==F?void 0:F.parentTokenSymbol]}):(0,r.jsxs)(r.Fragment,{children:["1 ",null==F?void 0:F.parentTokenSymbol," ="," ",(0,j.LH)(W.pairReserveToken*10n**18n/W.pairReserveParentToken)," ",null==F?void 0:F.symbol]})}),(0,r.jsx)(f.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>e$(!eH),className:"h-6 w-6 p-0 hover:bg-gray-100 transition-colors",title:"切换比例显示",children:(0,r.jsx)(m,{className:"h-3 w-3 text-gray-500"})})]})]})]})})}),(0,r.jsx)(b.Zb,{children:(0,r.jsx)(b.aY,{className:"p-3 md:p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"第2步: 授权并存入"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",children:[(0,r.jsx)(x.Wi,{control:et.control,name:"releasePeriod",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.NI,{children:(0,r.jsxs)(p.Ph,{disabled:eV,onValueChange:e=>t.onChange(e),value:t.value,children:[(0,r.jsx)(p.i4,{className:"w-full !ring-secondary-foreground",children:(0,r.jsx)(p.ki,{placeholder:"选择解锁期"})}),(0,r.jsx)(p.Bw,{children:Array.from({length:1},(e,t)=>t+4).filter(e=>e>=er).map(e=>(0,r.jsx)(p.Ql,{value:String(e),children:(0,N.Cn)(e)},e))})]})}),(0,r.jsx)(x.pf,{children:"“解锁期” 是指，取消质押后多久才能取回代币 (注意：是从取消质押的阶段结束时开始计算)"}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-center lg:justify-end space-x-2",children:[(0,r.jsx)(f.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",ref:eO,disabled:eu||em||el,onClick:et.handleSubmit(ej),children:eu?"1.提交中...":em?"1.确认中...":el?"1.".concat(null==F?void 0:F.symbol,"已授权"):"1.授权".concat(null==F?void 0:F.symbol)}),(0,r.jsx)(f.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:!el||eh||eb||eo,onClick:et.handleSubmit(eN),children:eh?"2.提交中...":eb?"2.确认中...":eo?"2.".concat(null==F?void 0:F.parentTokenSymbol,"已授权"):"2.授权".concat(null==F?void 0:F.parentTokenSymbol)}),(0,r.jsx)(f.z,{type:"submit",className:"flex-1 lg:w-auto lg:px-4",disabled:!el||!eo||e_||eP||eI,children:e_?"3.提交中...":eP?"3.确认中...":eI?"3.已提交":"3.提交"})]})]})]})})})]})}),(0,r.jsx)(R.Z,{isLoading:eA||eM||e_||eP||q&&U,text:eA||e_?"提交交易...":"确认交易..."})]})})},P=n(67997),I=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:"质押LP"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsx)(_,{}),(0,r.jsx)("div",{className:"flex flex-col w-full p-4",children:(0,r.jsxs)("div",{className:"bg-blue-50/30 border-l-4 border-l-blue-50 rounded-r-lg p-4 mb-8 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-blue-800 pb-2",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"帮助信息"]}),(0,r.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"SL代币："}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"代币对儿由质押合约注入 Uniswap V2 流动性池，并铸造SL代币作为流动性质押凭证"}),(0,r.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"治理票："}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"所得治理票数 = SL代币数量 * 解锁期阶段数"}),(0,r.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"治理激励："}),(0,r.jsx)("div",{className:"text-sm text-blue-700 pb-1",children:"1、当轮所得治理激励 = 验证激励 + 加速激励"}),(0,r.jsx)("div",{className:"text-sm text-blue-700 pb-1",children:"2、单个地址的验证激励：当轮治理总激励 * 50% * 该地址行使验证权的治理票数 / 行使验权的治理票总数"}),(0,r.jsx)("div",{className:"text-sm text-blue-700 pb-1",children:"3、单个地址的加速激励：当轮治理总激励 * 50% * 该地址质押代币数量 / 质押代币总数量"}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"4、溢出：单个地址的加速激励 超过投票激励 2 倍以上的部分，为溢出激励，自动销毁，归入未来总激励"})]})})]})]})}},function(e){e.O(0,[5828,7569,7863,7380,4323,2888,9774,179],function(){return e(e.s=52340)}),_N_E=e.O()}]);