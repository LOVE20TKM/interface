try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="544166a0-c852-4bd6-b808-b17783c18320",e._sentryDebugIdIdentifier="sentry-dbid-544166a0-c852-4bd6-b808-b17783c18320")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{60611:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov/query",function(){return t(45099)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return d},SZ:function(){return u},Zb:function(){return c},aY:function(){return x},eW:function(){return f},ll:function(){return o}});var r=t(72253),a=t(47702),n=t(85893),l=t(67294),i=t(40108),c=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},l))});c.displayName="Card";var d=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t)},l))});d.displayName="CardHeader";var o=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t)},l))});o.displayName="CardTitle";var u=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t)},l))});u.displayName="CardDescription";var x=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("p-6 pt-0",t)},l))});x.displayName="CardContent";var f=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t)},l))});f.displayName="CardFooter"},94193:function(e,s,t){"use strict";t.d(s,{_:function(){return u}});var r=t(72253),a=t(47702),n=t(85893),l=t(67294),i=t(49102),c=t(12003),d=t(40108),o=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=l.forwardRef(function(e,s){var t=e.className,l=(0,a._)(e,["className"]);return(0,n.jsx)(i.f,(0,r._)({ref:s,className:(0,d.cn)(o(),t)},l))});u.displayName=i.f.displayName},42083:function(e,s,t){"use strict";var r=t(85893),a=t(23432);s.Z=function(){return(0,r.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},45099:function(e,s,t){"use strict";t.r(s);var r=t(91309),a=t(85893),n=t(67294),l=t(11163),i=t(27245),c=t(21774),d=t(34680),o=t(94193),u=t(60480),x=t(91529),f=t(92180),m=t(93950),N=t(42083),v=t(83494),g=t(78865),j=t(18289),h=t(74855),b=t(86501),y=t(93778);s.default=function(){(0,l.useRouter)().query.symbol;var e=((0,n.useContext)(y.M)||{}).token,s=(0,r._)((0,n.useState)(""),2),t=s[0],p=s[1],_=(0,r._)((0,n.useState)(null),2),w=_[0],C=_[1],Z=(0,r._)((0,n.useState)(!1),2),k=Z[0],P=Z[1],T=(0,r._)((0,n.useState)(!1),2),D=T[0],R=T[1],I=(0,r._)((0,n.useState)(!1),2),E=I[0],S=I[1],F=(0,f.Ty)((null==e?void 0:e.address)&&w&&k?e.address:"0x0000000000000000000000000000000000000000",w&&k?w:"0x0000000000000000000000000000000000000000"),B=F.validGovVotes,H=F.isPending,O=F.error,V=(0,m._H)(null==e?void 0:e.address),L=V.govData,M=V.isPending,q=V.error,z=(null==L?void 0:L.govVotes)&&B&&k&&w?Number(B)/Number(L.govVotes)*100:0,W=function(e){return e.toFixed(2)+"%"},X=function(){if(!t.trim()){alert("请输入有效的地址");return}if(!(0,u.U)(t)){alert("请输入有效的以太坊地址格式");return}C(t),P(!0)};return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{title:"地址治理票查询",showBackButton:!0}),(0,a.jsx)("main",{className:"flex-grow px-4",children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(d.Zb,{className:"w-full",children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)(d.ll,{className:"text-lg",children:"治理票查询"})})}),(0,a.jsx)(d.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"address-input",children:"输入要查询的地址:"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(c.I,{id:"address-input",type:"text",placeholder:"0x...",value:t,onChange:function(e){return p(e.target.value)},className:"flex-1",onKeyPress:function(e){"Enter"===e.key&&X()}}),(0,a.jsx)(i.z,{onClick:X,disabled:!t.trim()||k&&(H||M),children:k&&(H||M)?"查询中...":"查询"}),k&&(0,a.jsx)(i.z,{variant:"outline",onClick:function(){p(""),C(null),P(!1)},children:"重置"})]})]}),(O||q)&&k&&(0,a.jsxs)("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:["查询出错：",(null==O?void 0:O.message)||(null==q?void 0:q.message)||"请检查地址格式或稍后重试"]}),k&&w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"查询地址:"}),(0,a.jsx)("div",{className:"font-mono text-xs mt-1 break-all",children:w})]}),H||M?(0,a.jsx)("div",{className:"flex justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N.Z,{}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"正在查询中..."})]})}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"该地址治理票数"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,x.LH)(B||BigInt(0))}),(0,a.jsx)(h.CopyToClipboard,{text:(0,x.LH)(B||BigInt(0)),onCopy:function(e,s){s?(R(!0),b.ZP.success("治理票数已复制"),setTimeout(function(){return R(!1)},2e3)):b.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制治理票数",children:D?(0,a.jsx)(g.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(j.Z,{className:"h-4 w-4 text-gray-500"})})})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"占总治理票比例"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:W(z)}),(0,a.jsx)(h.CopyToClipboard,{text:W(z),onCopy:function(e,s){s?(S(!0),b.ZP.success("占比已复制"),setTimeout(function(){return S(!1)},2e3)):b.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制占比",children:E?(0,a.jsx)(g.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(j.Z,{className:"h-4 w-4 text-gray-500"})})})]})]})]}),k&&!H&&!M&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"备注："}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"票数为有效治理票；如果已经申请解除治理质押，则治理票为0"})]})]})]})})]})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{title:"地址治理票查询"}),(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(N.Z,{})})]})}},49102:function(e,s,t){"use strict";t.d(s,{f:function(){return i}});var r=t(67294),a=t(75320),n=t(85893),l=r.forwardRef((e,s)=>(0,n.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var i=l}},function(e){e.O(0,[8239,5115,3494,3950,2180,2888,9774,179],function(){return e(e.s=60611)}),_N_E=e.O()}]);