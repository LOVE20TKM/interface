(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1687],{1709:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});var t=s(37876);let r=e=>{var a=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:a})})}},12293:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var t=s(37876),r=s(7446);let n=()=>(0,t.jsx)(r.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var t=s(76200);class r extends t.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new r({value:e});let[s,t="0"]=e.split("."),n=s.startsWith("-");if(n&&(s=s.slice(1)),t=t.replace(/(0+)$/,""),0===a)1===Math.round(Number(`.${t}`))&&(s=`${BigInt(s)+1n}`),t="";else if(t.length>a){let[e,r,n]=[t.slice(0,a-1),t.slice(a-1,a),t.slice(a)],c=Math.round(Number(`${r}.${n}`));(t=c>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${c}`).length>a&&(t=t.slice(1),s=`${BigInt(s)+1n}`),t=t.slice(0,a)}else t=t.padEnd(a,"0");return BigInt(`${n?"-":""}${s}${t}`)}},28638:(e,a,s)=>{"use strict";s.d(a,{BT:()=>m,Wu:()=>u,ZB:()=>o,Zp:()=>i,aR:()=>d,wL:()=>x});var t=s(3576),r=s(65699),n=s(37876),c=s(14232),l=s(30684),i=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},c))});i.displayName="Card";var d=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s)},c))});d.displayName="CardHeader";var o=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s)},c))});o.displayName="CardTitle";var m=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s)},c))});m.displayName="CardDescription";var u=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("p-6 pt-0",s)},c))});u.displayName="CardContent";var x=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s)},c))});x.displayName="CardFooter"},31464:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(37876),r=s(14232),n=s(29898),c=s(20451),l=s(60154),i=s(8047),d=s(14e3),o=s(96108),m=s(48230),u=s.n(m),x=s(52372),N=s(83416),f=s(28638),h=s(1709),v=s(12293),p=s(20442);let j=e=>{var a=e.currentRound,s=((0,r.useContext)(N.N)||{}).token,n=(0,i.F)().address,l=(0,d.useRouter)(),m=(0,x.XC)((null==s?void 0:s.address)||"",a||0n,n),j=m.myVerifyingActions,y=m.isPending,g=m.error,b=(0,c.g)().handleContractError;if((0,r.useEffect)(()=>{g&&b(g,"dataviewer")},[g]),j&&1===j.length){var w=j[0].action.head.id;return l.push("/verify/action?id=".concat(w,"&symbol=").concat(null==s?void 0:s.symbol,"&auto=true")),null}if(!s||y)return(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(v.A,{})});console.log(j);var _=null==j?void 0:j.slice().sort((e,a)=>Number(e.action.head.id-a.action.head.id));return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(h.A,{title:"我需验证的行动"}),!(null==_?void 0:_.length)&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"没有待验证行动"}),_&&_.length>0&&(0,t.jsx)("div",{className:"mt-4 space-y-4",children:_.map(e=>(0,t.jsx)(f.Zp,{className:"shadow-none",children:(0,t.jsxs)(u(),{className:"relative block",href:"/verify/action?id=".concat(e.action.head.id,"&symbol=").concat(null==s?void 0:s.symbol),children:[(0,t.jsxs)(f.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.action.head.id)}),(0,t.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]}),(0,t.jsx)(f.Wu,{className:"px-3 pt-1 pb-2",children:(0,t.jsxs)("div",{className:"text-xs text-greyscale-400 mt-2 flex justify-between",children:[(0,t.jsxs)("span",{children:["总票数: ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.NJ)(e.totalVotesNum)})]}),(0,t.jsxs)("span",{children:["我的票数: ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.NJ)(e.myVotesNum)})]}),(0,t.jsxs)("span",{children:["我的占比:"," ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.Ee)(Number(10000n*e.myVotesNum/e.totalVotesNum)/100)})]})]})}),(0,t.jsx)(o.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},y=()=>{var e=(0,n.vC)(),a=e.currentRound,s=e.error,i=(0,c.g)().handleContractError;return(0,r.useEffect)(()=>{s&&i(s,"verify")},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{title:"验证"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsx)(j,{currentRound:a})})]})}},69167:(e,a,s)=>{"use strict";s.d(a,{v:()=>d});var t=s(57616),r=s(94833),n=s(14237),c=s(66655),l=s(8481),i=s(57771);async function d(e,a){let{abi:s,address:d,args:o,dataSuffix:m,functionName:u,...x}=a,N=x.account?(0,t.J)(x.account):e.account,f=(0,n.p)({abi:s,args:o,functionName:u});try{let{data:t}=await (0,l.T)(e,i.T,"call")({batch:!1,data:`${f}${m?m.replace("0x",""):""}`,to:d,...x,account:N}),n=(0,r.e)({abi:s,args:o,functionName:u,data:t||"0x"}),c=s.filter(e=>"name"in e&&e.name===a.functionName);return{result:n,request:{abi:c,address:d,args:o,dataSuffix:m,functionName:u,...x,account:N}}}catch(e){throw(0,c.j)(e,{abi:s,address:d,args:o,docsPath:"/docs/contract/simulateContract",functionName:u,sender:N?.address})}}},81675:(e,a,s)=>{"use strict";s.d(a,{v:()=>c});var t=s(69167),r=s(629),n=s(90203);async function c(e,a){let s,{abi:c,chainId:l,connector:i,...d}=a;s=a.account?a.account:(await (0,n.r)(e,{chainId:l,connector:i})).account;let o=e.getClient({chainId:l}),m=(0,r.T)(o,t.v,"simulateContract"),{result:u,request:x}=await m({...d,abi:c,account:s});return{chainId:o.chain.id,result:u,request:{...x,chainId:l}}}},94513:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return s(31464)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[3308,9374,8230,154,3096,9898,636,6593,8792],()=>a(94513)),_N_E=e.O()}]);