try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="7f148371-18ec-4ea1-930b-ed44ccf39ffe",e._sentryDebugIdIdentifier="sentry-dbid-7f148371-18ec-4ea1-930b-ed44ccf39ffe")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{36611:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex",function(){return t(91512)}])},35810:function(e,s,t){"use strict";t.d(s,{$N:function(){return v},Be:function(){return p},Vq:function(){return u},cN:function(){return b},cZ:function(){return g},fK:function(){return h},hg:function(){return m}});var a=t(72253),n=t(14932),r=t(47702),i=t(85893),l=t(67294),o=t(12854),c=t(62190),d=t(40108),u=o.fC,m=o.xz,f=o.h_;o.x8;var x=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.aV,(0,a._)({ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},n))});x.displayName=o.aV.displayName;var g=l.forwardRef(function(e,s){var t=e.className,l=e.children,u=(0,r._)(e,["className","children"]);return(0,i.jsxs)(f,{children:[(0,i.jsx)(x,{}),(0,i.jsxs)(o.VY,(0,n._)((0,a._)({ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},u),{children:[l,(0,i.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});g.displayName=o.VY.displayName;var h=function(e){var s=e.className,t=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},t))};h.displayName="DialogHeader";var b=function(e){var s=e.className,t=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};b.displayName="DialogFooter";var v=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.Dx,(0,a._)({ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t)},n))});v.displayName=o.Dx.displayName;var p=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.dk,(0,a._)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t)},n))});p.displayName=o.dk.displayName},82022:function(e,s,t){"use strict";t.d(s,{mQ:function(){return z},nU:function(){return q},dr:function(){return E},SP:function(){return S}});var a=t(72253),n=t(47702),r=t(85893),i=t(67294),l=t(36206),o=t(25360),c=t(66681),d=t(29115),u=t(75320),m=t(78990),f=t(77342),x=t(91276),g="Tabs",[h,b]=(0,o.b)(g,[c.Pc]),v=(0,c.Pc)(),[p,y]=h(g),N=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,h=(0,m.gm)(o),[b,v]=(0,f.T)({prop:a,onChange:n,defaultProp:i??"",caller:g});return(0,r.jsx)(p,{scope:t,baseId:(0,x.M)(),value:b,onValueChange:v,orientation:l,dir:h,activationMode:c,children:(0,r.jsx)(u.WV.div,{dir:h,"data-orientation":l,...d,ref:s})})});N.displayName=g;var j="TabsList",w=i.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...n}=e,i=y(j,t),l=v(t);return(0,r.jsx)(c.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,r.jsx)(u.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:s})})});w.displayName=j;var k="TabsTrigger",_=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:n=!1,...i}=e,o=y(k,t),d=v(t),m=C(o.baseId,a),f=B(o.baseId,a),x=a===o.value;return(0,r.jsx)(c.ck,{asChild:!0,...d,focusable:!n,active:x,children:(0,r.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...i,ref:s,onMouseDown:(0,l.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,l.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,l.Mj)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||n||!e||o.onValueChange(a)})})})});_.displayName=k;var I="TabsContent",T=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,forceMount:n,children:l,...o}=e,c=y(I,t),m=C(c.baseId,a),f=B(c.baseId,a),x=a===c.value,g=i.useRef(x);return i.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(d.z,{present:n||x,children:({present:t})=>(0,r.jsx)(u.WV.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!t,id:f,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&l})})});function C(e,s){return`${e}-trigger-${s}`}function B(e,s){return`${e}-content-${s}`}T.displayName=I;var A=t(40108),z=N,E=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(w,(0,a._)({ref:s,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},i))});E.displayName=w.displayName;var S=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(_,(0,a._)({ref:s,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},i))});S.displayName=_.displayName;var q=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(T,(0,a._)({ref:s,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},i))});q.displayName=T.displayName},55264:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var a=(0,t(31134).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},46611:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var a=(0,t(31134).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},26735:function(e,s,t){"use strict";t.d(s,{z:function(){return m}});var a=t(11010),n=t(72253),r=t(14932),i=t(97582),l=t(67294),o=t(62776),c=t(85794),d=t(26868),u=t(77580),m=function(e){var s=e.baseToken,t=e.targetToken,m=e.account,f="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",x=(0,d.N)(s.address,(null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",!!t),g=x.pairAddress,h=x.isLoading,b=(0,o.K)({address:m,query:{enabled:!!m&&s.isNative}}),v=b.data,p=b.isLoading,y=b.refetch,N=(0,c.hS)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m),j=N.balance,w=N.isPending,k=N.refetch,_=(0,c.hS)((null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",m),I=_.balance,T=_.isPending,C=_.refetch,B=(0,c.yG)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m,f),A=B.allowance,z=B.isPending,E=(0,c.yG)((null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",m,f),S=E.allowance,q=E.isPending,V=(0,u.bQ)(g,m),Z=V.lpBalance,L=V.isLoading,D=V.refetch,M=(0,u.QX)(g),P=M.reserve0,R=M.reserve1,F=M.isLoading,W=M.refetch,U=(0,u.Oc)(g),$=U.token0,H=U.isLoading,J=(0,u.$C)(g),K=J.token1,Q=J.isLoading,G=(0,u.A5)(g),O=G.totalSupply,X=G.isLoading,Y=G.refetch,ee=(0,l.useMemo)(function(){if(!g||!P||!R||!$||!K||!t)return{pairExists:!1,baseReserve:BigInt(0),targetReserve:BigInt(0),baseTokenIsToken0:!1};var e=s.address.toLowerCase()===$.toLowerCase(),a=e?P:R,n=e?R:P;return{pairExists:P>BigInt(0)&&R>BigInt(0),baseReserve:a,targetReserve:n,baseTokenIsToken0:e}},[g,P,R,$,K,s.address,t]),es=(0,l.useCallback)((0,a._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Promise.all([D(),W(),Y(),C()])];case 1:return e.sent(),[4,s.isNative?y():k()];case 2:return e.sent(),[3,4];case 3:return console.error("刷新流动性数据失败:",e.sent()),[3,4];case 4:return[2]}})}),[D,W,Y,C,y,k,s.isNative]);return(0,r._)((0,n._)({pairAddress:g,baseBalance:s.isNative?null==v?void 0:v.value:j,targetBalance:I,baseAllowance:s.isNative?void 0:A,targetAllowance:S,lpBalance:Z,lpTotalSupply:O,reserve0:P,reserve1:R,token0:$,token1:K},ee),{isLoading:h||p||w||T||z||q||L||F||H||Q||X,refreshLiquidityData:es})}},91512:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a=t(72253),n=t(91309),r=t(85893),i=t(67294),l=t(11163),o=t(67997),c=t(82022),d=t(83494),u=t(89126),m=t(11010),f=t(14932),x=t(97582),g=t(42130),h=t(86501),b=t(45901),v=t(56312),p=t(87536),y=t(13761),N=t(46611),j=t(55264),w=t(41664),k=t.n(w),_=t(27245),I=t(21774),T=t(34680),C=t(88659),B=t(74193),A=t(35810),z=t(91529),E=t(73591),S=t(85794),q=t(301),V=t(26735),Z=t(43032),L=t(64777),D=t(42083),M=t(44576),P=function(e,s){var t=[],a="TUSDT",n="0x47Ba4471046fC0442078CF1519924cb205F02c7a";return a&&n&&t.push({symbol:a,address:n,decimals:18,isNative:!1}),s&&e&&t.push({symbol:s,address:e,decimals:18,isNative:!1}),t},R=function(){var e,s,t=(0,g.m)().address,l=(0,Z.Z)().token,c=null==l?void 0:l.parentTokenAddress,d=null==l?void 0:l.parentTokenSymbol,u=(0,i.useMemo)(function(){return P(c,d)},[c,d]),w=(0,n._)((0,i.useState)(function(){return u.find(function(e){return"TUSDT"===e.symbol})||{symbol:d||"",address:c||"0x0000000000000000000000000000000000000000",decimals:18,isNative:!1}}),2),R=w[0],F=w[1];(0,i.useEffect)(function(){if(0!==u.length&&!u.some(function(e){return e.address===R.address})){var e=u.find(function(e){return"TUSDT"===e.symbol})||u[0];e&&F(e)}},[u,R.address]);var W=(0,i.useMemo)(function(){return l?{symbol:l.symbol,address:l.address,decimals:18,isNative:!1}:null},[l]),U=(0,V.z)({baseToken:R,targetToken:W,account:t}),$=U.baseBalance,H=U.targetBalance,J=U.baseAllowance,K=U.targetAllowance,Q=U.lpBalance,G=U.lpTotalSupply,O=(U.pairAddress,U.pairExists),X=U.baseReserve,Y=U.targetReserve,ee=U.isLoading,es=U.refreshLiquidityData,et=(0,p.cI)({resolver:(0,v.F)((e=$||BigInt(0),s=H||BigInt(0),b.Ry({baseTokenAmount:b.Z_().nonempty("请输入数量").refine(function(s){if(s.endsWith(".")||"0"===s)return!0;try{var t=(0,z.vz)(s);return t>BigInt(0)&&t<=e}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),tokenAmount:b.Z_().nonempty("请输入数量").refine(function(e){if(e.endsWith(".")||"0"===e)return!0;try{var t=(0,z.vz)(e);return t>BigInt(0)&&t<=s}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),baseTokenAddress:b.Z_()}))),defaultValues:{baseTokenAmount:"",tokenAmount:"",baseTokenAddress:R.address},mode:"onChange"});(0,i.useEffect)(function(){et.setValue("baseTokenAddress",R.address)},[R.address,et]);var ea=(0,n._)((0,i.useState)(!1),2),en=ea[0],er=ea[1],ei=(0,n._)((0,i.useState)(!1),2),el=ei[0],eo=ei[1],ec=et.watch("baseTokenAmount"),ed=et.watch("tokenAmount"),eu=(0,z.vz)(ec),em=(0,z.vz)(ed);(0,i.useEffect)(function(){if(O&&en&&eu&&eu>BigInt(0)&&X&&Y){var e=eu*Y/X,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");et.setValue("tokenAmount",s,{shouldValidate:!0}),er(!1),eo(!1)}},[en,eu,O,X,Y,et]),(0,i.useEffect)(function(){if(O&&el&&em&&em>BigInt(0)&&X&&Y){var e=em*X/Y,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");et.setValue("baseTokenAmount",s,{shouldValidate:!0}),er(!1),eo(!1)}},[el,em,O,X,Y,et]);var ef=(0,n._)((0,i.useState)(!1),2),ex=ef[0],eg=ef[1],eh=(0,n._)((0,i.useState)(!1),2),eb=eh[0],ev=eh[1];(0,i.useEffect)(function(){eu&&void 0!==J?eg(J>=eu):R.isNative?eg(!0):eg(!1)},[eu,J,R.isNative]),(0,i.useEffect)(function(){em&&void 0!==K?ev(K>=em):ev(!1)},[em,K]);var ep=(0,S.yA)(R.address),ey=ep.approve,eN=ep.isPending,ej=ep.isConfirming,ew=ep.isConfirmed,ek=ep.writeError,e_=(0,S.yA)(null==W?void 0:W.address),eI=e_.approve,eT=e_.isPending,eC=e_.isConfirming,eB=e_.isConfirmed,eA=e_.writeError,ez="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",eE=et.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ey(ez,(0,z.vz)(ec||"0"))];case 1:return e.sent(),[3,3];case 2:return console.error(e.sent()),[3,3];case 3:return[2]}})})),eS=et.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,eI(ez,(0,z.vz)(ed||"0"))];case 1:return e.sent(),[3,3];case 2:return console.error(e.sent()),[3,3];case 3:return[2]}})}));(0,i.useEffect)(function(){ew&&(eg(!0),h.Am.success("授权".concat(R.symbol,"成功")))},[ew,R.symbol]),(0,i.useEffect)(function(){eB&&(ev(!0),h.Am.success("授权".concat(null==W?void 0:W.symbol,"成功")))},[eB,null==W?void 0:W.symbol]);var eq=(0,q.X1)(),eV=eq.addLiquidity,eZ=eq.isWriting,eL=eq.isConfirming,eD=eq.isConfirmed,eM=eq.writeError,eP=(0,q.J8)(),eR=eP.addLiquidityETH,eF=eP.isWriting,eW=eP.isConfirming,eU=eP.isConfirmed,e$=eP.writeError,eH=et.handleSubmit((0,m._)(function(){var e,s,a,n,r,i,l;return(0,x.Jh)(this,function(o){switch(o.label){case 0:if(!ex||!eb)return h.Am.error("请先完成授权"),[2];if(!W)return h.Am.error("目标代币未加载"),[2];if(e=(0,z.vz)(ec||"0"),s=(0,z.vz)(ed||"0"),!e||!s||e<=BigInt(0)||s<=BigInt(0))return h.Am.error("请输入有效的数量"),[2];o.label=1;case 1:if(o.trys.push([1,6,,7]),a=BigInt(Math.floor(Date.now()/1e3)+1200),n=BigInt(Math.round(10*eX)),r=e*(BigInt(1e3)-n)/BigInt(1e3),i=s*(BigInt(1e3)-n)/BigInt(1e3),console.log("添加流动性参数:",{baseToken:R.symbol,targetToken:W.symbol,baseAmount:e.toString(),tokenAmount:s.toString(),baseAmountMin:r.toString(),tokenAmountMin:i.toString(),slippage:eX,deadline:a.toString()}),!R.isNative)return[3,3];return[4,eR(W.address,s,i,r,t,a,e)];case 2:return o.sent(),[3,5];case 3:return[4,eV(R.address,W.address,e,s,r,i,t,a)];case 4:o.sent(),o.label=5;case 5:return h.Am.success("添加流动性交易已提交"),[3,7];case 6:return console.error("添加流动性失败",l=o.sent()),e5(l,"liquidity"),[3,7];case 7:return[2]}})})),eJ=(0,n._)((0,i.useState)(!0),2),eK=eJ[0],eQ=eJ[1],eG=(0,i.useMemo)(function(){return O&&X&&Y?{baseToTarget:Y*BigInt(1e18)/X,targetToBase:X*BigInt(1e18)/Y}:null},[O,X,Y]),eO=(0,n._)((0,i.useState)(2.5),2),eX=eO[0],eY=eO[1],e0=(0,n._)((0,i.useState)(!1),2),e1=e0[0],e2=e0[1],e3=(0,n._)((0,i.useState)(""),2),e4=e3[0],e7=e3[1];(0,i.useEffect)(function(){if(eD||eU){h.Am.success("添加流动性成功！"),et.reset({baseTokenAmount:"",tokenAmount:"",baseTokenAddress:R.address}),eg(!1),ev(!1),es();var e=setTimeout(function(){es()},2e3),s=setInterval(function(){es()},3e3),t=setTimeout(function(){clearInterval(s)},1e4);return function(){clearTimeout(e),clearTimeout(t),clearInterval(s)}}},[eD,eU,et,R.address,es]);var e5=(0,E.S)().handleContractError;if((0,i.useEffect)(function(){ek&&e5(ek,"liquidity"),eA&&e5(eA,"liquidity"),eM&&e5(eM,"liquidity"),e$&&e5(e$,"liquidity")},[ek,eA,eM,e$,e5]),!l||!W||ee)return(0,r.jsx)(D.Z,{});var e6=eN||eT,e8=ej||eC,e9=eZ||eF,se=eL||eW,ss=eD||eU;return(0,r.jsxs)("div",{className:"py-6 px-2",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"底池总LP:\xa0"}),(0,r.jsx)("span",{className:"text-secondary",children:(0,z.LH)(G||BigInt(0))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"我的LP:\xa0"}),(0,r.jsxs)("span",{className:"text-secondary",children:[(0,z.LH)(Q||BigInt(0)),G&&G>BigInt(0)&&Q&&Q>BigInt(0)&&(0,r.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",(0,z.rl)(Number(Q)/Number(G)*100),")"]})]})]}),(Q||BigInt(0))>BigInt(0)&&(0,r.jsx)(k(),{href:"/dex/withdraw?baseToken=".concat(encodeURIComponent(R.symbol)),className:"inline-flex items-center gap-1 text-sm text-secondary hover:text-blue-800 transition-colors underline",title:"撤出流动性",children:"撤出"})]})]}),(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)(L.Z,{title:"流动性添加"})}),(0,r.jsx)("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl mx-auto",children:(0,r.jsx)(B.l0,(0,f._)((0,a._)({},et),{children:(0,r.jsxs)("form",{children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(B.Wi,{control:et.control,name:"baseTokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(B.xJ,{children:[(0,r.jsx)(T.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(T.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,a._)({type:"number",placeholder:"0"},s),{disabled:ee,onChange:function(e){s.onChange(e),er(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)(B.Wi,{control:et.control,name:"baseTokenAddress",render:function(e){var s=e.field;return(0,r.jsx)(B.xJ,{children:(0,r.jsx)(B.NI,{children:(0,r.jsxs)(C.Ph,{value:s.value,onValueChange:function(e){var t=u.find(function(s){return s.address===e});t&&(s.onChange(e),F(t))},disabled:ee,children:[(0,r.jsx)(C.i4,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:R.symbol})})}),(0,r.jsx)(C.Bw,{children:u.map(function(e){return(0,r.jsx)(C.Ql,{value:e.address,className:"font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-mono",children:e.symbol})})},e.address)})})]})})})}})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[[25,50].map(function(e){return(0,r.jsxs)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){var s=(null!=$?$:BigInt(0))*BigInt(e)/BigInt(100);et.setValue("baseTokenAmount",(0,z.bM)(s)),er(!0)},disabled:ee||($||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)}),(0,r.jsx)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){et.setValue("baseTokenAmount",(0,z.bM)($||BigInt(0))),er(!0)},disabled:ee||($||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)($||BigInt(0))," ",R.symbol]})]})]})}),(0,r.jsx)(B.zG,{})]})}})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(B.Wi,{control:et.control,name:"tokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(B.xJ,{children:[(0,r.jsx)(T.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(T.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,a._)({type:"number",placeholder:"0"},s),{disabled:ee,onChange:function(e){s.onChange(e),eo(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)("div",{className:"bg-white px-3 py-1.5 rounded-full border border-gray-200",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:W.symbol})})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)(H||BigInt(0))," ",W.symbol]})})]})}),(0,r.jsx)(B.zG,{})]})}})}),eG&&(0,r.jsxs)("div",{className:"space-y-1 text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"当前池价格："]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-gray-600",children:eK?(0,r.jsxs)(r.Fragment,{children:["1 ",W.symbol," = ",(0,z.LH)(eG.targetToBase)," ",R.symbol]}):(0,r.jsxs)(r.Fragment,{children:["1 ",R.symbol," = ",(0,z.LH)(eG.baseToTarget)," ",W.symbol]})}),(0,r.jsx)(_.z,{type:"button",variant:"ghost",size:"sm",onClick:function(){return eQ(!eK)},className:"h-6 w-6 p-0 hover:bg-gray-100 transition-colors",title:"切换价格显示",children:(0,r.jsx)(y.Z,{className:"h-3 w-3 text-gray-500"})})]})]}),!eG&&O&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"正在加载价格信息..."]})}),!O&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"将创建新的流动性池"]})}),(0,r.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1 mr-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4"}),"滑点上限：",eX,"%"]}),(0,r.jsxs)(A.Vq,{open:e1,onOpenChange:e2,children:[(0,r.jsx)(A.hg,{asChild:!0,children:(0,r.jsxs)(_.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs hover:bg-gray-100 transition-colors",title:"设置滑点",children:[(0,r.jsx)(j.Z,{className:"h-3 w-3"}),"设置"]})}),(0,r.jsxs)(A.cZ,{className:"sm:max-w-md",children:[(0,r.jsx)(A.fK,{children:(0,r.jsx)(A.$N,{children:"滑点设置"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"选择滑点"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[.5,1,2.5].map(function(e){return(0,r.jsxs)(_.z,{type:"button",variant:eX===e?"default":"outline",size:"sm",onClick:function(){eY(e),e7(""),e2(!1)},className:"text-xs",children:[e,"%"]},e)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"自定义滑点"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.I,{type:"number",placeholder:"输入滑点百分比",value:e4,onChange:function(e){return e7(e.target.value)},className:"flex-1",min:"0",max:"50",step:"0.1"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]}),e4&&(0,r.jsx)(_.z,{type:"button",size:"sm",onClick:function(){var e=parseFloat(e4);e>=0&&e<=50?(eY(e),e2(!1)):h.Am.error("滑点应在 0-50% 之间")},className:"w-full",children:"应用自定义滑点"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-center lg:justify-start space-x-2",children:[(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:eN||ej||ex,onClick:eE,children:eN?"1.授权中...":ej?"1.确认中...":ex?"1.".concat(R.symbol,"已授权"):"1.授权".concat(R.symbol)}),(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:!ex||eT||eC||eb,onClick:eS,children:eT?"2.授权中...":eC?"2.确认中...":eb?"2.".concat(W.symbol,"已授权"):"2.授权".concat(W.symbol)}),(0,r.jsx)(_.z,{className:"flex-1 lg:w-auto lg:px-4",onClick:eH,disabled:!ex||!eb||e9||se||ss,children:e9?"3.提交中...":se?"3.确认中...":ss?"3.已添加":"3.提交"})]})]})}))}),(0,r.jsx)(M.Z,{isLoading:e6||e8||e9||se,text:e6||e9?"提交交易...":e8?"确认授权...":"确认添加流动性..."})]})},F=t(23665),W=t(93778);function U(){var e=(0,l.useRouter)(),s=((0,i.useContext)(W.M)||{}).token,t=(0,n._)((0,i.useState)("swap"),2),m=t[0],f=t[1];return(0,i.useEffect)(function(){var s=e.query.tab;s&&["swap","liquidity","liquidity-query"].includes(s)&&f(s)},[e.query]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"交易中心",showBackButton:!0}),(0,r.jsx)("main",{className:"flex-grow px-3 sm:px-0",children:(0,r.jsxs)(c.mQ,{value:m,onValueChange:function(s){f(s);var t=(0,a._)({},e.query);t.tab=s,e.push({pathname:e.pathname,query:t},void 0,{shallow:!0})},className:"w-full max-w-2xl mx-auto",children:[(0,r.jsxs)(c.dr,{className:"grid w-full grid-cols-3 mt-2 min-w-0",children:[(0,r.jsx)(c.SP,{value:"swap",className:"min-w-0 truncate",children:"兑换"}),(0,r.jsx)(c.SP,{value:"liquidity",className:"min-w-0 truncate",children:"添加流动性"}),(0,r.jsx)(c.SP,{value:"liquidity-query",className:"min-w-0 truncate",children:"流动性查询"})]}),(0,r.jsxs)(c.nU,{value:"swap",children:[(0,r.jsx)(u.Z,{showCurrentToken:!!s&&!!s.hasEnded}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"费用说明："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"手续费为 0.3%，滑点上限为 0.5%"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsxs)(c.nU,{value:"liquidity",children:[(0,r.jsx)(R,{}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"添加流动性："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"提供流动性，可获得交易手续费分成(手续费为 0.3%)"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"LP代币："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"添加流动性后将获得 LP 代币，代表您在流动性池中的份额"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsx)(c.nU,{value:"liquidity-query",children:(0,r.jsx)(F.Z,{})})]})})]})}}},function(e){e.O(0,[8501,4463,721,246,5771,3494,3591,7013,195,3665,2888,9774,179],function(){return e(e.s=36611)}),_N_E=e.O()}]);