(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{68786:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch",function(){return t(10423)}])},27460:function(e,s,t){"use strict";var n=t(85893),a=t(67294),r=t(74855),l=t(78865),i=t(18289),c=t(86501),d=t(91529);s.Z=e=>{let{address:s,word:t,showCopyButton:o=!0,showAddress:m=!0,colorClassName:u=""}=e,[x,h]=(0,a.useState)(!1);return(0,n.jsxs)("span",{className:"flex items-center space-x-2",children:[t&&(0,n.jsx)("span",{className:"text-xs",children:t}),m&&(0,n.jsx)("span",{className:"text-xs ".concat(null!=u?u:"text-greyscale-500"),children:(0,d.Vu)(s)}),o&&(0,n.jsx)(r.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?h(!0):c.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:x?(0,n.jsx)(l.Z,{className:"h-4 w-4 ".concat(null!=u?u:"text-greyscale-500")}):(0,n.jsx)(i.Z,{className:"h-4 w-4 ".concat(null!=u?u:"text-greyscale-500")})})})]})}},44576:function(e,s,t){"use strict";var n=t(85893);t(67294);var a=t(23432);s.Z=e=>{let{isLoading:s,text:t="Loading"}=e;return s?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(a.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:t})]})}):null}},91529:function(e,s,t){"use strict";t.d(s,{LH:function(){return l},Vu:function(){return r},bM:function(){return c},cK:function(){return o},eb:function(){return m},kP:function(){return d},vz:function(){return i}});var n=t(21803),a=t(15229);let r=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",l=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let s=Number(c(e));if(e<10n)return"0";if(s>=1e5)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(s);if(s>=1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(s);if(s>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(s);{if(s>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(s);if(0===s)return"0";let e=s.toFixed(14),t=e.split(".");if(t.length<2)return e;let n=t[1],a=0;for(let e of n)if("0"===e)a++;else break;let r=n.slice(a,a+4);return"0.0{".concat(a,"}").concat(r)}},i=e=>{let s=parseInt("18",10);try{let t=e.replace(/,/g,"");return(0,n.v)(t,s)}catch(e){return console.error("parseUnits error:",e),0n}},c=e=>{let s=parseInt("18",10);return(0,a.b)(e,s)},d=e=>e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e,o=(e,s)=>e&&s?e-BigInt(s.initialStakeRound)+1n:0n,m=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=Number(e);if(n>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:s}).format(n);if(n>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t+1}).format(n);{if(0===n)return"0";let e=n.toFixed(t+10),s=e.split(".");if(s.length<2)return e;let a=s[1],r=0;for(let e of a)if("0"===e)r++;else break;let l=a.slice(r);return"0.{".concat(r,"}").concat(l)}}},10423:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var n=t(85893),a=t(67294),r=t(93778),l=t(70019),i=t(67068),c=t(37436),d=t(42083),o=t(91529),m=t(42757),u=t(37413),x=e=>{let{token:s,launchInfo:t}=e,a=Number(t.totalContributed)/Number(t.parentTokenFundraisingGoal),r=(100*a).toFixed(1),{data:l}=(0,m.O)();return t?s?(0,n.jsxs)("div",{className:"flex-col items-center px-4",children:[(0,n.jsx)("div",{className:"grid place-items-center",children:(0,n.jsx)("div",{className:"stat-title text-base mr-6 ".concat(t.hasEnded?"text-red-500":"text-secondary"),children:t.hasEnded?"发射已结束":"发射进行中"})}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pb-1",children:[(0,n.jsxs)("div",{className:"stat-title text-sm",children:[(0,n.jsxs)("span",{children:[s.parentTokenSymbol," "]}),"筹集目标"]}),(0,n.jsx)("div",{className:"stat-value text-xl",children:(0,o.LH)(t.parentTokenFundraisingGoal)})]}),(0,n.jsxs)("div",{className:"stat place-items-center pb-1",children:[(0,n.jsxs)("div",{className:"stat-title text-sm",children:[(0,n.jsxs)("span",{children:[s.symbol," "]}),"发射总量"]}),(0,n.jsx)("div",{className:"stat-value text-xl",children:"".concat((0,o.LH)(BigInt(u.v.fairLaunch)))})]})]}),(0,n.jsxs)("div",{className:"text-center text-xs mb-4 text-greyscale-500",children:["兑换比例：1 ",s.parentTokenSymbol," ="," ",(0,o.eb)((0,o.kP)((Number(u.v.fairLaunch)/Number(t.parentTokenFundraisingGoal)).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})))," ",s.symbol]}),(0,n.jsx)("div",{className:"stats w-full border",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6 ",children:"累计申购"}),(0,n.jsxs)("div",{className:"stat-value",children:[(0,n.jsx)("span",{className:"text-3xl text-secondary",children:(0,o.LH)(t.totalContributed)}),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]}),(0,n.jsxs)("div",{className:"mt-2 rounded-lg text-sm",children:[(0,n.jsx)("p",{className:"mt-2 mb-1 font-medium",children:"发射结束条件："}),(0,n.jsxs)("p",{className:"text-greyscale-600",children:["1. 累计申购达到募资目标 100%",!t.hasEnded&&"（当前 ".concat(r,"%）")]}),(0,n.jsxs)("p",{className:"text-greyscale-600",children:["2. 最后一笔申购，距离首笔达成 50%募资目标的所在区块",!t.hasEnded&&a>=.5&&"（第 ".concat(t.secondHalfStartBlock.toString(),"区块）"),"，至少",t.secondHalfMinBlocks.toString(),"个区块",!t.hasEnded&&"（当前区块：".concat(l,"）")]})]})]})}),(0,n.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 mt-4 text-sm",children:[(0,n.jsx)("p",{className:"mt-1 font-medium",children:"经济模型："}),(0,n.jsxs)("p",{children:["1. 代币总量：",(0,o.LH)(BigInt(u.v.totalSupply))]}),(0,n.jsxs)("p",{children:["2. 发射数量：",(0,o.LH)(BigInt(u.v.fairLaunch))," (10%)"]}),(0,n.jsxs)("p",{children:["3. 治理激励：",(0,o.LH)(BigInt(u.v.govRewards))," (45%)"]}),(0,n.jsxs)("p",{children:["4. 行动激励：",(0,o.LH)(BigInt(u.v.actionRewards))," (45%)"]}),(0,n.jsx)("p",{className:"mt-3 font-medium",children:"发射规则："}),(0,n.jsx)("p",{children:"1. 代币发放：按申购数量占比平均发放"}),(0,n.jsx)("p",{children:"2. 超过募集目标的父币，将按申购比例返还"})]})]}):(0,n.jsx)(d.Z,{}):(0,n.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})},h=t(27245),f=t(92321),j=t(41664),N=t.n(j),g=t(86501),p=t(64777),v=t(44576),b=e=>{let{token:s,launchInfo:t}=e,{address:r}=(0,f.m)(),{data:c}=(0,m.O)(),{contributed:u,isPending:x,error:j,refetch:b}=(0,l.ap)(null==s?void 0:s.address,r),{lastContributedBlock:y,isPending:w,error:k}=(0,l.oz)(null==s?void 0:s.address,r),S=BigInt("40")-((c?BigInt(c):0n)-(y||0n)),{withdraw:F,isPending:E,writeError:L,isConfirming:C,isConfirmed:I}=(0,l.Qc)(),Z=async()=>{if(S>0n){g.ZP.error("还需要等待 ".concat(S," 个区块才能撤回"));return}await F(null==s?void 0:s.address)};(0,a.useEffect)(()=>{I&&(g.ZP.success("撤回成功"),b())},[I]);let{handleContractError:P}=(0,i.S)();return((0,a.useEffect)(()=>{j&&P(j,"launch"),k&&P(k,"launch"),L&&P(L,"launch")},[j,k,L]),!s||x||w)?(0,n.jsx)(d.Z,{}):(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(p.Z,{title:"参与申购"}),(0,n.jsx)("div",{className:"stats w-full",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6",children:"我的申购质押"}),(0,n.jsxs)("div",{className:"stat-value text-secondary",children:[(0,o.LH)(u||0n),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]})]})}),(0,n.jsxs)("div",{className:"flex justify-center gap-4",children:[u&&u>0n&&(0,n.jsx)(h.z,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",onClick:Z,disabled:E||C||I,children:E?"提交中...":C?"确认中...":I?"已撤回":"撤回申购"}),(0,n.jsx)(h.z,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(N(),{href:"/launch/contribute?symbol=".concat(s.symbol),children:u&&u>0n?"增加申购":"去申购"})})]}),u&&u>0n&&(0,n.jsxs)("div",{className:"mt-4 text-sm text-greyscale-500 text-center",children:["申购后需等 ","40"," 个区块才能撤回（当前还需等"," ",S>0?S.toString():"0"," 个区块）"]}),(0,n.jsx)(v.Z,{isLoading:E||C,text:E?"提交交易...":"确认交易..."})]})},y=e=>{let{token:s,launchInfo:t}=e,{address:c}=(0,f.m)(),{clearToken:m}=(0,a.useContext)(r.M)||{},{contributed:x,isPending:j,error:b}=(0,l.ap)(null==s?void 0:s.address,c),{claimed:y,isPending:w,error:k}=(0,l.ur)(null==s?void 0:s.address,c),{extraRefunded:S,isPending:F,error:E}=(0,l.Vh)(null==s?void 0:s.address,c),L=t.totalContributed?BigInt(u.v.fairLaunch)*(x||0n)/BigInt(t.totalContributed):0n,{claim:C,isWriting:I,writeError:Z,isConfirming:P,isConfirmed:H}=(0,l.z7)(),T=async()=>{try{await C(null==s?void 0:s.address)}catch(e){console.error("领取失败:",e)}};(0,a.useEffect)(()=>{H?(g.ZP.success("领取成功"),null==m||m(),setTimeout(()=>{window.location.reload()},1e3)):Z&&g.ZP.error("领取失败")},[H,Z]);let{handleContractError:z}=(0,i.S)();return((0,a.useEffect)(()=>{Z&&z(Z,"launch"),k&&z(k,"launch"),E&&z(E,"launch"),b&&z(b,"launch")},[Z,k,E,b]),c)?w?(0,n.jsx)(d.Z,{}):(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(p.Z,{title:"我的领取"}),(0,n.jsx)("div",{className:"stats w-full",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6",children:"共获得"}),(0,n.jsxs)("div",{className:"stat-value text-3xl text-secondary",children:[(0,o.LH)(L),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.symbol})]})]})}),(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[0>=Number(x)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.z,{className:"w-1/2",disabled:!0,children:"未申购"}),(0,n.jsx)(h.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(N(),{href:"/launch/burn?symbol=".concat(null==s?void 0:s.symbol),children:"底池销毁"})})]}),Number(x)>0&&!y&&(0,n.jsx)(h.z,{className:"w-1/2",onClick:T,disabled:I||P||H,children:I?"领取中...":P?"确认中...":H?"已领取":"领取"}),Number(x)>0&&y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.z,{className:"w-1/2",disabled:!0,children:"已领取"}),(0,n.jsx)(h.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(N(),{href:"/launch/burn?symbol=".concat(null==s?void 0:s.symbol),children:"底池销毁"})})]})]}),Number(x)>0&&y&&(0,n.jsxs)("div",{className:"text-center text-sm my-2 text-greyscale-400",children:["我共申购了 ",(0,n.jsxs)("span",{className:"text-secondary",children:[(0,o.LH)(null!=x?x:0n)," "]}),s.parentTokenSymbol,"， 申购成功"," ",(0,n.jsx)("span",{className:"text-secondary",children:(0,o.LH)((null!=x?x:0n)-(null!=S?S:0n))})," ",s.parentTokenSymbol,"，申购返还了"," ",(0,n.jsx)("span",{className:"text-secondary",children:(0,o.LH)(null!=S?S:0n)})," ",s.parentTokenSymbol]}),(0,n.jsx)(v.Z,{isLoading:I||P,text:I?"提交交易...":"确认交易..."})]}):""},w=t(4062);function k(){let{token:e,setToken:s}=(0,a.useContext)(r.M)||{token:null,setToken:null},{launchInfo:t,isPending:o,error:m}=(0,l.zL)(e?e.address:"0x0"),{handleContractError:u}=(0,i.S)();return((0,a.useEffect)(()=>{m&&u(m,"launch")},[m]),(0,a.useEffect)(()=>{t&&e&&t.hasEnded&&!e.hasEnded&&s({...e,hasEnded:!0})},[t,e]),o||t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{title:"公平发射"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(w.Z,{}),o||!t?(0,n.jsx)(d.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{token:e,launchInfo:t}),e&&(t.hasEnded?(0,n.jsx)(y,{token:e,launchInfo:t}):(0,n.jsx)(b,{token:e,launchInfo:t}))]})]})]}):(0,n.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})}}},function(e){e.O(0,[2209,1335,6242,7863,7380,6202,4062,2888,9774,179],function(){return e(e.s=68786)}),_N_E=e.O()}]);