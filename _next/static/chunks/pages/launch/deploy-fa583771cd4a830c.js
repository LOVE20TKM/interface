(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8245],{11372:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>B});var r=s(37876),t=s(60154),n=s(16927),l=s(3576),o=s(62701),d=s(40854),c=s(4902),i=s(22442),m=s(13810),u=s(88992),f=s(8047),x=s(89099),N=s(14232),p=s(97685),h=s(77932),v=s(6960),g=s(13816),j=s(28638),y=s(92659),_=s(42038),b=s(20442),w=s(65575),C=s(40752),R=s(62288),I=s(20451),E=s(83416),F=s(12293),$=s(99574),k=i.Ik({symbol:i.Yj().nonempty("请输入代币符号").length(6,"代币符号必须是 6 个字符").regex(/^[A-Z0-9]+$/,"只能使用大写字母 A~Z 和数字 0~9").regex(/^[A-Z]/,"必须以大写字母 A~Z 开头")});function A(){var e=(0,x.useRouter)(),a=((0,N.useContext)(E.N)||{}).token,s=(0,f.F)(),t=s.address,i=s.chain,A=(0,d._)((0,N.useState)(""),2),B=A[0],L=A[1],M=(0,C.O2)(),S=M.launchToken,D=M.isPending,T=M.writeError,Z=M.isConfirming,O=M.isConfirmed,z=(0,C.Of)(a?a.address:"0x0000000000000000000000000000000000000000",t),P=z.remainingLaunchCount,J=z.isPending,V=(0,R.MZ)(a?a.address:"0x0000000000000000000000000000000000000000",t),W=V.numOfMintGovRewardByAccount,X=V.isPending,Y=Number("2")||180n,G=Number(Y)-Number(null!=W?W:0)%Number(Y),H=(0,I.g)().handleContractError;(0,N.useEffect)(()=>{T&&H(T,"launch")},[T,H]);var U=(0,u.mN)({resolver:(0,m.u)(k),defaultValues:{symbol:""}});(0,N.useEffect)(()=>{O&&e.push("/launch/?symbol=".concat("Test").concat(B))},[O,e,B]);var Q=(0,d._)((0,N.useState)(!1),2),q=Q[0],K=Q[1],ee=(0,d._)((0,N.useState)(null),2),ea=ee[0],es=ee[1];if(!a||J||X)return(0,r.jsx)(F.A,{});var er=D||Z;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.Zp,{className:"w-full border-none shadow-none rounded-none",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-2xl font-bold text-center",children:"开启子币公平发射"}),(0,r.jsxs)(j.BT,{className:"text-center",children:["创建 ",(0,r.jsx)("span",{className:"text-secondary",children:a.symbol})," 的子币"]})]}),(0,r.jsx)(y.lV,(0,o._)((0,l._)({},U),{children:(0,r.jsxs)("form",{onSubmit:U.handleSubmit(function(e){return(0,n._)(function(){return(0,c.YH)(this,function(s){switch(s.label){case 0:if(!(0,_.C)(i))return p.oR.error("请切换到正确的网络"),[2];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,new Promise((e,a)=>{es({resolve:e,reject:a}),K(!0)})];case 2:if(!s.sent())return[2];return L(e.symbol),[4,S(e.symbol,null==a?void 0:a.address)];case 3:return s.sent(),[3,5];case 4:return console.error(s.sent()),[3,5];case 5:return[2]}})})()}),children:[(0,r.jsx)(j.Wu,{className:"space-y-4",children:(0,r.jsx)(y.zB,{control:U.control,name:"symbol",render:e=>{var a=e.field;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"子币符号："}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(h.p,(0,l._)({id:"symbol",placeholder:"例如: TENNIS, FOOTBALL",disabled:er||O,className:"!ring-secondary-foreground"},a))}),(0,r.jsx)(y.Rr,{children:"只能用大写字母A~Z和数字0~9，最多 6 个字符。"}),(0,r.jsx)(y.C5,{})]})}})}),(0,r.jsx)(j.wL,{className:"flex justify-center",children:(0,r.jsx)(v.$,{className:"w-1/2",type:"submit",disabled:er||O,children:D?"提交中...":Z?"确认中...":O?"提交成功":"提交"})})]})})),(0,r.jsx)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:(0,r.jsxs)("p",{children:["公平发射募集目标：",(0,b.NJ)((0,w.oQ)("2E+25")),"个"," ",null==a?void 0:a.symbol]})})]}),(0,r.jsx)($.A,{isLoading:er,text:D?"提交交易...":"确认交易..."}),(0,r.jsx)(g.lG,{open:q,onOpenChange:e=>{e||(null==ea||ea.resolve(!1),es(null)),K(e)},children:(0,r.jsxs)(g.Cf,{children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{children:"确认开启子币发射"}),(0,r.jsxs)(g.rr,{children:["剩余可发射次数：",Number(P)," 次",(0,r.jsx)("br",{}),"再完成 ",G," 次治理奖励铸币，可增加1次"]})]}),(0,r.jsxs)(g.Es,{children:[(0,r.jsx)(v.$,{variant:"outline",onClick:()=>{K(!1),null==ea||ea.resolve(!1),es(null)},children:"取消"}),(0,r.jsx)(v.$,{onClick:()=>{K(!1),null==ea||ea.resolve(!0),es(null)},children:"确认"})]})]})})]})}function B(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.A,{title:"开启子币"}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)(A,{})})]})}},13816:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>N,Es:()=>h,L3:()=>v,c7:()=>p,lG:()=>m,rr:()=>g,zM:()=>u});var r=s(3576),t=s(62701),n=s(65699),l=s(37876),o=s(14232),d=s(26303),c=s(70672),i=s(30684),m=d.bL,u=d.l9,f=d.ZL;d.bm;var x=o.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(d.hJ,(0,r._)({ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t))});x.displayName=d.hJ.displayName;var N=o.forwardRef((e,a)=>{var s=e.className,o=e.children,m=(0,n._)(e,["className","children"]);return(0,l.jsxs)(f,{children:[(0,l.jsx)(x,{}),(0,l.jsxs)(d.UC,(0,t._)((0,r._)({ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},m),{children:[o,(0,l.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(c.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});N.displayName=d.UC.displayName;var p=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a)},s))};p.displayName="DialogHeader";var h=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},s))};h.displayName="DialogFooter";var v=o.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(d.hE,(0,r._)({ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s)},t))});v.displayName=d.hE.displayName;var g=o.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(d.VY,(0,r._)({ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s)},t))});g.displayName=d.VY.displayName},18449:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var r=s(76200);class t extends r.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new t({value:e});let[s,r="0"]=e.split("."),n=s.startsWith("-");if(n&&(s=s.slice(1)),r=r.replace(/(0+)$/,""),0===a)1===Math.round(Number(`.${r}`))&&(s=`${BigInt(s)+1n}`),r="";else if(r.length>a){let[e,t,n]=[r.slice(0,a-1),r.slice(a-1,a),r.slice(a)],l=Math.round(Number(`${t}.${n}`));(r=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>a&&(r=r.slice(1),s=`${BigInt(s)+1n}`),r=r.slice(0,a)}else r=r.padEnd(a,"0");return BigInt(`${n?"-":""}${s}${r}`)}},28638:(e,a,s)=>{"use strict";s.d(a,{BT:()=>m,Wu:()=>u,ZB:()=>i,Zp:()=>d,aR:()=>c,wL:()=>f});var r=s(3576),t=s(65699),n=s(37876),l=s(14232),o=s(30684),d=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},l))});d.displayName="Card";var c=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s)},l))});c.displayName="CardHeader";var i=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",s)},l))});i.displayName="CardTitle";var m=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("text-sm text-muted-foreground",s)},l))});m.displayName="CardDescription";var u=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("p-6 pt-0",s)},l))});u.displayName="CardContent";var f=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",s)},l))});f.displayName="CardFooter"},42038:(e,a,s)=>{"use strict";s.d(a,{C:()=>t});var r=s(97685),t=e=>!!e||(r.oR.error("请先将钱包链接 ".concat("thinkium70001")),!1)},61720:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/deploy",function(){return s(11372)}])},92659:(e,a,s)=>{"use strict";s.d(a,{lV:()=>p,MJ:()=>b,Rr:()=>w,zB:()=>v,eI:()=>y,lR:()=>_,C5:()=>C});var r=s(81110),t=s(40120),n=s(3576),l=s(62701),o=s(65699),d=s(37876),c=s(14232),i=s(82987),m=s(88992),u=s(30684),f=s(59773),x=(0,s(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=c.forwardRef((e,a)=>{var s=e.className,r=(0,o._)(e,["className"]);return(0,d.jsx)(f.b,(0,n._)({ref:a,className:(0,u.cn)(x(),s)},r))});N.displayName=f.b.displayName;var p=m.Op,h=c.createContext({}),v=e=>{var a=(0,r._)({},(0,t._)(e));return(0,d.jsx)(h.Provider,{value:{name:a.name},children:(0,d.jsx)(m.xI,(0,n._)({},a))})},g=()=>{var e=c.useContext(h),a=c.useContext(j),s=(0,m.xW)(),r=s.getFieldState,t=s.formState,l=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");var o=a.id;return(0,n._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},l)},j=c.createContext({}),y=c.forwardRef((e,a)=>{var s=e.className,r=(0,o._)(e,["className"]),t=c.useId();return(0,d.jsx)(j.Provider,{value:{id:t},children:(0,d.jsx)("div",(0,n._)({ref:a,className:(0,u.cn)("space-y-2",s)},r))})});y.displayName="FormItem";var _=c.forwardRef((e,a)=>{var s=e.className,r=(0,o._)(e,["className"]),t=g(),l=t.error,c=t.formItemId;return(0,d.jsx)(N,(0,n._)({ref:a,className:(0,u.cn)(l&&"text-destructive",s),htmlFor:c},r))});_.displayName="FormLabel";var b=c.forwardRef((e,a)=>{var s=(0,r._)({},(0,t._)(e)),l=g(),o=l.error,c=l.formItemId,m=l.formDescriptionId,u=l.formMessageId;return(0,d.jsx)(i.DX,(0,n._)({ref:a,id:c,"aria-describedby":o?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!o},s))});b.displayName="FormControl";var w=c.forwardRef((e,a)=>{var s=e.className,r=(0,o._)(e,["className"]),t=g().formDescriptionId;return(0,d.jsx)("p",(0,n._)({ref:a,id:t,className:(0,u.cn)("text-sm text-muted-foreground",s)},r))});w.displayName="FormDescription";var C=c.forwardRef((e,a)=>{var s=e.className,r=e.children,t=(0,o._)(e,["className","children"]),c=g(),i=c.error,m=c.formMessageId,f=i?String(null==i?void 0:i.message):r;return f?(0,d.jsx)("p",(0,l._)((0,n._)({ref:a,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",s)},t),{children:f})):null});C.displayName="FormMessage"},99574:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var r=s(37876),t=s(14232),n=s(7446);let l=e=>{var a=e.isLoading,s=e.text;return((0,t.useEffect)(()=>{if(a){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[a]),a)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 touch-none overscroll-none",onTouchMove:e=>{e.preventDefault()},onTouchStart:e=>{e.preventDefault()},style:{touchAction:"none"},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===s?"Loading":s})]})}):null}}},e=>{e.O(0,[3308,6547,9985,154,3096,3356,2288,636,6593,8792],()=>e(e.s=61720)),_N_E=e.O()}]);