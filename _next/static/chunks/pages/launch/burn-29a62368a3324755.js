(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5875],{7446:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var n=(0,t(11713).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},18449:(e,r,t)=>{"use strict";t.d(r,{X:()=>s});var n=t(76200);class a extends n.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function s(e,r){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new a({value:e});let[t,n="0"]=e.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),n=n.replace(/(0+)$/,""),0===r)1===Math.round(Number(`.${n}`))&&(t=`${BigInt(t)+1n}`),n="";else if(n.length>r){let[e,a,s]=[n.slice(0,r-1),n.slice(r-1,r),n.slice(r)],i=Math.round(Number(`${a}.${s}`));(n=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>r&&(n=n.slice(1),t=`${BigInt(t)+1n}`),n=n.slice(0,r)}else n=n.padEnd(r,"0");return BigInt(`${s?"-":""}${t}${n}`)}},20442:(e,r,t)=>{"use strict";t.d(r,{$w:()=>i,Ee:()=>h,Js:()=>c,LP:()=>u,NJ:()=>l,W_:()=>s,XS:()=>o,Xo:()=>d,lM:()=>f,mW:()=>m});var n=t(18449),a=t(32602),s=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",i=e=>{var r=Number(c(e));return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(r)},l=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=Number(c(e));if(e<10n)return"0";if(4!==r)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r}).format(t);if(t>=1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t);if(t>=10)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(t);if(t>=1||t>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(t);if(0===t)return"0";var n=t.toFixed(14),a=n.split(".");if(a.length<2)return n;var s=a[1],i=0,l=!0,o=!1,m=void 0;try{for(var d,u=s[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var f=d.value;if("0"===f)i++;else break}}catch(e){o=!0,m=e}finally{try{l||null==u.return||u.return()}finally{if(o)throw m}}var x=s.slice(i,i+4);return"0.0{".concat(i,"}").concat(x)},o=e=>{var r=parseInt("18",10);try{var t=e.replace(/,/g,"");return(0,n.X)(t,r)}catch(e){return console.error("parseUnits error:",e),0n}},c=e=>{var r=parseInt("18",10);return(0,a.J)(e,r)},m=e=>e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e,d=e=>e>86400?"".concat(Math.floor(e/86400),"天").concat(Math.floor(e%86400/3600),"小时").concat(Math.floor(e%3600/60),"分"):e>3600?"".concat(Math.floor(e/3600),"小时").concat(Math.floor(e%3600/60),"分"):"".concat(Math.floor(e/60),"分").concat(e%60,"秒"),u=(e,r)=>e&&r?e-BigInt(r.initialStakeRound)+1n:0n,f=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=Number(e);if(n>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r}).format(n);if(n>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t+1}).format(n);if(0===n)return"0";var a=n.toFixed(t+10),s=a.split(".");if(s.length<2)return a;var i=s[1],l=0,o=!0,c=!1,m=void 0;try{for(var d,u=i[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var f=d.value;if("0"===f)l++;else break}}catch(e){c=!0,m=e}finally{try{o||null==u.return||u.return()}finally{if(c)throw m}}var x=i.slice(l);return"0.0{".concat(l,"}").concat(x)},x=(e,r)=>e.toFixed(r).replace(/\.?0+$/,""),h=e=>{var r="string"==typeof e?parseFloat(e):e,t=Math.abs(r);return 0===t?"0%":t>=100?r.toLocaleString(void 0,{maximumFractionDigits:0})+"%":t>=10?x(r,1)+"%":t>=1?x(r,2)+"%":t>=.1?x(r,3)+"%":t>=.01?x(r,4)+"%":x(r,6)+"%"}},29680:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/burn",function(){return t(96693)}])},42038:(e,r,t)=>{"use strict";t.d(r,{C:()=>a});var n=t(97685),a=e=>!!e||(n.oR.error("请先将钱包链接 ".concat("thinkium801")),!1)},77328:(e,r,t)=>{e.exports=t(89836)},86739:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var n=(0,t(11713).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92659:(e,r,t)=>{"use strict";t.d(r,{lV:()=>v,MJ:()=>w,Rr:()=>_,zB:()=>p,eI:()=>y,lR:()=>j,C5:()=>F});var n=t(81110),a=t(40120),s=t(3576),i=t(62701),l=t(65699),o=t(37876),c=t(14232),m=t(39358),d=t(88992),u=t(30684),f=t(49794),x=(0,t(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h=c.forwardRef((e,r)=>{var t=e.className,n=(0,l._)(e,["className"]);return(0,o.jsx)(f.b,(0,s._)({ref:r,className:(0,u.cn)(x(),t)},n))});h.displayName=f.b.displayName;var v=d.Op,b=c.createContext({}),p=e=>{var r=(0,n._)({},(0,a._)(e));return(0,o.jsx)(b.Provider,{value:{name:r.name},children:(0,o.jsx)(d.xI,(0,s._)({},r))})},g=()=>{var e=c.useContext(b),r=c.useContext(N),t=(0,d.xW)(),n=t.getFieldState,a=t.formState,i=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var l=r.id;return(0,s._)({id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message")},i)},N=c.createContext({}),y=c.forwardRef((e,r)=>{var t=e.className,n=(0,l._)(e,["className"]),a=c.useId();return(0,o.jsx)(N.Provider,{value:{id:a},children:(0,o.jsx)("div",(0,s._)({ref:r,className:(0,u.cn)("space-y-2",t)},n))})});y.displayName="FormItem";var j=c.forwardRef((e,r)=>{var t=e.className,n=(0,l._)(e,["className"]),a=g(),i=a.error,c=a.formItemId;return(0,o.jsx)(h,(0,s._)({ref:r,className:(0,u.cn)(i&&"text-destructive",t),htmlFor:c},n))});j.displayName="FormLabel";var w=c.forwardRef((e,r)=>{var t=(0,n._)({},(0,a._)(e)),i=g(),l=i.error,c=i.formItemId,d=i.formDescriptionId,u=i.formMessageId;return(0,o.jsx)(m.DX,(0,s._)({ref:r,id:c,"aria-describedby":l?"".concat(d," ").concat(u):"".concat(d),"aria-invalid":!!l},t))});w.displayName="FormControl";var _=c.forwardRef((e,r)=>{var t=e.className,n=(0,l._)(e,["className"]),a=g().formDescriptionId;return(0,o.jsx)("p",(0,s._)({ref:r,id:a,className:(0,u.cn)("text-sm text-muted-foreground",t)},n))});_.displayName="FormDescription";var F=c.forwardRef((e,r)=>{var t=e.className,n=e.children,a=(0,l._)(e,["className","children"]),c=g(),m=c.error,d=c.formMessageId,f=m?String(null==m?void 0:m.message):n;return f?(0,o.jsx)("p",(0,i._)((0,s._)({ref:r,id:d,className:(0,u.cn)("text-sm font-medium text-destructive",t)},a),{children:f})):null});F.displayName="FormMessage"},96693:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var n=t(37876),a=t(14232),s=t(83416),i=t(40752),l=t(20451),o=t(16927),c=t(3576),m=t(62701),d=t(40854),u=t(4902),f=t(60513),x=t(13810),h=t(88992),v=t(8047),b=t(97685),p=t(89099),g=t(6960),N=t(77932),y=t(92659),j=t(20442),w=t(42038),_=t(9215),F=t(1709),I=t(12293),S=t(99574);let k=e=>{var r=e.token;e.launchInfo;var t=(0,v.F)(),s=t.address,i=t.chain,k=(0,p.useRouter)(),A=(0,_.lW)(null==r?void 0:r.address,s),C=A.balance,M=A.isPending,$=A.error,E=(0,_.lW)(null==r?void 0:r.parentTokenAddress,null==r?void 0:r.address),D=E.balance,R=(E.isPending,E.error),T=(0,_.PT)(null==r?void 0:r.address),P=T.totalSupply,X=(T.isPending,T.error),J=(0,a.useMemo)(()=>f.z.object({burnAmount:f.z.string().nonempty({message:"请输入销毁数量"}).refine(e=>Number(e)>0,{message:"销毁数量不能为0"})}).refine(e=>{if(!C)return!0;try{return!!(0,j.XS)(e.burnAmount)&&(0,j.XS)(e.burnAmount)<=C}catch(e){return!1}},{message:"销毁数量不能超过您的余额",path:["burnAmount"]}),[C]),U=(0,h.mN)({resolver:(0,x.u)(J),defaultValues:{burnAmount:""},mode:"onChange"}),B=U.watch("burnAmount");(0,a.useMemo)(()=>{try{return B?(0,j.XS)(B):0n}catch(e){return 0n}},[B]);var z=(0,d._)((0,a.useState)(0n),2),L=z[0],W=z[1];(0,a.useEffect)(()=>{var e=U.getValues("burnAmount");P&&D&&e&&W((0,j.XS)(e)*D/P)},[U.watch("burnAmount"),P,D]);var V=(0,_.HF)(null==r?void 0:r.address),O=V.burnForParentToken,q=V.isPending,H=V.isConfirming,G=V.isConfirmed,K=V.writeError,Q=function(){var e=(0,o._)(function(e){return(0,u.__generator)(this,function(r){switch(r.label){case 0:if(!(0,w.C)(i))return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,O((0,j.XS)(e.burnAmount))];case 2:return r.sent(),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})});return function(r){return e.apply(this,arguments)}}();(0,a.useEffect)(()=>{G&&(b.oR.success("销毁成功"),setTimeout(()=>{k.push("/dex/swap/?symbol=".concat(null==r?void 0:r.symbol,"&from=").concat(null==r?void 0:r.parentTokenSymbol))},1e3))},[G,k,null==r?void 0:r.symbol]);var Y=(0,l.g)().handleContractError;return((0,a.useEffect)(()=>{$&&Y($,"token"),R&&Y(R,"token"),X&&Y(X,"token"),K&&Y(K,"token")},[$,R,X,K,Y]),!r||M)?(0,n.jsx)(I.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(F.A,{title:"换回父币"}),(0,n.jsx)("div",{className:"stats w-full",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6",children:"父币托底池总量"}),(0,n.jsxs)("div",{className:"stat-value text-secondary mt-2",children:[(0,j.NJ)(D||0n),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:r.parentTokenSymbol})]}),(0,n.jsxs)("div",{className:"stat-desc text-sm mt-2",children:["销毁 ",r.symbol,"，可从父币托底池取回 ",r.parentTokenSymbol]})]})}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)(y.lV,(0,m._)((0,c._)({},U),{children:(0,n.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,n.jsx)(y.zB,{control:U.control,name:"burnAmount",render:e=>{var t=e.field;return(0,n.jsxs)(y.eI,{children:[(0,n.jsxs)(y.lR,{children:["要销毁的 ",r.symbol," 数量："]}),(0,n.jsx)(y.MJ,{children:(0,n.jsx)(N.p,(0,c._)({type:"number",placeholder:"请输入数量",disabled:0n>=(C||0n)||q||H,className:"!ring-secondary-foreground"},t))}),(0,n.jsx)(y.C5,{})]})}}),(0,n.jsxs)("div",{className:"flex items-center text-sm",children:[(0,n.jsxs)("span",{className:"text-greyscale-400",children:["我的 ",r.symbol,": ",(0,n.jsx)("span",{className:"text-secondary",children:(0,j.NJ)(C||0n)})]}),(0,n.jsx)(g.$,{variant:"link",size:"sm",onClick:()=>{U.setValue("burnAmount",(0,j.Js)(C||0n))},disabled:0n>=(C||0n)||q||H,className:"text-secondary",children:"全选"})]}),(0,n.jsx)("div",{className:"flex items-center justify-end text-sm my-2",children:(0,n.jsxs)("span",{className:"text-greyscale-400",children:["预计可取回 ",(0,n.jsx)("span",{className:"text-secondary",children:(0,j.NJ)(L)})," ",r.parentTokenSymbol]})}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(g.$,{className:"text-white py-2 rounded-lg",onClick:U.handleSubmit(Q),disabled:q||H||G,children:q?"提交中...":H?"确认中...":G?"交易成功":"销毁 ".concat(r.symbol,"，换回父币")})})]})})),(0,n.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-4",children:[(0,n.jsx)("p",{className:"mb-1",children:"计算公式："}),(0,n.jsxs)("p",{children:["所得 ",r.parentTokenSymbol," 数量 = 底池 ",r.parentTokenSymbol," 总量 * (销毁 ",r.symbol," 数量 /"," ",r.symbol," 总发行量)"]})]})]})]}),(0,n.jsx)(S.A,{isLoading:q||H,text:q?"提交交易...":"确认交易..."})]})};var A=t(66663);function C(){var e=((0,a.useContext)(s.N)||{}).token,r=(0,i.TU)(e?e.address:"0x0000000000000000000000000000000000000000"),t=r.launchInfo,o=r.isPending,c=r.error,m=(0,l.g)().handleContractError;return(0,a.useEffect)(()=>{c&&m(c,"launch")},[c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{title:"换回父币"}),(0,n.jsx)("main",{className:"flex-grow",children:o?(0,n.jsx)(I.A,{}):t?(0,n.jsx)(k,{token:e,launchInfo:t}):(0,n.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})})]})}},99574:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var n=t(37876);t(14232);var a=t(7446);let s=e=>{var r=e.isLoading,t=e.text;return r?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(a.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===t?"Loading":t})]})}):null}}},e=>{var r=r=>e(e.s=r);e.O(0,[6869,2569,5139,3356,636,6593,8792],()=>r(29680)),_N_E=e.O()}]);