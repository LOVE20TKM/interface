(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1687],{1709:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(37876);let s=e=>{var r=e.title;return(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-lg font-bold",children:r})})}},7446:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var a=(0,t(11713).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12293:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var a=t(37876),s=t(7446);let n=()=>(0,a.jsx)(s.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,r,t)=>{"use strict";t.d(r,{X:()=>n});var a=t(76200);class s extends a.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,r){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new s({value:e});let[t,a="0"]=e.split("."),n=t.startsWith("-");if(n&&(t=t.slice(1)),a=a.replace(/(0+)$/,""),0===r)1===Math.round(Number(`.${a}`))&&(t=`${BigInt(t)+1n}`),a="";else if(a.length>r){let[e,s,n]=[a.slice(0,r-1),a.slice(r-1,r),a.slice(r)],i=Math.round(Number(`${s}.${n}`));(a=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>r&&(a=a.slice(1),t=`${BigInt(t)+1n}`),a=a.slice(0,r)}else a=a.padEnd(r,"0");return BigInt(`${n?"-":""}${t}${a}`)}},20442:(e,r,t)=>{"use strict";t.d(r,{$w:()=>i,Js:()=>o,LP:()=>m,NJ:()=>l,W_:()=>n,XS:()=>c,lM:()=>u,mW:()=>d});var a=t(18449),s=t(32602),n=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",i=e=>{var r=Number(o(e));return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(r)},l=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=Number(o(e));if(e<10n)return"0";if(r>=1e5)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(r);if(r>=1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(r);if(r>=1||r>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(r);if(0===r)return"0";var t=r.toFixed(14),a=t.split(".");if(a.length<2)return t;var s=a[1],n=0,i=!0,l=!1,c=void 0;try{for(var d,m=s[Symbol.iterator]();!(i=(d=m.next()).done);i=!0){var u=d.value;if("0"===u)n++;else break}}catch(e){l=!0,c=e}finally{try{i||null==m.return||m.return()}finally{if(l)throw c}}var f=s.slice(n,n+4);return"0.0{".concat(n,"}").concat(f)},c=e=>{var r=parseInt("18",10);try{var t=e.replace(/,/g,"");return(0,a.X)(t,r)}catch(e){return console.error("parseUnits error:",e),0n}},o=e=>{var r=parseInt("18",10);return(0,s.J)(e,r)},d=e=>e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e,m=(e,r)=>e&&r?e-BigInt(r.initialStakeRound)+1n:0n,u=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=Number(e);if(a>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r}).format(a);if(a>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t+1}).format(a);if(0===a)return"0";var s=a.toFixed(t+10),n=s.split(".");if(n.length<2)return s;var i=n[1],l=0,c=!0,o=!1,d=void 0;try{for(var m,u=i[Symbol.iterator]();!(c=(m=u.next()).done);c=!0){var f=m.value;if("0"===f)l++;else break}}catch(e){o=!0,d=e}finally{try{c||null==u.return||u.return()}finally{if(o)throw d}}var x=i.slice(l);return"0.0{".concat(l,"}").concat(x)}},28638:(e,r,t)=>{"use strict";t.d(r,{BT:()=>m,Wu:()=>u,ZB:()=>d,Zp:()=>c,aR:()=>o,wL:()=>f});var a=t(3576),s=t(65699),n=t(37876),i=t(14232),l=t(30684),c=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},i))});c.displayName="Card";var o=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t)},i))});o.displayName="CardHeader";var d=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t)},i))});d.displayName="CardTitle";var m=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t)},i))});m.displayName="CardDescription";var u=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("p-6 pt-0",t)},i))});u.displayName="CardContent";var f=i.forwardRef((e,r)=>{var t=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t)},i))});f.displayName="CardFooter"},31464:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(37876),s=t(14232),n=t(29898),i=t(20451),l=t(66663),c=t(8047),o=t(14e3),d=t(96108),m=t(48230),u=t.n(m),f=t(52372),x=t(83416),v=t(28638),N=t(1709),h=t(12293),y=t(20442);let p=e=>{var r=e.currentRound,t=((0,s.useContext)(x.N)||{}).token,n=(0,c.F)().address,l=(0,o.useRouter)(),m=(0,f.XC)((null==t?void 0:t.address)||"",r||0n,n),p=m.myVerifyingActions,g=m.isPending,b=m.error,j=(0,i.g)().handleContractError;if((0,s.useEffect)(()=>{b&&j(b,"dataviewer")},[b]),p&&1===p.length){var w=p[0].action.head.id;return l.push("/verify/".concat(w,"?symbol=").concat(null==t?void 0:t.symbol,"&auto=true")),null}return!t||g?(0,a.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,a.jsx)(h.A,{})}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(N.A,{title:"我需验证的行动"}),!(null==p?void 0:p.length)&&(0,a.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"没有待验证行动"}),p&&p.length>0&&(0,a.jsx)("div",{className:"mt-4 space-y-4",children:null==p?void 0:p.map(e=>(0,a.jsx)(v.Zp,{className:"shadow-none",children:(0,a.jsxs)(u(),{className:"relative block",href:"/verify/".concat(e.action.head.id,"?symbol=").concat(null==t?void 0:t.symbol),children:[(0,a.jsxs)(v.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,a.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.action.head.id)}),(0,a.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.action)})]}),(0,a.jsxs)(v.Wu,{className:"px-3 pt-1 pb-2",children:[(0,a.jsx)("div",{className:"text-greyscale-500",children:e.action.body.consensus}),(0,a.jsxs)("div",{className:"text-xs text-greyscale-400 mt-2 flex justify-between",children:[(0,a.jsxs)("span",{children:["总票数: ",(0,y.NJ)(e.totalVotesNum,2)]}),(0,a.jsxs)("span",{children:["我的票数: ",(0,y.NJ)(e.myVotesNum,2)]}),(0,a.jsxs)("span",{children:["我的占比:"," ",e.totalVotesNum>0n?"".concat(Number(100n*e.myVotesNum/e.totalVotesNum),"%"):"0%"]})]})]}),(0,a.jsx)(d.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},g=()=>{var e=(0,n.vC)(),r=e.currentRound,t=e.error,c=(0,i.g)().handleContractError;return(0,s.useEffect)(()=>{t&&c(t,"verify")},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{title:"验证"}),(0,a.jsx)("main",{className:"flex-grow",children:(0,a.jsx)(p,{currentRound:r})})]})}},77328:(e,r,t)=>{e.exports=t(89836)},86739:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var a=(0,t(11713).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94513:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return t(31464)}])},96108:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var a=(0,t(11713).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[2569,9898,636,6593,8792],()=>r(94513)),_N_E=e.O()}]);