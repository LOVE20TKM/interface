try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="821271d2-ef1e-4d47-8476-fc87a3ba130d",e._sentryDebugIdIdentifier="sentry-dbid-821271d2-ef1e-4d47-8476-fc87a3ba130d")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9236],{89245:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my",function(){return t(76064)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return d},SZ:function(){return x},Zb:function(){return i},aY:function(){return m},eW:function(){return u},ll:function(){return o}});var n=t(72253),a=t(47702),r=t(85893),c=t(67294),l=t(40108),i=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},c))});i.displayName="Card";var d=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t)},c))});d.displayName="CardHeader";var o=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t)},c))});o.displayName="CardTitle";var x=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t)},c))});x.displayName="CardDescription";var m=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("p-6 pt-0",t)},c))});m.displayName="CardContent";var u=c.forwardRef(function(e,s){var t=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t)},c))});u.displayName="CardFooter"},24920:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var n=(0,t(31134).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},21338:function(e,s,t){"use strict";var n=t(91309),a=t(85893),r=t(67294),c=t(88504),l=t(93778),i=t(74089),d=t(42083);s.Z=function(e){var s=e.currentRound,t=e.roundType,o=e.showCountdown,x=(0,c.O)().data,m=(0,r.useContext)(l.M),u=m?m.token:void 0,f=!x||!u||void 0===u.voteOriginBlocks,h=(0,n._)((0,r.useState)(BigInt(0)),2),j=h[0],N=h[1],y=Number("30126")||0,v=Number("2868")||0,p=u?Number(u.voteOriginBlocks):0,g=y-(Number(x)-p)%y,b=g>0?Math.ceil(g*v/1e3):0,k=(0,n._)((0,r.useState)(b),2),w=k[0],_=k[1];(0,r.useEffect)(function(){if(x){var e=y-(Number(x)-p)%y;_(e>0?Math.ceil(e*v/1e3):0)}},[x,y,v,p]),(0,r.useEffect)(function(){s>BigInt(0)&&N(s)},[s]);var Z=null!=j?j.toString():"0";return j<=BigInt(0)?(0,a.jsx)(a.Fragment,{}):f||null==j||j<BigInt(0)?(null==j||BigInt(0),(0,a.jsx)(d.Z,{})):(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,a.jsx)("span",{className:"text-greyscale-400",children:Z}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,a.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*w/v)}),(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Z,{initialTimeLeft:b,onTick:_})}):(0,a.jsx)("span",{className:"text-greyscale-400",children:w<60?"".concat(w,"秒"):w<=300?"".concat(Math.floor(w/60),"分钟").concat(w%60,"秒"):w<3600?"".concat(Math.floor(w/60),"分钟"):"".concat(Math.floor(w/3600),"小时").concat(Math.floor(w%3600/60),"分钟")}),(0,a.jsx)("span",{className:"text-greyscale-400",children:" )"})]})})}},76064:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return T}});var n=t(91309),a=t(85893),r=t(67294),c=t(42130),l=t(41664),i=t.n(l),d=t(27245),o=t(93778),x=t(83494),m=t(64777),u=t(91529),f=t(85794),h=t(73591),j=t(42083),N=t(27460),y=t(34426),v=function(e){var s=e.token,t=(0,c.m)().address,n=(0,f.hS)(null==s?void 0:s.address,t),l=n.balance,o=n.isPending,x=n.error,v=(0,f.hS)(null==s?void 0:s.parentTokenAddress,t),p=v.balance,g=v.isPending,b=v.error,k=(0,h.S)().handleContractError;return((0,r.useEffect)(function(){x&&k(x,"token"),b&&k(b,"token")},[x,b]),s)?t?(0,a.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(m.Z,{title:"我的代币"}),(0,a.jsx)(d.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/token/transfer?symbol=".concat(s.symbol),children:"转账"})})]}),(0,a.jsxs)("div",{className:"stats bg-gray-100 w-full grid grid-cols-2 divide-x-0",children:[(0,a.jsxs)("div",{className:"stat place-items-center pb-3",children:[(0,a.jsxs)("div",{className:"stat-title text-sm flex items-center font-mono",children:["持有 ",null==s?void 0:s.symbol,(0,a.jsx)(N.Z,{address:s.address,showAddress:!1}),(0,a.jsx)(y.Z,{tokenAddress:s.address,tokenSymbol:s.symbol,tokenDecimals:s.decimals})]}),(0,a.jsx)("div",{className:"stat-value text-xl",children:o?(0,a.jsx)(j.Z,{}):(0,u.LH)(l||BigInt(0))}),(0,a.jsx)("div",{className:"stat-desc mt-0 text-xs text-greyscale-400 font-light",children:"不包含治理质押和行动参与"})]}),(0,a.jsxs)("div",{className:"stat place-items-center pb-3",children:[(0,a.jsxs)("div",{className:"stat-title text-sm flex items-center font-mono",children:["持有 ",null==s?void 0:s.parentTokenSymbol,(0,a.jsx)(N.Z,{address:s.parentTokenAddress,showAddress:!1}),(0,a.jsx)(y.Z,{tokenAddress:s.parentTokenAddress,tokenSymbol:s.parentTokenSymbol,tokenDecimals:s.decimals})]}),(0,a.jsx)("div",{className:"stat-value text-xl",children:g?(0,a.jsx)(j.Z,{}):(0,u.LH)(p||BigInt(0))}),(0,a.jsx)("div",{className:"stat-desc mt-0 text-xs text-greyscale-400 font-light"})]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,a.jsx)(m.Z,{title:"我的代币"}),(0,a.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):(0,a.jsx)(j.Z,{})},p=t(40057),g=t(4586),b=t(34680),k=t(24920),w=t(4307),_=t(93950),Z=t(20442),C=t(21338),S=function(e){var s=e.token,t=e.onActionStatusChange,n=(0,c.m)().address,l=(0,Z.Bk)().currentRound,o=(0,_.dB)((null==s?void 0:s.address)||"",n),x=o.joinedActions,f=o.isPending,y=o.error;(0,r.useEffect)(function(){t&&!f&&t(!!(x&&x.length>0))},[x,f,t]);var v=(0,h.S)().handleContractError;return(y&&v(y,"dataViewer"),f)?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"pt-4 px-4",children:[(0,a.jsx)(m.Z,{title:"我参与的行动"}),(0,a.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:(0,a.jsx)(j.Z,{})})]})}):(0,a.jsxs)("div",{className:"pt-4 px-4",children:[(0,a.jsx)(m.Z,{title:"我参与的行动"}),(0,a.jsx)(C.Z,{currentRound:l,roundType:"act"}),(null==x?void 0:x.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-4 space-y-4",children:(0,g._)(x).sort(function(e,s){return Number(s.joinedAmountOfAccount)-Number(e.joinedAmountOfAccount)}).map(function(e,t){return(0,a.jsx)(b.Zb,{className:"shadow-none",children:(0,a.jsxs)(i(),{href:"/my/myaction?id=".concat(e.action.head.id,"&symbol=").concat(null==s?void 0:s.symbol),className:"relative block",children:[(0,a.jsxs)(b.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-between items-baseline",children:[(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,a.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,a.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]}),e.votesNum>0?e.hasReward?(0,a.jsx)("span",{className:"text-secondary text-xs",children:"进行中"}):(0,a.jsx)("span",{className:"text-error text-xs",children:"无铸币激励"}):(0,a.jsx)("span",{className:"text-error text-xs",children:"未投票"})]}),(0,a.jsx)(b.aY,{className:"px-3 pt-1 pb-2",children:(0,a.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(k.Z,{className:"text-greyscale-400 mr-1 h-3 w-3 -translate-y-0.5"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:(0,a.jsx)(N.Z,{address:e.action.head.author,showCopyButton:!1,colorClassName2:"text-secondary"})})]}),e.votesNum>0&&(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票"}),(0,a.jsx)("span",{className:"text-secondary",children:(0,u.rl)(Number(e.votePercentPerTenThousand)/100)})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"我参与代币"}),(0,a.jsx)("span",{className:"text-secondary",children:(0,u.LH)(e.joinedAmountOfAccount)})]})]})}),(0,a.jsx)(w.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]},e.action.head.id)},e.action.head.id)})}),(0,a.jsx)("div",{className:"flex justify-center space-x-4 mt-4",children:(0,a.jsx)(d.z,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/my/actionrewards?symbol=".concat(null==s?void 0:s.symbol),children:"铸造 行动激励 >>"})})})]}):(0,a.jsx)("div",{className:"text-sm text-greyscale-500 text-center my-6",children:"没有参与行动，请先参与"})]})},A=t(66247),T=function(){var e=((0,r.useContext)(o.M)||{}).token,s=(0,c.m)().isConnected,t=(0,n._)((0,r.useState)(!1),2),l=t[0],u=t[1],f=(0,n._)((0,r.useState)(!1),2),h=f[0],N=f[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{title:"我的"}),(0,a.jsx)("main",{className:"flex-grow",children:s?e?e&&!e.hasEnded?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{}),(0,a.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,a.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能查看个人资产"}),(0,a.jsx)(d.z,{className:"w-1/2",asChild:!0,children:(0,a.jsx)(i(),{href:"/launch?symbol=".concat(e.symbol),children:"查看公平发射"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{token:e}),!l&&h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{token:e,onActionStatusChange:N}),(0,a.jsxs)("div",{className:"flex-col items-center p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)(m.Z,{title:"我的治理资产"}),l&&(0,a.jsx)(d.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/gov/unstake?symbol=".concat(null==e?void 0:e.symbol),children:"取消质押"})})]}),(0,a.jsx)(p.Z,{token:e,onStakeStatusChange:u})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-col items-center p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)(m.Z,{title:"我的治理资产"}),l&&(0,a.jsx)(d.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,a.jsx)(i(),{href:"/gov/unstake?symbol=".concat(null==e?void 0:e.symbol),children:"取消质押"})})]}),(0,a.jsx)(p.Z,{token:e,onStakeStatusChange:u})]}),(0,a.jsx)(S,{token:e,onActionStatusChange:N})]})]}):(0,a.jsx)(j.Z,{}):(0,a.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,a.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}}},function(e){e.O(0,[8239,367,246,6143,9443,3494,2252,3950,6127,2180,7616,8499,9061,57,2888,9774,179],function(){return e(e.s=89245)}),_N_E=e.O()}]);