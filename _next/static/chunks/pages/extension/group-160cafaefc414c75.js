try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="06cacb03-7d79-4904-b102-3034933d4dc4",e._sentryDebugIdIdentifier="sentry-dbid-06cacb03-7d79-4904-b102-3034933d4dc4")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2231],{8392:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/extension/group",function(){return n(12770)}])},35810:function(e,t,n){"use strict";n.d(t,{$N:function(){return g},Be:function(){return v},Vq:function(){return c},cN:function(){return h},cZ:function(){return x},fK:function(){return f},hg:function(){return p}});var a=n(72253),s=n(14932),r=n(47702),i=n(85893),o=n(67294),d=n(12854),l=n(62190),u=n(40108),c=d.fC,p=d.xz,m=d.h_;d.x8;var y=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.aV,(0,a._)({ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},s))});y.displayName=d.aV.displayName;var x=o.forwardRef(function(e,t){var n=e.className,o=e.children,c=(0,r._)(e,["className","children"]);return(0,i.jsxs)(m,{children:[(0,i.jsx)(y,{}),(0,i.jsxs)(d.VY,(0,s._)((0,a._)({ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},c),{children:[o,(0,i.jsxs)(d.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(l.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});x.displayName=d.VY.displayName;var f=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};f.displayName="DialogHeader";var h=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};h.displayName="DialogFooter";var g=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.Dx,(0,a._)({ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",n)},s))});g.displayName=d.Dx.displayName;var v=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.dk,(0,a._)({ref:t,className:(0,u.cn)("text-sm text-muted-foreground",n)},s))});v.displayName=d.dk.displayName},26986:function(e,t,n){"use strict";n.d(t,{OX:function(){return f},Qz:function(){return c},dy:function(){return u},iI:function(){return g},sc:function(){return x},u6:function(){return v},uh:function(){return m},ze:function(){return h}});var a=n(72253),s=n(14932),r=n(47702),i=n(85893),o=n(67294),d=n(53798),l=n(40108),u=function(e){var t=e.shouldScaleBackground,n=(0,r._)(e,["shouldScaleBackground"]);return(0,i.jsx)(d.dy.Root,(0,a._)({shouldScaleBackground:void 0===t||t},n))};u.displayName="Drawer";var c=d.dy.Trigger,p=d.dy.Portal,m=d.dy.Close,y=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.dy.Overlay,(0,a._)({ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80",n)},s))});y.displayName=d.dy.Overlay.displayName;var x=o.forwardRef(function(e,t){var n=e.className,o=e.children,u=e.overlayClassName,c=(0,r._)(e,["className","children","overlayClassName"]);return(0,i.jsxs)(p,{children:[(0,i.jsx)(y,{className:u}),(0,i.jsxs)(d.dy.Content,(0,s._)((0,a._)({ref:t,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n)},c),{children:[(0,i.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),o]}))]})});x.displayName="DrawerContent";var f=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",t)},n))};f.displayName="DrawerHeader";var h=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",t)},n))};h.displayName="DrawerFooter";var g=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.dy.Title,(0,a._)({ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n)},s))});g.displayName=d.dy.Title.displayName;var v=o.forwardRef(function(e,t){var n=e.className,s=(0,r._)(e,["className"]);return(0,i.jsx)(d.dy.Description,(0,a._)({ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n)},s))});v.displayName=d.dy.Description.displayName},83989:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var a=(0,n(31134).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},74442:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var a=(0,n(31134).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},34146:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var a=[{type:"constructor",inputs:[{name:"factory_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"},{name:"activationMinGovRatio_",type:"uint256",internalType:"uint256"},{name:"activationStakeAmount_",type:"uint256",internalType:"uint256"},{name:"joinTokenAddress_",type:"address",internalType:"address"},{name:"maxJoinAmountRatio_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"ACTIVATION_MIN_GOV_RATIO",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"ACTIVATION_STAKE_AMOUNT",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"FACTORY_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"JOIN_TOKEN_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"MAX_JOIN_AMOUNT_RATIO",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"TOKEN_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"actionId",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burnInfo",inputs:[{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"burnAmount",type:"uint256",internalType:"uint256"},{name:"burned",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"burnRewardIfNeeded",inputs:[{name:"round",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimReward",inputs:[{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"mintReward",type:"uint256",internalType:"uint256"},{name:"burnReward",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"claimRewards",inputs:[{name:"rounds",type:"uint256[]",internalType:"uint256[]"}],outputs:[{name:"claimedRounds",type:"uint256[]",internalType:"uint256[]"},{name:"mintRewards",type:"uint256[]",internalType:"uint256[]"},{name:"burnRewards",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"nonpayable"},{type:"function",name:"generatedActionRewardByGroupId",inputs:[{name:"round",type:"uint256",internalType:"uint256"},{name:"groupId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"generatedActionRewardByVerifier",inputs:[{name:"verifier",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initializeIfNeeded",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initialized",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"joinedAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"joinedAmountByAccount",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"joinedAmountTokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"reward",inputs:[{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"rewardByAccount",inputs:[{name:"round",type:"uint256",internalType:"uint256"},{name:"account",type:"address",internalType:"address"}],outputs:[{name:"mintReward",type:"uint256",internalType:"uint256"},{name:"burnReward",type:"uint256",internalType:"uint256"},{name:"claimed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"BurnReward",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"round",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ClaimReward",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"round",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"mintAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"burnAmount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Initialize",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ActionIdNotFound",inputs:[]},{type:"error",name:"AlreadyClaimed",inputs:[]},{type:"error",name:"InvalidTokenAddress",inputs:[]},{type:"error",name:"MultipleActionIdsFound",inputs:[]},{type:"error",name:"RoundNotFinished",inputs:[{name:"currentRound",type:"uint256",internalType:"uint256"}]}]},50095:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var a=[{type:"constructor",inputs:[{name:"love20Token_",type:"address",internalType:"address"},{name:"baseDivisor_",type:"uint256",internalType:"uint256"},{name:"bytesThreshold_",type:"uint256",internalType:"uint256"},{name:"multiplier_",type:"uint256",internalType:"uint256"},{name:"maxGroupNameLength_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"BASE_DIVISOR",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"BYTES_THRESHOLD",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"LOVE20_TOKEN_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"MAX_GROUP_NAME_LENGTH",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"MULTIPLIER",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"calculateMintCost",inputs:[{name:"groupName",type:"string",internalType:"string"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getApproved",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"groupNameOf",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"holdersAtIndex",inputs:[{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"holdersCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isGroupNameUsed",inputs:[{name:"groupName",type:"string",internalType:"string"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"groupName",type:"string",internalType:"string"}],outputs:[{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"mintCost",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"normalizedNameOf",inputs:[{name:"groupName",type:"string",internalType:"string"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"pure"},{type:"function",name:"ownerOf",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenByIndex",inputs:[{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"tokenIdOf",inputs:[{name:"groupName",type:"string",internalType:"string"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"tokenOfOwnerByIndex",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"tokenURI",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalBurnedForMint",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddHolder",inputs:[{name:"holder",type:"address",indexed:!0,internalType:"address"},{name:"totalHolders",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ApprovalForAll",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"Mint",inputs:[{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"groupName",type:"string",indexed:!1,internalType:"string"},{name:"normalizedName",type:"string",indexed:!1,internalType:"string"},{name:"cost",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RemoveHolder",inputs:[{name:"holder",type:"address",indexed:!0,internalType:"address"},{name:"totalHolders",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"error",name:"GroupNameAlreadyExists",inputs:[{name:"existingTokenId",type:"uint256",internalType:"uint256"}]},{type:"error",name:"GroupNameEmpty",inputs:[]},{type:"error",name:"GroupNameInvalidCharacters",inputs:[]},{type:"error",name:"GroupNameTooLong",inputs:[{name:"length",type:"uint256",internalType:"uint256"},{name:"maxLength",type:"uint256",internalType:"uint256"}]},{type:"error",name:"HolderIndexOutOfBounds",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]}]},90963:function(e,t,n){"use strict";var a=n(91309),s=n(85893),r=n(67294),i=n(27245),o=n(21774),d=n(26986);t.Z=function(e){var t=e.currentRound,n=e.maxRound,l=e.handleChangedRound,u=(0,a._)((0,r.useState)(!1),2),c=u[0],p=u[1],m=(0,a._)((0,r.useState)(""),2),y=m[0],x=m[1],f=(0,a._)((0,r.useState)(""),2),h=f[0],g=f[1],v=function(e){l(e),p(!1),x(""),g("")},N=Number(null!=n?n:t),j=Math.min(N,30),b=function(e){x(e),g("")},w=function(){var e=parseInt(y,10);if(isNaN(e)){g("请输入有效的数字");return}if(e<1){g("轮次不能小于 1");return}if(e>N){g("轮次不能超过 ".concat(N));return}v(e)},T=(0,r.useRef)(null),I=(0,r.useRef)(!1);return(0,s.jsxs)(d.dy,{open:c,onOpenChange:p,children:[(0,s.jsx)(d.Qz,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"link",className:"text-secondary no-underline pl-2 pr-1",children:"切换轮次"})}),(0,s.jsxs)(d.sc,{className:"z-[9999] min-h-[25vh]",overlayClassName:"z-[9998]",children:[(0,s.jsxs)(d.OX,{children:[(0,s.jsx)(d.iI,{}),(0,s.jsx)(d.u6,{})]}),(0,s.jsxs)("div",{className:"px-4 flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3 pb-3 border-b",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"跳到"}),(0,s.jsx)(o.I,{type:"number",min:1,max:N,value:y,onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&w()},placeholder:"1 - ".concat(N),className:"w-28 h-8 text-center"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"轮"}),(0,s.jsx)(i.z,{size:"sm",variant:"secondary",onClick:w,className:"h-8",children:"确认"})]}),h&&(0,s.jsx)("p",{className:"text-red-500 text-sm mb-2 -mt-2 text-center w-full",children:h}),(0,s.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[Array.from({length:j},function(e,t){var n=N-t;return(0,s.jsx)(i.z,{variant:"ghost",className:"w-full p-2 text-center rounded-none hover:bg-gray-100 touch-manipulation",onPointerDown:function(e){"touch"===e.pointerType?T.current=e.clientY:T.current=null,I.current=!1},onPointerMove:function(e){"touch"===e.pointerType&&null!==T.current&&Math.abs(e.clientY-T.current)>10&&(I.current=!0)},onPointerUp:function(e){"touch"===e.pointerType?(I.current||v(n),T.current=null,I.current=!1):v(n)},style:{touchAction:"manipulation"},children:(0,s.jsxs)("span",{className:"text-lg",children:["第 ",n," 轮"]})},n)}),N>30&&(0,s.jsxs)("p",{className:"text-center text-gray-400 text-sm py-2",children:["仅显示最近 ",30," 轮，更早轮次请使用上方输入框跳转"]})]})]}),(0,s.jsx)(d.ze,{children:(0,s.jsx)(d.uh,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"outline",children:"关闭"})})})]})]})}},64777:function(e,t,n){"use strict";var a=n(85893);t.Z=function(e){var t=e.title;return(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-lg font-bold",children:t})})}},42083:function(e,t,n){"use strict";var a=n(85893),s=n(23432);t.Z=function(){return(0,a.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},12770:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var a=n(72253),s=n(91309),r=n(4586),i=n(85893),o=n(67294),d=n(11163),l=n(41664),u=n.n(l),c=n(42130),p=n(93778),m=n(93566),y=n(92112),x=n(27966),f=n(42083),h=n(17301),g=n(83494),v=n(8267),N=n(86501),j=n(59271),b=n(20442),w=n(80332),T=n(21879),I=n(48886),k=n(10221),A=n(91529),M=n(27460),_=n(31134),R=(0,_.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),C=(0,_.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),B=n(74442),S=n(31664),Z=(0,_.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),D=n(27245),E=n(35810),z=function(e){var t=e.open,n=e.onOpenChange,a=e.actionId,s=e.groupId,r=e.showViewGroup,o=(0,d.useRouter)(),l=function(e){n(!1),o.push("/extension/group_op/?actionId=".concat(a,"&groupId=").concat(s.toString(),"&op=").concat(e))};return(0,i.jsx)(E.Vq,{open:t,onOpenChange:n,children:(0,i.jsxs)(E.cZ,{children:[(0,i.jsx)(E.fK,{children:(0,i.jsx)(E.$N,{children:"链群管理"})}),(0,i.jsxs)("div",{className:"space-y-2 py-4",children:[void 0!==r&&r&&(0,i.jsxs)(D.z,{variant:"outline",className:"w-full justify-start",onClick:function(){n(!1),o.push("/extension/group/?actionId=".concat(a,"&groupId=").concat(s.toString()))},children:[(0,i.jsx)(R,{className:"w-4 h-4 mr-2"}),"查看链群"]}),(0,i.jsxs)(D.z,{variant:"outline",className:"w-full justify-start",onClick:function(){return l("verify")},children:[(0,i.jsx)(C,{className:"w-4 h-4 mr-2"}),"链群打分"]}),(0,i.jsxs)(D.z,{variant:"outline",className:"w-full justify-start",onClick:function(){return l("update")},children:[(0,i.jsx)(B.Z,{className:"w-4 h-4 mr-2"}),"更新信息"]}),(0,i.jsxs)(D.z,{variant:"outline",className:"w-full justify-start",onClick:function(){return l("set_delegated")},children:[(0,i.jsx)(S.Z,{className:"w-4 h-4 mr-2"}),"设置打分代理"]}),(0,i.jsxs)(D.z,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:function(){return l("deactivate")},children:[(0,i.jsx)(Z,{className:"w-4 h-4 mr-2"}),"关闭链群"]})]})]})})},O=function(e){var t=e.actionId,n=(e.actionInfo,e.extensionAddress),a=e.groupId,r=e.account,l=(0,d.useRouter)(),c=((0,o.useContext)(p.M)||{}).token,m=(0,s._)((0,o.useState)(!1),2),y=m[0],f=m[1],h=(0,b.Bk)().currentRound,g=(0,T.Av)({extensionAddress:n,groupId:a,round:h}),_=g.groupDetail,R=g.isPending,C=g.error,B=(0,I.oi)(n,h||BigInt(0),a),S=B.count,Z=B.isPending,D=B.error,E=(0,k.Nq)(n,a),O=E.delegatedVerifier,P=(E.isPending,E.error),L=(0,j.Bk)(),q=L.currentRound,H=(L.isPending,L.error),F=(0,j.Tl)(null==c?void 0:c.address,q||BigInt(0),r,t),G=F.scoreByVerifierByActionId,V=(F.isPending,F.error),J=(0,w.s0)(null==c?void 0:c.address,t,r),U=J.isJoined,K=(J.isPending,J.error),X=(0,x.b)().handleError;if((0,o.useEffect)(function(){C&&X(C),D&&X(D),P&&X(P),H&&X(H),V&&X(V),K&&X(K)},[C,D,P,H,V,K,X]),!c)return(0,i.jsx)("div",{children:"Token信息加载中..."});if(R||!_||void 0===O)return null;var Y=r&&_.owner.toLowerCase()===r.toLowerCase(),Q=r&&"0x0000000000000000000000000000000000000000"!==O&&O.toLowerCase()===r.toLowerCase(),$=Y||Q,W=G&&G>BigInt(0);_.maxCapacity,_.totalJoinedAmount;var ee=(0,A.LH)(_.totalJoinedAmount);return(0,i.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 pt-3 pb-3 text-sm my-4",children:[!_.isActive&&(0,i.jsx)("div",{className:"mb-3 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm font-medium text-red-700",children:"当前链群已关闭！ 请及时取回代币。"}),(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-baseline",children:[(0,i.jsx)("span",{className:"text-gray-500 text-sm",children:"#"}),(0,i.jsx)("span",{className:"text-secondary text-xl font-semibold",children:a.toString()}),(0,i.jsx)("span",{className:"font-semibold text-gray-800 text-lg ml-1",children:_.groupName})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,i.jsx)(v.Z,{className:"text-greyscale-400 h-3 w-3"}),(0,i.jsx)("span",{className:"text-greyscale-400",children:(0,i.jsx)(M.Z,{address:_.owner,showCopyButton:!0})})]})]})}),(0,i.jsx)("div",{className:"space-y-2 text-sm text-gray-500 mb-1",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"",children:"参与代币数:"}),(0,i.jsx)("span",{className:"",children:ee})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"参与地址数:"}),(0,i.jsx)("span",{className:"",children:Z?"...":(null==S?void 0:S.toString())||"0"})]})]})}),r&&(0,i.jsxs)("div",{className:"mt-4 flex justify-center gap-4",children:[(0,i.jsx)(u(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?id=".concat(t,"&symbol=").concat(null==c?void 0:c.symbol),children:"行动详情 >>"}),(0,i.jsx)("span",{onClick:function(){if(!W){N.ZP.error("投票给本行动的治理者，才可投不信任票");return}l.push("/action/info?id=".concat(t,"&symbol=").concat(null==c?void 0:c.symbol,"&tab=public&tab2=distrust"))},className:"text-sm cursor-pointer ".concat(W?"text-secondary hover:text-secondary/80":"text-gray-400 cursor-not-allowed"),children:"投不信任票 >>"}),$&&(0,i.jsx)(u(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/extension/group_op?actionId=".concat(t,"&extensionAddress=").concat(n,"&groupId=").concat(a,"&op=verify&symbol=").concat(null==c?void 0:c.symbol),children:"链群打分 >>"}),!$&&(0,i.jsx)(i.Fragment,{children:U?(0,i.jsx)(u(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/my/myaction?symbol=".concat(null==c?void 0:c.symbol,"&id=").concat(t),children:"我的参与 >>"}):(0,i.jsx)(u(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/acting/join/?tab=join&groupId=".concat(a,"&id=").concat(t,"&symbol=").concat(null==c?void 0:c.symbol),children:"加入行动 >>"})})]}),(0,i.jsx)(z,{open:y,onOpenChange:f,actionId:t,groupId:a})]})},P=n(72107),L=function(e){var t=e.extensionAddress,n=e.groupId,a=(0,b.Bk)().currentRound,s=(0,T.Av)({extensionAddress:t,groupId:n,round:a}),r=s.groupDetail,d=s.isPending,l=s.error,u=(0,I.oi)(t,a||BigInt(0),n),c=u.count,p=u.isPending,m=u.error,y=(0,x.b)().handleError;if((0,o.useEffect)(function(){l&&y(l),m&&y(m)},[l,m,y]),d||p)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"flex flex-col items-center py-8",children:[(0,i.jsx)(f.Z,{}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"加载链群详情..."})]})});if(!r)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsx)("div",{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-red-500",children:"未找到链群详情"})})});var h=r.maxCapacity>BigInt(0)?Number(r.totalJoinedAmount)/Number(r.maxCapacity):0,g=r.remainingCapacity>BigInt(0)?Number(r.remainingCapacity)/Number(r.maxCapacity):0;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("div",{className:"text-sm mb-2",children:"链群描述:"}),(0,i.jsx)("div",{className:"leading-loose bg-gray-50 p-2 rounded-md",children:(0,i.jsx)(P.L,{text:r.description,preserveLineBreaks:!0})})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"链群服务者:"}),(0,i.jsx)("span",{children:(0,i.jsx)(M.Z,{address:r.owner,showCopyButton:!0})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"最大容量:"}),(0,i.jsx)("span",{className:"font-mono pr-2",children:r.maxCapacity>BigInt(0)?(0,A.LH)(r.maxCapacity):"不限"})]}),r.maxCapacity>BigInt(0)&&(0,i.jsxs)("div",{className:"col-span-1 md:col-span-2  text-gray-600 bg-gray-100 rounded ",children:[(0,i.jsxs)("div",{className:"text-xs px-3 pt-2 pb-1",children:["剩余容量 ",(0,A.LH)(r.remainingCapacity)," (",(0,A.rl)(100*g),")"]}),(0,i.jsxs)("div",{className:"text-xs px-3 pt-0 pb-2",children:["已参与代币 ",(0,A.LH)(r.totalJoinedAmount)," (",(0,A.rl)(100*h),")"]})]})]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"单地址最小参与代币数:"}),(0,i.jsx)("span",{className:"font-mono pr-2",children:(0,A.LH)(r.actualMinJoinAmount,4,"ceil")})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"单地址最大参与代币数:"}),(0,i.jsx)("span",{className:"font-mono pr-2",children:r.maxJoinAmount>BigInt(0)?(0,A.LH)(r.maxJoinAmount):"不限"})]}),r.maxJoinAmount!==r.actionMaxJoinAmount&&(0,i.jsx)("div",{className:"col-span-1 md:col-span-2",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-100 rounded px-3 py-2",children:["扩展行动限制 最大参与代币数 ",(0,A.LH)(r.actionMaxJoinAmount)]})})]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"当前参与地址数:"}),(0,i.jsx)("span",{className:"font-mono pr-2",children:(null==c?void 0:c.toString())||"0"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between md:max-w-xs",children:[(0,i.jsx)("span",{className:"text-sm",children:"最大地址数限制:"}),(0,i.jsx)("span",{className:"font-mono pr-2",children:r.maxAccounts>BigInt(0)?r.maxAccounts.toString():"不限"})]})]})})]})})},q=n(10915),H=n(67516),F=n(8945),G=n(37742),V="0x6c720b8a9c4803E7D78849E10fe535d862ACbfD1";function J(e){var t=e.extensionAddress,n=e.round,a=e.groupId,s=(0,o.useMemo)(function(){return t&&n&&a?[{address:V,abi:F.l,functionName:"distrustRateByGroupId",args:[t,n,a]},{address:V,abi:F.l,functionName:"capacityDecayRateByGroupId",args:[t,n,a]}]:[]},[t,n,a]),r=(0,H.N)({contracts:s,query:{enabled:s.length>0}}),i=r.data,d=r.isPending,l=r.error,u=(0,o.useMemo)(function(){var e,t,n,a;return!i||i.length<2?{distrustRate:void 0,capacityDecayRate:void 0}:{distrustRate:(null===(e=i[0])||void 0===e?void 0:e.status)==="success"?(0,G.Z)(null===(t=i[0])||void 0===t?void 0:t.result):void 0,capacityDecayRate:(null===(n=i[1])||void 0===n?void 0:n.status)==="success"?(0,G.Z)(null===(a=i[1])||void 0===a?void 0:a.result):void 0}},[i]),c=(0,o.useMemo)(function(){return 0!==s.length&&d},[s.length,d]);return{distrustRate:u.distrustRate,capacityDecayRate:u.capacityDecayRate,isPending:c,error:l}}var U=n(90963),K=n(64777),X=function(e){var t=e.extensionAddress,n=e.groupId,r=(0,d.useRouter)(),l=((0,o.useContext)(p.M)||{}).token,c=(0,j.Bk)(),m=c.currentRound,y=c.isPending,g=c.error,v=r.query.round,N=(0,s._)((0,o.useState)(m-BigInt(1)||BigInt(1)),2),b=N[0],w=N[1];(0,o.useEffect)(function(){if(v&&!isNaN(Number(v))){var e=BigInt(v);m&&e<m&&w(e)}else m&&m>BigInt(0)&&w(m-BigInt(1))},[v,m]);var T=(0,k.Jf)(t,b,n),I=T.verifiedAccountCount,_=T.isPending,R=T.error,C=(0,q.M)({extensionAddress:t,round:b,groupId:n}),B=C.accountRewardRecords,S=C.isPending,Z=C.error,D=J({extensionAddress:t,round:b,groupId:n}),E=D.distrustRate,z=D.capacityDecayRate,O=D.isPending,P=D.error,L=(0,x.b)().handleError;if((0,o.useEffect)(function(){g&&L(g),Z&&L(Z),R&&L(R),P&&L(P)},[g,Z,R,P,L]),y||!m||S&&void 0===B||_&&void 0===B)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"flex flex-col items-center py-8",children:[(0,i.jsx)(f.Z,{}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"加载激励记录..."})]})});if(!l)return(0,i.jsx)("div",{children:"Token信息加载中..."});var H=(null==B?void 0:B.reduce(function(e,t){return e+t.mintReward},BigInt(0)))||BigInt(0),F=(null==B?void 0:B.reduce(function(e,t){return e+t.finalScore},BigInt(0)))||BigInt(0),G=(null==B?void 0:B.reduce(function(e,t){return e+t.joinedAmount},BigInt(0)))||BigInt(0),V=(null==B?void 0:B.map(function(e,t){var n=e.mintReward,a=H>BigInt(0)?Number(n)/Number(H)*100:0,s=F>BigInt(0)?Number(e.finalScore)/Number(F)*100:0;return{account:e.account,joinedAmount:e.joinedAmount,joinedRound:e.joinedRound,originScore:e.originScore,finalScore:e.finalScore,finalScorePercentage:s,mintReward:e.mintReward,totalReward:n,rewardPercentage:a,trialProvider:e.trialProvider,originalIndex:t}}).sort(function(e,t){return e.finalScore>t.finalScore?-1:e.finalScore<t.finalScore?1:0}))||[];return(0,i.jsxs)("div",{className:"relative pb-4",children:[b===BigInt(0)&&(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-center text-sm text-greyscale-500",children:"暂无激励数据"})}),(0,i.jsx)("div",{className:"flex items-center",children:b>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K.Z,{title:"第 ".concat(b.toString()," 轮")}),(0,i.jsx)("span",{className:"text-sm text-greyscale-500 ml-2",children:"("}),(0,i.jsx)(U.Z,{currentRound:m-BigInt(1)||BigInt(0),maxRound:m+BigInt(1),handleChangedRound:function(e){var t=BigInt(e);w(t);var n=(0,a._)({},r.query);n.round=t.toString(),r.push({pathname:r.pathname,query:n},void 0,{shallow:!0})}}),(0,i.jsx)("span",{className:"text-sm text-greyscale-500",children:")"})]})}),function(){if(b<=BigInt(0)||O)return null;var e=void 0!==E?100*parseFloat((0,A.bM)(E)):0,t=void 0!==z?100*parseFloat((0,A.bM)(z)):0,n=e>0,a=t>0;if(!n&&!a)return null;var s="string"==typeof r.query.actionId?r.query.actionId:void 0,o=(null==l?void 0:l.symbol)||("string"==typeof r.query.symbol?r.query.symbol:""),d=s?"/action/info/?symbol=".concat(encodeURIComponent(o),"&id=").concat(s,"&tab=public&tab2=distrust"):void 0;return(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)(h.Z,{type:"error",message:(0,i.jsxs)("div",{className:"space-y-1 text-red-600",children:[n&&(0,i.jsx)("div",{children:d?(0,i.jsxs)(u(),{href:d,className:"underline underline-offset-2 hover:text-red-700",children:["本链群第 ",b.toString()," 轮，被投不信任票，不信任率",(0,A.rl)(e)]}):(0,i.jsxs)(i.Fragment,{children:["本链群第 ",b.toString()," 轮，被投不信任票，不信任率",(0,A.rl)(e)]})}),a&&(0,i.jsxs)("div",{children:["本链群第 ",b.toString()," 轮，服务者容量不足，验证衰减率",(0,A.rl)(t)]})]})})})}(),S&&(0,i.jsx)("div",{className:"flex justify-center py-8",children:(0,i.jsx)(f.Z,{})}),Z&&(0,i.jsxs)("div",{className:"alert alert-error",children:[(0,i.jsx)("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,i.jsx)("span",{children:"加载激励数据失败"})]}),!S&&!Z&&b>0&&(0===V.length?(0,i.jsx)("div",{className:"text-center text-sm text-greyscale-400 p-4",children:"该轮次没有地址记录"}):(0,i.jsxs)("table",{className:"table w-full",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,i.jsx)("th",{className:"pl-0 pr-[2px] w-[1%] whitespace-nowrap text-center",children:" "}),(0,i.jsx)("th",{className:"pl-0 pr-1 text-left",children:"成员 / 加入轮次"}),(0,i.jsx)("th",{className:"px-1 text-right",children:"参与代币"}),(0,i.jsx)("th",{className:"px-1 text-right",children:"得分"}),(0,i.jsx)("th",{className:"px-1 text-right",children:"激励"})]})}),(0,i.jsxs)("tbody",{children:[V.map(function(e,t){var n=e.trialProvider&&"0x0000000000000000000000000000000000000000"!==e.trialProvider&&"0x0"!==e.trialProvider,a=b>=m,s=b>m||b===m&&void 0!==I&&e.originalIndex>=Number(I);return(0,i.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,i.jsx)("td",{className:"pl-0 pr-[2px] w-[1%] whitespace-nowrap text-center text-greyscale-400 tabular-nums",children:t+1}),(0,i.jsxs)("td",{className:"pl-0 pr-1",children:[(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)(M.Z,{address:e.account,showCopyButton:!0})}),(0,i.jsxs)("div",{className:"text-xs text-greyscale-400 mt-0.5",children:["第",e.joinedRound.toString(),"轮",n&&(0,i.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-100 text-blue-600 rounded",children:"体验"})]})]}),(0,i.jsx)("td",{className:"px-1 text-right",children:(0,i.jsx)("div",{className:"font-mono",children:(0,A.LH)(e.joinedAmount)})}),(0,i.jsx)("td",{className:"px-1 text-right",children:s?(0,i.jsx)("div",{className:"text-greyscale-500",children:"未验证"}):(0,i.jsx)("div",{className:"font-mono",children:Number(e.originScore).toString()})}),(0,i.jsx)("td",{className:"px-1 text-right",children:a?(0,i.jsx)("div",{className:"text-greyscale-500",children:"未生成"}):(0,i.jsx)("div",{className:"font-mono text-secondary",children:(0,A.LH)(e.totalReward)})})]},"".concat(e.account,"-").concat(t))}),(0,i.jsxs)("tr",{className:"border-t-1 border-gray-300",children:[(0,i.jsx)("td",{className:"pl-0 pr-[1px] w-[1%] whitespace-nowrap text-center text-greyscale-400",children:"-"}),(0,i.jsx)("td",{className:"pl-0 pr-1 text-left",children:"合计"}),(0,i.jsx)("td",{className:"px-1 text-right",children:(0,i.jsx)("div",{className:"font-mono",children:(0,A.LH)(G)})}),(0,i.jsx)("td",{className:"px-1 text-right text-greyscale-400",children:"-"}),(0,i.jsx)("td",{className:"px-1 text-right",children:b>=m?(0,i.jsx)("div",{className:"text-greyscale-500",children:"未生成"}):(0,i.jsx)("div",{className:"font-mono",children:(0,A.LH)(H)})})]})]})]}))]})},Y=n(89176),Q=n(83989),$=(0,_.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),W=(0,_.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),ee=function(e){e.extensionAddress;var t=e.groupId,n=e.actionId,a=(0,d.useRouter)();return(0,i.jsxs)("div",{className:"bg-white rounded-lg px-4 py-2 space-y-3",children:[(0,i.jsxs)("div",{onClick:function(){var e=a.query.symbol;a.push("/extension/group_trial?groupId=".concat(t.toString(),"&actionId=").concat(n.toString()).concat(e?"&symbol=".concat(e):""))},className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg hover:border-secondary hover:bg-secondary/5 transition-all group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(Y.Z,{className:"w-5 h-5 text-secondary"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium",children:"体验模式"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400 group-hover:text-secondary group-hover:translate-x-1 transition-all"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg opacity-50 cursor-not-allowed",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)($,{className:"w-5 h-5 text-greyscale-400"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium text-greyscale-400",children:"链群红包"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg opacity-50 cursor-not-allowed",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(W,{className:"w-5 h-5 text-greyscale-400"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium text-greyscale-400",children:"链群通知"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400"})]})]})},et=function(e){var t=e.actionId,n=e.groupId,a=e.showViewGroup,s=(0,d.useRouter)(),r=function(e){s.push("/extension/group_op/?actionId=".concat(t,"&groupId=").concat(n.toString(),"&op=").concat(e))};return(0,i.jsxs)("div",{className:"bg-white rounded-lg px-4 py-2 space-y-3",children:[void 0!==a&&a&&(0,i.jsxs)("div",{onClick:function(){s.push("/extension/group/?actionId=".concat(t,"&groupId=").concat(n.toString()))},className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg hover:border-secondary hover:bg-secondary/5 transition-all group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(R,{className:"w-5 h-5 text-secondary"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium",children:"查看链群"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400 group-hover:text-secondary group-hover:translate-x-1 transition-all"})]}),(0,i.jsxs)("div",{onClick:function(){return r("update")},className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg hover:border-secondary hover:bg-secondary/5 transition-all group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(B.Z,{className:"w-5 h-5 text-secondary"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium",children:"更新信息"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400 group-hover:text-secondary group-hover:translate-x-1 transition-all"})]}),(0,i.jsxs)("div",{onClick:function(){return r("set_delegated")},className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg hover:border-secondary hover:bg-secondary/5 transition-all group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(S.Z,{className:"w-5 h-5 text-secondary"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium",children:"设置打分代理"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400 group-hover:text-secondary group-hover:translate-x-1 transition-all"})]}),(0,i.jsxs)("div",{onClick:function(){return r("deactivate")},className:"flex items-center justify-between py-3 px-4 border border-greyscale-200 rounded-lg transition-all group cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(Z,{className:"w-5 h-5 text-red-600"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"text-base font-medium text-red-600",children:"关闭链群"})})]}),(0,i.jsx)(Q.Z,{className:"w-5 h-5 text-greyscale-400"})]})]})},en=function(){var e=(0,d.useRouter)(),t=e.query,n=t.groupId,l=t.tab,v=((0,o.useContext)(p.M)||{}).token,N=(0,c.m)().address,b=(0,s._)((0,o.useState)("detail"),2),w=b[0],I=b[1],k=e.query.actionId?BigInt(e.query.actionId):void 0,M=n?BigInt(n):void 0,_=(0,m.dI)(null==v?void 0:v.address,k||BigInt(0)),R=_.actionInfo,C=_.isPending,B=_.error,S=(0,y.kz)({tokenAddress:null==v?void 0:v.address,actionInfo:R}),Z=S.contractInfo,D=S.isPending,E=S.error,z=null==Z?void 0:Z.extension,P=(0,j.Bk)(),q=P.currentRound,H=P.isPending,F=P.error,G=J({extensionAddress:z,round:q,groupId:M}),V=G.distrustRate,U=G.capacityDecayRate,K=G.isPending,Y=G.error,Q=(0,o.useMemo)(function(){return q?q+BigInt(1):void 0},[q]),$=(0,T.Av)({extensionAddress:z,groupId:M,round:Q}),W=$.groupDetail,en=$.isPending,ea=$.error,es=(0,x.b)().handleError;(0,o.useEffect)(function(){B&&es(B),E&&es(E),ea&&es(ea),F&&es(F),Y&&es(Y)},[B,E,ea,F,Y,es]);var er=N&&W&&W.owner.toLowerCase()===N.toLowerCase();(0,o.useEffect)(function(){if(l&&["detail","rewards","apps","management"].includes(l)){if("management"!==l||er)I(l);else{I("detail");var t=(0,a._)({},e.query);t.tab="detail",e.replace({pathname:e.pathname,query:t},void 0,{shallow:!0})}}},[l,er,e]);var ei=[{key:"detail",label:"链群详情"},{key:"rewards",label:"信息公示"},{key:"apps",label:"链群应用"}].concat((0,r._)(er?[{key:"management",label:"链群管理"}]:[])),eo=function(t){I(t);var n=(0,a._)({},e.query);n.tab=t,e.push({pathname:e.pathname,query:n},void 0,{shallow:!0})};return M?C||D||en?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsxs)("div",{className:"flex flex-col items-center py-12",children:[(0,i.jsx)(f.Z,{}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"加载链群信息..."})]})}):R&&z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{title:"链群详情",showBackButton:!0}),(0,i.jsx)("main",{className:"flex-grow",children:(0,i.jsxs)("div",{className:"px-4 pt-0 pb-3",children:[(0,i.jsx)(O,{actionId:k,actionInfo:R,extensionAddress:z,groupId:M,account:N}),function(){if(!q||q<=BigInt(0)||H||K)return null;var e,t=void 0!==V?100*parseFloat((0,A.bM)(V)):0,n=void 0!==U?100*parseFloat((0,A.bM)(U)):0,a=t>0,s=n>0;if(!a&&!s)return null;var r=null==R?void 0:null===(e=R.head)||void 0===e?void 0:e.id,o=r?"/action/info/?symbol=".concat(null==v?void 0:v.symbol,"&id=").concat(r.toString(),"&tab=public&tab2=distrust"):void 0;return(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)(h.Z,{type:"error",message:(0,i.jsxs)("div",{className:"space-y-1 text-red-600",children:[a&&(0,i.jsx)("div",{children:o?(0,i.jsxs)(u(),{href:o,className:"underline underline-offset-2 hover:text-red-700",children:["本链群第 ",q.toString()," 轮，被投不信任票，不信任率",(0,A.rl)(t)]}):(0,i.jsxs)(i.Fragment,{children:["本链群第 ",q.toString()," 轮，被投不信任票，不信任率",(0,A.rl)(t)]})}),s&&(0,i.jsxs)("div",{children:["本链群第 ",q.toString()," 轮，服务者容量不足，验证衰减率",(0,A.rl)(n)]})]})})})}(),(0,i.jsx)("div",{className:"flex border-b border-gray-200 mb-4",children:ei.map(function(e){return(0,i.jsx)("button",{onClick:function(){return eo(e.key)},className:"flex-1 px-2 py-2 text-sm font-medium border-b-2 transition-colors ".concat(w===e.key?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"),children:e.label},e.key)})}),function(){switch(w){case"detail":return(0,i.jsx)(L,{extensionAddress:z,groupId:M});case"rewards":return(0,i.jsx)(X,{extensionAddress:z,groupId:M});case"apps":return(0,i.jsx)(ee,{extensionAddress:z,groupId:M,actionId:k});case"management":return(0,i.jsx)(et,{actionId:k,groupId:M});default:return null}}()]})})]}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)(h.Z,{type:"error",message:"未找到行动或扩展信息"})}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)(h.Z,{type:"error",message:"缺少必要参数：需要 actionId 和 groupId"})})}}},function(e){e.O(0,[8501,4463,3798,3494,2112,5611,7966,8945,6097,8886,5293,7974,1879,2888,9774,179],function(){return e(e.s=8392)}),_N_E=e.O()}]);