try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d78ea882-7da3-4a0d-bf71-81c7fcc17280",e._sentryDebugIdIdentifier="sentry-dbid-d78ea882-7da3-4a0d-bf71-81c7fcc17280")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9776],{26560:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/extension/group_trial",function(){return n(81976)}])},82022:function(e,t,n){"use strict";n.d(t,{mQ:function(){return T},nU:function(){return B},dr:function(){return S},SP:function(){return Z}});var r=n(72253),s=n(47702),i=n(85893),a=n(67294),o=n(36206),c=n(25360),l=n(66681),u=n(29115),d=n(75320),f=n(78990),m=n(77342),x=n(91276),h="Tabs",[g,p]=(0,c.b)(h,[l.Pc]),b=(0,l.Pc)(),[y,v]=g(h),j=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:l="automatic",...u}=e,g=(0,f.gm)(c),[p,b]=(0,m.T)({prop:r,onChange:s,defaultProp:a??"",caller:h});return(0,i.jsx)(y,{scope:n,baseId:(0,x.M)(),value:p,onValueChange:b,orientation:o,dir:g,activationMode:l,children:(0,i.jsx)(d.WV.div,{dir:g,"data-orientation":o,...u,ref:t})})});j.displayName=h;var N="TabsList",w=a.forwardRef((e,t)=>{let{__scopeTabs:n,loop:r=!0,...s}=e,a=v(N,n),o=b(n);return(0,i.jsx)(l.fC,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:(0,i.jsx)(d.WV.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});w.displayName=N;var C="TabsTrigger",k=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,c=v(C,n),u=b(n),f=P(c.baseId,r),m=E(c.baseId,r),x=r===c.value;return(0,i.jsx)(l.ck,{asChild:!0,...u,focusable:!s,active:x,children:(0,i.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:f,...a,ref:t,onMouseDown:(0,o.Mj)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(r)}),onKeyDown:(0,o.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(r)}),onFocus:(0,o.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||s||!e||c.onValueChange(r)})})})});k.displayName=C;var I="TabsContent",_=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,forceMount:s,children:o,...c}=e,l=v(I,n),f=P(l.baseId,r),m=E(l.baseId,r),x=r===l.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.jsx)(u.z,{present:s||x,children:({present:n})=>(0,i.jsx)(d.WV.div,{"data-state":x?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":f,hidden:!n,id:m,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&o})})});function P(e,t){return`${e}-trigger-${t}`}function E(e,t){return`${e}-content-${t}`}_.displayName=I;var A=n(40108),T=j,S=a.forwardRef(function(e,t){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(w,(0,r._)({ref:t,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},a))});S.displayName=w.displayName;var Z=a.forwardRef(function(e,t){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(k,(0,r._)({ref:t,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},a))});Z.displayName=k.displayName;var B=a.forwardRef(function(e,t){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(_,(0,r._)({ref:t,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},a))});B.displayName=_.displayName},37864:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(0,n(31134).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},27460:function(e,t,n){"use strict";var r=n(91309),s=n(85893),i=n(67294),a=n(74855),o=n(78865),c=n(18289),l=n(86501),u=n(91529);t.Z=function(e){var t=e.address,n=e.word,d=e.showCopyButton,f=e.showCopyLast4Button,m=e.showAddress,x=void 0===m||m,h=e.colorClassName,g=void 0===h?"":h,p=e.colorClassName2,b=void 0===p?"":p,y=(0,r._)((0,i.useState)(!1),2),v=y[0],j=y[1],N=(0,r._)((0,i.useState)(!1),2),w=N[0],C=N[1];(0,i.useEffect)(function(){j(!1),C(!1)},[t]);var k=function(e){e.preventDefault(),e.stopPropagation()};return(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[n&&(0,s.jsx)("span",{className:"text-xs",children:n}),x&&!b&&(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=g?g:"text-greyscale-500"),children:(0,u.Vu)(t)}),x&&b&&(0,s.jsxs)("span",{className:"text-[0px]",children:[(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=g?g:"text-greyscale-500"),children:"".concat(t.substring(0,4),"...")}),(0,s.jsx)("span",{className:"font-mono text-xs ".concat(b),children:"".concat(t.substring(t.length-6))})]}),(void 0===d||d)&&(0,s.jsx)(a.CopyToClipboard,{text:t,onCopy:function(e,t){t?(j(!0),setTimeout(function(){return j(!1)},2e3)):l.ZP.error("复制失败")},children:(0,s.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:k,"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:v?(0,s.jsx)(o.Z,{className:"h-4 w-4 ".concat(null!=g?g:"text-greyscale-500")}):(0,s.jsx)(c.Z,{className:"h-4 w-4 ".concat(null!=g?g:"text-greyscale-500")})})}),void 0!==f&&f&&(0,s.jsx)(a.CopyToClipboard,{text:t.substring(t.length-4),onCopy:function(e,t){t?(C(!0),l.ZP.success("已复制后4位"),setTimeout(function(){return C(!1)},2e3)):l.ZP.error("复制失败")},children:(0,s.jsx)("button",{className:"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none active:bg-gray-200 md:hover:bg-gray-100 transition-colors",onClick:k,"aria-label":"复制地址后4位",style:{WebkitTapHighlightColor:"transparent"},children:w?(0,s.jsx)("span",{className:"".concat(null!=g?g:"text-greyscale-500"),children:"已复制"}):(0,s.jsx)("span",{className:"".concat(null!=g?g:"text-greyscale-500"),children:"后4位"})})})]})}},42083:function(e,t,n){"use strict";var r=n(85893),s=n(23432);t.Z=function(){return(0,r.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},51790:function(e,t,n){"use strict";var r=n(85893),s=n(67294),i=n(86501);t.Z=function(e){var t=e.isOpen,n=e.onClose,a=e.text,o=e.title,c=e.description,l=e.autoCloseDelay,u=void 0===l?3e4:l,d=(0,s.useRef)(null);return((0,s.useEffect)(function(){var e=function(e){"Escape"===e.key&&n()};if(t){document.addEventListener("keydown",e),setTimeout(function(){d.current&&(d.current.focus(),d.current.select(),d.current.setSelectionRange(0,d.current.value.length))},100);var r=null;return u>0&&(r=setTimeout(function(){n()},u)),function(){document.removeEventListener("keydown",e),r&&clearTimeout(r)}}},[t,n,u]),t)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-5",onClick:function(e){e.target===e.currentTarget&&n()},children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md text-center shadow-xl",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:void 0===o?"请手动复制":o}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:void 0===c?"自动复制功能不可用，请手动选择并复制以下内容：":c}),(0,r.jsx)("textarea",{ref:d,value:a,readOnly:!0,className:"w-full h-32 p-3 border border-gray-300 rounded-md font-mono text-sm resize-none mb-4 bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),(0,r.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,r.jsx)("button",{onClick:function(){d.current&&(d.current.focus(),d.current.select(),d.current.setSelectionRange(0,d.current.value.length),i.Am.success("已全选文本，请按 Ctrl+C 复制"))},className:"px-4 py-2 bg-[#1e3a8a] text-white rounded-md hover:bg-gray-500/90 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",children:"全选文本"}),(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors font-medium",children:"关闭"})]}),u>0&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:[Math.round(u/1e3)," 秒后自动关闭"]})]})}):null}},93566:function(e,t,n){"use strict";n.d(t,{$A:function(){return h},Bk:function(){return x},Xo:function(){return b},dI:function(){return f},qd:function(){return p},r7:function(){return m},sK:function(){return g}});var r=n(11010),s=n(97582),i=n(67294),a=n(71104),o=n(7724),c=n(37742),l=n(84689),u=n(37474),d="0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",f=function(e,t){var n=(0,a.u)({address:d,abi:o.d,functionName:"actionInfo",args:[e,t||BigInt(0)],query:{enabled:!!e&&void 0!==t}});return{actionInfo:n.data,isPending:n.isPending,error:n.error}},m=function(e){var t=(0,a.u)({address:d,abi:o.d,functionName:"actionsCount",args:[e]}),n=t.data,r=t.isPending,s=t.error;return{actionNum:n?(0,c.Z)(n):void 0,isPending:r,error:s}},x=function(){var e=(0,a.u)({address:d,abi:o.d,functionName:"currentRound",args:[]}),t=e.data,n=e.isPending,r=e.error;return{currentRound:(0,c.Z)(t),isPending:n,error:r}},h=function(e,t,n){var r=(0,a.u)({address:d,abi:o.d,functionName:"isSubmitted",args:[e,t,n]});return{isSubmitted:r.data,isPending:r.isPending,error:r.error}},g=function(e,t,n){var r=(0,a.u)({address:d,abi:o.d,functionName:"submitInfo",args:[e,t,n],query:{enabled:!!e&&!!t}});return{submitInfo:r.data,isPending:r.isPending,error:r.error}};function p(){var e,t=(0,u.e9)(o.d,d,"submit"),n=t.execute,a=t.isPending,c=t.isConfirming,f=t.isConfirmed,m=t.error,x=t.hash,h=t.isTukeMode,g=(e=(0,r._)(function(e,t){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return console.log("提交submit交易:",{tokenAddress:e,actionId:t,isTukeMode:h}),[4,n([e,t])];case 1:return[2,r.sent()]}})}),function(t,n){return e.apply(this,arguments)});return(0,i.useEffect)(function(){x&&console.log("submit tx hash:",x),m&&(console.log("提交submit交易错误:"),(0,l.Vh)(m),(0,l.H)(m)),f&&console.log("submit tx confirmed")},[x,m,f]),{submit:g,isPending:a,isConfirming:c,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}function b(){var e,t=(0,u.e9)(o.d,d,"submitNewAction"),n=t.execute,a=t.isPending,c=t.isConfirming,f=t.isConfirmed,m=t.error,x=t.hash,h=t.isTukeMode,g=(e=(0,r._)(function(e,t){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return console.log("提交submitNewAction交易:",{tokenAddress:e,actionBody:t,isTukeMode:h}),[4,n([e,t])];case 1:return[2,r.sent()]}})}),function(t,n){return e.apply(this,arguments)});return(0,i.useEffect)(function(){x&&console.log("submitNewAction tx hash:",x),m&&(console.log("提交submitNewAction交易错误:"),(0,l.Vh)(m),(0,l.H)(m)),f&&console.log("submitNewAction tx confirmed")},[x,m,f]),{submitNewAction:g,isPending:a,isConfirming:c,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}},49189:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var r,s,i=n(11010),a=n(97582),o=n(86501),c=(r=(0,i._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:if(!(navigator.clipboard&&navigator.clipboard.writeText))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e)];case 2:return r.sent(),[2,{success:!0,method:"clipboard"}];case 3:return console.warn("Clipboard API 失败，尝试降级方案:",r.sent()),[3,4];case 4:try{if((t=document.createElement("textarea")).value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",t.style.opacity="0",t.style.pointerEvents="none",t.setAttribute("readonly",""),document.body.appendChild(t),t.focus(),t.select(),t.setSelectionRange(0,t.value.length),n=document.execCommand("copy"),document.body.removeChild(t),n)return[2,{success:!0,method:"execCommand"}]}catch(e){console.warn("execCommand 复制失败:",e)}return[2,{success:!1,method:"manual",error:"浏览器不支持自动复制，需要手动复制"}]}})}),function(e){return r.apply(this,arguments)}),l=(s=(0,i._)(function(e,t,n){var r;return(0,a.Jh)(this,function(s){switch(s.label){case 0:return[4,c(e)];case 1:return(r=s.sent()).success?o.Am.success(t):n?n(e):o.Am.error(r.error||"复制失败，请手动复制"),[2]}})}),function(e,t,n){return s.apply(this,arguments)})},81976:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(11010),s=n(91309),i=n(97582),a=n(85893),o=n(67294),c=n(11163),l=n(93778),u=n(93566),d=n(92112),f=n(27966),m=n(42083),x=n(17301),h=n(83494),g=n(72253),p=n(82022),b=n(4586),y=n(42130),v=n(49034),j=n(38110),N=n(86501),w=n(27460),C=n(44576),k=n(27245),I=n(91529),_=n(11066),P=n(48886),E=n(37864),A=function(e){var t,n,s=e.extensionAddress,l=e.groupId,u=e.actionId,d=(0,c.useRouter)(),x=(0,y.m)().address,h=(0,P.ij)(s,l,x||"0x0"),g=h.waitingList,p=h.isPending,A=h.error,T=(0,v.t)(),S=(0,o.useMemo)(function(){return(0,b._)(new Set(g.map(function(e){return e.lastJoinedBlock}).filter(function(e){return null!=e&&e>BigInt(0)})))},[g.map(function(e){var t,n;return"".concat(e.account,"-").concat(null===(t=e.lastJoinedBlock)||void 0===t?void 0:t.toString(),"-").concat(null===(n=e.amount)||void 0===n?void 0:n.toString())}).join("|")]),Z=(0,j.a)({queryKey:["trialWaitingBlockTimestamps",s,l.toString(),S.map(function(e){return e.toString()})],queryFn:(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:var t;if(!T||0===S.length)return[2,{}];return[4,Promise.all(S.map((t=(0,r._)(function(e){var t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,T.getBlock({blockNumber:e})];case 1:return t=n.sent(),[2,[e.toString(),t.timestamp]]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,Object.fromEntries(e.sent())]}})}),enabled:!!T&&S.length>0&&g.length>0}).data,B=(0,P.L0)(),R=B.trialAccountsWaitingRemove,M=B.isPending,D=B.isConfirming,J=B.isConfirmed,z=B.writeError,V=(0,P.RP)(),L=V.trialAccountsWaitingRemoveAll,W=V.isPending,q=V.isConfirming,O=V.isConfirmed,F=V.writeError,H=(0,o.useRef)(!1),$=(0,f.b)().handleError;(0,o.useEffect)(function(){A&&$(A),z&&$(z),F&&$(F)},[A,z,F,$]),(0,o.useEffect)(function(){(J||O)&&!H.current&&(H.current=!0,N.Am.success("操作成功"),_.Z.reloadWithOverlay())},[J,O]);var K=(t=(0,r._)(function(e){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,R(s,l,[e])];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),U=(n=(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:if(!g||0===g.length)return N.Am.error("暂无可取消的设置"),[2];return[4,L(s,l)];case 1:return e.sent(),[2]}})}),function(){return n.apply(this,arguments)});return x?p?(0,a.jsxs)("div",{className:"flex flex-col items-center py-6",children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"加载待使用列表..."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("table",{className:"table w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-1 text-left w-12",children:"No"}),(0,a.jsx)("th",{className:"px-1 text-left",children:"地址 / 添加时间"}),(0,a.jsx)("th",{className:"px-1 text-right",children:"体验代币数量"}),(0,a.jsx)("th",{className:"px-0 text-right",children:" "})]})}),(0,a.jsx)("tbody",{children:0===g.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center text-sm text-greyscale-400 p-4",children:"没有待体验地址"})}):g.map(function(e,t){return(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"px-1",children:t+1}),(0,a.jsxs)("td",{className:"px-1",children:[(0,a.jsx)(w.Z,{address:e.account,showCopyButton:!0}),null!=e.lastJoinedBlock&&e.lastJoinedBlock>BigInt(0)&&(null==Z?void 0:Z[e.lastJoinedBlock.toString()])!=null&&(0,a.jsx)("div",{className:"text-xs text-greyscale-400 mt-0.5",children:new Date(1e3*Number(Z[e.lastJoinedBlock.toString()])).toLocaleString()})]}),(0,a.jsx)("td",{className:"px-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-secondary",children:(0,I.LH)(e.amount)})}),(0,a.jsx)("td",{className:"px-0 text-right",style:{verticalAlign:"middle"},children:(0,a.jsx)("button",{onClick:function(){return K(e.account)},disabled:M||D,className:"text-sm text-red-500 hover:text-red-600 disabled:text-gray-300",children:(0,a.jsx)(E.Z,{className:"w-4 h-4 text-red-500"})})})]},"".concat(e.account,"-").concat(t))})})]}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k.z,{onClick:function(){var e=d.query.symbol;d.push("/extension/group_trial_add?groupId=".concat(l.toString(),"&actionId=").concat(u.toString()).concat(e?"&symbol=".concat(e):""))},variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",children:"增加体验地址"}),(0,a.jsx)(k.z,{onClick:U,disabled:W||q||0===g.length,variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",children:"删除所有地址"})]})}),(0,a.jsx)(C.Z,{isLoading:M||D||W||q,text:M||W?"正在提交...":"正在确认..."})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"请先连接钱包"})},T=n(20442),S=function(e){var t,n=e.extensionAddress,s=e.groupId;e.actionId;var c=(0,y.m)().address,l=(0,o.useRef)(!1),u=(0,T.Bk)().currentRound,d=(0,P.ce)(n,u||BigInt(0),s,c||"0x0"),x=d.joinedList,h=d.isPending,g=d.error,p=(0,P.ZI)(),b=p.trialExit,v=p.isPending,j=p.isConfirming,k=p.isConfirmed,E=p.writeError,A=(0,f.b)().handleError;(0,o.useEffect)(function(){g&&A(g),E&&A(E)},[g,E,A]),(0,o.useEffect)(function(){k&&!l.current&&(l.current=!0,N.Am.success("已成功取消体验"),setTimeout(function(){_.Z.reloadWithOverlay()},2e3))},[k]);var S=(t=(0,r._)(function(e){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,b(n,e)];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return c?h?(0,a.jsxs)("div",{className:"flex flex-col items-center py-6",children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"加载体验中列表..."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("table",{className:"table w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-1 text-left w-12",children:"No"}),(0,a.jsx)("th",{className:"px-1 text-left",children:"地址 / 加入轮次"}),(0,a.jsx)("th",{className:"px-1 text-right",children:"体验代币数量"}),(0,a.jsx)("th",{className:"px-1 text-right",children:" "})]})}),(0,a.jsx)("tbody",{children:0===x.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center text-sm text-greyscale-400 p-4",children:"没有体验中的地址"})}):x.map(function(e,t){return(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"px-1",children:t+1}),(0,a.jsxs)("td",{className:"px-1",children:[(0,a.jsx)(w.Z,{address:e.account,showCopyButton:!0}),(0,a.jsxs)("div",{className:"text-xs text-greyscale-400 mt-0.5",children:["第",e.joinedRound.toString(),"轮"]})]}),(0,a.jsx)("td",{className:"px-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-secondary",children:(0,I.LH)(e.amount)})}),(0,a.jsx)("td",{className:"px-1 text-right",children:(0,a.jsx)("button",{onClick:function(){return S(e.account)},disabled:v||j,className:"text-sm text-red-500 hover:text-red-600 disabled:text-gray-300 underline",children:"终止"})})]},"".concat(e.account,"-").concat(t))})})]}),(0,a.jsx)(C.Z,{isLoading:v||j,text:v?"正在提交...":"正在确认..."})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"请先连接钱包"})},Z=function(e){var t=e.extensionAddress,n=e.groupId,r=e.actionId,i=(0,c.useRouter)(),l=i.query.trialTab,u=(0,s._)((0,o.useState)("waiting"),2),d=u[0],f=u[1];return(0,o.useEffect)(function(){l&&["waiting","joined"].includes(l)&&f(l)},[l]),(0,a.jsx)("div",{className:"w-full mt-4",children:(0,a.jsxs)(p.mQ,{value:d,onValueChange:function(e){f(e);var t=(0,g._)({},i.query);t.trialTab=e,i.push({pathname:i.pathname,query:t},void 0,{shallow:!0})},className:"w-full",children:[(0,a.jsxs)(p.dr,{className:"grid grid-cols-2 bg-muted rounded-lg p-1 mb-4 mx-8",children:[(0,a.jsx)(p.SP,{value:"waiting",className:"px-6",children:"待使用"}),(0,a.jsx)(p.SP,{value:"joined",className:"px-6",children:"体验中"})]}),(0,a.jsx)(p.nU,{value:"waiting",className:"mt-0",children:(0,a.jsx)(A,{extensionAddress:t,groupId:n,actionId:r})}),(0,a.jsx)(p.nU,{value:"joined",className:"mt-0",children:(0,a.jsx)(S,{extensionAddress:t,groupId:n,actionId:r})})]})})},B=n(64777),R=n(51790),M=n(49189),D=function(){var e,t=(0,c.useRouter)().query,n=t.groupId,g=t.actionId,p=((0,o.useContext)(l.M)||{}).token,b=(0,y.m)().address,v=(0,s._)((0,o.useState)(!1),2),j=v[0],N=v[1],w=(0,s._)((0,o.useState)(""),2),C=w[0],I=w[1],_=Array.isArray(g)?g[0]:g,P=Array.isArray(n)?n[0]:n,E=void 0!==_&&""!==_?BigInt(_):void 0,A=void 0!==P&&""!==P?BigInt(P):void 0,T=(0,u.dI)(null==p?void 0:p.address,null!=E?E:BigInt(0)),S=T.actionInfo,D=T.isPending,J=T.error,z=(0,d.kz)({tokenAddress:null==p?void 0:p.address,actionInfo:S}),V=z.contractInfo,L=z.isPending,W=z.error,q=null==V?void 0:V.extension,O=(0,f.b)().handleError;if(o.useEffect(function(){J&&O(J),W&&O(W)},[J,W,O]),void 0===A||void 0===E)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)(x.Z,{type:"error",message:"缺少必要参数：需要 actionId 和 groupId"})});if(D||L)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center py-12",children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"加载链群信息..."})]})});if(!S||!q)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)(x.Z,{type:"error",message:"未找到行动或扩展信息"})});var F=(e=(0,r._)(function(){var e,t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:e=window.location.origin,t="/interface",n="".concat(e).concat(t,"/acting/join/?tab=join&groupId=").concat(P,"&id=").concat(E,"&provider=").concat(b,"&symbol=").concat(null==p?void 0:p.symbol),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,M.P)(n,"分享链接已复制到剪贴板",function(e){I(e),N(!0)})];case 2:return r.sent(),[3,4];case 3:return console.error("复制失败:",r.sent()),I(n),N(!0),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{title:"体验列表",showBackButton:!0}),(0,a.jsx)("main",{className:"flex-grow",children:(0,a.jsxs)("div",{className:"px-4 pt-0 pb-3",children:[(0,a.jsxs)("div",{className:"my-4 flex items-center justify-between",children:[(0,a.jsx)(B.Z,{title:"我设置的体验地址"}),(0,a.jsx)(k.z,{onClick:F,size:"sm",variant:"outline",className:"px-4 py-2 text-sm text-secondary border border-secondary rounded hover:bg-secondary/5 transition-colors",children:"复制分享链接"})]}),(0,a.jsx)(Z,{extensionAddress:q,groupId:A,actionId:E})]})}),(0,a.jsx)(R.Z,{isOpen:j,onClose:function(){return N(!1)},text:C,title:"请手动复制分享链接",description:"自动复制功能不可用，请选择以下链接并手动复制："})]})}},30286:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(57412),s=n(57040),i=n(45444);let a="/docs/contract/encodeDeployData";function o(e){let{abi:t,args:n,bytecode:o}=e;if(!n||0===n.length)return o;let c=t.find(e=>"type"in e&&"constructor"===e.type);if(!c)throw new r.fM({docsPath:a});if(!("inputs"in c)||!c.inputs||0===c.inputs.length)throw new r.cO({docsPath:a});let l=(0,i.E)(c.inputs,n);return(0,s.SM)([o,l])}},71352:function(e,t,n){"use strict";n.d(t,{cj:function(){return d},iC:function(){return u}});var r=n(57412),s=n(26087),i=n(60480),a=n(39135),o=n(92106);let c=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,l=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function u(e){let{domain:t,message:n,primaryType:u,types:d}=e,f=(e,t)=>{for(let n of e){let{name:e,type:u}=n,m=t[e],x=u.match(l);if(x&&("number"==typeof m||"bigint"==typeof m)){let[e,t,n]=x;(0,o.eC)(m,{signed:"int"===t,size:parseInt(n)/8})}if("address"===u&&"string"==typeof m&&!(0,i.U)(m))throw new s.b({address:m});let h=u.match(c);if(h){let[e,t]=h;if(t&&(0,a.d)(m)!==parseInt(t))throw new r.KY({expectedSize:parseInt(t),givenSize:(0,a.d)(m)})}let g=d[u];g&&f(g,m)}};d.EIP712Domain&&t&&f(d.EIP712Domain,t),"EIP712Domain"!==u&&f(d[u],n)}function d({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}}},function(e){e.O(0,[8501,4463,9034,3494,2112,5801,7966,8886,2888,9774,179],function(){return e(e.s=26560)}),_N_E=e.O()}]);