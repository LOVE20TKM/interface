try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="4fe106f2-1ef6-433f-a980-e807d58d051a",e._sentryDebugIdIdentifier="sentry-dbid-4fe106f2-1ef6-433f-a980-e807d58d051a")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6700],{54889:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return t(42087)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return d},SZ:function(){return u},Zb:function(){return c},aY:function(){return x},eW:function(){return m},ll:function(){return o}});var n=t(72253),r=t(47702),a=t(85893),i=t(67294),l=t(40108),c=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},i))});c.displayName="Card";var d=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t)},i))});d.displayName="CardHeader";var o=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t)},i))});o.displayName="CardTitle";var u=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t)},i))});u.displayName="CardDescription";var x=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("p-6 pt-0",t)},i))});x.displayName="CardContent";var m=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,n._)({ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t)},i))});m.displayName="CardFooter"},94193:function(e,s,t){"use strict";t.d(s,{_:function(){return u}});var n=t(72253),r=t(47702),a=t(85893),i=t(67294),l=t(49102),c=t(12003),d=t(40108),o=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(l.f,(0,n._)({ref:s,className:(0,d.cn)(o(),t)},i))});u.displayName=l.f.displayName},82022:function(e,s,t){"use strict";t.d(s,{mQ:function(){return S},nU:function(){return R},dr:function(){return V},SP:function(){return M}});var n=t(72253),r=t(47702),a=t(85893),i=t(67294),l=t(36206),c=t(25360),d=t(66681),o=t(29115),u=t(75320),x=t(78990),m=t(77342),v=t(91276),f="Tabs",[h,j]=(0,c.b)(f,[d.Pc]),g=(0,d.Pc)(),[y,N]=h(f),b=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...o}=e,h=(0,x.gm)(c),[j,g]=(0,m.T)({prop:n,onChange:r,defaultProp:i??"",caller:f});return(0,a.jsx)(y,{scope:t,baseId:(0,v.M)(),value:j,onValueChange:g,orientation:l,dir:h,activationMode:d,children:(0,a.jsx)(u.WV.div,{dir:h,"data-orientation":l,...o,ref:s})})});b.displayName=f;var p="TabsList",w=i.forwardRef((e,s)=>{let{__scopeTabs:t,loop:n=!0,...r}=e,i=N(p,t),l=g(t);return(0,a.jsx)(d.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:(0,a.jsx)(u.WV.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});w.displayName=p;var I="TabsTrigger",C=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,disabled:r=!1,...i}=e,c=N(I,t),o=g(t),x=_(c.baseId,n),m=P(c.baseId,n),v=n===c.value;return(0,a.jsx)(d.ck,{asChild:!0,...o,focusable:!r,active:v,children:(0,a.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":m,"data-state":v?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:x,...i,ref:s,onMouseDown:(0,l.Mj)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,l.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,l.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;v||r||!e||c.onValueChange(n)})})})});C.displayName=I;var Z="TabsContent",k=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,forceMount:r,children:l,...c}=e,d=N(Z,t),x=_(d.baseId,n),m=P(d.baseId,n),v=n===d.value,f=i.useRef(v);return i.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(o.z,{present:r||v,children:({present:t})=>(0,a.jsx)(u.WV.div,{"data-state":v?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":x,hidden:!t,id:m,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:f.current?"0s":void 0},children:t&&l})})});function _(e,s){return`${e}-trigger-${s}`}function P(e,s){return`${e}-content-${s}`}k.displayName=Z;var B=t(40108),S=b,V=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(w,(0,n._)({ref:s,className:(0,B.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},i))});V.displayName=w.displayName;var M=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(C,(0,n._)({ref:s,className:(0,B.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},i))});M.displayName=C.displayName;var R=i.forwardRef(function(e,s){var t=e.className,i=(0,r._)(e,["className"]);return(0,a.jsx)(k,(0,n._)({ref:s,className:(0,B.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},i))});R.displayName=k.displayName},4270:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var n=(0,t(31134).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},42087:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return en}});var n=t(85893),r=t(67294),a=t(42130),i=t(27245),l=t(41664),c=t.n(l),d=t(82022),o=t(93778),u=t(933),x=t(73591),m=t(83494),v=t(66247),f=t(74598),h=t(90278),j=t(7208),g=t(42083),y=t(99958),N=t(91529),b=function(){var e,s,t,a=((0,r.useContext)(o.M)||{}).token,l=(0,h._H)(null==a?void 0:a.address),d=l.govData,u=l.isPending,m=l.error,v=(0,j.uG)((null==a?void 0:a.address)||""),b=v.reward,p=v.isPending,w=v.error,I=(0,x.S)().handleContractError;return((0,r.useEffect)(function(){m&&I(m,"govData"),w&&I(w,"dataViewer")},[m,w]),a)?(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsxs)("div",{className:"border rounded-lg p-0",children:[(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pb-2 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm pb-1",children:"总治理票数"}),(0,n.jsx)("div",{className:"stat-value text-secondary text-xl",children:u?(0,n.jsx)(g.Z,{}):(0,N.LH)(null!==(e=null==d?void 0:d.govVotes)&&void 0!==e?e:BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pb-2 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm pb-1",children:"预计新增铸币"}),(0,n.jsx)("div",{className:"stat-value text-secondary text-xl",children:p?(0,n.jsx)(g.Z,{}):(0,N.LH)(null!=b?b:BigInt(0))})]})]}),(0,n.jsxs)("div",{className:"text-center text-xs mx-8 text-greyscale-500 border-b border-greyscale-200 pb-2",children:["预估年化收益率（APY）：",u||p?(0,n.jsx)(g.Z,{}):(0,y.IS)(b,null==d?void 0:d.tokenAmountForSl,null==d?void 0:d.stAmount)]}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 mt-2",children:[(0,n.jsxs)("div",{className:"stat place-items-center pb-0 pt-0 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"流动性质押凭证SL代币"}),(0,n.jsx)("div",{className:"stat-value text-lg text-gray-600",children:u?(0,n.jsx)(g.Z,{}):(0,n.jsxs)(c(),{href:"/stake/liquid?symbol=".concat(null==a?void 0:a.symbol),className:"flex items-center hover:text-secondary-focus",children:[(0,n.jsx)("span",{className:"cursor-pointer",children:(0,N.LH)(null!==(s=null==d?void 0:d.slAmount)&&void 0!==s?s:BigInt(0))}),(0,n.jsx)(f.Z,{size:16,className:"ml-1 text-secondary cursor-pointer"})]})}),(0,n.jsx)("div",{className:"stat-desc text-xs",children:(0,n.jsx)(i.z,{variant:"link",className:"text-secondary font-normal border-secondary pt-0",asChild:!0,children:(0,n.jsx)(c(),{href:"/stake/stakelp/?symbol=".concat(a.symbol),children:"质押 获取治理票\xa0>>"})})})]}),(0,n.jsxs)("div",{className:"stat place-items-center pb-0 pt-0 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"代币质押凭证ST代币"}),(0,n.jsx)("div",{className:"stat-value text-lg text-gray-600",children:u?(0,n.jsx)(g.Z,{}):(0,N.LH)(null!==(t=null==d?void 0:d.stAmount)&&void 0!==t?t:BigInt(0))}),(0,n.jsx)("div",{className:"stat-desc text-xs",children:(0,n.jsx)(i.z,{variant:"link",className:"text-secondary font-normal border-secondary pt-0",asChild:!0,children:(0,n.jsx)(c(),{href:"/stake/staketoken?symbol=".concat(a.symbol),children:"质押 增加治理收益\xa0>>"})})})]})]})]})}):(0,n.jsx)(g.Z,{})},p=t(72260),w=t(64777),I=t(21338),C=function(e){var s=e.currentRound,t=e.validGovVotes,l=e.isPendingValidGovVotes,d=((0,r.useContext)(o.M)||{}).token,u=(0,a.m)().address,m=(0,p.VI)((null==d?void 0:d.address)||"",s,u||""),v=m.votesNumByAccount,f=m.isPending,h=m.error,j=(0,x.S)().handleContractError;if((0,r.useEffect)(function(){h&&j(h,"vote")},[h]),!d)return"";if(!u)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,n.jsx)(w.Z,{title:"我的投票"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})});var y=l||!1,b=t||BigInt(0);return(0,n.jsxs)("div",{className:"flex-col items-center px-0 py-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(w.Z,{title:"我的投票"}),(0,n.jsx)(i.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/vote/records/?symbol=".concat(null==d?void 0:d.symbol),children:"我的投票记录"})})]}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的已投票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:f?(0,n.jsx)(g.Z,{}):(0,N.LH)(v||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的未投票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:y||f?(0,n.jsx)(g.Z,{}):b?(0,N.LH)(b-v||BigInt(0)):"0"})]})]}),(0,n.jsx)("div",{className:"flex justify-center",children:y||f?(0,n.jsx)(g.Z,{}):b>v+BigInt(10)?(0,n.jsx)(i.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(c(),{href:"/vote/batch/?symbol=".concat(d.symbol),children:"去投票"})}):(0,n.jsx)(i.z,{disabled:!0,className:"w-1/2",children:b>0?"已投票":"无治理票，不能投票"})}),(0,n.jsx)("div",{className:"flex justify-center mt-2",children:(0,n.jsx)(I.Z,{currentRound:s,roundType:"vote"})})]})},Z=t(37742),k=t(59271),_=function(e){var s=e.currentRound,t=e.showBtn,l=void 0===t||t,d=((0,r.useContext)(o.M)||{}).token,u=(0,a.m)().address,m=(0,p.VI)(null==d?void 0:d.address,s,u||""),v=m.votesNumByAccount,f=m.isPending,h=m.error,j=(0,k.w3)(null==d?void 0:d.address,s,u||""),y=j.scoreByVerifier,b=j.isPending,C=j.error,_=function(){if(f||b)return BigInt(0);var e=(0,Z.Z)(v),s=(0,Z.Z)(y);try{return e>=s?e-s:BigInt(0)}catch(e){return console.error("计算剩余验证票数出错:",e),BigInt(0)}}(),P=(0,x.S)().handleContractError;return((0,r.useEffect)(function(){h&&P(h,"vote"),C&&P(C,"verify")},[h,C]),d)?u?(0,n.jsxs)("div",{className:"flex-col items-center px-0 pb-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(w.Z,{title:"我的验证"}),l&&s>=BigInt(1)&&(0,n.jsx)(i.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/verify/actions/?symbol=".concat(null==d?void 0:d.symbol),children:"验证中的行动"})})]}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 mt-2",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"已验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl ".concat(l?"":"text-secondary"),children:b?(0,n.jsx)(g.Z,{}):(0,N.LH)((0,Z.Z)(y))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"未验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl ".concat(l?"":"text-secondary"),children:f||b?(0,n.jsx)(g.Z,{}):(0,N.LH)(_)})]})]}),l&&(0,n.jsx)("div",{className:"flex justify-center",children:f||b?(0,n.jsx)(g.Z,{}):_>BigInt(5)&&(0,Z.Z)(v)>(0,Z.Z)(y)?(0,n.jsx)(i.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(c(),{href:"/verify?symbol=".concat(d.symbol),children:"去验证"})}):(0,n.jsx)(i.z,{disabled:!0,className:"w-1/2",children:(0,Z.Z)(y)>BigInt(0)?"已验证":"未投票，无需验证"})}),(0,n.jsx)("div",{className:"flex justify-center mt-2",children:(0,n.jsx)(I.Z,{currentRound:s,roundType:"verify"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-4 pt-6 pb-2",children:[(0,n.jsx)(w.Z,{title:"行动验证"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):(0,n.jsx)(g.Z,{})},P=t(34188),B=t(4586),S=t(67516),V=t(8945),M=t(30558),R=t(58149),A=t(17301),E=t(27966),z=function(e){var s,t,l,d,u,x,m,v,f,h,j,y,b,p,C,k,_=e.currentRound,z=((0,r.useContext)(o.M)||{}).token,D=(0,a.m)().address,T=(0,P.i)({account:D,round:_}),F=T.groups,L=T.isPending,H=T.error,G=(0,r.useMemo)(function(){if(!F||0===F.length)return[];var e=new Map,s=!0,t=!1,n=void 0;try{for(var r,a=F[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var i=r.value,l="".concat(i.actionId.toString(),"-").concat(i.extensionAddress.toLowerCase());e.set(l,{actionId:i.actionId,extensionAddress:i.extensionAddress})}}catch(e){t=!0,n=e}finally{try{s||null==a.return||a.return()}finally{if(t)throw n}}return Array.from(e.values())},[F]),O=(t=(s={tokenAddress:null==z?void 0:z.address,round:_,groupOwner:D,pairs:G}).tokenAddress,l=s.round,d=s.groupOwner,u=s.pairs,x=(0,r.useMemo)(function(){if(!u||0===u.length)return[];var e=new Map,s=!0,t=!1,n=void 0;try{for(var r,a=u[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var i=r.value;e.set("".concat(i.actionId.toString(),"-").concat(i.extensionAddress.toLowerCase()),i)}}catch(e){t=!0,n=e}finally{try{s||null==a.return||a.return()}finally{if(t)throw n}}return Array.from(e.values())},[u]),m=(0,r.useMemo)(function(){var e=new Set,s=[],t=!0,n=!1,r=void 0;try{for(var a,i=x[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value,c=l.actionId.toString();e.has(c)||(e.add(c),s.push(l.actionId))}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return s},[x]),v=(0,r.useMemo)(function(){if(!t||void 0===l||!d||0===x.length)return[];var e=x.map(function(e){return{address:"0x6c720b8a9c4803E7D78849E10fe535d862ACbfD1",abi:V.l,functionName:"distrustVotesByGroupOwner",args:[e.extensionAddress,l,d]}}),s=m.map(function(e){return{address:"0x4623f58Ed1Ad367fa4F47fC1969CbB3a22893435",abi:M.X,functionName:"votesNumByActionId",args:[t,l,e]}});return(0,B._)(e).concat((0,B._)(s))},[t,l,d,x,m]),h=(f=(0,S.N)({contracts:v,query:{enabled:v.length>0}})).data,j=f.isPending,y=f.error,p=(b=(0,R.I)({tokenAddress:t,actionIds:m})).actionInfos,C=b.isPending,k=b.error,{items:(0,r.useMemo)(function(){if(0===x.length||0===m.length||!h)return[];for(var e=x.length,s=new Map,t=0;t<e;t++){var n=x[t],r="".concat(n.actionId.toString(),"-").concat(n.extensionAddress.toLowerCase()),a=h[t],i=(null==a?void 0:a.status)==="success"?(0,Z.Z)(a.result):BigInt(0);s.set(r,i)}for(var l=new Map,c=0;c<m.length;c++){var d=m[c],o=h[e+c],u=(null==o?void 0:o.status)==="success"?(0,Z.Z)(o.result):BigInt(0);l.set(d.toString(),u)}var v=new Map;if(p&&p.length>0){var f=!0,j=!1,g=void 0;try{for(var y,N=p[Symbol.iterator]();!(f=(y=N.next()).done);f=!0){var b,w,I=y.value,C=null==I?void 0:null===(b=I.head)||void 0===b?void 0:b.id;void 0!==C&&v.set(C.toString(),(null==I?void 0:null===(w=I.body)||void 0===w?void 0:w.title)||"行动 #".concat(C.toString()))}}catch(e){j=!0,g=e}finally{try{f||null==N.return||N.return()}finally{if(j)throw g}}}return x.map(function(e){var t,n,r="".concat(e.actionId.toString(),"-").concat(e.extensionAddress.toLowerCase()),a=null!==(t=s.get(r))&&void 0!==t?t:BigInt(0),i=null!==(n=l.get(e.actionId.toString()))&&void 0!==n?n:BigInt(0),c=i>BigInt(0)?Number(a)/Number(i)*100:0;return{actionId:e.actionId,actionTitle:v.get(e.actionId.toString())||"行动 #".concat(e.actionId.toString()),distrustVotes:a,totalVotes:i,distrustRatioPercent:c}}).sort(function(e,s){return e.actionId>s.actionId?-1:1})},[x,m,h,p]),isPending:(0,r.useMemo)(function(){return!!t&&void 0!==l&&!!d&&0!==x.length&&(j||C)},[t,l,d,x.length,j,C]),error:y||k}),W=O.items,U=O.isPending,q=O.error,K=(0,r.useMemo)(function(){return W.filter(function(e){return e.distrustVotes>BigInt(0)&&e.distrustRatioPercent>0})},[W]),Y=(0,E.b)().handleError;(0,r.useEffect)(function(){H&&Y(H),q&&Y(q)},[H,q,Y]);var $=(0,r.useMemo)(function(){return F.filter(function(e){return e.isVerified}).length},[F]),Q=(0,r.useMemo)(function(){return F.filter(function(e){return e.needToVerify}).length},[F]),X=(0,r.useMemo)(function(){return F.find(function(e){return e.needToVerify})},[F]),J=0===F.length?{text:"没有需验证的链群",disabled:!0,href:null}:0===Q?{text:"已验证",disabled:!0,href:null}:1===Q&&X?{text:"去验证",disabled:!1,href:"/extension/group_op/?actionId=".concat(X.actionId,"&groupId=").concat(X.groupId,"&op=verify")}:{text:"去验证",disabled:!1,href:"/extension/my_verifying_groups?symbol=".concat(null==z?void 0:z.symbol)};return z?D?(0,n.jsxs)("div",{className:"flex-col items-center px-0 py-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(w.Z,{title:"我的链群"}),(0,n.jsx)(i.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/extension/my_verifying_groups?symbol=".concat(null==z?void 0:z.symbol),children:"查看链群 >>"})})]}),!U&&K.length>0&&(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(A.Z,{type:"error",message:(0,n.jsx)("div",{className:"space-y-1 text-red-600",children:K.map(function(e){return(0,n.jsx)("div",{children:(0,n.jsxs)(c(),{href:"/action/info/?symbol=".concat(encodeURIComponent((null==z?void 0:z.symbol)||""),"&id=").concat(e.actionId.toString(),"&tab=public&tab2=distrust&round=").concat(_.toString()),className:"underline underline-offset-2 hover:text-red-700",children:['你在行动"No.',e.actionId.toString()," ",e.actionTitle,'"中被投不信任票，不信任率',(0,N.rl)(e.distrustRatioPercent),"；"]})},e.actionId.toString())})})})}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"已验证链群"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:L?(0,n.jsx)(g.Z,{}):$})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"待验证链群"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:L?(0,n.jsx)(g.Z,{}):Q})]})]}),(0,n.jsx)("div",{className:"flex justify-center",children:L?(0,n.jsx)(g.Z,{}):J.href?(0,n.jsx)(i.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(c(),{href:J.href,children:J.text})}):(0,n.jsx)(i.z,{disabled:!0,className:"w-1/2",children:J.text})}),(0,n.jsx)("div",{className:"flex justify-center mt-2",children:(0,n.jsx)(I.Z,{currentRound:_,roundType:"verify"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-0 py-2",children:[(0,n.jsx)(w.Z,{title:"我的链群"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""},D=t(4270),T=t(88504),F=t(70019),L=t(7399),H=function(e){var s=e.token,t=(0,T.O)().data,l=(0,a.m)().address,d=(0,F.kF)(s?s.address:"0x0000000000000000000000000000000000000000"),o=(d.launchInfo,d.isPending),u=d.error,m=(0,F.bK)(s?s.address:"0x0000000000000000000000000000000000000000",l),v=m.remainingLaunchCount,f=m.isPending,h=(0,L.UC)(s?s.address:"0x0000000000000000000000000000000000000000",l),j=h.numOfMintGovRewardByAccount,g=h.isPending,y=(0,x.S)().handleContractError;if(r.useEffect(function(){u&&y(u,"launch")},[u]),o||!t||f||g)return(0,n.jsx)(n.Fragment,{});var b=Number("180")||BigInt(180),p=Number(b)-Number(null!=j?j:0)%Number(b);return(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(w.Z,{title:"子币发射"}),v&&v&&(0,n.jsx)(i.z,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/tokens/children/?symbol=".concat(null==s?void 0:s.symbol),children:"子币列表"})})]}),(0,n.jsxs)("div",{className:"w-full text-center mb-4",children:[v&&v>0?(0,n.jsx)(i.z,{variant:"outline",size:"sm",className:"mt-2 w-1/2 text-secondary border-secondary",disabled:void 0===v||v<=0,asChild:!0,children:(0,n.jsxs)(c(),{href:"/launch/deploy?symbol=".concat(null==s?void 0:s.symbol),children:[(0,n.jsx)(D.Z,{className:"w-4 h-4"}),"开启子币公平发射"]})}):(0,n.jsx)(i.z,{disabled:!0,className:"w-1/2",children:"开启子币公平发射"}),(0,n.jsx)("div",{className:"px-4 mt-2 mb-4 text-center",children:(0,n.jsxs)("p",{className:"text-greyscale-500 text-sm",children:["剩余开启次数：",Number(null!=v?v:0),"次，再完成 ",p,"次治理激励铸币，可增加1次。（须持有 ",null==s?void 0:s.symbol,"不少于"," ",Number("3")/10,"%的治理票才可开启；公平发射募集目标为",(0,N.LH)((0,Z.Z)("20000000000000000000000000")),"个"," ",null==s?void 0:s.symbol,"）"]})})]})]})},G=t(91309),O=t(66889),W=t(32848),U=function(e){var s=e.tokenAddress,t=e.account,n=(0,r.useMemo)(function(){return s&&t?[{address:"0xb0d291C3B036860c8D5E2C681bFa391F787b26Cb",abi:O.B,functionName:"validGovVotes",args:[s,t]},{address:"0xa42CAcd51b0F27c863b0De3e7961590e00E3fc4a",abi:W.C,functionName:"govData",args:[s]}]:[]},[s,t]),a=(0,S.N)({contracts:n,query:{enabled:!!s&&!!t&&n.length>0}}),i=a.data,l=a.isPending,c=a.error;return(0,r.useMemo)(function(){if(!i||!s||!t)return{validGovVotes:void 0,govData:void 0,governancePercentage:0,isPending:l,error:c};var e=(0,G._)(i,2),n=e[0],r=e[1],a=(null==n?void 0:n.result)?(0,Z.Z)(n.result):void 0,d=null==r?void 0:r.result,o=(null==d?void 0:d.govVotes)&&a?Number(a)/Number(d.govVotes)*100:0;return{validGovVotes:a,govData:d,governancePercentage:o,isPending:l,error:c}},[i,s,t,l,c])},q=function(e){var s=e.token,t=e.enableWithdraw,l=void 0!==t&&t,d=(0,a.m)().address,o=(0,u.Bk)(l),m=o.currentRound,v=o.isPending,f=o.error,h=(0,u.L)(null==s?void 0:s.address,d),j=h.slAmount,b=h.stAmount,p=h.promisedWaitingPhases,w=h.requestedUnstakeRound,I=h.govVotes,C=h.isPending,Z=h.error,k=U({tokenAddress:null==s?void 0:s.address,account:d}),_=k.validGovVotes,P=k.govData,B=k.governancePercentage,S=k.isPending,V=k.error,M=b&&(null==P?void 0:P.stAmount)?Number(b)/Number(P.stAmount)*100:0,R=(0,x.S)().handleContractError;return((0,r.useEffect)(function(){Z&&R(Z,"stake"),f&&R(f,"stake"),V&&R(V,"common")},[Z,f,V]),!s||l&&v||C)?(0,n.jsx)(g.Z,{}):C||j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 ",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-1 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的治理票数"}),(0,n.jsx)("div",{className:"stat-value text-xl text-secondary",children:C?(0,n.jsx)(g.Z,{}):(0,N.LH)(_||BigInt(0))}),(0,n.jsx)("div",{className:"stat-desc text-xs mb-2 mt-1",children:w&&w>BigInt(0)&&"注意：解锁期内治理票数为0"})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-1 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我承诺的解锁期"}),(0,n.jsxs)("div",{className:"stat-value text-lg",children:[(0,n.jsx)("span",{className:"text-secondary",children:C?(0,n.jsx)(g.Z,{}):"".concat(p||BigInt(0)," ")}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:" 阶段"})]}),(0,n.jsx)("div",{className:"stat-desc text-xs mb-2 mt-1",children:"".concat((0,y.Cn)(Number(p||BigInt(0)),!0))})]})]}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-1 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm flex items-center",children:"我的治理票占比"}),(0,n.jsx)("div",{className:"stat-value text-xl text-secondary",children:S||S?(0,n.jsx)(g.Z,{}):"".concat((0,N.rl)(B.toString()))}),(0,n.jsx)("div",{className:"stat-desc text-xs",children:(0,n.jsx)(i.z,{variant:"link",className:"text-secondary font-normal border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/stake/stakelp/?symbol=".concat(s.symbol),children:"质押 获取治理票\xa0>>"})})})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-0 pb-1 pl-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm flex items-center",children:"加速激励质押占比"}),(0,n.jsx)("div",{className:"stat-value text-xl text-secondary",children:S||C||!m?(0,n.jsx)(g.Z,{}):M>0?(0,N.rl)(M.toString()):"-"}),(0,n.jsx)("div",{className:"stat-desc text-xs",children:(0,n.jsx)(i.z,{variant:"link",className:"text-secondary font-normal border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/stake/staketoken?symbol=".concat(s.symbol),children:"质押 增加治理收益\xa0>>"})})})]})]}),!S&&!C&&void 0!==_&&void 0!==I&&_<=BigInt(0)&&I>BigInt(0)&&(0,n.jsx)("div",{className:"text-sm mb-4 text-greyscale-500 text-center",children:(0,n.jsx)("div",{className:"text-red-500",children:"当前 sl 或 st 代币余额不足，导致有效治理票为0，请及时补足"})}),(0,n.jsx)("div",{className:"flex justify-center space-x-4",children:(0,n.jsx)(i.z,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/my/govrewards?symbol=".concat(s.symbol),children:"铸造 治理激励 >>"})})})]}):(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"您没有质押"})},K=t(21774),Y=t(34680),$=t(94193),Q=t(60480),X=t(78865),J=t(18289),ee=t(74855),es=t(86501),et=function(){var e=((0,r.useContext)(o.M)||{}).token,s=(0,G._)((0,r.useState)(""),2),t=s[0],a=s[1],l=(0,G._)((0,r.useState)(null),2),c=l[0],d=l[1],x=(0,G._)((0,r.useState)(!1),2),m=x[0],v=x[1],f=(0,G._)((0,r.useState)(!1),2),j=f[0],y=f[1],b=(0,G._)((0,r.useState)(!1),2),p=b[0],w=b[1],I=(0,u.Ty)((null==e?void 0:e.address)&&c&&m?e.address:"0x0000000000000000000000000000000000000000",c&&m?c:"0x0000000000000000000000000000000000000000"),C=I.validGovVotes,Z=I.isPending,k=I.error,_=(0,h._H)(null==e?void 0:e.address),P=_.govData,B=_.isPending,S=_.error,V=(null==P?void 0:P.govVotes)&&C&&m&&c?Number(C)/Number(P.govVotes)*100:0,M=function(){if(console.log("handleQuery called with:",t),!t.trim()){alert("请输入有效的地址");return}if(!(0,Q.U)(t)){alert("请输入有效的以太坊地址格式");return}console.log("Setting query address:",t),d(t),v(!0)};return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(Y.Zb,{className:"w-full",children:[(0,n.jsx)(Y.Ol,{children:(0,n.jsx)(Y.ll,{className:"text-lg",children:"地址治理票查询"})}),(0,n.jsx)(Y.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)($._,{htmlFor:"address-input",children:"输入要查询的地址:"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(K.I,{id:"address-input",type:"text",placeholder:"0x...",value:t,onChange:function(e){return a(e.target.value)},className:"flex-1",onKeyPress:function(e){"Enter"===e.key&&M()}}),(0,n.jsx)(i.z,{onClick:M,disabled:!t.trim()||m&&(Z||B),children:m&&(Z||B)?"查询中...":"查询"}),m&&(0,n.jsx)(i.z,{variant:"outline",onClick:function(){a(""),d(null),v(!1)},children:"重置"})]})]}),(k||S)&&m&&(0,n.jsxs)("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:["查询出错：",(null==k?void 0:k.message)||(null==S?void 0:S.message)||"请检查地址格式或稍后重试"]}),m&&c&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,n.jsx)("span",{className:"font-medium",children:"查询地址:"}),(0,n.jsx)("div",{className:"font-mono text-xs mt-1 break-all",children:c})]}),Z||B?(0,n.jsx)("div",{className:"flex justify-center p-8",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(g.Z,{}),(0,n.jsx)("p",{className:"text-gray-500 mt-2",children:"正在查询中..."})]})}):(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"该地址治理票数"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,N.LH)(C||BigInt(0))}),(0,n.jsx)(ee.CopyToClipboard,{text:(0,N.LH)(C||BigInt(0)),onCopy:function(e,s){s?(y(!0),es.ZP.success("治理票数已复制"),setTimeout(function(){return y(!1)},2e3)):es.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制治理票数",children:j?(0,n.jsx)(X.Z,{className:"h-4 w-4 text-green-600"}):(0,n.jsx)(J.Z,{className:"h-4 w-4 text-gray-500"})})})]})]}),(0,n.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:"占总治理票比例"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,N.rl)(V)}),(0,n.jsx)(ee.CopyToClipboard,{text:(0,N.rl)(V),onCopy:function(e,s){s?(w(!0),es.ZP.success("占比已复制"),setTimeout(function(){return w(!1)},2e3)):es.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-2 rounded hover:bg-gray-100 focus:outline-none","aria-label":"复制占比",children:p?(0,n.jsx)(X.Z,{className:"h-4 w-4 text-green-600"}):(0,n.jsx)(J.Z,{className:"h-4 w-4 text-gray-500"})})})]})]})]}),m&&!Z&&!B&&(0,n.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"备注："}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"票数为有效治理票；如果已经申请解除治理质押，则治理票为0"})]})]})]})})]})})},en=function(){var e=((0,r.useContext)(o.M)||{}).token,s=(0,a.m)(),t=s.address,l=s.isConnected,f=(0,u.Bk)(),h=f.currentRound,j=f.error,y=f.isPending,N=(0,u.Ty)((null==e?void 0:e.address)||"",t||""),p=N.validGovVotes,w=N.isPending,I=N.error,Z=(0,x.S)().handleContractError;r.useEffect(function(){I&&Z(I,"stake"),j&&Z(j,"vote")},[I,j]);var k=p>BigInt(0);return l&&(y||w)?(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)(g.Z,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{title:"治理首页"}),(0,n.jsx)("main",{className:"flex-grow",children:l?e?e&&!e.hasEnded?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{}),(0,n.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,n.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能参与治理"}),(0,n.jsx)(i.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(c(),{href:"/launch?symbol=".concat(e.symbol),children:"查看公平发射"})})]})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(d.mQ,{defaultValue:"my-assets",className:"w-full px-4",children:[(0,n.jsxs)(d.dr,{className:"grid w-full grid-cols-2",children:[(0,n.jsx)(d.SP,{value:"my-assets",children:"我的"}),(0,n.jsx)(d.SP,{value:"community-assets",children:"社区"})]}),(0,n.jsxs)(d.nU,{value:"my-assets",children:[(0,n.jsx)("div",{className:"border rounded-lg px-0 py-4 mt-2",children:(0,n.jsx)(q,{token:e,enableWithdraw:!1})}),w?(0,n.jsx)("div",{className:"flex justify-center p-4",children:(0,n.jsx)(g.Z,{})}):k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C,{currentRound:h||BigInt(0),validGovVotes:p,isPendingValidGovVotes:w}),(0,n.jsx)(_,{currentRound:h>2?h-BigInt(2):BigInt(0)}),(0,n.jsx)(z,{currentRound:h>2?h-BigInt(2):BigInt(0)}),(0,n.jsx)(H,{token:e})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,n.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"您当前没有治理票，获取治理票后才能治理"}),(0,n.jsx)(i.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(c(),{href:"/stake/stakelp/?symbol=".concat(null==e?void 0:e.symbol),children:"质押获取治理票"})})]}),(0,n.jsxs)("div",{className:"flex space-x-8 mt-4 justify-center text-sm pb-4",children:[(0,n.jsx)(c(),{href:"/vote/actions/?symbol=".concat(null==e?void 0:e.symbol),className:"text-secondary hover:text-blue-800",children:"投票中的行动 >>"}),(0,n.jsx)(c(),{href:"/verify/actions/?symbol=".concat(null==e?void 0:e.symbol),className:"text-secondary hover:text-blue-800",children:"验证中的行动 >>"})]})]})]}),(0,n.jsxs)(d.nU,{value:"community-assets",children:[(0,n.jsx)(b,{}),(0,n.jsx)(et,{}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(Y.Zb,{className:"w-full",children:[(0,n.jsx)(Y.Ol,{children:(0,n.jsx)(Y.ll,{className:"text-lg",children:"治理公示"})}),(0,n.jsx)(Y.aY,{children:(0,n.jsxs)("div",{className:"flex space-x-8 justify-center text-sm",children:[(0,n.jsx)(i.z,{className:"w-1/2 text-secondary border-secondary",asChild:!0,variant:"outline",children:(0,n.jsx)(c(),{href:"/vote/actions/?symbol=".concat(null==e?void 0:e.symbol),children:"投票中的行动 >>"})}),(0,n.jsx)(i.z,{className:"w-1/2 text-secondary border-secondary",asChild:!0,variant:"outline",children:(0,n.jsx)(c(),{href:"/verify/actions/?symbol=".concat(null==e?void 0:e.symbol),children:"验证中的行动 >>"})})]})})]})})]})]})}):(0,n.jsx)(g.Z,{}):(0,n.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,n.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}},49102:function(e,s,t){"use strict";t.d(s,{f:function(){return l}});var n=t(67294),r=t(75320),a=t(85893),i=n.forwardRef((e,s)=>(0,a.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var l=i}},function(e){e.O(0,[8501,4463,3798,8139,246,3494,3591,9419,8300,5611,7966,19,8945,7399,2494,4762,8342,2888,9774,179],function(){return e(e.s=54889)}),_N_E=e.O()}]);