(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7407],{12293:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var n=r(37876),a=r(7446);let t=()=>(0,n.jsx)(a.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},28638:(e,s,r)=>{"use strict";r.d(s,{BT:()=>u,Wu:()=>m,ZB:()=>c,Zp:()=>l,aR:()=>d,wL:()=>p});var n=r(3576),a=r(65699),t=r(37876),o=r(14232),i=r(30684),l=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},o))});l.displayName="Card";var d=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r)},o))});d.displayName="CardHeader";var c=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r)},o))});c.displayName="CardTitle";var u=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("text-sm text-muted-foreground",r)},o))});u.displayName="CardDescription";var m=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("p-6 pt-0",r)},o))});m.displayName="CardContent";var p=o.forwardRef((e,s)=>{var r=e.className,o=(0,a._)(e,["className"]);return(0,t.jsx)("div",(0,n._)({ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",r)},o))});p.displayName="CardFooter"},42038:(e,s,r)=>{"use strict";r.d(s,{C:()=>a});var n=r(97685),a=e=>!!e||(n.oR.error("请先将钱包链接 ".concat("thinkium70001")),!1)},44356:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>Q});var n=r(37876),a=r(14232),t=r(62212),o=r(60154),i=r(16927),l=r(3576),d=r(62701),c=r(40854),u=r(4902),m=r(89099),p=r(97685),f=r(60513),y=r(13810),g=r(57238),v=r(8047),x=r(88992),b=(0,r(11713).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),h=r(6960),N=r(77932),T=r(28638),w=r(78256),j=r(92659),E=r(42038),_=r(20442),C=r(20451),A=r(9215),k=r(75569),D=r(40162),S=r(77351),F=r(1160),O=r(14237),M=r(99090),R=[{type:"function",name:"swapExactTokensForTokens",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"nonpayable"},{type:"function",name:"swapExactETHForTokens",inputs:[{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"payable"},{type:"function",name:"swapExactTokensForETH",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"nonpayable"},{type:"function",name:"getAmountsOut",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"getAmountsIn",inputs:[{name:"amountOut",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"}],I=r(92165),H="0x0770860fDEAC4af77412aC8bd7574eeEB0079E77",W=function(e,s){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=(0,k.Q)({address:H,abi:R,functionName:"getAmountsOut",args:[e,s],query:{enabled:!!e&&s.length>=2&&r}}),a=n.data;return{data:a,error:n.error,isLoading:n.isLoading}},P=r(80693),V=r(83416);let L=()=>{var e=(0,a.useContext)(V.N);if(void 0===e)throw Error("useTokenContext must be used within a TokenProvider");return e};var U=r(1709),z=r(12293),J=r(99574),q=function(e){var s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=[];r.push({symbol:"TKM",address:"NATIVE",decimals:18,isNative:!0});var n="TestTKM20",a="0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71";return n&&a&&r.push({symbol:n,address:a,decimals:18,isNative:!1,isWETH:!0}),e&&(s&&e.symbol&&e.address&&!r.find(s=>s.address===e.address)&&r.push({symbol:e.symbol,address:e.address,decimals:18,isNative:!1}),e.parentTokenSymbol&&e.parentTokenAddress&&!r.find(s=>s.address===e.parentTokenAddress)&&r.push({symbol:e.parentTokenSymbol,address:e.parentTokenAddress,decimals:18,isNative:!1,isWETH:"0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71"===e.parentTokenAddress})),console.log("buildSupportedTokens result:",r),r},B=(e,s)=>e.isNative&&s.isWETH||e.isWETH&&s.isNative?"WETH9":!e.isNative||s.isNative||s.isWETH?e.isNative||e.isWETH||!s.isNative?"UniswapV2_TOKEN_TO_TOKEN":"UniswapV2_TOKEN_TO_ETH":"UniswapV2_ETH_TO_TOKEN",K=(e,s)=>{var r="0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71";return e.isNative?[r,s.address]:s.isNative?[e.address,r]:[e.address,s.address]},Y=(e,s)=>{var r=(0,g.A)({address:s,query:{enabled:!!s&&e.isNative}}),n=r.data,a=r.isLoading,t=(0,A.lW)(e.isNative?"0x0000000000000000000000000000000000000000":e.address,s),o=t.balance,i=t.isPending;return{balance:e.isNative?null==n?void 0:n.value:o,isPending:e.isNative?a:i}},$=e=>f.z.object({fromTokenAmount:f.z.string().nonempty("请输入兑换数量").refine(s=>{if(s.endsWith(".")||"0"===s)return!0;try{var r=(0,_.XS)(s);return r>0n&&r<=e}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),fromTokenAddress:f.z.string(),toTokenAddress:f.z.string()});let X=e=>{var s=e.showCurrentToken,r=void 0===s||s,t=(0,m.useRouter)(),o=(0,v.F)(),f=o.address,g=o.chain,k=L().token,V=(0,a.useMemo)(()=>q(k,r),[k,r]),X=(0,c._)((0,a.useState)({symbol:"TKM",address:"NATIVE",decimals:18,isNative:!0}),2),Q=X[0],Z=X[1],G=(0,c._)((0,a.useState)({symbol:"TestLOVE20",address:"0x83a4A156987d1A1EFe9ABB2fd882Fafd7CF887D2",decimals:18,isNative:!1,isWETH:!1}),2),ee=G[0],es=G[1];(0,a.useEffect)(()=>{if(console.log("supportedTokens updated:",V),console.log("router.query:",t.query),console.log("token context:",k),!k)return void console.log("Token not loaded yet, skipping initialization");if(V.length>0){var e=t.query,s=e.from,r=e.to;console.log("Available token symbols:",V.map(e=>e.symbol));var n=void 0,a=void 0,o=!1;s&&"string"==typeof s&&(console.log("Looking for fromSymbol:",s),console.log("Found fromToken:",n=V.find(e=>e.symbol&&e.symbol.toLowerCase()===s.toLowerCase())),n||(p.oR.error("找不到代币 ".concat(s)),o=!0)),r&&"string"==typeof r&&(console.log("Looking for toSymbol:",r),console.log("Found toToken:",a=V.find(e=>e.symbol&&e.symbol.toLowerCase()===r.toLowerCase())),a||(p.oR.error("找不到代币 ".concat(r)),o=!0)),n&&a&&n.address===a.address&&(p.oR.error("不能选择相同的代币进行兑换"),o=!0,n=void 0,a=void 0),n?(console.log("Setting fromToken from URL:",n),Z(n)):V[0]&&(console.log("Setting fromToken as default:",V[0]),Z(V[0]));var i=n||V[0];if(a&&a.address!==(null==i?void 0:i.address))console.log("Setting toToken from URL:",a),es(a);else{var d=void 0,c="TestLOVE20";if(c&&(d=V.find(e=>e.symbol===c&&e.address!==(null==i?void 0:i.address))),!d){for(var u=1;u<V.length;u++)if(V[u].address!==(null==i?void 0:i.address)){d=V[u];break}}!d&&V.length>1&&(V[1].address!==(null==i?void 0:i.address)?d=V[1]:V[0].address!==(null==i?void 0:i.address)&&(d=V[0])),d&&(console.log("Setting toToken as default:",d),es(d))}if(o){p.oR.error("已切换为默认代币对儿");var m=(0,l._)({},t.query);delete m.from,delete m.to,t.replace({pathname:t.pathname,query:m},void 0,{shallow:!0})}}},[V,t,k]);var er=Y(Q,f),en=er.balance,ea=er.isPending,et=Y(ee,f),eo=et.balance,ei=et.isPending;(0,a.useEffect)(()=>{console.log("Balance states:",{fromBalance:en,toBalance:eo,isPendingFromBalance:ea,isPendingToBalance:ei,fromToken:Q,toToken:ee,account:f})},[en,eo,ea,ei,Q,ee,f]);var el=(0,x.mN)({resolver:(0,y.u)($(en||0n)),defaultValues:{fromTokenAmount:"",fromTokenAddress:Q.address,toTokenAddress:ee.address},mode:"onChange"});(0,a.useEffect)(()=>{console.log("Syncing form values:",{fromAddress:Q.address,toAddress:ee.address}),el.setValue("fromTokenAddress",Q.address),el.setValue("toTokenAddress",ee.address)},[Q.address,ee.address,el]);var ed=(0,c._)((0,a.useState)(0n),2),ec=ed[0],eu=ed[1],em=(0,c._)((0,a.useState)(0n),2),ep=em[0],ef=em[1],ey=el.watch("fromTokenAmount");(0,a.useEffect)(()=>{try{var e=(0,_.XS)(ey||"0");eu(e)}catch(e){eu(0n)}},[ey]);var eg=()=>{var e=(0,_.Js)(en||0n);el.setValue("fromTokenAmount",e)},ev=(0,a.useMemo)(()=>B(Q,ee),[Q,ee]),ex=(0,a.useMemo)(()=>"WETH9"===ev?[]:K(Q,ee),[Q,ee,ev]);(0,a.useEffect)(()=>{if(console.log("\uD83D\uDD0D Swap Path Debug:",{swapMethod:ev,fromToken:{symbol:Q.symbol,address:Q.address,isNative:Q.isNative},toToken:{symbol:ee.symbol,address:ee.address,isNative:ee.isNative},swapPath:ex,wethAddress:"0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71",routerAddress:"0x0770860fDEAC4af77412aC8bd7574eeEB0079E77"}),"UniswapV2_ETH_TO_TOKEN"===ev&&ex.length>=2){var e="0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71";ex[0]!==e&&(console.error("❌ 路径错误: path[0] 应该是 WETH 地址",{expected:e,actual:ex[0]}),p.oR.error("交换路径配置错误，请检查 WETH 地址配置"))}},[ev,Q,ee,ex]);var eb=W(ec,ex,"WETH9"!==ev&&ec>0n&&ex.length>=2),eh=eb.data,eN=eb.error;eb.isLoading,(0,a.useEffect)(()=>{if(eN){var e,s,r,n,a,t;console.error("\uD83D\uDEA8 getAmountsOut 详细错误:",{error:eN,errorMessage:eN.message,fromAmount:ec.toString(),swapPath:ex,swapMethod:ev,isPositionError:(null==(e=eN.message)?void 0:e.includes("Position"))&&(null==(s=eN.message)?void 0:s.includes("out of bounds"))}),(null==(r=eN.message)?void 0:r.includes("Position"))&&(null==(n=eN.message)?void 0:n.includes("out of bounds"))?(console.warn("⚠️ 检测到 position out of bounds 错误"),p.oR.error("价格查询失败，可能是流动性池问题或网络异常")):(null==(a=eN.message)?void 0:a.includes("INVALID_PATH"))?(console.error("❌ 无效路径错误"),p.oR.error("交换路径无效，请检查代币配置")):(null==(t=eN.message)?void 0:t.includes("INSUFFICIENT_LIQUIDITY"))&&(console.error("❌ 流动性不足错误"),p.oR.error("流动性不足，请尝试较小的交换金额"))}},[eN,ec,ex,ev]),(0,a.useEffect)(()=>{"WETH9"===ev?ef(ec):eh&&eh.length>1?ef(BigInt(eh[1])):ef(0n)},[ev,ec,eh]);var eT=(0,a.useMemo)(()=>{if("WETH9"===ev)return{feePercentage:0,feeAmount:"0"};var e=.3*parseFloat(ey||"0")/100;return{feePercentage:.3,feeAmount:e<1e-4?e.toExponential(2):e.toFixed(6)}},[ev,ey]),ew=(0,a.useMemo)(()=>{if(ec>0n&&ep>0n)try{var e=(0,_.Js)(ec),s=(0,_.Js)(ep),r=parseFloat(e),n=parseFloat(s);if(r>0)return(0,_.lM)((n/r).toString(),2,4)}catch(e){console.warn("转换率计算出错:",e)}return"0"},[ec,ep]),ej=!Q.isNative&&"WETH9"!==ev,eE="WETH9"===ev?"0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71":"0x0770860fDEAC4af77412aC8bd7574eeEB0079E77",e_=(0,A.zH)(Q.address),eC=e_.approve,eA=e_.isPending,ek=e_.isConfirming,eD=e_.isConfirmed,eS=e_.writeError,eF=(0,P.qX)(),eO=eF.deposit,eM=eF.isPending,eR=eF.writeError,eI=eF.isConfirming,eH=eF.isConfirmed,eW=(0,P.S1)(),eP=eW.withdraw,eV=eW.isPending,eL=eW.writeError,eU=eW.isConfirming,ez=eW.isConfirmed,eJ=function(){var e,s=(0,c._)((0,a.useState)(!1),2),r=s[0],n=s[1],t=(0,c._)((0,a.useState)(null),2),o=t[0],l=t[1],d=(0,c._)((0,a.useState)(),2),m=d[0],p=d[1],f=(e=(0,i._)(function(e,s,r,a,t){var o,i;return(0,u.YH)(this,function(d){switch(d.label){case 0:n(!0),l(null),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,(0,F.E)(M.$,{address:H,abi:R,functionName:"swapExactTokensForTokens",args:[e,s,r,a,t]})];case 2:return p(o=d.sent()),[2,o];case 3:throw l(i=d.sent()),i;case 4:return n(!1),[7];case 5:return[2]}})}),function(s,r,n,a,t){return e.apply(this,arguments)}),y=(0,D.g)({hash:m}),g=y.isLoading,v=y.isSuccess,x=y.error;return(0,a.useEffect)(()=>{console.log("hash:",m),o&&(console.log("error@simulateContract:"),(0,I.YN)(o),(0,I.vV)(o)),x&&(console.log("error@useWaitForTransactionReceipt:"),(0,I.XA)(x,"transaction-receipt-error"))},[m,o,x]),{swap:f,writeData:m,isWriting:r,writeError:null!=o?o:x,isConfirming:g,isConfirmed:v}}(),eq=eJ.swap,eB=eJ.isWriting,eK=eJ.isConfirming,eY=eJ.isConfirmed,e$=eJ.writeError,eX=function(){var e,s=(0,c._)((0,a.useState)(!1),2),r=s[0],n=s[1],t=(0,c._)((0,a.useState)(null),2),o=t[0],l=t[1],d=(0,c._)((0,a.useState)(),2),m=d[0],p=d[1],f=(e=(0,i._)(function(e,s,r,a,t){var o,i;return(0,u.YH)(this,function(d){switch(d.label){case 0:n(!0),l(null),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,(0,F.E)(M.$,{address:H,abi:R,functionName:"swapExactETHForTokens",args:[e,s,r,a],value:t})];case 2:return p(o=d.sent()),[2,o];case 3:throw l(i=d.sent()),i;case 4:return n(!1),[7];case 5:return[2]}})}),function(s,r,n,a,t){return e.apply(this,arguments)}),y=(0,D.g)({hash:m});return{swap:f,writeData:m,isWriting:r,writeError:o,isConfirming:y.isLoading,isConfirmed:y.isSuccess}}(),eQ=eX.swap,eZ=eX.isWriting,eG=eX.isConfirming,e0=eX.isConfirmed,e2=eX.writeError,e1=function(){var e,s=(0,S.s)(),r=s.sendTransaction,n=s.data,t=s.isPending,o=s.error,l=(e=(0,i._)(function(e,s,n,a,t){var o,i;return(0,u.YH)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),o=(0,O.p)({abi:R,functionName:"swapExactETHForTokens",args:[e,s,n,a]}),console.log("\uD83D\uDD27 直接发送交易，绕过 simulateContract:",{to:H,value:t.toString(),data:o,args:[e.toString(),s,n,a.toString()]}),[4,r({to:H,value:t,data:o})];case 1:return l.sent(),console.log("✅ 交易请求已发送"),[3,3];case 2:throw console.error("直接交易失败:",i=l.sent()),i;case 3:return[2]}})}),function(s,r,n,a,t){return e.apply(this,arguments)}),d=(0,D.g)({hash:n}),c=d.isLoading,m=d.isSuccess,p=d.error;return(0,a.useEffect)(()=>{console.log("hash:",n),o&&(console.log("error@sendTransaction:"),(0,I.YN)(o),(0,I.vV)(o)),p&&(console.log("error@useWaitForTransactionReceipt:"),(0,I.XA)(p,"transaction-receipt-error"))},[n,o,p]),{swap:l,txHash:n,isWriting:t,writeError:null!=o?o:p,isConfirming:c,isConfirmed:m}}(),e5=e1.swap,e3=e1.isWriting,e7=e1.isConfirming,e6=e1.isConfirmed,e9=e1.writeError;e1.txHash;var e4=function(){var e,s=(0,c._)((0,a.useState)(!1),2),r=s[0],n=s[1],t=(0,c._)((0,a.useState)(null),2),o=t[0],l=t[1],d=(0,c._)((0,a.useState)(),2),m=d[0],p=d[1],f=(e=(0,i._)(function(e,s,r,a,t){var o,i;return(0,u.YH)(this,function(d){switch(d.label){case 0:n(!0),l(null),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,(0,F.E)(M.$,{address:H,abi:R,functionName:"swapExactTokensForETH",args:[e,s,r,a,t]})];case 2:return p(o=d.sent()),[2,o];case 3:throw l(i=d.sent()),i;case 4:return n(!1),[7];case 5:return[2]}})}),function(s,r,n,a,t){return e.apply(this,arguments)}),y=(0,D.g)({hash:m});return{swap:f,writeData:m,isWriting:r,writeError:o,isConfirming:y.isLoading,isConfirmed:y.isSuccess}}(),e8=e4.swap,se=e4.isWriting,ss=e4.isConfirming,sr=e4.isConfirmed,sn=e4.writeError,sa=eA||ek,st=eD||!ej,so=eM||eI||eV||eU||eB||eK||eZ||eG||e3||e7||se||ss,si=eH||ez||eY||e0||e6||sr,sl=ea||ei;(0,a.useEffect)(()=>{console.log("Disabled states:",{isPendingFromBalance:ea,isPendingToBalance:ei,isApproved:st,isConfirmedApprove:eD,needsApproval:ej,isDisabled:sl})},[ea,ei,st,eD,ej,sl]);var sd=el.handleSubmit((0,i._)(function(){var e;return(0,u.YH)(this,function(s){switch(s.label){case 0:if(!(0,E.C)(g))return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,eC(eE,ec)];case 2:return s.sent(),[3,4];case 3:return console.error(e=s.sent()),p.oR.error((null==e?void 0:e.message)||"授权失败"),[3,4];case 4:return[2]}})})),sc=el.handleSubmit((0,i._)(function(){var e,s,r,n,a,t,o,i,l,d,c,m;return(0,u.YH)(this,function(u){switch(u.label){case 0:if(!(0,E.C)(g))return[2];u.label=1;case 1:u.trys.push([1,21,,22]),e="0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71",!1;if("UniswapV2_ETH_TO_TOKEN"===ev){if(2!==ex.length)return console.error("❌ Native to Token 路径长度错误:",ex),p.oR.error("交换路径配置错误"),[2];if(ex[0]!==e)return console.error("❌ 路径第一个地址不是 WETH:",{expected:e,actual:ex[0]}),p.oR.error("WETH 地址配置错误"),[2]}if(ep<=0n)return p.oR.error("无法获取兑换价格，请检查流动性池"),[2];switch(s=BigInt(Math.floor(Date.now()/1e3)+1200),r=995n*ep/1000n,console.log("\uD83D\uDE80 执行交换，参数详情:",{swapMethod:ev,fromAmount:ec.toString(),toAmount:ep.toString(),minAmountOut:r.toString(),swapPath:ex,deadline:s.toString(),account:f}),ev){case"WETH9":return[3,2];case"UniswapV2_ETH_TO_TOKEN":return[3,7];case"UniswapV2_TOKEN_TO_ETH":return[3,16];case"UniswapV2_TOKEN_TO_TOKEN":return[3,18]}return[3,20];case 2:if(!Q.isNative)return[3,4];return[4,eO(ec)];case 3:return u.sent(),[3,6];case 4:return[4,eP(ec)];case 5:u.sent(),u.label=6;case 6:return[3,20];case 7:console.log("\uD83D\uDCDE 调用 swapETHForTokens (直接交易模式):",{minAmountOut:r.toString(),path:ex,to:f,deadline:s.toString(),value:ec.toString()}),u.label=8;case 8:return u.trys.push([8,10,,15]),[4,e5(r,ex,f,s,ec)];case 9:return u.sent(),console.log("✅ 直接交易模式成功"),[3,15];case 10:console.warn("⚠️ 直接交易模式失败，尝试标准模式:",u.sent().message),u.label=11;case 11:return u.trys.push([11,13,,14]),[4,eQ(r,ex,f,s,ec)];case 12:return u.sent(),console.log("✅ 标准交易模式成功"),[3,14];case 13:if(n=u.sent(),console.error("❌ 所有交易模式都失败了"),(null==(a=n.message)?void 0:a.includes("Position"))&&(null==(t=n.message)?void 0:t.includes("out of bounds")))p.oR.error("检测到 viem 库的已知解析问题，但交易本身应该是有效的。请直接在钱包中确认交易。"),console.warn("\uD83D\uDCA1 建议: 这是前端库的问题，合约功能正常");else throw n;return[3,14];case 14:return[3,15];case 15:return[3,20];case 16:return[4,e8(ec,r,[Q.address,"0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71"],f,s)];case 17:case 19:return u.sent(),[3,20];case 18:return[4,eq(ec,r,[Q.address,ee.address],f,s)];case 20:return[3,22];case 21:return console.error("\uD83D\uDEA8 交换执行错误:",{error:o=u.sent(),errorMessage:o.message,errorCause:o.cause,errorDetails:o.details}),(null==(i=o.message)?void 0:i.includes("Position"))&&(null==(l=o.message)?void 0:l.includes("out of bounds"))?p.oR.error("交易数据解析失败，请稍后重试或联系技术支持"):(null==(d=o.message)?void 0:d.includes("INVALID_PATH"))?p.oR.error("交换路径无效，请检查代币配置"):(null==(c=o.message)?void 0:c.includes("INSUFFICIENT_OUTPUT_AMOUNT"))?p.oR.error("输出金额不足，请调整滑点设置或减少交换金额"):(null==(m=o.message)?void 0:m.includes("INSUFFICIENT_LIQUIDITY"))?p.oR.error("流动性不足，请尝试较小的交换金额"):p.oR.error((null==o?void 0:o.message)||"兑换失败"),[3,22];case 22:return[2]}})}));(0,a.useEffect)(()=>{si&&(p.oR.success("兑换成功"),setTimeout(()=>{var e=new URL(window.location.href);e.searchParams.set("from",Q.symbol),e.searchParams.set("to",ee.symbol),window.location.href=e.toString()},2e3))},[si,Q.symbol,ee.symbol]);var su=(0,C.g)().handleContractError;if((0,a.useEffect)(()=>{[eS,eR,eL,e$,e2,e9,sn,eN].forEach(e=>{e&&su(e,"swap")})},[eS,eR,eL,e$,e2,e9,sn,eN]),!k)return(0,n.jsx)(z.A,{});if(0===V.length)return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(U.A,{title:"兑换"}),(0,n.jsx)("div",{className:"text-center text-greyscale-500 mt-4",children:"正在加载代币信息..."})]});var sm=sa||so;return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(U.A,{title:"兑换代币"}),(0,n.jsxs)("div",{className:"w-full max-w-md mt-4",children:[(0,n.jsx)(j.lV,(0,d._)((0,l._)({},el),{children:(0,n.jsxs)("form",{children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(j.zB,{control:el.control,name:"fromTokenAmount",render:e=>{var s=e.field;return(0,n.jsxs)(j.eI,{children:[(0,n.jsx)(T.Zp,{className:"bg-[#f7f8f9] border-none",children:(0,n.jsxs)(T.Wu,{className:"py-4 px-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)(N.p,(0,d._)((0,l._)({type:"number",placeholder:"0"},s),{disabled:sl,className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,n.jsx)(j.zB,{control:el.control,name:"fromTokenAddress",render:e=>{var s=e.field;return(0,n.jsx)(j.eI,{children:(0,n.jsx)(j.MJ,{children:(0,n.jsxs)(w.l6,{value:s.value,onValueChange:e=>{var r=V.find(s=>s.address===e);r&&(r.address===ee.address?(Z(r),es(Q),s.onChange(r.address),el.setValue("toTokenAddress",Q.address),el.setValue("fromTokenAmount","")):(s.onChange(e),Z(r)))},disabled:sl,children:[(0,n.jsx)(w.bq,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{className:"font-medium text-gray-800",children:Q.symbol})})}),(0,n.jsx)(w.gC,{children:V.map(e=>(0,n.jsx)(w.eb,{value:e.address,children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{children:e.symbol})})},e.address))})]})})})}})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[[25,50,75].map(e=>(0,n.jsxs)(h.$,{variant:"outline",size:"sm",type:"button",onClick:()=>{var s=(null!=en?en:0n)*BigInt(e)/100n;el.setValue("fromTokenAmount",(0,_.Js)(s))},disabled:sl||0n>=(en||0n),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)),(0,n.jsx)(h.$,{variant:"outline",size:"sm",type:"button",onClick:eg,disabled:sl||0n>=(en||0n),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,_.NJ)(en||0n)," ",Q.symbol]})]})]})}),(0,n.jsx)(j.C5,{})]})}})}),(0,n.jsx)("div",{className:"flex justify-center mb-1",children:(0,n.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(h.$,{variant:"ghost",type:"button",size:"icon",className:"rounded-full hover:bg-gray-100",onClick:()=>{var e=(0,l._)({},Q),s=(0,l._)({},ee);Z(s),es(e),el.setValue("fromTokenAmount",""),console.log("Swapped tokens:",{newFrom:s.symbol,newTo:e.symbol})},disabled:sl,children:(0,n.jsx)(b,{className:"w-5 h-5 text-gray-600"})})})}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(T.Zp,{className:"bg-[#f7f8f9] border-none",children:(0,n.jsxs)(T.Wu,{className:"py-4 px-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)(N.p,{type:"number",placeholder:"0",value:(0,_.Js)(ep),disabled:!0,readOnly:!0,className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"}),(0,n.jsx)(j.zB,{control:el.control,name:"toTokenAddress",render:e=>{var s=e.field;return(0,n.jsx)(j.eI,{children:(0,n.jsx)(j.MJ,{children:(0,n.jsxs)(w.l6,{value:s.value,onValueChange:e=>{var r=V.find(s=>s.address===e);r&&(r.address===Q.address?(Z(ee),es(r),s.onChange(r.address),el.setValue("fromTokenAddress",ee.address),el.setValue("fromTokenAmount","")):(s.onChange(e),es(r)))},disabled:sl,children:[(0,n.jsx)(w.bq,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{className:"font-medium text-gray-800",children:ee.symbol})})}),(0,n.jsx)(w.gC,{children:V.map(e=>(0,n.jsx)(w.eb,{value:e.address,children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("span",{children:e.symbol})})},e.address))})]})})})}})]}),(0,n.jsx)("div",{className:"flex items-center justify-end",children:(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,_.NJ)(eo||0n)," ",ee.symbol]})})]})})}),(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[ej&&(0,n.jsx)(h.$,{className:"w-1/2",onClick:sd,disabled:sa||st,children:eA?"1.授权中...":ek?"1.确认中...":st?"1.已授权":"1.授权"}),(0,n.jsx)(h.$,{className:ej?"w-1/2":"w-full",onClick:sc,disabled:!st||sa||so||si,children:so?ej?"2.兑换中...":"兑换中...":si?ej?"2.已兑换":"已兑换":ej?"2.兑换":"兑换"})]})]})})),ec>0n&&(0,n.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:["WETH9"===ev&&(0,n.jsx)("div",{className:"text-sm text-green-600 mb-2",children:"\uD83D\uDCA1 这是 1:1 包装转换，无手续费，无滑点"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-greyscale-400",children:"兑换率: "}),(0,n.jsxs)("span",{children:["1 ",Q.symbol," = ",ew," ",ee.symbol]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{className:"text-greyscale-400",children:["手续费 (",eT.feePercentage,"%)："]}),(0,n.jsxs)("span",{children:[eT.feeAmount," ",Q.symbol]})]}),"WETH9"!==ev&&(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-greyscale-400",children:"滑点上限 (自动)："}),(0,n.jsx)("span",{children:"0.5%"})]})]})]}),(0,n.jsx)(J.A,{isLoading:sm,text:sa?"授权中...":"交换中..."})]})};function Q(){var e=((0,a.useContext)(V.N)||{}).token;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{title:"兑换代币"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(X,{showCurrentToken:!!e&&!!e.hasEnded}),(0,n.jsxs)("div",{className:"bg-blue-50/30 border-l-4 border-l-blue-50 rounded-r-lg p-4 mb-8 text-sm mt-0 m-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-blue-800 pb-2",children:[(0,n.jsx)(t.A,{className:"w-4 h-4"}),"提示"]}),(0,n.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"交易协议："}),(0,n.jsx)("div",{className:"text-sm text-blue-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"}),(0,n.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"费用说明："}),(0,n.jsx)("div",{className:"text-sm text-blue-700",children:"手续费为 0.3%，滑点上限为 0.5%"})]})]})]})}},47078:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex/swap",function(){return r(44356)}])},77351:(e,s,r)=>{"use strict";r.d(s,{s:()=>d});var n=r(80881),a=r(81035),t=r(629),o=r(90203);async function i(e,s){let r,{account:n,chainId:i,connector:l,...d}=s;r="object"==typeof n&&n?.type==="local"?e.getClient({chainId:i}):await (0,o.r)(e,{account:n??void 0,chainId:i,connector:l});let c=(0,t.T)(r,a.v,"sendTransaction");return await c({...d,...n?{account:n}:{},chain:i?{id:i}:null,gas:d.gas??void 0})}var l=r(43387);function d(e={}){var s;let{mutation:r}=e,a=(s=(0,l.U)(e),{mutationFn:e=>i(s,e),mutationKey:["sendTransaction"]}),{mutate:t,mutateAsync:o,...c}=(0,n.n)({...r,...a});return{...c,sendTransaction:t,sendTransactionAsync:o}}},78256:(e,s,r)=>{"use strict";r.d(s,{bq:()=>y,eb:()=>b,gC:()=>x,l6:()=>p,yv:()=>f});var n=r(3576),a=r(62701),t=r(65699),o=r(37876),i=r(14232),l=r(3628),d=r(30822),c=r(21575),u=r(33276),m=r(30684),p=l.bL;l.YJ;var f=l.WT,y=i.forwardRef((e,s)=>{var r=e.className,i=e.children,c=(0,t._)(e,["className","children"]);return(0,o.jsxs)(l.l9,(0,a._)((0,n._)({ref:s,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},c),{children:[i,(0,o.jsx)(l.In,{asChild:!0,children:(0,o.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]}))});y.displayName=l.l9.displayName;var g=i.forwardRef((e,s)=>{var r=e.className,i=(0,t._)(e,["className"]);return(0,o.jsx)(l.PP,(0,a._)((0,n._)({ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",r)},i),{children:(0,o.jsx)(c.A,{className:"h-4 w-4"})}))});g.displayName=l.PP.displayName;var v=i.forwardRef((e,s)=>{var r=e.className,i=(0,t._)(e,["className"]);return(0,o.jsx)(l.wn,(0,a._)((0,n._)({ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",r)},i),{children:(0,o.jsx)(d.A,{className:"h-4 w-4"})}))});v.displayName=l.wn.displayName;var x=i.forwardRef((e,s)=>{var r=e.className,i=e.children,d=e.position,c=void 0===d?"popper":d,u=(0,t._)(e,["className","children","position"]);return(0,o.jsx)(l.ZL,{children:(0,o.jsxs)(l.UC,(0,a._)((0,n._)({ref:s,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:c},u),{children:[(0,o.jsx)(g,{}),(0,o.jsx)(l.LM,{className:(0,m.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,o.jsx)(v,{})]}))})});x.displayName=l.UC.displayName,i.forwardRef((e,s)=>{var r=e.className,a=(0,t._)(e,["className"]);return(0,o.jsx)(l.JU,(0,n._)({ref:s,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},a))}).displayName=l.JU.displayName;var b=i.forwardRef((e,s)=>{var r=e.className,i=e.children,d=(0,t._)(e,["className","children"]);return(0,o.jsxs)(l.q7,(0,a._)((0,n._)({ref:s,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},d),{children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(l.VF,{children:(0,o.jsx)(u.A,{className:"h-4 w-4"})})}),(0,o.jsx)(l.p4,{children:i})]}))});b.displayName=l.q7.displayName,i.forwardRef((e,s)=>{var r=e.className,a=(0,t._)(e,["className"]);return(0,o.jsx)(l.wv,(0,n._)({ref:s,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",r)},a))}).displayName=l.wv.displayName},80693:(e,s,r)=>{"use strict";r.d(s,{lW:()=>y,qX:()=>g,S1:()=>v});var n=r(16927),a=r(40854),t=r(4902),o=r(14232),i=r(75569),l=r(40162),d=r(81675),c=r(1160),u=r(99090),m=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],p=r(65575),f="0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71",y=(e,s)=>{var r=(0,i.Q)({address:e,abi:m,functionName:"balanceOf",args:[s],query:{enabled:!!e&&!!s}}),n=r.data,a=r.isPending,t=r.error;return{balance:n?(0,p.oQ)(n):void 0,isPending:a,error:t}},g=()=>{var e=(0,a._)((0,o.useState)(!1),2),s=e[0],r=e[1],i=(0,a._)((0,o.useState)(null),2),p=i[0],y=i[1],g=(0,a._)((0,o.useState)(),2),v=g[0],x=g[1],b=function(){var e=(0,n._)(function(e){return(0,t.YH)(this,function(s){switch(s.label){case 0:r(!0),y(null),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,(0,d.v)(u.$,{address:f,abi:m,functionName:"deposit",args:[],value:e})];case 2:return s.sent(),[4,(0,c.E)(u.$,{address:f,abi:m,functionName:"deposit",args:[],value:e})];case 3:return x(s.sent()),[3,6];case 4:return y(s.sent()),[3,6];case 5:return r(!1),[7];case 6:return[2]}})});return function(s){return e.apply(this,arguments)}}(),h=(0,l.g)({hash:v});return{deposit:b,isPending:s,isConfirming:h.isLoading,writeError:p,isConfirmed:h.isSuccess}},v=()=>{var e=(0,a._)((0,o.useState)(!1),2),s=e[0],r=e[1],i=(0,a._)((0,o.useState)(null),2),p=i[0],y=i[1],g=(0,a._)((0,o.useState)(),2),v=g[0],x=g[1],b=function(){var e=(0,n._)(function(e){return(0,t.YH)(this,function(s){switch(s.label){case 0:r(!0),y(null),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,(0,d.v)(u.$,{address:f,abi:m,functionName:"withdraw",args:[e]})];case 2:return s.sent(),[4,(0,c.E)(u.$,{address:f,abi:m,functionName:"withdraw",args:[e]})];case 3:return x(s.sent()),[3,6];case 4:return y(s.sent()),[3,6];case 5:return r(!1),[7];case 6:return[2]}})});return function(s){return e.apply(this,arguments)}}(),h=(0,l.g)({hash:v});return{withdraw:b,isPending:s,isConfirming:h.isLoading,writeError:p,isConfirmed:h.isSuccess}}},92165:(e,s,r)=>{"use strict";r.d(s,{XA:()=>n,YN:()=>t,vV:()=>a});var n=(e,s)=>{console.group("\uD83D\uDC1B ".concat(s?"[".concat(s,"]"):""," 深度错误分析"));try{console.log("\uD83D\uDCCB 错误类型:",typeof e),console.log("\uD83D\uDCCB 错误构造函数:",null==e||null==(t=e.constructor)?void 0:t.name),console.log("\uD83D\uDCCB 是否为 Error 实例:",e instanceof Error);try{console.log("\uD83D\uDCCB toString():",null==e||null==(d=e.toString)?void 0:d.call(e))}catch(e){console.log("\uD83D\uDCCB toString() 失败:",e)}try{console.log("\uD83D\uDCCB JSON.stringify:",JSON.stringify(e))}catch(e){console.log("\uD83D\uDCCB JSON.stringify 失败:",e)}if(e&&"object"==typeof e){console.log("\uD83D\uDD0D 反射检查开始...");var r=Object.getOwnPropertyNames(e);console.log("\uD83D\uDCCB 所有属性名:",r),r.forEach(s=>{try{var r=e[s],n=Object.getOwnPropertyDescriptor(e,s);console.log("\uD83D\uDD11 属性 ".concat(s,":"),{value:r,type:typeof r,descriptor:n,isFunction:"function"==typeof r})}catch(e){console.log("\uD83D\uDD11 属性 ".concat(s," 访问失败:"),e)}});for(var n=Object.getPrototypeOf(e),a=0;n&&a<3;){console.log("\uD83E\uDDEC 原型链 ".concat(a,":"),null==(c=n.constructor)?void 0:c.name);var t,o,i,l,d,c,u=Object.getOwnPropertyNames(n);console.log("\uD83E\uDDEC 原型 ".concat(a," 属性:"),u),n=Object.getPrototypeOf(n),a++}}console.log("\uD83D\uDD0D 特殊类型检查..."),console.log("\uD83D\uDCCB 是否 AbortError:",(null==e?void 0:e.name)==="AbortError"),console.log("\uD83D\uDCCB 是否 TimeoutError:",(null==e?void 0:e.name)==="TimeoutError"),console.log("\uD83D\uDCCB 是否 NetworkError:",(null==e?void 0:e.name)==="NetworkError"),console.log("\uD83D\uDCCB 是否包含 revert:",null==e||null==(l=e.toString)||null==(i=l.call(e))||null==(o=i.includes)?void 0:o.call(i,"revert")),(null==e?void 0:e.code)&&console.log("\uD83D\uDCCB 错误代码:",e.code),(null==e?void 0:e.errno)&&console.log("\uD83D\uDCCB errno:",e.errno),(null==e?void 0:e.syscall)&&console.log("\uD83D\uDCCB syscall:",e.syscall)}catch(e){console.error("\uD83D\uDEA8 调试工具本身出错:",e)}finally{console.groupEnd()}},a=(e,s)=>{var r=s?"[".concat(s,"]"):"";e instanceof Error?(console.error("".concat(r," Error Name:"),e.name),console.error("".concat(r," Error Message:"),e.message),console.error("".concat(r," Error Stack:"),e.stack),console.error("".concat(r," Error Cause:"),e.cause)):"object"==typeof e&&null!==e?(console.error("".concat(r," Error Object:"),JSON.stringify(e,null,2)),console.error("".concat(r," Error Keys:"),Object.keys(e)),e.message&&console.error("".concat(r," Message:"),e.message),e.code&&console.error("".concat(r," Code:"),e.code),e.reason&&console.error("".concat(r," Reason:"),e.reason),e.data&&console.error("".concat(r," Data:"),e.data)):console.error("".concat(r," Error:"),e)},t=(e,s)=>{n(e,s),(null==e?void 0:e.details)&&console.error("[".concat(s,"] Details:"),e.details),(null==e?void 0:e.metaMessages)&&console.error("[".concat(s,"] Meta Messages:"),e.metaMessages),(null==e?void 0:e.shortMessage)&&console.error("[".concat(s,"] Short Message:"),e.shortMessage),(null==e?void 0:e.version)&&console.error("[".concat(s,"] Version:"),e.version)}},92659:(e,s,r)=>{"use strict";r.d(s,{lV:()=>g,MJ:()=>w,Rr:()=>j,zB:()=>x,eI:()=>N,lR:()=>T,C5:()=>E});var n=r(81110),a=r(40120),t=r(3576),o=r(62701),i=r(65699),l=r(37876),d=r(14232),c=r(39358),u=r(88992),m=r(30684),p=r(49794),f=(0,r(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=d.forwardRef((e,s)=>{var r=e.className,n=(0,i._)(e,["className"]);return(0,l.jsx)(p.b,(0,t._)({ref:s,className:(0,m.cn)(f(),r)},n))});y.displayName=p.b.displayName;var g=u.Op,v=d.createContext({}),x=e=>{var s=(0,n._)({},(0,a._)(e));return(0,l.jsx)(v.Provider,{value:{name:s.name},children:(0,l.jsx)(u.xI,(0,t._)({},s))})},b=()=>{var e=d.useContext(v),s=d.useContext(h),r=(0,u.xW)(),n=r.getFieldState,a=r.formState,o=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var i=s.id;return(0,t._)({id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message")},o)},h=d.createContext({}),N=d.forwardRef((e,s)=>{var r=e.className,n=(0,i._)(e,["className"]),a=d.useId();return(0,l.jsx)(h.Provider,{value:{id:a},children:(0,l.jsx)("div",(0,t._)({ref:s,className:(0,m.cn)("space-y-2",r)},n))})});N.displayName="FormItem";var T=d.forwardRef((e,s)=>{var r=e.className,n=(0,i._)(e,["className"]),a=b(),o=a.error,d=a.formItemId;return(0,l.jsx)(y,(0,t._)({ref:s,className:(0,m.cn)(o&&"text-destructive",r),htmlFor:d},n))});T.displayName="FormLabel";var w=d.forwardRef((e,s)=>{var r=(0,n._)({},(0,a._)(e)),o=b(),i=o.error,d=o.formItemId,u=o.formDescriptionId,m=o.formMessageId;return(0,l.jsx)(c.DX,(0,t._)({ref:s,id:d,"aria-describedby":i?"".concat(u," ").concat(m):"".concat(u),"aria-invalid":!!i},r))});w.displayName="FormControl";var j=d.forwardRef((e,s)=>{var r=e.className,n=(0,i._)(e,["className"]),a=b().formDescriptionId;return(0,l.jsx)("p",(0,t._)({ref:s,id:a,className:(0,m.cn)("text-sm text-muted-foreground",r)},n))});j.displayName="FormDescription";var E=d.forwardRef((e,s)=>{var r=e.className,n=e.children,a=(0,i._)(e,["className","children"]),d=b(),c=d.error,u=d.formMessageId,p=c?String(null==c?void 0:c.message):n;return p?(0,l.jsx)("p",(0,o._)((0,t._)({ref:s,id:u,className:(0,m.cn)("text-sm font-medium text-destructive",r)},a),{children:p})):null});E.displayName="FormMessage"},99574:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var n=r(37876),a=r(14232),t=r(7446);let o=e=>{var s=e.isLoading,r=e.text;return((0,a.useEffect)(()=>{if(s){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[s]),s)?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 touch-none overscroll-none",onTouchMove:e=>{e.preventDefault()},onTouchStart:e=>{e.preventDefault()},style:{touchAction:"none"},children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(t.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===r?"Loading":r})]})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[3308,9374,6869,3297,154,3096,5139,636,6593,8792],()=>s(47078)),_N_E=e.O()}]);