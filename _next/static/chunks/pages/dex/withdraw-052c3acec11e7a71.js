(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8264],{42038:(e,r,t)=>{"use strict";t.d(r,{C:()=>a});var s=t(97685),a=e=>!!e||(s.oR.error("请先将钱包链接 ".concat("thinkium70001")),!1)},65968:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex/withdraw",function(){return t(73498)}])},73498:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>M});var s=t(37876),a=t(60154),n=t(82695),o=t(16927),i=t(3576),c=t(62701),l=t(4902),d=t(14232),m=t(89099),u=t(60513),f=t(13810),x=t(88992),h=t(8047),v=t(57238),p=t(6960),w=t(77932),N=t(92659),j=t(97685),y=t(42038),b=t(20442),_=t(80693),g=t(9215),C=t(20451),F=t(25239),I=t(83416),A=t(1709),k=t(12293),E=t(99574),R=e=>u.z.object({withdrawAmount:u.z.string().nonempty("请输入兑换数量").refine(r=>{try{var t=(0,b.XS)(r);return t>0n&&t<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})});let T=()=>{var e=(0,m.useRouter)(),r=(0,h.F)(),t=r.address,a=r.chain,n=((0,d.useContext)(I.N)||{}).token,u=(0,v.A)({address:t}),T=u.data,M=u.error,S=u.isLoading,D=(0,g.lW)("0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71",t),z=D.balance,P=(D.isPending,D.error),L=(0,_.S1)(),X=L.withdraw,J=L.isPending,K=L.isConfirming,V=L.isConfirmed,O=L.writeError,B=(0,x.mN)({resolver:(0,f.u)(R(z||0n)),defaultValues:{withdrawAmount:""},mode:"onChange"});function W(){return(W=(0,o._)(function(e){return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!(0,y.C)(a))return j.oR.error("请切换到正确的网络"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,X((0,b.XS)(e.withdrawAmount))];case 2:return r.sent(),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}var $=(0,F.q)().setError;(0,d.useEffect)(()=>{V&&(j.oR.success("兑换成功"),$(null),setTimeout(()=>{n&&!n.hasEnded?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(n.symbol):n&&!n.initialStakeRound?window.location.href="".concat("/interface","/gov/stakelp/?symbol=").concat(n.symbol,"&first=true"):e.back()},2e3))},[V,e]);var q=()=>{B.setValue("withdrawAmount",(0,b.Js)(z||0n))},H=(0,C.g)().handleContractError;return((0,d.useEffect)(()=>{M&&H(M,"token"),P&&H(P,"token"),O&&H(O,"token")},[M,P,O,H]),S)?(0,s.jsx)(k.A,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-6 pt-0",children:[(0,s.jsx)("div",{className:"mb-4 flex items-center space-x-2",children:(0,s.jsx)(A.A,{title:"".concat("TestTKM20"," 兑换 ").concat(null==T?void 0:T.symbol)})}),(0,s.jsx)(N.lV,(0,c._)((0,i._)({},B),{children:(0,s.jsxs)("form",{onSubmit:B.handleSubmit(function(e){return W.apply(this,arguments)}),className:"space-y-4",children:[(0,s.jsx)(N.zB,{control:B.control,name:"withdrawAmount",render:e=>{var r=e.field;return(0,s.jsxs)(N.eI,{children:[(0,s.jsx)(N.MJ,{children:(0,s.jsx)(w.p,(0,i._)({placeholder:"填写 ".concat("TestTKM20"," 数量"),type:"number",disabled:J||K,className:"!ring-secondary-foreground"},r))}),(0,s.jsx)(N.C5,{}),(0,s.jsxs)(N.Rr,{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["共 ",S?(0,s.jsx)(k.A,{}):(0,b.NJ)(z||0n)," ","TestTKM20"]}),(0,s.jsx)(p.$,{type:"button",variant:"link",size:"sm",onClick:q,className:"text-secondary p-0 ml-2",disabled:S||J||K,children:"全部"})]})]})}}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(p.$,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:J||K||V,children:J?"提现中...":K?"确认中...":V?"提现成功":"提现"})}),(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ","TestTKM20"," = 1 ",null==T?void 0:T.symbol]})})]})}))]}),(0,s.jsx)(E.A,{isLoading:J||K,text:J?"提交交易...":"确认交易..."})]})};function M(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{title:"提现"}),(0,s.jsxs)("main",{className:"flex-grow",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)(T,{})]})]})}},92659:(e,r,t)=>{"use strict";t.d(r,{lV:()=>v,MJ:()=>_,Rr:()=>g,zB:()=>w,eI:()=>y,lR:()=>b,C5:()=>C});var s=t(81110),a=t(40120),n=t(3576),o=t(62701),i=t(65699),c=t(37876),l=t(14232),d=t(39358),m=t(88992),u=t(30684),f=t(49794),x=(0,t(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h=l.forwardRef((e,r)=>{var t=e.className,s=(0,i._)(e,["className"]);return(0,c.jsx)(f.b,(0,n._)({ref:r,className:(0,u.cn)(x(),t)},s))});h.displayName=f.b.displayName;var v=m.Op,p=l.createContext({}),w=e=>{var r=(0,s._)({},(0,a._)(e));return(0,c.jsx)(p.Provider,{value:{name:r.name},children:(0,c.jsx)(m.xI,(0,n._)({},r))})},N=()=>{var e=l.useContext(p),r=l.useContext(j),t=(0,m.xW)(),s=t.getFieldState,a=t.formState,o=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var i=r.id;return(0,n._)({id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message")},o)},j=l.createContext({}),y=l.forwardRef((e,r)=>{var t=e.className,s=(0,i._)(e,["className"]),a=l.useId();return(0,c.jsx)(j.Provider,{value:{id:a},children:(0,c.jsx)("div",(0,n._)({ref:r,className:(0,u.cn)("space-y-2",t)},s))})});y.displayName="FormItem";var b=l.forwardRef((e,r)=>{var t=e.className,s=(0,i._)(e,["className"]),a=N(),o=a.error,l=a.formItemId;return(0,c.jsx)(h,(0,n._)({ref:r,className:(0,u.cn)(o&&"text-destructive",t),htmlFor:l},s))});b.displayName="FormLabel";var _=l.forwardRef((e,r)=>{var t=(0,s._)({},(0,a._)(e)),o=N(),i=o.error,l=o.formItemId,m=o.formDescriptionId,u=o.formMessageId;return(0,c.jsx)(d.DX,(0,n._)({ref:r,id:l,"aria-describedby":i?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!i},t))});_.displayName="FormControl";var g=l.forwardRef((e,r)=>{var t=e.className,s=(0,i._)(e,["className"]),a=N().formDescriptionId;return(0,c.jsx)("p",(0,n._)({ref:r,id:a,className:(0,u.cn)("text-sm text-muted-foreground",t)},s))});g.displayName="FormDescription";var C=l.forwardRef((e,r)=>{var t=e.className,s=e.children,a=(0,i._)(e,["className","children"]),l=N(),d=l.error,m=l.formMessageId,f=d?String(null==d?void 0:d.message):s;return f?(0,c.jsx)("p",(0,o._)((0,n._)({ref:r,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",t)},a),{children:f})):null});C.displayName="FormMessage"},99574:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(37876),a=t(14232),n=t(7446);let o=e=>{var r=e.isLoading,t=e.text;return((0,a.useEffect)(()=>{if(r){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[r]),r)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 touch-none overscroll-none",onTouchMove:e=>{e.preventDefault()},onTouchStart:e=>{e.preventDefault()},style:{touchAction:"none"},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(n.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,s.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===t?"Loading":t})]})}):null}}},e=>{var r=r=>e(e.s=r);e.O(0,[3308,9374,6869,4571,154,3096,5139,3439,636,6593,8792],()=>r(65968)),_N_E=e.O()}]);