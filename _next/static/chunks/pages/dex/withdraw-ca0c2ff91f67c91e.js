(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6637],{34166:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex/withdraw",function(){return n(15737)}])},76929:function(e,t,n){"use strict";n.d(t,{l0:function(){return u},NI:function(){return w},pf:function(){return b},Wi:function(){return f},xJ:function(){return j},lX:function(){return p},zG:function(){return N}});var r=n(85893),s=n(67294),a=n(4222),i=n(87536),c=n(40108),o=n(41850);let l=(0,n(12003).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.f,{ref:t,className:(0,c.cn)(l(),n),...s})});d.displayName=o.f.displayName;let u=i.RV,m=s.createContext({}),f=e=>{let{...t}=e;return(0,r.jsx)(m.Provider,{value:{name:t.name},children:(0,r.jsx)(i.Qr,{...t})})},x=()=>{let e=s.useContext(m),t=s.useContext(h),{getFieldState:n,formState:r}=(0,i.Gc)(),a=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=t;return{id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message"),...a}},h=s.createContext({}),j=s.forwardRef((e,t)=>{let{className:n,...a}=e,i=s.useId();return(0,r.jsx)(h.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,c.cn)("space-y-2",n),...a})})});j.displayName="FormItem";let p=s.forwardRef((e,t)=>{let{className:n,...s}=e,{error:a,formItemId:i}=x();return(0,r.jsx)(d,{ref:t,className:(0,c.cn)(a&&"text-destructive",n),htmlFor:i,...s})});p.displayName="FormLabel";let w=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:i,formDescriptionId:c,formMessageId:o}=x();return(0,r.jsx)(a.g7,{ref:t,id:i,"aria-describedby":s?"".concat(c," ").concat(o):"".concat(c),"aria-invalid":!!s,...n})});w.displayName="FormControl";let b=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:a}=x();return(0,r.jsx)("p",{ref:t,id:a,className:(0,c.cn)("text-sm text-muted-foreground",n),...s})});b.displayName="FormDescription";let N=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e,{error:i,formMessageId:o}=x(),l=i?String(null==i?void 0:i.message):s;return l?(0,r.jsx)("p",{ref:t,id:o,className:(0,c.cn)("text-sm font-medium text-destructive",n),...a,children:l}):null});N.displayName="FormMessage"},44576:function(e,t,n){"use strict";var r=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t,text:n="Loading"}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:n})]})}):null}},48105:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(86501);let s=e=>!!e||(r.Am.error("请先将钱包链接 ".concat("thinkium801")),!1)},15737:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(85893),s=n(37436),a=n(84333),i=n(67294),c=n(11163),o=n(1604),l=n(56312),d=n(87536),u=n(92321),m=n(53438),f=n(27245),x=n(21774),h=n(76929),j=n(86501),p=n(48105),w=n(91529),b=n(33838),N=n(19638),y=n(10403),v=n(95049),g=n(93778),C=n(64777),F=n(42083),k=n(44576);let _=e=>o.z.object({withdrawAmount:o.z.string().nonempty("请输入兑换数量").refine(t=>{try{let n=(0,w.vz)(t);return n>0n&&n<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})});var T=()=>{let e=(0,c.useRouter)(),{address:t,chain:n}=(0,u.m)(),{token:s}=(0,i.useContext)(g.M)||{},{data:a,error:o,isLoading:T}=(0,m.K)({address:t}),{balance:z,isPending:E,error:I}=(0,N.hS)("0x015b1A506F2aa2B1ecC000aB799ED6C59005fBb3",t),{withdraw:A,isPending:R,isConfirming:M,isConfirmed:S,error:Z}=(0,b.Qc)(),P=(0,d.cI)({resolver:(0,l.F)(_(z||0n)),defaultValues:{withdrawAmount:""},mode:"onChange"});async function K(e){if(!(0,p.S)(n)){j.Am.error("请切换到正确的网络");return}try{await A((0,w.vz)(e.withdrawAmount))}catch(e){console.error(e)}}let{setError:L}=(0,v.V)();(0,i.useEffect)(()=>{S&&(j.Am.success("兑换成功"),L(null),setTimeout(()=>{s&&!s.hasEnded?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(s.symbol):s&&!s.initialStakeRound?window.location.href="".concat("/interface","/gov/stakelp/?symbol=").concat(s.symbol,"&first=true"):e.back()},2e3))},[S,e]);let V=()=>{P.setValue("withdrawAmount",(0,w.bM)(z||0n))},{handleContractError:B}=(0,y.S)();return((0,i.useEffect)(()=>{o&&B(o,"token"),I&&B(I,"token"),Z&&B(Z,"token")},[o,I,Z,B]),T)?(0,r.jsx)(F.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-6 pt-0",children:[(0,r.jsx)("div",{className:"mb-4 flex items-center space-x-2",children:(0,r.jsx)(C.Z,{title:"".concat("TestTKM20"," 兑换 ").concat(null==a?void 0:a.symbol)})}),(0,r.jsx)(h.l0,{...P,children:(0,r.jsxs)("form",{onSubmit:P.handleSubmit(K),className:"space-y-4",children:[(0,r.jsx)(h.Wi,{control:P.control,name:"withdrawAmount",render:e=>{let{field:t}=e;return(0,r.jsxs)(h.xJ,{children:[(0,r.jsx)(h.NI,{children:(0,r.jsx)(x.I,{placeholder:"填写 ".concat("TestTKM20"," 数量"),type:"number",disabled:R||M,className:"!ring-secondary-foreground",...t})}),(0,r.jsx)(h.zG,{}),(0,r.jsxs)(h.pf,{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{children:["共 ",T?(0,r.jsx)(F.Z,{}):(0,w.LH)(z||0n)," ","TestTKM20"]}),(0,r.jsx)(f.z,{type:"button",variant:"link",size:"sm",onClick:V,className:"text-secondary p-0 ml-2",disabled:T||R||M,children:"全部"})]})]})}}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(f.z,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:R||M||S,children:R?"提现中...":M?"确认中...":S?"提现成功":"提现"})}),(0,r.jsx)("div",{className:"flex justify-center mb-2",children:(0,r.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ","TestTKM20"," = 1 ",null==a?void 0:a.symbol]})})]})})]}),(0,r.jsx)(k.Z,{isLoading:R||M,text:R?"提交交易...":"确认交易..."})]})};function z(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:"提现"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(T,{})]})]})}}},function(e){e.O(0,[5828,2209,2083,7380,6865,2888,9774,179],function(){return e(e.s=34166)}),_N_E=e.O()}]);