try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ee7a419f-62ac-465c-9b39-b393d7b07ed3",e._sentryDebugIdIdentifier="sentry-dbid-ee7a419f-62ac-465c-9b39-b393d7b07ed3")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{17137:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex/swap",function(){return t(14306)}])},34680:function(e,n,t){"use strict";t.d(n,{Ol:function(){return u},SZ:function(){return c},Zb:function(){return o},aY:function(){return m},eW:function(){return f},ll:function(){return l}});var s=t(72253),a=t(47702),r=t(85893),i=t(67294),d=t(40108),o=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},i))});o.displayName="Card";var u=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",t)},i))});u.displayName="CardHeader";var l=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",t)},i))});l.displayName="CardTitle";var c=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("text-sm text-muted-foreground",t)},i))});c.displayName="CardDescription";var m=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("p-6 pt-0",t)},i))});m.displayName="CardContent";var f=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:n,className:(0,d.cn)("flex items-center p-6 pt-0",t)},i))});f.displayName="CardFooter"},74193:function(e,n,t){"use strict";t.d(n,{NI:function(){return N},Wi:function(){return x},l0:function(){return p},lX:function(){return g},pf:function(){return T},xJ:function(){return v},zG:function(){return w}});var s=t(34788),a=t(12796),r=t(72253),i=t(14932),d=t(47702),o=t(85893),u=t(67294),l=t(88426),c=t(87536),m=t(40108),f=t(94193),p=c.RV,y=u.createContext({}),x=function(e){var n=(0,s._)({},(0,a._)(e));return(0,o.jsx)(y.Provider,{value:{name:n.name},children:(0,o.jsx)(c.Qr,(0,r._)({},n))})},h=function(){var e=u.useContext(y),n=u.useContext(b),t=(0,c.Gc)(),s=t.getFieldState,a=t.formState,i=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var d=n.id;return(0,r._)({id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message")},i)},b=u.createContext({}),v=u.forwardRef(function(e,n){var t=e.className,s=(0,d._)(e,["className"]),a=u.useId();return(0,o.jsx)(b.Provider,{value:{id:a},children:(0,o.jsx)("div",(0,r._)({ref:n,className:(0,m.cn)("space-y-2",t)},s))})});v.displayName="FormItem";var g=u.forwardRef(function(e,n){var t=e.className,s=(0,d._)(e,["className"]),a=h(),i=a.error,u=a.formItemId;return(0,o.jsx)(f._,(0,r._)({ref:n,className:(0,m.cn)(i&&"text-destructive",t),htmlFor:u},s))});g.displayName="FormLabel";var N=u.forwardRef(function(e,n){var t=(0,s._)({},(0,a._)(e)),i=h(),d=i.error,u=i.formItemId,c=i.formDescriptionId,m=i.formMessageId;return(0,o.jsx)(l.g7,(0,r._)({ref:n,id:u,"aria-describedby":d?"".concat(c," ").concat(m):"".concat(c),"aria-invalid":!!d},t))});N.displayName="FormControl";var T=u.forwardRef(function(e,n){var t=e.className,s=(0,d._)(e,["className"]),a=h().formDescriptionId;return(0,o.jsx)("p",(0,r._)({ref:n,id:a,className:(0,m.cn)("text-sm text-muted-foreground",t)},s))});T.displayName="FormDescription";var w=u.forwardRef(function(e,n){var t=e.className,s=e.children,a=(0,d._)(e,["className","children"]),u=h(),l=u.error,c=u.formMessageId,f=l?String(null==l?void 0:l.message):s;return f?(0,o.jsx)("p",(0,i._)((0,r._)({ref:n,id:c,className:(0,m.cn)("text-sm font-medium text-destructive",t)},a),{children:f})):null});w.displayName="FormMessage"},94193:function(e,n,t){"use strict";t.d(n,{_:function(){return c}});var s=t(72253),a=t(47702),r=t(85893),i=t(67294),d=t(49102),o=t(12003),u=t(40108),l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(function(e,n){var t=e.className,i=(0,a._)(e,["className"]);return(0,r.jsx)(d.f,(0,s._)({ref:n,className:(0,u.cn)(l(),t)},i))});c.displayName=d.f.displayName},88659:function(e,n,t){"use strict";t.d(n,{Bw:function(){return b},Ph:function(){return f},Ql:function(){return v},i4:function(){return y},ki:function(){return p}});var s=t(72253),a=t(14932),r=t(47702),i=t(85893),d=t(67294),o=t(76405),u=t(42171),l=t(15432),c=t(78865),m=t(40108),f=o.fC;o.ZA;var p=o.B4,y=d.forwardRef(function(e,n){var t=e.className,d=e.children,l=(0,r._)(e,["className","children"]);return(0,i.jsxs)(o.xz,(0,a._)((0,s._)({ref:n,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},l),{children:[d,(0,i.jsx)(o.JO,{asChild:!0,children:(0,i.jsx)(u.Z,{className:"h-4 w-4 opacity-50"})})]}))});y.displayName=o.xz.displayName;var x=d.forwardRef(function(e,n){var t=e.className,d=(0,r._)(e,["className"]);return(0,i.jsx)(o.u_,(0,a._)((0,s._)({ref:n,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t)},d),{children:(0,i.jsx)(l.Z,{className:"h-4 w-4"})}))});x.displayName=o.u_.displayName;var h=d.forwardRef(function(e,n){var t=e.className,d=(0,r._)(e,["className"]);return(0,i.jsx)(o.$G,(0,a._)((0,s._)({ref:n,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t)},d),{children:(0,i.jsx)(u.Z,{className:"h-4 w-4"})}))});h.displayName=o.$G.displayName;var b=d.forwardRef(function(e,n){var t=e.className,d=e.children,u=e.position,l=void 0===u?"popper":u,c=(0,r._)(e,["className","children","position"]);return(0,i.jsx)(o.h_,{children:(0,i.jsxs)(o.VY,(0,a._)((0,s._)({ref:n,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l},c),{children:[(0,i.jsx)(x,{}),(0,i.jsx)(o.l_,{className:(0,m.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:d}),(0,i.jsx)(h,{})]}))})});b.displayName=o.VY.displayName,d.forwardRef(function(e,n){var t=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(o.__,(0,s._)({ref:n,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},a))}).displayName=o.__.displayName;var v=d.forwardRef(function(e,n){var t=e.className,d=e.children,u=(0,r._)(e,["className","children"]);return(0,i.jsxs)(o.ck,(0,a._)((0,s._)({ref:n,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},u),{children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(o.wU,{children:(0,i.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(o.eT,{children:d})]}))});v.displayName=o.ck.displayName,d.forwardRef(function(e,n){var t=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(o.Z0,(0,s._)({ref:n,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",t)},a))}).displayName=o.Z0.displayName},67997:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var s=(0,t(31134).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},42083:function(e,n,t){"use strict";var s=t(85893),a=t(23432);n.Z=function(){return(0,s.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},43032:function(e,n,t){"use strict";var s=t(67294),a=t(93778);n.Z=function(){var e=(0,s.useContext)(a.M);if(void 0===e)throw Error("useTokenContext must be used within a TokenProvider");return e}},33838:function(e,n,t){"use strict";t.d(n,{hS:function(){return m},Qo:function(){return f},Qc:function(){return p}});var s=t(11010),a=t(97582),r=t(67294),i=t(71104),d=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],o=t(37742),u=t(37474),l=t(84689),c="0xc3Da46ED14dBd79922027031BB5D688A81139e01",m=function(e,n){var t=(0,i.u)({address:e,abi:d,functionName:"balanceOf",args:[n],query:{enabled:!!e&&!!n}}),s=t.data,a=t.isPending,r=t.error;return{balance:s?(0,o.Zu)(s):void 0,isPending:a,error:r}},f=function(){var e,n=(0,u.e9)(d,c,"deposit"),t=n.execute,i=n.isPending,o=n.isConfirming,m=n.isConfirmed,f=n.error,p=n.hash,y=n.isTukeMode,x=(e=(0,s._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,t([],e)];case 1:return[2,n.sent()]}})}),function(n){return e.apply(this,arguments)});return(0,r.useEffect)(function(){f&&((0,l.Vh)(f),(0,l.H)(f))},[p,f]),{deposit:x,isPending:i,isConfirming:o,writeError:f,isConfirmed:m,hash:p,isTukeMode:y}},p=function(){var e,n=(0,u.e9)(d,c,"withdraw"),t=n.execute,i=n.isPending,o=n.isConfirming,m=n.isConfirmed,f=n.error,p=n.hash,y=n.isTukeMode,x=(e=(0,s._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,t([e])];case 1:return[2,n.sent()]}})}),function(n){return e.apply(this,arguments)});return(0,r.useEffect)(function(){f&&((0,l.Vh)(f),(0,l.H)(f))},[p,f]),{withdraw:x,isPending:i,isConfirming:o,writeError:f,isConfirmed:m,hash:p,isTukeMode:y}}},14306:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var s=t(85893),a=t(67294),r=t(67997),i=t(83494),d=t(11010),o=t(72253),u=t(14932),l=t(91309),c=t(97582),m=t(11163),f=t(86501),p=t(63448),y=t(56312),x=t(62776),h=t(42130),b=t(39360),v=t(87536),g=(0,t(31134).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),N=t(27245),T=t(21774),w=t(34680),j=t(88659),_=t(74193),E=t(91529),C=t(73591),k=t(85794),A=t(33838),I=t(92180),M=t(71104),B=t(37474),D=[{type:"function",name:"swapExactTokensForTokens",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"nonpayable"},{type:"function",name:"swapExactETHForTokens",inputs:[{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"payable"},{type:"function",name:"swapExactTokensForETH",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"amountOutMin",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"},{name:"to",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"nonpayable"},{type:"function",name:"getAmountsOut",inputs:[{name:"amountIn",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"getAmountsIn",inputs:[{name:"amountOut",type:"uint256",internalType:"uint256"},{name:"path",type:"address[]",internalType:"address[]"}],outputs:[{name:"amounts",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"}],H=t(84689),V="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",O=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=(0,M.u)({address:V,abi:D,functionName:"getAmountsOut",args:[e,n],query:{enabled:!!e&&n.length>=2&&t}});return{data:s.data,error:s.error,isLoading:s.isLoading}},W=t(43032),F=t(64777),P=t(42083),Z=t(44576),R=function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=[];t.push({symbol:"TKM",address:"NATIVE",decimals:18,isNative:!0});var s="TKM20",a="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return s&&a&&t.push({symbol:s,address:a,decimals:18,isNative:!1,isWETH:!0}),e&&(n&&e.symbol&&e.address&&!t.find(function(n){return n.address===e.address})&&t.push({symbol:e.symbol,address:e.address,decimals:18,isNative:!1}),e.parentTokenSymbol&&e.parentTokenAddress&&!t.find(function(n){return n.address===e.parentTokenAddress})&&t.push({symbol:e.parentTokenSymbol,address:e.parentTokenAddress,decimals:18,isNative:!1,isWETH:"0xc3Da46ED14dBd79922027031BB5D688A81139e01"===e.parentTokenAddress})),t},U=function(e,n){var t="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return e.isNative?[t,n.address]:n.isNative?[e.address,t]:[e.address,n.address]},S=function(e,n){var t=(0,x.K)({address:n,query:{enabled:!!n&&e.isNative}}),s=t.data,a=t.isLoading,r=(0,k.hS)(e.isNative?"0x0000000000000000000000000000000000000000":e.address,n),i=r.balance,d=r.isPending;return{balance:e.isNative?null==s?void 0:s.value:i,isPending:e.isNative?a:d}},z=function(e){var n,t,r,i,x,M,z,L,K,J,Q,q,G,Y,X,$,ee,en,et,es,ea,er,ei,ed,eo,eu,el,ec,em,ef,ep,ey=e.showCurrentToken,ex=void 0===ey||ey,eh=(0,m.useRouter)(),eb=(0,h.m)().address;(0,b.x)();var ev=(0,W.Z)().token,eg=(0,a.useMemo)(function(){return R(ev,ex)},[ev,ex]),eN=(0,l._)((0,a.useState)({symbol:"TKM",address:"NATIVE",decimals:18,isNative:!0}),2),eT=eN[0],ew=eN[1],ej=(0,l._)((0,a.useState)({symbol:"LOVE20",address:"0x6458E25680765Add4e2ca8d5a31fA08f5e1b6e4a",decimals:18,isNative:!1,isWETH:!1}),2),e_=ej[0],eE=ej[1];(0,a.useEffect)(function(){if(ev&&eg.length>0){var e=eh.query,n=e.from,t=e.to,s=void 0,a=void 0,r=!1;!n||"string"!=typeof n||(s=eg.find(function(e){return e.symbol&&e.symbol.toLowerCase()===n.toLowerCase()}))||(f.Am.error("找不到代币 ".concat(n)),r=!0),!t||"string"!=typeof t||(a=eg.find(function(e){return e.symbol&&e.symbol.toLowerCase()===t.toLowerCase()}))||(f.Am.error("找不到代币 ".concat(t)),r=!0),s&&a&&s.address===a.address&&(f.Am.error("不能选择相同的代币进行兑换"),r=!0,s=void 0,a=void 0),s?ew(s):eg[0]&&ew(eg[0]);var i=s||eg[0];if(a&&a.address!==(null==i?void 0:i.address))eE(a);else{var d=void 0,u="LOVE20";if(u&&(d=eg.find(function(e){return e.symbol===u&&e.address!==(null==i?void 0:i.address)})),!d){for(var l=1;l<eg.length;l++)if(eg[l].address!==(null==i?void 0:i.address)){d=eg[l];break}}!d&&eg.length>1&&(eg[1].address!==(null==i?void 0:i.address)?d=eg[1]:eg[0].address!==(null==i?void 0:i.address)&&(d=eg[0])),d&&eE(d)}if(r){f.Am.error("已切换为默认代币对儿");var c=(0,o._)({},eh.query);delete c.from,delete c.to,eh.replace({pathname:eh.pathname,query:c},void 0,{shallow:!0})}}},[eg,eh,ev]);var eC=S(eT,eb),ek=eC.balance,eA=eC.isPending,eI=S(e_,eb),eM=eI.balance,eB=eI.isPending,eD=(0,I.VL)(null==ev?void 0:ev.address),eH=eD.initialStakeRound,eV=(eD.isPending,eD.error);(0,a.useEffect)(function(){},[ek,eM,eA,eB,eT,e_,eb]);var eO=(0,v.cI)({resolver:(0,y.F)((n=ek||BigInt(0),p.Ry({fromTokenAmount:p.Z_().nonempty("请输入兑换数量").refine(function(e){if(e.endsWith(".")||"0"===e)return!0;try{var t=(0,E.vz)(e);return t>BigInt(0)&&t<=n}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),fromTokenAddress:p.Z_(),toTokenAddress:p.Z_()}))),defaultValues:{fromTokenAmount:"",fromTokenAddress:eT.address,toTokenAddress:e_.address},mode:"onChange"});(0,a.useEffect)(function(){eO.setValue("fromTokenAddress",eT.address),eO.setValue("toTokenAddress",e_.address)},[eT.address,e_.address,eO]);var eW=(0,l._)((0,a.useState)(BigInt(0)),2),eF=eW[0],eP=eW[1],eZ=(0,l._)((0,a.useState)(BigInt(0)),2),eR=eZ[0],eU=eZ[1],eS=(0,a.useMemo)(function(){},[eT.isNative,e_.isWETH]),ez=eO.watch("fromTokenAmount");(0,a.useEffect)(function(){try{var e=(0,E.vz)(ez||"0"),n=e;if(eS&&e>eS){n=eS;var t=(0,E.bM)(n);ez&&ez!==t&&(eO.setValue("fromTokenAmount",t),(0,f.Am)("测试环境限制：最多可使用 "+t+" "+eT.symbol))}eP(n)}catch(e){eP(BigInt(0))}},[ez,eS,eO,eT.symbol]);var eL=function(){var e=ek||BigInt(0),n=eS&&e>eS?eS:e,t=(0,E.bM)(n);eO.setValue("fromTokenAmount",t)},eK=(0,a.useMemo)(function(){return eT.isNative&&e_.isWETH||eT.isWETH&&e_.isNative?"WETH9":!eT.isNative||e_.isNative||e_.isWETH?eT.isNative||eT.isWETH||!e_.isNative?"UniswapV2_TOKEN_TO_TOKEN":"UniswapV2_TOKEN_TO_ETH":"UniswapV2_ETH_TO_TOKEN"},[eT,e_]),eJ=(0,a.useMemo)(function(){return"WETH9"===eK?[]:U(eT,e_)},[eT,e_,eK]);(0,a.useEffect)(function(){"UniswapV2_ETH_TO_TOKEN"===eK&&eJ.length>=2&&"0xc3Da46ED14dBd79922027031BB5D688A81139e01"!==eJ[0]&&f.Am.error("交换路径配置错误，请检查 WETH 地址配置")},[eK,eT,e_,eJ]);var eQ=!(eT.symbol===(null==ev?void 0:ev.symbol)||e_.symbol===(null==ev?void 0:ev.symbol))||!!eH,eq=O(eF,eJ,eQ&&"WETH9"!==eK&&eF>BigInt(0)&&eJ.length>=2),eG=eq.data,eY=eq.error;eq.isLoading;var eX=(0,C.S)().handleContractError;(0,a.useEffect)(function(){eY&&eX(eY,"uniswapV2Router")},[eY,eF,eJ,eK,eX]),(0,a.useEffect)(function(){"WETH9"===eK?eU(eF):eG&&eG.length>1?eU(BigInt(eG[1])):eU(BigInt(0))},[eK,eF,eG]);var e$=(0,a.useMemo)(function(){if("WETH9"===eK)return{feePercentage:0,feeAmount:"0"};var e=.3*parseFloat(ez||"0")/100;return{feePercentage:.3,feeAmount:e<parseFloat("0.1")?e.toExponential(2):e.toFixed(6)}},[eK,ez]),e0=(0,a.useMemo)(function(){if(eF>BigInt(0)&&eR>BigInt(0))try{var e=(0,E.bM)(eF),n=(0,E.bM)(eR),t=parseFloat(e),s=parseFloat(n);if(t>0)return(0,E.eb)((s/t).toString(),2,4)}catch(e){}return"0"},[eF,eR]),e2=!eT.isNative&&"WETH9"!==eK,e1="WETH9"===eK?"0xc3Da46ED14dBd79922027031BB5D688A81139e01":"0xBE7A91095198ddc6356CD7751c3dECa98321FE37",e3=(0,k.yA)(eT.address),e5=e3.approve,e6=e3.isPending,e4=e3.isConfirming,e9=e3.isConfirmed,e7=e3.writeError,e8=(0,A.Qo)(),ne=e8.deposit,nn=e8.isPending,nt=e8.writeError,ns=e8.isConfirming,na=e8.isConfirmed,nr=(0,A.Qc)(),ni=nr.withdraw,nd=nr.isPending,no=nr.writeError,nu=nr.isConfirming,nl=nr.isConfirmed,nc=(r=(t=(0,B.e9)(D,V,"swapExactTokensForTokens")).execute,i=t.isPending,x=t.isConfirming,M=t.isConfirmed,z=t.error,L=t.hash,K=t.isTukeMode,J=(0,d._)(function(e,n,t,s,a){return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,r([e,n,t,s,a])];case 1:return[2,i.sent()]}})}),Q=function(e,n,t,s,a){return J.apply(this,arguments)},(0,a.useEffect)(function(){z&&((0,H.Vh)(z),(0,H.H)(z))},[L,z]),{swap:Q,writeData:L,isWriting:i,writeError:z,isConfirming:x,isConfirmed:M,isTukeMode:K}),nm=nc.swap,nf=nc.isWriting,np=nc.isConfirming,ny=nc.isConfirmed,nx=nc.writeError,nh=(G=(q=(0,B.e9)(D,V,"swapExactETHForTokens")).execute,Y=q.isPending,X=q.isConfirming,$=q.isConfirmed,ee=q.error,en=q.hash,et=q.isTukeMode,es=(0,d._)(function(e,n,t,s,a){return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,G([e,n,t,s],a)];case 1:return[2,r.sent()]}})}),ea=function(e,n,t,s,a){return es.apply(this,arguments)},(0,a.useEffect)(function(){ee&&((0,H.Vh)(ee),(0,H.H)(ee))},[en,ee]),{swap:ea,writeData:en,isWriting:Y,writeError:ee,isConfirming:X,isConfirmed:$,isTukeMode:et}),nb=nh.swap,nv=nh.isWriting,ng=nh.isConfirming,nN=nh.isConfirmed,nT=nh.writeError,nw=(ei=(er=(0,B.e9)(D,V,"swapExactTokensForETH")).execute,ed=er.isPending,eo=er.isConfirming,eu=er.isConfirmed,el=er.error,ec=er.hash,em=er.isTukeMode,ef=(0,d._)(function(e,n,t,s,a){return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,ei([e,n,t,s,a])];case 1:return[2,r.sent()]}})}),ep=function(e,n,t,s,a){return ef.apply(this,arguments)},(0,a.useEffect)(function(){el&&((0,H.Vh)(el),(0,H.H)(el))},[ec,el]),{swap:ep,writeData:ec,isWriting:ed,writeError:el,isConfirming:eo,isConfirmed:eu,isTukeMode:em}),nj=nw.swap,n_=nw.isWriting,nE=nw.isConfirming,nC=nw.isConfirmed,nk=nw.writeError,nA=e6||e4,nI=e9||!e2,nM=nn||ns||nd||nu||nf||np||nv||ng||n_||nE,nB=na||nl||ny||nN||nC,nD=eA||eB;(0,a.useEffect)(function(){},[eA,eB,nI,e9,e2,nD]);var nH=eO.handleSubmit((0,d._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,e5(e1,eF)];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}})}));(0,a.useEffect)(function(){e9&&f.Am.success("授权".concat(eT.symbol,"成功"))},[e9,eT.symbol]);var nV=eO.handleSubmit((0,d._)(function(){var e,n,t,s,a,r,i,d,o;return(0,c.Jh)(this,function(u){switch(u.label){case 0:if(!eQ)return f.Am.error("流动池为空，无法兑换，请稍后重试"),[2];u.label=1;case 1:if(u.trys.push([1,14,,15]),eS&&eF>eS)return e=(0,E.bM)(eS),eO.setValue("fromTokenAmount",e),f.Am.error("输入超出测试环境上限，已调整为 ".concat(e," ").concat(eT.symbol)),[2];if(n="0xc3Da46ED14dBd79922027031BB5D688A81139e01","UniswapV2_ETH_TO_TOKEN"===eK){if(2!==eJ.length)return f.Am.error("交换路径配置错误"),[2];if(eJ[0]!==n)return f.Am.error("WETH 地址配置错误"),[2]}if(eR<=BigInt(0))return f.Am.error("无法获取兑换价格，流动池可能不足"),[2];switch(t=BigInt(Math.floor(Date.now()/1e3)+1200),s=eR*BigInt(995)/BigInt(1e3),eK){case"WETH9":return[3,2];case"UniswapV2_ETH_TO_TOKEN":return[3,7];case"UniswapV2_TOKEN_TO_ETH":return[3,9];case"UniswapV2_TOKEN_TO_TOKEN":return[3,11]}return[3,13];case 2:if(!eT.isNative)return[3,4];return[4,ne(eF)];case 3:return u.sent(),[3,6];case 4:return[4,ni(eF)];case 5:u.sent(),u.label=6;case 6:return[3,13];case 7:return[4,nb(s,eJ,eb,t,eF)];case 8:case 10:case 12:return u.sent(),[3,13];case 9:return[4,nj(eF,s,[eT.address,"0xc3Da46ED14dBd79922027031BB5D688A81139e01"],eb,t)];case 11:return[4,nm(eF,s,[eT.address,e_.address],eb,t)];case 13:return[3,15];case 14:if((null===(r=(a=u.sent()).message)||void 0===r?void 0:r.includes("INSUFFICIENT_OUTPUT_AMOUNT"))||(null===(d=a.cause)||void 0===d?void 0:null===(i=d.message)||void 0===i?void 0:i.includes("INSUFFICIENT_OUTPUT_AMOUNT"))||(null===(o=a.details)||void 0===o?void 0:o.includes("INSUFFICIENT_OUTPUT_AMOUNT")))return f.Am.error("价格变动过快超过滑点保护，交易被保护性取消，请重试"),[2];return eX(a,"uniswapV2Router"),[3,15];case 15:return[2]}})}));if((0,a.useEffect)(function(){nB&&(f.Am.success("兑换成功"),setTimeout(function(){var e=new URL(window.location.href);e.searchParams.set("from",eT.symbol),e.searchParams.set("to",e_.symbol),window.location.href=e.toString()},2e3))},[nB,eT.symbol,e_.symbol]),(0,a.useEffect)(function(){[eV,e7,nt,no,nx,nT,nk].forEach(function(e){e&&eX(e,"uniswapV2Router")})},[eV,e7,nt,no,nx,nT,nk,eX]),!ev)return(0,s.jsx)(P.Z,{});if(0===eg.length)return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(F.Z,{title:"兑换"}),(0,s.jsx)("div",{className:"text-center text-greyscale-500 mt-4",children:"正在加载代币信息..."})]});var nO=nA||nM;return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(F.Z,{title:"兑换代币"}),(0,s.jsxs)("div",{className:"w-full max-w-md mt-4",children:[(0,s.jsx)(_.l0,(0,u._)((0,o._)({},eO),{children:(0,s.jsxs)("form",{children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(_.Wi,{control:eO.control,name:"fromTokenAmount",render:function(e){var n=e.field;return(0,s.jsxs)(_.xJ,{children:[(0,s.jsx)(w.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,s.jsxs)(w.aY,{className:"py-4 px-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(T.I,(0,u._)((0,o._)({type:"number",placeholder:"0"},n),{disabled:nD,className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,s.jsx)(_.Wi,{control:eO.control,name:"fromTokenAddress",render:function(e){var n=e.field;return(0,s.jsx)(_.xJ,{children:(0,s.jsx)(_.NI,{children:(0,s.jsxs)(j.Ph,{value:n.value,onValueChange:function(e){var t=eg.find(function(n){return n.address===e});t&&(t.address===e_.address?(ew(t),eE(eT),n.onChange(t.address),eO.setValue("toTokenAddress",eT.address),eO.setValue("fromTokenAmount","")):(n.onChange(e),ew(t)))},disabled:nD,children:[(0,s.jsx)(j.i4,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:eT.symbol})})}),(0,s.jsx)(j.Bw,{children:eg.map(function(e){return(0,s.jsx)(j.Ql,{value:e.address,className:"font-mono",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"font-mono",children:e.symbol})})},e.address)})})]})})})}})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[[25,50,75].map(function(e){return(0,s.jsxs)(N.z,{variant:"outline",size:"sm",type:"button",onClick:function(){var n=(null!=ek?ek:BigInt(0))*BigInt(e)/BigInt(100),t=eS&&n>eS?eS:n;eO.setValue("fromTokenAmount",(0,E.bM)(t))},disabled:nD||(ek||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)}),(0,s.jsx)(N.z,{variant:"outline",size:"sm",type:"button",onClick:eL,disabled:nD||(ek||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,E.LH)(ek||BigInt(0))," ",eT.symbol]})]}),eS&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["测试环境限制：",e_.isWETH?"最多可使用 1 ":"最多可使用 ".concat("0.1"," "),eT.symbol]})]})}),(0,s.jsx)(_.zG,{})]})}})}),(0,s.jsx)("div",{className:"flex justify-center mb-1",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(N.z,{variant:"ghost",type:"button",size:"icon",className:"rounded-full hover:bg-gray-100",onClick:function(){var e=(0,o._)({},eT);ew((0,o._)({},e_)),eE(e),eO.setValue("fromTokenAmount","")},disabled:nD,children:(0,s.jsx)(g,{className:"w-5 h-5 text-gray-600"})})})}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(w.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,s.jsxs)(w.aY,{className:"py-4 px-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(T.I,{type:"number",placeholder:"0",value:(0,E.bM)(eR),disabled:!0,readOnly:!0,className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"}),(0,s.jsx)(_.Wi,{control:eO.control,name:"toTokenAddress",render:function(e){var n=e.field;return(0,s.jsx)(_.xJ,{children:(0,s.jsx)(_.NI,{children:(0,s.jsxs)(j.Ph,{value:n.value,onValueChange:function(e){var t=eg.find(function(n){return n.address===e});t&&(t.address===eT.address?(ew(e_),eE(t),n.onChange(t.address),eO.setValue("fromTokenAddress",e_.address),eO.setValue("fromTokenAmount","")):(n.onChange(e),eE(t)))},disabled:nD,children:[(0,s.jsx)(j.i4,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:e_.symbol})})}),(0,s.jsx)(j.Bw,{children:eg.map(function(e){return(0,s.jsx)(j.Ql,{value:e.address,className:"font-mono",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"font-mono",children:e.symbol})})},e.address)})})]})})})}})]}),(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,E.LH)(eM||BigInt(0))," ",e_.symbol]})})]})})}),(0,s.jsxs)("div",{className:"flex flex-row space-x-2",children:[e2&&(0,s.jsx)(N.z,{className:"w-1/2",onClick:nH,disabled:nA||nI,children:e6?"1.授权中...":e4?"1.确认中...":nI?"1.已授权":"1.授权"}),(0,s.jsx)(N.z,{className:e2?"w-1/2":"w-full",onClick:nV,disabled:!nI||nA||nM||nB,children:nM?e2?"2.兑换中...":"兑换中...":nB?e2?"2.已兑换":"已兑换":e2?"2.兑换":"兑换"})]})]})})),eF>BigInt(0)&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:["WETH9"===eK&&(0,s.jsx)("div",{className:"text-sm text-green-600 mb-2",children:"\uD83D\uDCA1 这是 1:1 包装转换，无手续费，无滑点"}),eY&&"WETH9"!==eK&&(0,s.jsx)("div",{className:"text-sm text-amber-600 mb-2 bg-amber-50 p-2 rounded border-l-4 border-amber-400",children:"⚠️ 价格信息更新中，请稍后重试。这通常是因为链上交易活跃导致的临时状态。"}),!eY&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-greyscale-400",children:"兑换率: "}),(0,s.jsxs)("span",{children:["1 ",eT.symbol," = ",e0," ",e_.symbol]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-greyscale-400",children:["手续费 (",e$.feePercentage,"%)："]}),(0,s.jsxs)("span",{children:[e$.feeAmount," ",eT.symbol]})]}),"WETH9"!==eK&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-greyscale-400",children:"滑点上限 (自动)："}),(0,s.jsx)("span",{children:"0.5%"})]})]}),eY&&eR===BigInt(0)&&"WETH9"!==eK&&(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"\uD83D\uDCA1 提示：同时进行相同交易可能会因MEV保护机制而失败，这是为了保护您的资金安全。"})]})]}),(0,s.jsx)(Z.Z,{isLoading:nO,text:nA?"授权中...":"兑换中..."})]})},L=t(93778);function K(){var e=((0,a.useContext)(L.M)||{}).token;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{title:"兑换代币"}),(0,s.jsxs)("main",{className:"flex-grow",children:[(0,s.jsx)(z,{showCurrentToken:!!e&&!!e.hasEnded}),(0,s.jsxs)("div",{className:"bg-blue-50/30 border-l-4 border-l-blue-50 rounded-r-lg p-4 mb-8 text-sm mt-0 m-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-blue-800 pb-2",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4"}),"提示"]}),(0,s.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"交易协议："}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"}),(0,s.jsx)("div",{className:"text-base font-bold text-blue-700 pt-2 pb-1",children:"费用说明："}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"手续费为 0.3%，滑点上限为 0.5%"})]})]})]})}}},function(e){e.O(0,[8239,367,1617,8736,3494,2252,6127,2180,2888,9774,179],function(){return e(e.s=17137)}),_N_E=e.O()}]);