try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="d049b878-4f22-4480-997d-d9d0b83f4525",e._sentryDebugIdIdentifier="sentry-dbid-d049b878-4f22-4480-997d-d9d0b83f4525")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5882],{38436:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/group/groupids",function(){return n(83148)}])},74193:function(e,r,n){"use strict";n.d(r,{NI:function(){return j},Wi:function(){return g},l0:function(){return x},lX:function(){return b},pf:function(){return y},xJ:function(){return N},zG:function(){return w}});var t=n(34788),s=n(12796),i=n(72253),a=n(14932),o=n(47702),c=n(85893),d=n(67294),l=n(88426),u=n(87536),f=n(40108),m=n(94193),x=u.RV,h=d.createContext({}),g=function(e){var r=(0,t._)({},(0,s._)(e));return(0,c.jsx)(h.Provider,{value:{name:r.name},children:(0,c.jsx)(u.Qr,(0,i._)({},r))})},v=function(){var e=d.useContext(h),r=d.useContext(p),n=(0,u.Gc)(),t=n.getFieldState,s=n.formState,a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");var o=r.id;return(0,i._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},a)},p=d.createContext({}),N=d.forwardRef(function(e,r){var n=e.className,t=(0,o._)(e,["className"]),s=d.useId();return(0,c.jsx)(p.Provider,{value:{id:s},children:(0,c.jsx)("div",(0,i._)({ref:r,className:(0,f.cn)("space-y-2",n)},t))})});N.displayName="FormItem";var b=d.forwardRef(function(e,r){var n=e.className,t=(0,o._)(e,["className"]),s=v(),a=s.error,d=s.formItemId;return(0,c.jsx)(m._,(0,i._)({ref:r,className:(0,f.cn)(a&&"text-destructive",n),htmlFor:d},t))});b.displayName="FormLabel";var j=d.forwardRef(function(e,r){var n=(0,t._)({},(0,s._)(e)),a=v(),o=a.error,d=a.formItemId,u=a.formDescriptionId,f=a.formMessageId;return(0,c.jsx)(l.g7,(0,i._)({ref:r,id:d,"aria-describedby":o?"".concat(u," ").concat(f):"".concat(u),"aria-invalid":!!o},n))});j.displayName="FormControl";var y=d.forwardRef(function(e,r){var n=e.className,t=(0,o._)(e,["className"]),s=v().formDescriptionId;return(0,c.jsx)("p",(0,i._)({ref:r,id:s,className:(0,f.cn)("text-sm text-muted-foreground",n)},t))});y.displayName="FormDescription";var w=d.forwardRef(function(e,r){var n=e.className,t=e.children,s=(0,o._)(e,["className","children"]),d=v(),l=d.error,u=d.formMessageId,m=l?String(null==l?void 0:l.message):t;return m?(0,c.jsx)("p",(0,a._)((0,i._)({ref:r,id:u,className:(0,f.cn)("text-sm font-medium text-destructive",n)},s),{children:m})):null});w.displayName="FormMessage"},94193:function(e,r,n){"use strict";n.d(r,{_:function(){return u}});var t=n(72253),s=n(47702),i=n(85893),a=n(67294),o=n(49102),c=n(12003),d=n(40108),l=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=a.forwardRef(function(e,r){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(o.f,(0,t._)({ref:r,className:(0,d.cn)(l(),n)},a))});u.displayName=o.f.displayName},82022:function(e,r,n){"use strict";n.d(r,{mQ:function(){return T},nU:function(){return M},dr:function(){return E},SP:function(){return B}});var t=n(72253),s=n(47702),i=n(85893),a=n(67294),o=n(36206),c=n(25360),d=n(66681),l=n(29115),u=n(75320),f=n(78990),m=n(77342),x=n(91276),h="Tabs",[g,v]=(0,c.b)(h,[d.Pc]),p=(0,d.Pc)(),[N,b]=g(h),j=a.forwardRef((e,r)=>{let{__scopeTabs:n,value:t,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:d="automatic",...l}=e,g=(0,f.gm)(c),[v,p]=(0,m.T)({prop:t,onChange:s,defaultProp:a??"",caller:h});return(0,i.jsx)(N,{scope:n,baseId:(0,x.M)(),value:v,onValueChange:p,orientation:o,dir:g,activationMode:d,children:(0,i.jsx)(u.WV.div,{dir:g,"data-orientation":o,...l,ref:r})})});j.displayName=h;var y="TabsList",w=a.forwardRef((e,r)=>{let{__scopeTabs:n,loop:t=!0,...s}=e,a=b(y,n),o=p(n);return(0,i.jsx)(d.fC,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:t,children:(0,i.jsx)(u.WV.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:r})})});w.displayName=y;var _="TabsTrigger",V=a.forwardRef((e,r)=>{let{__scopeTabs:n,value:t,disabled:s=!1,...a}=e,c=b(_,n),l=p(n),f=k(c.baseId,t),m=P(c.baseId,t),x=t===c.value;return(0,i.jsx)(d.ck,{asChild:!0,...l,focusable:!s,active:x,children:(0,i.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:f,...a,ref:r,onMouseDown:(0,o.Mj)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(t)}),onKeyDown:(0,o.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(t)}),onFocus:(0,o.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||s||!e||c.onValueChange(t)})})})});V.displayName=_;var C="TabsContent",I=a.forwardRef((e,r)=>{let{__scopeTabs:n,value:t,forceMount:s,children:o,...c}=e,d=b(C,n),f=k(d.baseId,t),m=P(d.baseId,t),x=t===d.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.jsx)(l.z,{present:s||x,children:({present:n})=>(0,i.jsx)(u.WV.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":f,hidden:!n,id:m,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&o})})});function k(e,r){return`${e}-trigger-${r}`}function P(e,r){return`${e}-content-${r}`}I.displayName=C;var F=n(40108),T=j,E=a.forwardRef(function(e,r){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(w,(0,t._)({ref:r,className:(0,F.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},a))});E.displayName=w.displayName;var B=a.forwardRef(function(e,r){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(V,(0,t._)({ref:r,className:(0,F.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},a))});B.displayName=V.displayName;var M=a.forwardRef(function(e,r){var n=e.className,a=(0,s._)(e,["className"]);return(0,i.jsx)(I,(0,t._)({ref:r,className:(0,F.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},a))});M.displayName=I.displayName},64777:function(e,r,n){"use strict";var t=n(85893);r.Z=function(e){var r=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:r})})}},42083:function(e,r,n){"use strict";var t=n(85893),s=n(23432);r.Z=function(){return(0,t.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},85794:function(e,r,n){"use strict";n.d(r,{A5:function(){return x},DA:function(){return v},hS:function(){return f},l3:function(){return g},yA:function(){return h},yG:function(){return u},z4:function(){return m}});var t=n(11010),s=n(97582),i=n(67294),a=n(71104),o=n(37541),c=n(37742),d=n(37474),l=n(84689),u=function(e,r,n){var t=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=(0,a.u)({address:e,abi:o.O,functionName:"allowance",args:[r,n],query:{enabled:!!e&&!!r&&!!n&&t}}),i=s.data,d=s.isPending,l=s.error,u=s.refetch;return{allowance:void 0!==i?(0,c.Zu)(i):void 0,isPending:d,error:l,refetch:u}},f=function(e,r){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=(0,a.u)({address:e,abi:o.O,functionName:"balanceOf",args:[r],query:{enabled:!!e&&!!r&&n}}),s=t.data,i=t.isPending,d=t.error,l=t.refetch;return{balance:void 0!==s?(0,c.Zu)(s):void 0,isPending:i,error:d,refetch:l}},m=function(e){var r=(0,a.u)({address:e,abi:o.O,functionName:"symbol",args:[],query:{enabled:!!e}});return{symbol:r.data,isPending:r.isPending,error:r.error}},x=function(e){var r=(0,a.u)({address:e,abi:o.O,functionName:"totalSupply",args:[],query:{enabled:!!e}}),n=r.data,t=r.isPending,s=r.error;return{totalSupply:void 0!==n?(0,c.Zu)(n):void 0,isPending:t,error:s}};function h(e){var r,n=(0,d.e9)(o.O,e,"approve"),a=n.execute,c=n.isPending,u=n.isConfirming,f=n.isConfirmed,m=n.error,x=n.hash,h=n.isTukeMode,g=(r=(0,t._)(function(r,n){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交approve交易:",{token:e,spender:r,value:n,isTukeMode:h}),[4,a([r,n])];case 1:return[2,t.sent()]}})}),function(e,n){return r.apply(this,arguments)});return(0,i.useEffect)(function(){x&&console.log("approve tx hash:",x),m&&(console.log("提交approve交易错误:"),(0,l.Vh)(m),(0,l.H)(m))},[x,m]),{approve:g,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}function g(e){var r,n=(0,d.e9)(o.O,e,"burnForParentToken"),a=n.execute,c=n.isPending,u=n.isConfirming,f=n.isConfirmed,m=n.error,x=n.hash,h=n.isTukeMode,g=(r=(0,t._)(function(r){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return console.log("提交burnForParentToken交易:",{token:e,amount:r,isTukeMode:h}),[4,a([r])];case 1:return[2,n.sent()]}})}),function(e){return r.apply(this,arguments)});return(0,i.useEffect)(function(){x&&console.log("burnForParentToken tx hash:",x),m&&(console.log("提交burnForParentToken交易错误:"),(0,l.Vh)(m),(0,l.H)(m))},[x,m]),{burnForParentToken:g,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}function v(e){var r,n=(0,d.e9)(o.O,e,"transfer"),a=n.execute,c=n.isPending,u=n.isConfirming,f=n.isConfirmed,m=n.error,x=n.hash,h=n.isTukeMode,g=(r=(0,t._)(function(r,n){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交transfer交易:",{token:e,to:r,amount:n,isTukeMode:h}),[4,a([r,n])];case 1:return[2,t.sent()]}})}),function(e,n){return r.apply(this,arguments)});return(0,i.useEffect)(function(){x&&console.log("transfer tx hash:",x),m&&(console.log("提交transfer交易错误:"),(0,l.Vh)(m),(0,l.H)(m))},[x,m]),{transfer:g,isPending:c,isConfirming:u,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}},22403:function(e,r,n){"use strict";n.d(r,{_:function(){return o}});var t=n(67516),s=n(50095),i=n(37742),a="0xA0a5BB442214988D0c6e707d825640C026fB1d04";function o(e){var r,n,o=e.groupName,c=e.maxGroupNameLength,d=e.enabled,l=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!e)return{isValid:!1,error:"群名称不能为空"};var n=new TextEncoder().encode(e),t=n.length;if(0===t||t>r)return{isValid:!1,error:"群名称长度必须在 1-".concat(r," 字节之间")};for(var s=0;s<t;){var i=n[s];if(i<=32)return{isValid:!1,error:"群名称不能包含控制字符或空格"};if(127===i)return{isValid:!1,error:"群名称不能包含 DEL 字符"};if(i<128){s++;continue}var a=0;if(i>=194&&i<=223)a=2;else if(i>=224&&i<=239)a=3;else{if(!(i>=240)||!(i<=244))return{isValid:!1,error:"群名称包含无效的 UTF-8 字符"};a=4}if(s+a>t)return{isValid:!1,error:"群名称包含不完整的 UTF-8 字符"};for(var o=1;o<a;o++){var c=n[s+o];if(c<128||c>191)return{isValid:!1,error:"群名称包含无效的 UTF-8 延续字节"}}if(2===a){var d=n[s],l=n[s+1];if(194===d&&160===l)return{isValid:!1,error:"群名称不能包含不间断空格"};if(194===d&&173===l)return{isValid:!1,error:"群名称不能包含软连字符"};if(194===d&&l>=128&&l<=159)return{isValid:!1,error:"群名称不能包含 C1 控制字符"};if(205===d&&143===l)return{isValid:!1,error:"群名称不能包含组合字形连接符"};if(216===d&&156===l)return{isValid:!1,error:"群名称不能包含阿拉伯字母标记"}}if(3===a){var u=n[s],f=n[s+1],m=n[s+2];if(225===u&&154===f&&128===m)return{isValid:!1,error:"群名称不能包含特殊空格字符"};if(226===u&&128===f&&m>=128&&m<=143)return{isValid:!1,error:"群名称不能包含特殊空格或零宽字符"};if(226===u&&128===f&&168===m)return{isValid:!1,error:"群名称不能包含行分隔符"};if(226===u&&128===f&&169===m)return{isValid:!1,error:"群名称不能包含段落分隔符"};if(226===u&&128===f&&m>=170&&m<=174)return{isValid:!1,error:"群名称不能包含方向格式化字符"};if(226===u&&128===f&&175===m)return{isValid:!1,error:"群名称不能包含窄不间断空格"};if(226===u&&129===f&&159===m)return{isValid:!1,error:"群名称不能包含特殊数学空格"};if(226===u&&129===f&&160===m)return{isValid:!1,error:"群名称不能包含单词连接符"};if(227===u&&128===f&&128===m)return{isValid:!1,error:"群名称不能包含全角空格"};if(239===u&&187===f&&191===m)return{isValid:!1,error:"群名称不能包含 BOM 字符"};if(224===u&&f<160)return{isValid:!1,error:"群名称包含过长的 UTF-8 编码"};if(237===u&&f>=160)return{isValid:!1,error:"群名称包含无效的 UTF-16 代理对"}}if(4===a){var x=n[s],h=n[s+1];if(240===x&&h<144)return{isValid:!1,error:"群名称包含过长的 UTF-8 编码"};if(244===x&&h>=144)return{isValid:!1,error:"群名称包含超出范围的 Unicode 字符"}}s+=a}return{isValid:!0}}(o,void 0===c?100:c),u=(void 0===d||d)&&!!o&&l.isValid,f=(0,t.N)({contracts:[{address:a,abi:s.s,functionName:"isGroupNameUsed",args:[o]},{address:a,abi:s.s,functionName:"calculateMintCost",args:[o]}],query:{enabled:u}}),m=f.data,x=f.isPending,h=f.error,g=null==m?void 0:null===(r=m[0])||void 0===r?void 0:r.result,v=(null==m?void 0:null===(n=m[1])||void 0===n?void 0:n.result)?(0,i.Zu)(m[1].result):void 0,p=l.isValid&&!g,N=l.error;return l.isValid&&g&&(N="该群名称已被使用"),{isValid:p,validationError:N,isGroupNameUsed:g,mintCost:v,isPending:!!u&&x,error:h}}},15206:function(e,r,n){"use strict";n.d(r,{k:function(){return c}});var t=n(67516),s=n(50095),i=n(8300),a=n(37742),o="0xA0a5BB442214988D0c6e707d825640C026fB1d04";function c(e){for(var r=!!e,n=(0,i.hS)(e||"0x0000000000000000000000000000000000000000",r),c=n.balance,d=n.isPending,l=n.error,u=r&&void 0!==c?Number(c):0,f=[],m=0;m<u;m++)f.push({address:o,abi:s.s,functionName:"tokenOfOwnerByIndex",args:[e,BigInt(m)]});var x=(0,t.N)({contracts:f,query:{enabled:r&&u>0}}),h=x.data,g=x.isPending,v=x.error,p=null==h?void 0:h.map(function(e){return e.result?(0,a.Zu)(e.result):void 0}).filter(Boolean),N=(null==p?void 0:p.map(function(e){return{address:o,abi:s.s,functionName:"groupNameOf",args:[e]}}))||[],b=(0,t.N)({contracts:N,query:{enabled:r&&p&&p.length>0}}),j=b.data,y=b.isPending,w=b.error,_=r&&p?p.map(function(e,r){var n;return{tokenId:e,groupName:(null==j?void 0:null===(n=j[r])||void 0===n?void 0:n.result)||""}}):[],V=!!r&&(d||u>0&&(g||y)),C=r?l||v||w:void 0;return{myGroups:_,balance:r&&void 0!==c?c:BigInt(0),isPending:V,error:C}}},83148:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Z}});var t=n(72253),s=n(91309),i=n(85893),a=n(67294),o=n(11163),c=n(42130),d=n(82022),l=n(83494),u=n(41664),f=n.n(u),m=n(15206),x=n(64777),h=n(42083),g=n(27245);function v(){var e=(0,c.m)(),r=e.address,n=e.isConnected,t=(0,m.k)(r),s=t.myGroups,a=t.balance,o=t.isPending,d=t.error;return n?o?(0,i.jsx)("div",{className:"flex justify-center py-8",children:(0,i.jsx)(h.Z,{})}):d?(0,i.jsx)("div",{className:"px-4 mt-4",children:(0,i.jsxs)("div",{className:"alert alert-error",children:[(0,i.jsx)("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,i.jsxs)("span",{children:["加载链群数据失败: ",d.message]})]})}):(0,i.jsxs)("div",{className:"px-4 mt-4",children:[(0,i.jsx)(x.Z,{title:"我的链群NFT"}),(0,i.jsx)("div",{className:"mb-4",children:a>3&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-gray-500 mr-1",children:"数量:"}),(0,i.jsx)("span",{className:"font-mono text-secondary",children:(null==a?void 0:a.toString())||"0"})]})}),0===s.length?(0,i.jsxs)("div",{className:"text-center text-sm text-greyscale-500 p-8",children:[(0,i.jsx)("div",{className:"mb-8",children:"您还没有链群NFT"}),(0,i.jsx)(g.z,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,i.jsx)(f(),{href:"/group/groupids/?tab=mint",children:"去铸造NFT >>"})})]}):(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"table w-full",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,i.jsx)("th",{className:"px-2 text-left",children:"ID"}),(0,i.jsx)("th",{className:"px-2 text-left",children:"名称"}),(0,i.jsx)("th",{className:"pr-6 text-right w-auto",children:"操作"})]})}),(0,i.jsx)("tbody",{children:s.map(function(e){return(0,i.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-2 font-mono text-secondary",children:e.tokenId.toString()}),(0,i.jsx)("td",{className:"px-2",children:(0,i.jsx)("span",{className:"font-medium",children:e.groupName})}),(0,i.jsx)("td",{className:"px-2 text-right w-auto",children:(0,i.jsx)(g.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,i.jsx)(f(),{href:"/group/transfer?tokenId=".concat(e.tokenId.toString()),children:"转移"})})})]},e.tokenId.toString())})})]})})]}):(0,i.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,i.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})}var p=n(11010),N=n(14932),b=n(97582),j=n(45901),y=n(56312),w=n(87536),_=n(86501),V=n(23432),C=n(21774),I=n(74193),k=n(91529),P=n(27966),F=n(95049),T=n(85794),E=n(8300),B=n(22403),M=n(44576),D="0x6458E25680765Add4e2ca8d5a31fA08f5e1b6e4a",R="0xA0a5BB442214988D0c6e707d825640C026fB1d04",S="LOVE20";function A(){var e,r,n=(0,c.m)(),d=n.address,l=n.isConnected,u=(0,o.useRouter)(),f=(0,F.V)().setError,m=(0,E.Q7)().maxGroupNameLength,v=(0,T.hS)(D,d),A=v.balance,Z=v.isPending,O=v.error,G=(0,w.cI)({resolver:(0,y.F)((A||BigInt(0),j.Ry({groupName:j.Z_().nonempty({message:"请输入群名称"}).refine(function(e){return e.trim().length>0},{message:"群名称不能只包含空白字符"})}))),defaultValues:{groupName:""},mode:"onChange",reValidateMode:"onChange"}),L=G.watch("groupName"),U=(0,B._)({groupName:L,maxGroupNameLength:m?Number(m):100,enabled:!!L}),q=U.isValid,z=U.validationError,J=(U.isGroupNameUsed,U.mintCost),W=U.isPending;(0,a.useEffect)(function(){L&&!W&&z?G.setError("groupName",{message:z}):L&&!W&&q&&G.clearErrors("groupName")},[L,q,z,W,G]);var H=(0,T.yA)(D),Q=H.approve,X=H.isPending,$=H.isConfirming,K=H.isConfirmed,Y=H.writeError,ee=(0,s._)((0,a.useState)(!1),2),er=ee[0],en=ee[1],et=(0,T.yG)(D,d,R),es=et.allowance,ei=et.isPending,ea=et.error,eo=et.refetch,ec=(0,a.useRef)(!1);(0,a.useEffect)(function(){X&&(ec.current=!1)},[X]),(0,a.useEffect)(function(){K&&!ec.current&&(ec.current=!0,en(!0),_.Am.success("授权成功"),eo())},[K,eo]),(0,a.useEffect)(function(){J&&J>BigInt(0)&&es&&es>=J?en(!0):en(!1)},[J,es]);var ed=(e=(0,p._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:if(!J||J<=BigInt(0))return _.Am.error("请先输入有效的群名称"),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(R,J*BigInt(1001)/BigInt(1e3))];case 2:return e.sent(),[3,4];case 3:return console.error(e.sent()),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),el=(0,E.DB)(),eu=el.mint,ef=el.isPending,em=el.isConfirming,ex=el.isConfirmed,eh=el.writeError,eg=(r=(0,p._)(function(e){return(0,b.Jh)(this,function(r){switch(r.label){case 0:if(!q)return _.Am.error(z||"群名称不合法"),[2];if(!er)return _.Am.error("请先授权"),[2];if(!J||J<=BigInt(0))return _.Am.error("无法获取铸造成本"),[2];if(A&&A<J)return _.Am.error("".concat(S," 代币余额不足")),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,eu(e.groupName.trim())];case 2:return r.sent(),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),ev=(0,a.useRef)(!1);(0,a.useEffect)(function(){ef&&(ev.current=!1)},[ef]),(0,a.useEffect)(function(){ex&&!ev.current&&(ev.current=!0,_.Am.success("铸造成功！"),setTimeout(function(){u.push("/group/groupids?tab=my")},2e3))},[ex,u]),(0,a.useEffect)(function(){void 0===A&&!Z&&q&&void 0!==J?f({name:"余额不足",message:"".concat(S," 不足")}):void 0!==A&&void 0!==J&&A>=J&&f(null)},[A,Z,q,J,f,S]);var ep=(0,P.b)().handleError;(0,a.useEffect)(function(){O&&ep(O),Y&&ep(Y),ea&&ep(ea),eh&&ep(eh)},[O,Y,ea,eh,ep]);var eN=X||$;return l?Z?(0,i.jsx)(h.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"px-4 mt-4",children:[(0,i.jsx)(x.Z,{title:"铸造链群NFT"}),(0,i.jsx)(I.l0,(0,N._)((0,t._)({},G),{children:(0,i.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"space-y-4",children:[(0,i.jsx)(I.Wi,{control:G.control,name:"groupName",render:function(e){var r=e.field;return(0,i.jsxs)(I.xJ,{children:[(0,i.jsx)(I.lX,{}),(0,i.jsx)(I.NI,{children:(0,i.jsx)(C.I,(0,t._)({type:"text",placeholder:"请输入NFT名称",disabled:eN||ef||em,className:"!ring-secondary-foreground"},r))}),(0,i.jsx)(I.zG,{}),m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-xs text-greyscale-400 mt-1",children:["最大长度：",m.toString()," 字节"]}),(0,i.jsx)("div",{className:"text-xs text-greyscale-400 mt-1",children:"(其中英文或数字一个占1个字节，中文一个占3个字节)"})]})]})}}),L&&(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"链群名称:"}),W?(0,i.jsx)("span",{className:"text-gray-400",children:"检查中..."}):q?(0,i.jsx)("span",{className:"text-green-600 font-medium",children:"✓ 可用"}):(0,i.jsxs)("span",{className:"text-red-600 font-medium",children:["✗ ",z]})]}),q&&void 0!==J&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"铸造成本:"}),(0,i.jsxs)("span",{className:"font-mono text-secondary font-medium",children:[(0,k.LH)(J)," ",S]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"滑点:"}),(0,i.jsx)("span",{className:"font-mono text-secondary font-medium",children:"0.1%"})]})]}),void 0!==A&&(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"我的余额:"}),(0,i.jsxs)("span",{className:"font-mono text-greyscale-600",children:[(0,k.LH)(A)," ",S]})]}),q&&void 0!==J&&void 0!==A&&A<J&&(0,i.jsxs)("div",{className:"text-xs text-red-600 mt-1",children:["余额不足，还需要 ",(0,k.LH)(J-A)," ",S]})]}),(0,i.jsxs)("div",{className:"flex space-x-4 w-full pt-2",children:[(0,i.jsx)(g.z,{className:"w-1/2",onClick:ed,disabled:ei||X||$||er||!q||!J||J<=BigInt(0)||void 0===A&&!Z||void 0!==A&&A<J,children:ei?(0,i.jsx)(V.Z,{className:"animate-spin"}):X?"1.授权中...":$?"1.确认中...":er?"1.已授权":"1.授权"}),(0,i.jsx)(g.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:G.handleSubmit(eg),disabled:!er||ef||em||ex||void 0===A&&!Z||void 0!==A&&A<(J||BigInt(0)),children:ef?"2.铸造中...":em?"2.确认中...":ex?"2.铸造成功":"2.铸造"})]})]})}))]}),(0,i.jsx)(M.Z,{isLoading:ef||em||X||$,text:ef||X?"提交交易...":"确认交易..."})]}):(0,i.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,i.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})}function Z(){var e=(0,o.useRouter)(),r=(0,c.m)().address,n=(0,s._)((0,a.useState)("my"),2),u=n[0],f=n[1],x=(0,m.k)(r),h=x.balance,g=x.isPending;return(0,a.useEffect)(function(){g||void 0===h||(h===BigInt(0)?f("mint"):f("my"))},[h,g]),(0,a.useEffect)(function(){var r=e.query.tab;r&&["my","mint"].includes(r)&&f(r)},[e.query]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{title:"链群NFT管理",showBackButton:!0}),(0,i.jsx)("main",{className:"flex-grow px-3 sm:px-0",children:(0,i.jsxs)(d.mQ,{value:u,onValueChange:function(r){f(r);var n=(0,t._)({},e.query);n.tab=r,e.push({pathname:e.pathname,query:n},void 0,{shallow:!0})},className:"w-full max-w-2xl mx-auto",children:[(0,i.jsxs)(d.dr,{className:"grid w-full grid-cols-2 mt-2 min-w-0",children:[(0,i.jsx)(d.SP,{value:"my",className:"min-w-0 truncate",children:"我的"}),(0,i.jsx)(d.SP,{value:"mint",className:"min-w-0 truncate",children:"铸造"})]}),(0,i.jsx)(d.nU,{value:"my",children:(0,i.jsx)(v,{})}),(0,i.jsx)(d.nU,{value:"mint",children:(0,i.jsx)(A,{})})]})})]})}}},function(e){e.O(0,[8501,4463,721,3494,8300,7966,2888,9774,179],function(){return e(e.s=38436)}),_N_E=e.O()}]);