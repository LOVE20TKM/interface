try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="aa99edeb-950d-4bd4-a4d4-f03b50c29c54",e._sentryDebugIdIdentifier="sentry-dbid-aa99edeb-950d-4bd4-a4d4-f03b50c29c54")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{36611:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex",function(){return a(91512)}])},35810:function(e,s,a){"use strict";a.d(s,{$N:function(){return v},Be:function(){return p},Vq:function(){return u},cN:function(){return b},cZ:function(){return h},fK:function(){return g},hg:function(){return m}});var t=a(72253),n=a(14932),r=a(47702),i=a(85893),l=a(67294),o=a(12854),c=a(62190),d=a(40108),u=o.fC,m=o.xz,f=o.h_;o.x8;var x=l.forwardRef(function(e,s){var a=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.aV,(0,t._)({ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},n))});x.displayName=o.aV.displayName;var h=l.forwardRef(function(e,s){var a=e.className,l=e.children,u=(0,r._)(e,["className","children"]);return(0,i.jsxs)(f,{children:[(0,i.jsx)(x,{}),(0,i.jsxs)(o.VY,(0,n._)((0,t._)({ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},u),{children:[l,(0,i.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});h.displayName=o.VY.displayName;var g=function(e){var s=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,t._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},a))};g.displayName="DialogHeader";var b=function(e){var s=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,t._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},a))};b.displayName="DialogFooter";var v=l.forwardRef(function(e,s){var a=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.Dx,(0,t._)({ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a)},n))});v.displayName=o.Dx.displayName;var p=l.forwardRef(function(e,s){var a=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.dk,(0,t._)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a)},n))});p.displayName=o.dk.displayName},82022:function(e,s,a){"use strict";a.d(s,{mQ:function(){return z},nU:function(){return Z},dr:function(){return E},SP:function(){return V}});var t=a(72253),n=a(47702),r=a(85893),i=a(67294),l=a(36206),o=a(25360),c=a(66681),d=a(29115),u=a(75320),m=a(78990),f=a(77342),x=a(91276),h="Tabs",[g,b]=(0,o.b)(h,[c.Pc]),v=(0,c.Pc)(),[p,y]=g(h),N=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,g=(0,m.gm)(o),[b,v]=(0,f.T)({prop:t,onChange:n,defaultProp:i??"",caller:h});return(0,r.jsx)(p,{scope:a,baseId:(0,x.M)(),value:b,onValueChange:v,orientation:l,dir:g,activationMode:c,children:(0,r.jsx)(u.WV.div,{dir:g,"data-orientation":l,...d,ref:s})})});N.displayName=h;var j="TabsList",w=i.forwardRef((e,s)=>{let{__scopeTabs:a,loop:t=!0,...n}=e,i=y(j,a),l=v(a);return(0,r.jsx)(c.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:t,children:(0,r.jsx)(u.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:s})})});w.displayName=j;var k="TabsTrigger",_=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,disabled:n=!1,...i}=e,o=y(k,a),d=v(a),m=C(o.baseId,t),f=T(o.baseId,t),x=t===o.value;return(0,r.jsx)(c.ck,{asChild:!0,...d,focusable:!n,active:x,children:(0,r.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...i,ref:s,onMouseDown:(0,l.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(t)}),onKeyDown:(0,l.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(t)}),onFocus:(0,l.Mj)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||n||!e||o.onValueChange(t)})})})});_.displayName=k;var I="TabsContent",B=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,forceMount:n,children:l,...o}=e,c=y(I,a),m=C(c.baseId,t),f=T(c.baseId,t),x=t===c.value,h=i.useRef(x);return i.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(d.z,{present:n||x,children:({present:a})=>(0,r.jsx)(u.WV.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:f,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&l})})});function C(e,s){return`${e}-trigger-${s}`}function T(e,s){return`${e}-content-${s}`}B.displayName=I;var A=a(40108),z=N,E=i.forwardRef(function(e,s){var a=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(w,(0,t._)({ref:s,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a)},i))});E.displayName=w.displayName;var V=i.forwardRef(function(e,s){var a=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(_,(0,t._)({ref:s,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a)},i))});V.displayName=_.displayName;var Z=i.forwardRef(function(e,s){var a=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(B,(0,t._)({ref:s,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},i))});Z.displayName=B.displayName},13761:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var t=(0,a(31134).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},55264:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var t=(0,a(31134).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},46611:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var t=(0,a(31134).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},18311:function(e,s,a){"use strict";a.d(s,{z:function(){return m}});var t=a(11010),n=a(72253),r=a(14932),i=a(97582),l=a(67294),o=a(62776),c=a(85794),d=a(60696),u=a(34049),m=function(e){var s=e.baseToken,a=e.targetToken,m=e.account,f="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",x=(0,d.N)(s.address,(null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",!!a),h=x.pairAddress,g=x.isLoading,b=(0,o.K)({address:m,query:{enabled:!!m&&s.isNative}}),v=b.data,p=b.isLoading,y=(0,c.hS)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m),N=y.balance,j=y.isPending,w=(0,c.hS)((null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",m),k=w.balance,_=w.isPending,I=(0,c.yG)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m,f),B=I.allowance,C=I.isPending,T=(0,c.yG)((null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",m,f),A=T.allowance,z=T.isPending,E=(0,u.bQ)(h,m),V=E.lpBalance,Z=E.isLoading,q=E.refetch,D=(0,u.QX)(h),L=D.reserve0,S=D.reserve1,M=D.isLoading,P=D.refetch,R=(0,u.Oc)(h),F=R.token0,W=R.isLoading,U=(0,u.$C)(h),$=U.token1,H=U.isLoading,J=(0,u.A5)(h),K=J.totalSupply,Q=J.isLoading,G=J.refetch,O=(0,l.useMemo)(function(){if(!h||!L||!S||!F||!$||!a)return{pairExists:!1,baseReserve:BigInt(0),targetReserve:BigInt(0),baseTokenIsToken0:!1};var e=s.address.toLowerCase()===F.toLowerCase(),t=e?L:S,n=e?S:L;return{pairExists:L>BigInt(0)&&S>BigInt(0),baseReserve:t,targetReserve:n,baseTokenIsToken0:e}},[h,L,S,F,$,s.address,a]),X=(0,l.useCallback)((0,t._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Promise.all([q(),P(),G()])];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}})}),[q,P,G]);return(0,r._)((0,n._)({pairAddress:h,baseBalance:s.isNative?null==v?void 0:v.value:N,targetBalance:k,baseAllowance:s.isNative?void 0:B,targetAllowance:A,lpBalance:V,lpTotalSupply:K,reserve0:L,reserve1:S,token0:F,token1:$},O),{isLoading:g||p||j||_||C||z||Z||M||W||H||Q,refreshLiquidityData:X})}},91512:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return U}});var t=a(72253),n=a(91309),r=a(85893),i=a(67294),l=a(11163),o=a(67997),c=a(82022),d=a(83494),u=a(89126),m=a(11010),f=a(14932),x=a(97582),h=a(42130),g=a(86501),b=a(63448),v=a(56312),p=a(87536),y=a(13761),N=a(46611),j=a(55264),w=a(41664),k=a.n(w),_=a(27245),I=a(21774),B=a(34680),C=a(88659),T=a(74193),A=a(35810),z=a(91529),E=a(73591),V=a(85794),Z=a(301),q=a(18311),D=a(43032),L=a(64777),S=a(42083),M=a(44576),P=function(){var e=[],s="TUSDT",a="0x47Ba4471046fC0442078CF1519924cb205F02c7a";s&&a&&e.push({symbol:s,address:a,decimals:18,isNative:!1});var t="TKM20",n="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return t&&n&&e.push({symbol:t,address:n,decimals:18,isNative:!1}),e},R=function(){var e,s,a=(0,h.m)().address,l=(0,D.Z)().token,c=(0,i.useMemo)(function(){return P()},[]),d=(0,n._)((0,i.useState)(function(){return c.find(function(e){return"TUSDT"===e.symbol})||{symbol:"TKM20",address:"0xc3Da46ED14dBd79922027031BB5D688A81139e01",decimals:18,isNative:!1}}),2),u=d[0],w=d[1],R=(0,i.useMemo)(function(){return l?{symbol:l.symbol,address:l.address,decimals:18,isNative:!1}:null},[l]),F=(0,q.z)({baseToken:u,targetToken:R,account:a}),W=F.baseBalance,U=F.targetBalance,$=F.baseAllowance,H=F.targetAllowance,J=F.lpBalance,K=F.lpTotalSupply,Q=(F.pairAddress,F.pairExists),G=F.baseReserve,O=F.targetReserve,X=F.isLoading,Y=F.refreshLiquidityData,ee=(0,p.cI)({resolver:(0,v.F)((e=W||BigInt(0),s=U||BigInt(0),b.Ry({baseTokenAmount:b.Z_().nonempty("请输入数量").refine(function(s){if(s.endsWith(".")||"0"===s)return!0;try{var a=(0,z.vz)(s);return a>BigInt(0)&&a<=e}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),tokenAmount:b.Z_().nonempty("请输入数量").refine(function(e){if(e.endsWith(".")||"0"===e)return!0;try{var a=(0,z.vz)(e);return a>BigInt(0)&&a<=s}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),baseTokenAddress:b.Z_()}))),defaultValues:{baseTokenAmount:"",tokenAmount:"",baseTokenAddress:u.address},mode:"onChange"});(0,i.useEffect)(function(){ee.setValue("baseTokenAddress",u.address)},[u.address,ee]);var es=(0,n._)((0,i.useState)(!1),2),ea=es[0],et=es[1],en=(0,n._)((0,i.useState)(!1),2),er=en[0],ei=en[1],el=ee.watch("baseTokenAmount"),eo=ee.watch("tokenAmount"),ec=(0,z.vz)(el),ed=(0,z.vz)(eo);(0,i.useEffect)(function(){if(ea&&ec&&ec>BigInt(0)&&Q&&G&&O){var e=ec*O/G,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");ee.setValue("tokenAmount",s,{shouldValidate:!0}),et(!1),ei(!1)}else!ea||Q&&G&&O||(ee.setValue("tokenAmount","",{shouldValidate:!0}),et(!1),ei(!1))},[ea,ec,Q,G,O,ee]),(0,i.useEffect)(function(){if(er&&ed&&ed>BigInt(0)&&Q&&G&&O){var e=ed*G/O,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");ee.setValue("baseTokenAmount",s,{shouldValidate:!0}),et(!1),ei(!1)}else!er||Q&&G&&O||(ee.setValue("baseTokenAmount","",{shouldValidate:!0}),et(!1),ei(!1))},[er,ed,Q,G,O,ee]);var eu=(0,n._)((0,i.useState)(!1),2),em=eu[0],ef=eu[1],ex=(0,n._)((0,i.useState)(!1),2),eh=ex[0],eg=ex[1];(0,i.useEffect)(function(){ec&&void 0!==$?ef($>=ec):u.isNative?ef(!0):ef(!1)},[ec,$,u.isNative]),(0,i.useEffect)(function(){ed&&void 0!==H?eg(H>=ed):eg(!1)},[ed,H]);var eb=(0,V.yA)(u.address),ev=eb.approve,ep=eb.isPending,ey=eb.isConfirming,eN=eb.isConfirmed,ej=eb.writeError,ew=(0,V.yA)(null==R?void 0:R.address),ek=ew.approve,e_=ew.isPending,eI=ew.isConfirming,eB=ew.isConfirmed,eC=ew.writeError,eT="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",eA=ee.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ev(eT,(0,z.vz)(el||"0"))];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}})})),ez=ee.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ek(eT,(0,z.vz)(eo||"0"))];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}})}));(0,i.useEffect)(function(){eN&&(ef(!0),g.Am.success("授权".concat(u.symbol,"成功")))},[eN,u.symbol]),(0,i.useEffect)(function(){eB&&(eg(!0),g.Am.success("授权".concat(null==R?void 0:R.symbol,"成功")))},[eB,null==R?void 0:R.symbol]);var eE=(0,Z.X1)(),eV=eE.addLiquidity,eZ=eE.isWriting,eq=eE.isConfirming,eD=eE.isConfirmed,eL=eE.writeError,eS=(0,Z.J8)(),eM=eS.addLiquidityETH,eP=eS.isWriting,eR=eS.isConfirming,eF=eS.isConfirmed,eW=eS.writeError,eU=ee.handleSubmit((0,m._)(function(){var e,s,t,n,r,i;return(0,x.Jh)(this,function(l){switch(l.label){case 0:if(!em||!eh)return g.Am.error("请先完成授权"),[2];if(!R)return g.Am.error("目标代币未加载"),[2];if(e=(0,z.vz)(el||"0"),s=(0,z.vz)(eo||"0"),!e||!s||e<=BigInt(0)||s<=BigInt(0))return g.Am.error("请输入有效的数量"),[2];l.label=1;case 1:if(l.trys.push([1,6,,7]),t=BigInt(Math.floor(Date.now()/1e3)+1200),n=BigInt(Math.round(10*eG)),r=e*(BigInt(1e3)-n)/BigInt(1e3),i=s*(BigInt(1e3)-n)/BigInt(1e3),!u.isNative)return[3,3];return[4,eM(R.address,s,i,r,a,t,e)];case 2:return l.sent(),[3,5];case 3:return[4,eV(u.address,R.address,e,s,r,i,a,t)];case 4:l.sent(),l.label=5;case 5:return g.Am.success("添加流动性交易已提交"),[3,7];case 6:return e4(l.sent(),"liquidity"),[3,7];case 7:return[2]}})})),e$=(0,n._)((0,i.useState)(!1),2),eH=e$[0],eJ=e$[1],eK=(0,i.useMemo)(function(){return Q&&G&&O?{baseToTarget:O*BigInt(1e18)/G,targetToBase:G*BigInt(1e18)/O}:null},[Q,G,O]),eQ=(0,n._)((0,i.useState)(2.5),2),eG=eQ[0],eO=eQ[1],eX=(0,n._)((0,i.useState)(!1),2),eY=eX[0],e0=eX[1],e1=(0,n._)((0,i.useState)(""),2),e2=e1[0],e3=e1[1];(0,i.useEffect)(function(){if(eD||eF){g.Am.success("添加流动性成功！"),ee.reset({baseTokenAmount:"",tokenAmount:"",baseTokenAddress:u.address}),ef(!1),eg(!1),setTimeout(function(){Y()},2e3);var e=setInterval(function(){Y()},3e3);setTimeout(function(){clearInterval(e)},1e4)}},[eD,eF,ee,u.address,Y]);var e4=(0,E.S)().handleContractError;if((0,i.useEffect)(function(){ej&&e4(ej,"liquidity"),eC&&e4(eC,"liquidity"),eL&&e4(eL,"liquidity"),eW&&e4(eW,"liquidity")},[ej,eC,eL,eW,e4]),!l||!R||X)return(0,r.jsx)(S.Z,{});var e7=ep||e_,e5=ey||eI,e6=eZ||eP,e9=eq||eR,e8=eD||eF;return(0,r.jsxs)("div",{className:"py-6 px-2",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"底池LP总数量:"}),(0,r.jsx)("span",{className:"text-secondary",children:(0,z.LH)(K||BigInt(0))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"我的LP余额:"}),(0,r.jsx)("span",{className:"text-secondary",children:(0,z.LH)(J||BigInt(0))})]}),(J||BigInt(0))>BigInt(0)&&(0,r.jsx)(k(),{href:"/dex/withdraw?baseToken=".concat(encodeURIComponent(u.symbol)),className:"inline-flex items-center gap-1 text-sm text-secondary hover:text-blue-800 transition-colors",title:"撤出流动性",children:"撤出"})]})]}),(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)(L.Z,{title:"流动性添加"})}),(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsx)(T.l0,(0,f._)((0,t._)({},ee),{children:(0,r.jsxs)("form",{children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(T.Wi,{control:ee.control,name:"baseTokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(T.xJ,{children:[(0,r.jsx)(B.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(B.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,t._)({type:"number",placeholder:"0"},s),{disabled:X,onChange:function(e){s.onChange(e),et(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)(T.Wi,{control:ee.control,name:"baseTokenAddress",render:function(e){var s=e.field;return(0,r.jsx)(T.xJ,{children:(0,r.jsx)(T.NI,{children:(0,r.jsxs)(C.Ph,{value:s.value,onValueChange:function(e){var a=c.find(function(s){return s.address===e});a&&(s.onChange(e),w(a))},disabled:X,children:[(0,r.jsx)(C.i4,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:u.symbol})})}),(0,r.jsx)(C.Bw,{children:c.map(function(e){return(0,r.jsx)(C.Ql,{value:e.address,className:"font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-mono",children:e.symbol})})},e.address)})})]})})})}})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[[25,50,75].map(function(e){return(0,r.jsxs)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){var s=(null!=W?W:BigInt(0))*BigInt(e)/BigInt(100);ee.setValue("baseTokenAmount",(0,z.bM)(s)),et(!0)},disabled:X||(W||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)}),(0,r.jsx)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){ee.setValue("baseTokenAmount",(0,z.bM)(W||BigInt(0))),et(!0)},disabled:X||(W||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)(W||BigInt(0))," ",u.symbol]})]})]})}),(0,r.jsx)(T.zG,{})]})}})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(T.Wi,{control:ee.control,name:"tokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(T.xJ,{children:[(0,r.jsx)(B.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(B.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,t._)({type:"number",placeholder:"0"},s),{disabled:X,onChange:function(e){s.onChange(e),ei(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)("div",{className:"bg-white px-3 py-1.5 rounded-full border border-gray-200",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:R.symbol})})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)(U||BigInt(0))," ",R.symbol]})})]})}),(0,r.jsx)(T.zG,{})]})}})}),eK&&(0,r.jsxs)("div",{className:"space-y-1 text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"当前池价格："]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-gray-600",children:eH?(0,r.jsxs)(r.Fragment,{children:["1 ",R.symbol," = ",(0,z.LH)(eK.targetToBase)," ",u.symbol]}):(0,r.jsxs)(r.Fragment,{children:["1 ",u.symbol," = ",(0,z.LH)(eK.baseToTarget)," ",R.symbol]})}),(0,r.jsx)(_.z,{type:"button",variant:"ghost",size:"sm",onClick:function(){return eJ(!eH)},className:"h-6 w-6 p-0 hover:bg-gray-100 transition-colors",title:"切换价格显示",children:(0,r.jsx)(y.Z,{className:"h-3 w-3 text-gray-500"})})]})]}),!eK&&Q&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"正在加载价格信息..."]})}),!Q&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"将创建新的流动性池"]})}),(0,r.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1 mr-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4"}),"滑点上限：",eG,"%"]}),(0,r.jsxs)(A.Vq,{open:eY,onOpenChange:e0,children:[(0,r.jsx)(A.hg,{asChild:!0,children:(0,r.jsxs)(_.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs hover:bg-gray-100 transition-colors",title:"设置滑点",children:[(0,r.jsx)(j.Z,{className:"h-3 w-3"}),"设置"]})}),(0,r.jsxs)(A.cZ,{className:"sm:max-w-md",children:[(0,r.jsx)(A.fK,{children:(0,r.jsx)(A.$N,{children:"滑点设置"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"选择滑点"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[.5,1,2.5].map(function(e){return(0,r.jsxs)(_.z,{type:"button",variant:eG===e?"default":"outline",size:"sm",onClick:function(){eO(e),e3(""),e0(!1)},className:"text-xs",children:[e,"%"]},e)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"自定义滑点"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.I,{type:"number",placeholder:"输入滑点百分比",value:e2,onChange:function(e){return e3(e.target.value)},className:"flex-1",min:"0",max:"50",step:"0.1"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]}),e2&&(0,r.jsx)(_.z,{type:"button",size:"sm",onClick:function(){var e=parseFloat(e2);e>=0&&e<=50?(eO(e),e0(!1)):g.Am.error("滑点应在 0-50% 之间")},className:"w-full",children:"应用自定义滑点"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-center lg:justify-start space-x-2",children:[(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:ep||ey||em,onClick:eA,children:ep?"1.授权中...":ey?"1.确认中...":em?"1.".concat(u.symbol,"已授权"):"1.授权".concat(u.symbol)}),(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:!em||e_||eI||eh,onClick:ez,children:e_?"2.授权中...":eI?"2.确认中...":eh?"2.".concat(R.symbol,"已授权"):"2.授权".concat(R.symbol)}),(0,r.jsx)(_.z,{className:"flex-1 lg:w-auto lg:px-4",onClick:eU,disabled:!em||!eh||e6||e9||e8,children:e6?"3.提交中...":e9?"3.确认中...":e8?"3.已添加":"3.提交"})]})]})}))}),(0,r.jsx)(M.Z,{isLoading:e7||e5||e6||e9,text:e7||e6?"提交交易...":e5?"确认授权...":"确认添加流动性..."})]})},F=a(29449),W=a(93778);function U(){var e=(0,l.useRouter)(),s=((0,i.useContext)(W.M)||{}).token,a=(0,n._)((0,i.useState)("swap"),2),m=a[0],f=a[1];return(0,i.useEffect)(function(){var s=e.query.tab;s&&["swap","liquidity","liquidity-query"].includes(s)&&f(s)},[e.query]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"交易中心"}),(0,r.jsx)("main",{className:"flex-grow px-3 sm:px-0",children:(0,r.jsxs)(c.mQ,{value:m,onValueChange:function(s){f(s);var a=(0,t._)({},e.query);a.tab=s,e.push({pathname:e.pathname,query:a},void 0,{shallow:!0})},className:"w-full max-w-2xl mx-auto",children:[(0,r.jsxs)(c.dr,{className:"grid w-full grid-cols-3 mt-2 min-w-0",children:[(0,r.jsx)(c.SP,{value:"swap",className:"min-w-0 truncate",children:"兑换"}),(0,r.jsx)(c.SP,{value:"liquidity",className:"min-w-0 truncate",children:"流动性管理"}),(0,r.jsx)(c.SP,{value:"liquidity-query",className:"min-w-0 truncate",children:"流动性查询"})]}),(0,r.jsxs)(c.nU,{value:"swap",children:[(0,r.jsx)(u.Z,{showCurrentToken:!!s&&!!s.hasEnded}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"费用说明："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"手续费为 0.3%，滑点上限为 0.5%"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsxs)(c.nU,{value:"liquidity",children:[(0,r.jsx)(R,{}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"添加流动性："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"提供流动性，可获得交易手续费分成(手续费为 0.3%)"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"LP代币："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"添加流动性后将获得 LP 代币，代表您在流动性池中的份额"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsx)(c.nU,{value:"liquidity-query",children:(0,r.jsx)(F.Z,{})})]})})]})}}},function(e){e.O(0,[8239,3615,1617,5771,3494,3591,6127,2180,1699,1909,195,9449,2888,9774,179],function(){return e(e.s=36611)}),_N_E=e.O()}]);