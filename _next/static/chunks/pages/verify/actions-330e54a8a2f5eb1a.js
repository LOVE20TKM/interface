(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2455],{1709:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(37876);let s=e=>{var r=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:r})})}},5006:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/actions",function(){return a(24633)}])},7446:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});var t=(0,a(11713).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12293:(e,r,a)=>{"use strict";a.d(r,{A:()=>n});var t=a(37876),s=a(7446);let n=()=>(0,t.jsx)(s.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,r,a)=>{"use strict";a.d(r,{X:()=>n});var t=a(76200);class s extends t.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,r){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new s({value:e});let[a,t="0"]=e.split("."),n=a.startsWith("-");if(n&&(a=a.slice(1)),t=t.replace(/(0+)$/,""),0===r)1===Math.round(Number(`.${t}`))&&(a=`${BigInt(a)+1n}`),t="";else if(t.length>r){let[e,s,n]=[t.slice(0,r-1),t.slice(r-1,r),t.slice(r)],i=Math.round(Number(`${s}.${n}`));(t=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>r&&(t=t.slice(1),a=`${BigInt(a)+1n}`),t=t.slice(0,r)}else t=t.padEnd(r,"0");return BigInt(`${n?"-":""}${a}${t}`)}},20442:(e,r,a)=>{"use strict";a.d(r,{$w:()=>i,Ee:()=>v,Js:()=>o,LP:()=>u,NJ:()=>l,W_:()=>n,XS:()=>c,Xo:()=>m,lM:()=>x,mW:()=>d});var t=a(18449),s=a(32602),n=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",i=e=>{var r=Number(o(e));return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(r)},l=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=Number(o(e));if(e<10n)return"0";if(4!==r)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r}).format(a);if(a>=1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(a);if(a>=10)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(a);if(a>=1||a>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(a);if(0===a)return"0";var t=a.toFixed(14),s=t.split(".");if(s.length<2)return t;var n=s[1],i=0,l=!0,c=!1,d=void 0;try{for(var m,u=n[Symbol.iterator]();!(l=(m=u.next()).done);l=!0){var x=m.value;if("0"===x)i++;else break}}catch(e){c=!0,d=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw d}}var f=n.slice(i,i+4);return"0.0{".concat(i,"}").concat(f)},c=e=>{var r=parseInt("18",10);try{var a=e.replace(/,/g,"");return(0,t.X)(a,r)}catch(e){return console.error("parseUnits error:",e),0n}},o=e=>{var r=parseInt("18",10);return(0,s.J)(e,r)},d=e=>e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e,m=e=>e>86400?"".concat(Math.floor(e/86400),"天").concat(Math.floor(e%86400/3600),"小时").concat(Math.floor(e%3600/60),"分"):e>3600?"".concat(Math.floor(e/3600),"小时").concat(Math.floor(e%3600/60),"分"):"".concat(Math.floor(e/60),"分").concat(e%60,"秒"),u=(e,r)=>e&&r?e-BigInt(r.initialStakeRound)+1n:0n,x=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,t=Number(e);if(t>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:r}).format(t);if(t>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:a+1}).format(t);if(0===t)return"0";var s=t.toFixed(a+10),n=s.split(".");if(n.length<2)return s;var i=n[1],l=0,c=!0,o=!1,d=void 0;try{for(var m,u=i[Symbol.iterator]();!(c=(m=u.next()).done);c=!0){var x=m.value;if("0"===x)l++;else break}}catch(e){o=!0,d=e}finally{try{c||null==u.return||u.return()}finally{if(o)throw d}}var f=i.slice(l);return"0.0{".concat(l,"}").concat(f)},f=(e,r)=>e.toFixed(r).replace(/\.?0+$/,""),v=e=>{var r="string"==typeof e?parseFloat(e):e,a=Math.abs(r);return(console.log("value",e),console.log("absNum",a),0===a)?"0%":a>=100?r.toLocaleString(void 0,{maximumFractionDigits:0})+"%":a>=10?f(r,1)+"%":a>=1?f(r,2)+"%":a>=.1?f(r,3)+"%":a>=.01?f(r,4)+"%":f(r,6)+"%"}},24633:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var t=a(37876),s=a(14232),n=a(29898),i=a(20451),l=a(66663),c=a(8047),o=a(14e3),d=a(6960),m=a(96108),u=a(48230),x=a.n(u),f=a(52372),v=a(83416),h=a(28638),N=a(1709),g=a(12293),p=a(20442);let y=e=>{var r,a=e.currentRound,n=((0,s.useContext)(v.N)||{}).token,l=(0,c.F)().address;(0,o.useRouter)();var u=(0,f.qL)((null==n?void 0:n.address)||"",a,l),y=u.verifyingActions,b=u.isPending,j=u.error,w=(0,i.g)().handleContractError;return((0,s.useEffect)(()=>{j&&w(j,"dataviewer")},[j]),!n||b)?(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(g.A,{})}):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(N.A,{title:"所有验证中行动"}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,t.jsx)(x(),{href:"/gov?symbol=".concat(null==n?void 0:n.symbol),children:"返回治理首页"})})]}),!(null==y?void 0:y.length)&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮没有行动要验证"}),y&&y.length>0&&(0,t.jsx)("div",{className:"mt-4 space-y-4",children:null==y||null==(r=y.sort((e,r)=>{var a=BigInt(e.action.head.id),t=BigInt(r.action.head.id);return a<t?-1:+(a>t)}))?void 0:r.map(e=>(0,t.jsx)(h.Zp,{className:"shadow-none",children:(0,t.jsxs)(x(),{className:"relative block",href:"/verify/".concat(e.action.head.id,"?symbol=").concat(null==n?void 0:n.symbol),children:[(0,t.jsxs)(h.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No."}),(0,t.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,t.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.action)})]}),(0,t.jsxs)(h.Wu,{className:"px-3 pt-1 pb-2",children:[(0,t.jsx)("div",{className:"text-greyscale-500",children:e.action.body.consensus}),(0,t.jsxs)("div",{className:"text-xs mt-2 flex justify-between",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票数"}),(0,t.jsxs)("span",{className:"text-secondary",children:[" ",(0,p.NJ)(e.votesNum)]})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"已验证票数"}),(0,t.jsxs)("span",{className:"text-secondary",children:[" ",(0,p.NJ)(e.verificationScore)]})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"进度"}),(0,t.jsx)("span",{className:"text-secondary",children:e.votesNum>0n?"".concat(Number(100n*e.verificationScore/e.votesNum),"%"):"0%"})]})]})]}),(0,t.jsx)(m.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},b=()=>{var e=(0,n.vC)(),r=e.currentRound,a=e.error,c=(0,i.g)().handleContractError;return(0,s.useEffect)(()=>{a&&c(a,"verify")},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{title:"验证中的行动"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsx)(y,{currentRound:r})})]})}},28638:(e,r,a)=>{"use strict";a.d(r,{BT:()=>m,Wu:()=>u,ZB:()=>d,Zp:()=>c,aR:()=>o,wL:()=>x});var t=a(3576),s=a(65699),n=a(37876),i=a(14232),l=a(30684),c=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a)},i))});c.displayName="Card";var o=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a)},i))});o.displayName="CardHeader";var d=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a)},i))});d.displayName="CardTitle";var m=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("text-sm text-muted-foreground",a)},i))});m.displayName="CardDescription";var u=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("p-6 pt-0",a)},i))});u.displayName="CardContent";var x=i.forwardRef((e,r)=>{var a=e.className,i=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",a)},i))});x.displayName="CardFooter"},77328:(e,r,a)=>{e.exports=a(89836)},86739:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});var t=(0,a(11713).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},96108:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});var t=(0,a(11713).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[8230,2569,9898,636,6593,8792],()=>r(5006)),_N_E=e.O()}]);