try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="595372b3-f66f-49a1-9621-27f72674cdf4",e._sentryDebugIdIdentifier="sentry-dbid-595372b3-f66f-49a1-9621-27f72674cdf4")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{74341:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/detail",function(){return n(13695)}])},35810:function(e,t,n){"use strict";n.d(t,{$N:function(){return j},Be:function(){return v},Vq:function(){return x},cN:function(){return g},cZ:function(){return h},fK:function(){return p},hg:function(){return u}});var s=n(72253),a=n(14932),r=n(47702),i=n(85893),o=n(67294),l=n(12854),c=n(62190),d=n(40108),x=l.fC,u=l.xz,m=l.h_;l.x8;var f=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.aV,(0,s._)({ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},a))});f.displayName=l.aV.displayName;var h=o.forwardRef(function(e,t){var n=e.className,o=e.children,x=(0,r._)(e,["className","children"]);return(0,i.jsxs)(m,{children:[(0,i.jsx)(f,{}),(0,i.jsxs)(l.VY,(0,a._)((0,s._)({ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},x),{children:[o,(0,i.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});h.displayName=l.VY.displayName;var p=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,s._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};p.displayName="DialogHeader";var g=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,s._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};g.displayName="DialogFooter";var j=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.Dx,(0,s._)({ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",n)},a))});j.displayName=l.Dx.displayName;var v=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.dk,(0,s._)({ref:t,className:(0,d.cn)("text-sm text-muted-foreground",n)},a))});v.displayName=l.dk.displayName},26986:function(e,t,n){"use strict";n.d(t,{OX:function(){return p},Qz:function(){return x},dy:function(){return d},iI:function(){return j},sc:function(){return h},u6:function(){return v},uh:function(){return m},ze:function(){return g}});var s=n(72253),a=n(14932),r=n(47702),i=n(85893),o=n(67294),l=n(53798),c=n(40108),d=function(e){var t=e.shouldScaleBackground,n=(0,r._)(e,["shouldScaleBackground"]);return(0,i.jsx)(l.dy.Root,(0,s._)({shouldScaleBackground:void 0===t||t},n))};d.displayName="Drawer";var x=l.dy.Trigger,u=l.dy.Portal,m=l.dy.Close,f=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.dy.Overlay,(0,s._)({ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80",n)},a))});f.displayName=l.dy.Overlay.displayName;var h=o.forwardRef(function(e,t){var n=e.className,o=e.children,d=e.overlayClassName,x=(0,r._)(e,["className","children","overlayClassName"]);return(0,i.jsxs)(u,{children:[(0,i.jsx)(f,{className:d}),(0,i.jsxs)(l.dy.Content,(0,a._)((0,s._)({ref:t,className:(0,c.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n)},x),{children:[(0,i.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),o]}))]})});h.displayName="DrawerContent";var p=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,s._)({className:(0,c.cn)("grid gap-1.5 p-4 text-center sm:text-left",t)},n))};p.displayName="DrawerHeader";var g=function(e){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,s._)({className:(0,c.cn)("mt-auto flex flex-col gap-2 p-4",t)},n))};g.displayName="DrawerFooter";var j=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.dy.Title,(0,s._)({ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",n)},a))});j.displayName=l.dy.Title.displayName;var v=o.forwardRef(function(e,t){var n=e.className,a=(0,r._)(e,["className"]);return(0,i.jsx)(l.dy.Description,(0,s._)({ref:t,className:(0,c.cn)("text-sm text-muted-foreground",n)},a))});v.displayName=l.dy.Description.displayName},11418:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(85893),a=n(67294),r=n(42130),i=n(41664),o=n.n(i),l=n(93778),c=n(91529),d=n(27245),x=n(20442),u=n(72260);function m(e){var t=e.isJoined,n=e.actionId,r=e.isPending,i=((0,a.useContext)(l.M)||{}).token,c=(0,x.Bk)(),m=c.currentRound,f=c.isPending,h=(0,u.Dn)((null==i?void 0:i.address)||"0x0000000000000000000000000000000000000000",m||BigInt(0),n),p=h.isActionIdVoted,g=h.isPending;if(!i)return null;var j="/acting/join?symbol=".concat(i.symbol,"&id=").concat(n),v="/my/myaction?symbol=".concat(i.symbol,"&id=").concat(n),N=!(null==i?void 0:i.address)||f||g||!m,b=!!(null==i?void 0:i.address)&&!!m;return void 0!==r&&r?(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("div",{className:"loading loading-spinner loading-md"})}):(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:t?(0,s.jsx)(o(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:v,children:"我的参与 >>"}):N?(0,s.jsx)(d.z,{className:"w-1/2",disabled:!0,children:"加载中..."}):b&&!1===p?(0,s.jsx)(d.z,{className:"w-1/2",disabled:!0,children:"未投票，不能加入"}):(0,s.jsx)(d.z,{className:"w-1/2",asChild:!0,children:(0,s.jsx)(o(),{href:j,children:"加入行动 >>"})})})}var f=n(44746);function h(e){var t=e.actionInfo,n=e.participantCount,i=e.totalAmount,d=e.convertedTotalAmount,x=e.joinedAmountTokenSymbol,u=e.joinedAmountTokenIsLP,h=e.isJoined,p=e.isPending,g=e.showActionButtons,j=void 0===g||g,v=((0,a.useContext)(l.M)||{}).token,N=(0,r.m)().address;if(!v)return(0,s.jsx)("div",{children:"Token信息加载中..."});var b=d&&d>BigInt(0),y=b?d:i,w=y?(0,c.LH)(y):"0",k=!!(x&&(null==v?void 0:v.symbol)&&x!==v.symbol),A=u?"LP":x,C=b?"• 实际总参与代币： ".concat(i?(0,c.LH)(i):"0"," ").concat(x||"","\n• 估算值是根据 UniswapV2 池价格实时换算。"):"";return(0,s.jsxs)("div",{className:"!bg-gray-100 rounded-lg px-2 pt-2 pb-2 text-sm my-4",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("h1",{className:"text-lg mb-1",children:(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"No."}),(0,s.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:t.head.id.toString()}),(0,s.jsx)("span",{className:"font-bold text-gray-800",children:t.body.title})]})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-500 mr-2",children:b?"总参与代币(估):":"总参与代币:"}),(0,s.jsxs)("span",{className:"font-mono text-secondary",children:[w,i&&k&&!b&&(0,s.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:A})," "]}),b&&C&&(0,s.jsx)(f.Z,{title:"参与代币数量说明",content:C,className:"ml-1"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-500 mr-2",children:"总参与地址:"}),(0,s.jsx)("span",{className:"font-mono text-secondary",children:(null==n?void 0:n.toString())||"0"})]})]}),j&&t&&N&&(0,s.jsx)(m,{isJoined:h,actionId:t.head.id,isPending:p}),!j&&(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:(0,s.jsx)(o(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?symbol=".concat(null==v?void 0:v.symbol,"&id=").concat(t.head.id),children:"行动详情 >>"})})]})}},27460:function(e,t,n){"use strict";var s=n(91309),a=n(85893),r=n(67294),i=n(74855),o=n(78865),l=n(18289),c=n(86501),d=n(91529);t.Z=function(e){var t=e.address,n=e.word,x=e.showCopyButton,u=e.showCopyLast4Button,m=e.showAddress,f=void 0===m||m,h=e.colorClassName,p=void 0===h?"":h,g=e.colorClassName2,j=void 0===g?"":g,v=(0,s._)((0,r.useState)(!1),2),N=v[0],b=v[1],y=(0,s._)((0,r.useState)(!1),2),w=y[0],k=y[1];(0,r.useEffect)(function(){b(!1),k(!1)},[t]);var A=function(e){e.preventDefault(),e.stopPropagation()};return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[n&&(0,a.jsx)("span",{className:"text-xs",children:n}),f&&!j&&(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:(0,d.Vu)(t)}),f&&j&&(0,a.jsxs)("span",{className:"text-[0px]",children:[(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=p?p:"text-greyscale-500"),children:"".concat(t.substring(0,4),"...")}),(0,a.jsx)("span",{className:"font-mono text-xs ".concat(j),children:"".concat(t.substring(t.length-6))})]}),(void 0===x||x)&&(0,a.jsx)(i.CopyToClipboard,{text:t,onCopy:function(e,t){t?(b(!0),setTimeout(function(){return b(!1)},2e3)):c.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:A,"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:N?(0,a.jsx)(o.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")}):(0,a.jsx)(l.Z,{className:"h-4 w-4 ".concat(null!=p?p:"text-greyscale-500")})})}),void 0!==u&&u&&(0,a.jsx)(i.CopyToClipboard,{text:t.substring(t.length-4),onCopy:function(e,t){t?(k(!0),c.ZP.success("已复制后4位"),setTimeout(function(){return k(!1)},2e3)):c.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none active:bg-gray-200 md:hover:bg-gray-100 transition-colors",onClick:A,"aria-label":"复制地址后4位",style:{WebkitTapHighlightColor:"transparent"},children:w?(0,a.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"已复制"}):(0,a.jsx)("span",{className:"".concat(null!=p?p:"text-greyscale-500"),children:"后4位"})})})]})}},90963:function(e,t,n){"use strict";var s=n(91309),a=n(85893),r=n(67294),i=n(27245),o=n(21774),l=n(26986);t.Z=function(e){var t=e.currentRound,n=e.maxRound,c=e.handleChangedRound,d=(0,s._)((0,r.useState)(!1),2),x=d[0],u=d[1],m=(0,s._)((0,r.useState)(""),2),f=m[0],h=m[1],p=(0,s._)((0,r.useState)(""),2),g=p[0],j=p[1],v=function(e){c(e),u(!1),h(""),j("")},N=Number(null!=n?n:t),b=Math.min(N,30),y=function(e){h(e),j("")},w=function(){var e=parseInt(f,10);if(isNaN(e)){j("请输入有效的数字");return}if(e<1){j("轮次不能小于 1");return}if(e>N){j("轮次不能超过 ".concat(N));return}v(e)},k=(0,r.useRef)(null),A=(0,r.useRef)(!1);return(0,a.jsxs)(l.dy,{open:x,onOpenChange:u,children:[(0,a.jsx)(l.Qz,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"link",className:"text-secondary no-underline pl-2 pr-1",children:"切换轮次"})}),(0,a.jsxs)(l.sc,{className:"z-[9999] min-h-[25vh]",overlayClassName:"z-[9998]",children:[(0,a.jsxs)(l.OX,{children:[(0,a.jsx)(l.iI,{}),(0,a.jsx)(l.u6,{})]}),(0,a.jsxs)("div",{className:"px-4 flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3 pb-3 border-b",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"跳到"}),(0,a.jsx)(o.I,{type:"number",min:1,max:N,value:f,onChange:function(e){return y(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&w()},placeholder:"1 - ".concat(N),className:"w-28 h-8 text-center"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"轮"}),(0,a.jsx)(i.z,{size:"sm",variant:"secondary",onClick:w,className:"h-8",children:"确认"})]}),g&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-2 -mt-2 text-center w-full",children:g}),(0,a.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[Array.from({length:b},function(e,t){var n=N-t;return(0,a.jsx)(i.z,{variant:"ghost",className:"w-full p-2 text-center rounded-none hover:bg-gray-100 touch-manipulation",onPointerDown:function(e){"touch"===e.pointerType?k.current=e.clientY:k.current=null,A.current=!1},onPointerMove:function(e){"touch"===e.pointerType&&null!==k.current&&Math.abs(e.clientY-k.current)>10&&(A.current=!0)},onPointerUp:function(e){"touch"===e.pointerType?(A.current||v(n),k.current=null,A.current=!1):v(n)},style:{touchAction:"manipulation"},children:(0,a.jsxs)("span",{className:"text-lg",children:["第 ",n," 轮"]})},n)}),N>30&&(0,a.jsxs)("p",{className:"text-center text-gray-400 text-sm py-2",children:["仅显示最近 ",30," 轮，更早轮次请使用上方输入框跳转"]})]})]}),(0,a.jsx)(l.ze,{children:(0,a.jsx)(l.uh,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"outline",children:"关闭"})})})]})]})}},44746:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var s=n(72253),a=n(14932),r=n(91309),i=n(85893),o=n(67294),l=n(74598),c=n(35810),d=n(26986),x=n(79995);function u(e){var t=e.title,n=e.content,u=e.className,m=void 0===u?"":u,f=(0,r._)((0,o.useState)(!1),2),h=f[0],p=f[1],g=(0,x.Z)("(min-width: 768px)"),j=o.forwardRef(function(e,n){return(0,i.jsx)("button",(0,a._)((0,s._)({ref:n,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(m),"aria-label":"查看".concat(t)},e),{children:(0,i.jsx)(l.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});j.displayName="TriggerButton";var v=function(){return(0,i.jsx)("div",{className:"text-gray-700",children:"string"==typeof n?(0,i.jsx)("p",{className:"leading-relaxed text-sm whitespace-pre-line",children:n}):n})};return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsxs)(c.Vq,{open:h,onOpenChange:p,children:[(0,i.jsx)("div",{onClick:function(){return p(!0)},children:(0,i.jsx)(j,{})}),(0,i.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,i.jsx)(c.$N,{className:"text-lg font-semibold",children:t}),(0,i.jsx)("div",{className:"pt-2 pb-4",children:(0,i.jsx)(v,{})})]})]}),!g&&(0,i.jsxs)(d.dy,{open:h,onOpenChange:p,children:[(0,i.jsx)("div",{onClick:function(){return p(!0)},children:(0,i.jsx)(j,{})}),(0,i.jsxs)(d.sc,{className:"pb-safe",children:[(0,i.jsx)(d.OX,{children:(0,i.jsx)(d.iI,{className:"text-lg font-semibold",children:t})}),(0,i.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,i.jsx)(v,{})})]})]})]})}},45231:function(e,t,n){"use strict";n.d(t,{Q:function(){return x}});var s=n(91309),a=n(67294),r=n(67516),i=n(7724),o=n(98482),l=n(37742),c=n(36268),d="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",x=function(e){var t=e.tokenAddress,n=e.actionId,x=e.account,u=(0,a.useMemo)(function(){if(!t||void 0===n)return[];var e=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:i.d,functionName:"actionInfo",args:[t,n]},{address:d,abi:o.S,functionName:"amountByActionId",args:[t,n]},{address:d,abi:o.S,functionName:"numOfAccounts",args:[t,n]},{address:d,abi:o.S,functionName:"currentRound",args:[]}];return x&&e.push({address:d,abi:o.S,functionName:"amountByActionIdByAccount",args:[t,n,x]}),e},[t,n,x]),m=(0,r.N)({contracts:u,query:{enabled:!!t&&void 0!==n&&u.length>0}}),f=m.data,h=m.isPending,p=m.error,g=(0,a.useMemo)(function(){if(!f||!t||void 0===n)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,isJoined:!1,currentRound:void 0};var e=(0,s._)(f,5),a=e[0],r=e[1],i=e[2],o=e[3],c=e[4],d=null==a?void 0:a.result,x=(null==r?void 0:r.result)?(0,l.Z)(r.result):void 0,u=(null==i?void 0:i.result)?(0,l.Z)(i.result):void 0,m=(null==o?void 0:o.result)?(0,l.Z)(o.result):void 0;return{actionInfo:d,participantCount:u,totalAmount:x,isJoined:null!=c&&!!c.result&&(0,l.Z)(c.result)>BigInt(0),currentRound:m}},[f,t,n]),j=(0,c.bX)(t,g.actionInfo,x,{participantCount:g.participantCount,totalAmount:g.totalAmount,isJoined:g.isJoined});return(0,a.useMemo)(function(){return{actionInfo:g.actionInfo,currentRound:g.currentRound,participantCount:j.participantCount,totalAmount:j.totalAmount,convertedTotalAmount:j.convertedTotalAmount,joinedAmountTokenAddress:j.joinedAmountTokenAddress,joinedAmountTokenSymbol:j.joinedAmountTokenSymbol,joinedAmountTokenIsLP:j.joinedAmountTokenIsLP,isJoined:j.isJoined,isExtensionAction:j.isExtensionAction,extensionAddress:j.extensionAddress,factory:j.factory,isPending:h||j.isPending,error:p||j.error}},[g,j,h,p])}},13695:function(e,t,n){"use strict";n.r(t);var s=n(72253),a=n(14932),r=n(91309),i=n(85893),o=n(67294),l=n(11163),c=n(42130),d=n(45231),x=n(90278),u=n(73591),m=n(83494),f=n(42083),h=n(11418),p=n(27460),g=n(90963),j=n(64777),v=n(44746),N=n(93778),b=n(91529);t.default=function(){var e=(0,l.useRouter)(),t=e.query,n=t.id,y=t.round,w=n?BigInt(n):void 0,k=y?BigInt(y):void 0,A=(0,c.m)().address,C=((0,o.useContext)(N.M)||{}).token,_=(0,r._)((0,o.useState)(BigInt(0)),2),T=_[0],S=_[1],I=(0,d.Q)({tokenAddress:null==C?void 0:C.address,actionId:w,account:A}),z=I.actionInfo,B=I.participantCount,W=I.totalAmount,P=I.convertedTotalAmount,Z=I.joinedAmountTokenSymbol,R=I.joinedAmountTokenIsLP,D=I.isJoined,L=I.isPending,E=I.error,M=I.currentRound;(0,o.useEffect)(function(){k?S(k):C&&M&&M-BigInt(C.initialStakeRound)>=BigInt(2)&&S(M-BigInt(2))},[k,M,C]);var V=(0,x.kw)((null==C?void 0:C.address)||"0x",T||BigInt(0),w||BigInt(0),10),J=V.verificationMatrix,O=V.isPending,F=V.error,H=V.progress,q=function(t){S(BigInt(t)),e.push({pathname:e.pathname,query:(0,a._)((0,s._)({},e.query),{round:t.toString()})},void 0,{shallow:!0})},X=(0,u.S)().handleContractError;(0,o.useEffect)(function(){E&&X(E,"verify_detail"),F&&X(F,"verify_detail_matrix")},[E,F]);var Q=(0,o.useMemo)(function(){if(!J||!J.verifiers||0===J.verifiers.length)return null;var e=J.verifiers,t=J.verifiees,n=J.scores,s=t.map(function(t,s){return e.reduce(function(e,t,a){var r,i=null===(r=n[a])||void 0===r?void 0:r[s];return e+(void 0!==i?Number(i):0)},0)}),a=t.map(function(e,t){return t}).sort(function(e,t){return s[t]-s[e]}),r=e.map(function(e,s){return t.reduce(function(e,t,a){var r,i=null===(r=n[s])||void 0===r?void 0:r[a];return e+(void 0!==i?Number(i):0)},0)}),i=s.reduce(function(e,t){return e+t},0);return{verifiers:e,verifiees:t,scores:n,verifieeeTotalScores:s,sortedVerifieeIndices:a,verifierTotalScores:r,grandTotalVotes:i,calculatePercentage:function(e,t){var s,a=null===(s=n[e])||void 0===s?void 0:s[t],i=r[e];if(void 0===a||0===i)return"0%";var o=Number(a)/i*100;return"".concat((0,b.rl)(o))}}},[J]);return void 0===w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{title:"验证详情",showBackButton:!0}),(0,i.jsx)("main",{className:"flex-grow",children:(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"text-center text-red-500",children:"参数错误：缺少行动ID参数"})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{title:"验证详情",showBackButton:!0}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsx)("div",{className:"px-4 pt-0 pb-3",children:z&&(0,i.jsx)(h.Z,{actionInfo:z,participantCount:B,totalAmount:W,convertedTotalAmount:P,joinedAmountTokenSymbol:Z,joinedAmountTokenIsLP:R,isJoined:D,isPending:L,showActionButtons:!1})}),L?(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(f.Z,{}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"加载数据中..."})]})})}):E?(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"text-center text-red-500",children:["加载失败：",E.message||"获取行动信息失败，请稍后重试"]})})}):z?function(){if(O)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(f.Z,{}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"正在加载验证矩阵数据..."}),H&&H.loadedVerifiers>0&&(0,i.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:(0,i.jsxs)("p",{children:["已加载 ",H.loadedVerifiers," 个验证者，请稍候..."]})})]})});if(F)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsxs)("div",{className:"text-center text-red-500",children:["加载验证矩阵失败：",F.message||"获取验证矩阵失败，请稍后重试"]})});if(!Q)return(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsx)("div",{className:"text-center text-gray-600",children:"无验证数据"})});var e=Q.verifiers,t=Q.verifiees,n=Q.scores,s=Q.verifieeeTotalScores,a=Q.sortedVerifieeIndices,r=Q.verifierTotalScores,o=Q.grandTotalVotes,l=Q.calculatePercentage;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"bg-white rounded-lg mx-4 mb-4",children:(0,i.jsx)("div",{className:"px-4 ",children:(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsx)("div",{className:"flex items-center",children:T>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{title:"第 ".concat(T.toString()," 轮验证明细")}),(0,i.jsx)("span",{className:"text-sm text-greyscale-500 ml-2",children:"("}),(0,i.jsx)(g.Z,{currentRound:C&&M?(0,b.cK)(M-BigInt(2),C):BigInt(0),handleChangedRound:q}),(0,i.jsx)("span",{className:"text-sm text-greyscale-500",children:")"})]})})})})}),(0,i.jsx)("div",{className:"w-full max-w-full overflow-hidden px-4",children:(0,i.jsx)("div",{className:"overflow-x-auto bg-white max-w-full table-container-webview",children:(0,i.jsxs)("table",{className:"w-full min-w-[846px]",style:{tableLayout:"fixed"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"border border-gray-300 p-2 bg-gray-50 sticky left-0 z-30",style:{WebkitTextSizeAdjust:"100%",width:"156px",minWidth:"156px",maxWidth:"156px",backgroundColor:"#f9fafb",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsx)("div",{className:"text-gray-600 mb-1 whitespace-nowrap",style:{fontSize:"12px"},children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"flex flex-col items-center mr-1",children:(0,i.jsx)("span",{className:"text-xs text-gray-400 mt-[-2px]",children:(0,i.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",className:"inline",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M6 2v8M6 10l3-3M6 10L3 7",stroke:"#A3A3A3",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,i.jsx)("span",{children:"行动参与者"}),(0,i.jsx)("span",{className:"mx-1 text-gray-400",children:"/"}),(0,i.jsxs)("span",{className:"flex flex-row items-center",children:[(0,i.jsx)("span",{children:"验证者"}),(0,i.jsx)("span",{className:"text-xs text-gray-400 ml-1",children:(0,i.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",className:"inline",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M2 6h8M10 6l-3-3M10 6l-3 3",stroke:"#A3A3A3",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})}),(0,i.jsx)("th",{className:"border border-gray-300 p-2 bg-gray-50 sticky left-[156px] z-30",style:{WebkitTextSizeAdjust:"100%",width:"46px",minWidth:"46px",maxWidth:"46px",backgroundColor:"#f9fafb",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsxs)("div",{className:"text-gray-600 mb-1 whitespace-nowrap",style:{fontSize:"12px"},children:["得票",(0,i.jsx)("br",{}),"占比"]})}),e.map(function(e,t){return(0,i.jsx)("th",{className:"border border-gray-300 p-1 bg-gray-50",style:{WebkitTextSizeAdjust:"100%",width:"148px",minWidth:"148px",maxWidth:"148px"},children:(0,i.jsx)("div",{children:(0,i.jsx)(p.Z,{address:e,colorClassName:"text-gray-700"})})},"verifier-".concat(t))}),(0,i.jsx)("th",{className:"border border-gray-300 p-1 bg-gray-50",style:{WebkitTextSizeAdjust:"100%",width:"152px",minWidth:"152px",maxWidth:"152px"},children:(0,i.jsx)("div",{className:"text-gray-600 text-sm font-medium",children:"得票总数(占比)"})})]})}),(0,i.jsxs)("tbody",{children:[a.map(function(a,r){var c=t[a];return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border border-gray-300 p-2 bg-gray-50 sticky left-0 z-20",style:{WebkitTextSizeAdjust:"100%",width:"156px",minWidth:"156px",maxWidth:"156px",backgroundColor:"#f9fafb",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsx)("div",{style:{fontSize:"12px"},children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsxs)("span",{className:"text-xs text-gray-500 font-mono min-w-[16px] mt-0.5",children:[r+1,"."]}),(0,i.jsx)("div",{className:"flex-1",children:"0x0000000000000000000000000000000000000000"===c?(0,i.jsx)("span",{className:"text-sm text-gray-700 font-medium",children:"弃权票"}):(0,i.jsx)(p.Z,{address:c,colorClassName:"text-gray-700"})})]})})}),(0,i.jsx)("td",{className:"border border-gray-300 p-1 bg-gray-50 sticky left-[156px] z-20",style:{WebkitTextSizeAdjust:"100%",width:"46px",minWidth:"46px",maxWidth:"46px",backgroundColor:"#f9fafb",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("span",{className:"text-xs font-bold text-gray-700",children:o>0?(0,b.rl)(s[a]/o*100):"0%"})})}),e.map(function(e,t){var s;return(0,i.jsx)("td",{className:"border border-gray-300 p-1 text-center",style:{WebkitTextSizeAdjust:"100%",width:"148px",minWidth:"148px",maxWidth:"148px"},children:(null===(s=n[t])||void 0===s?void 0:s[a])!==void 0?(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-mono whitespace-nowrap",children:(0,b.LH)(n[t][a])}),(0,i.jsxs)("span",{className:"text-gray-500",children:["(",l(t,a),")"]})]}):(0,i.jsx)("span",{className:"font-mono whitespace-nowrap",style:{fontSize:"14px"},children:"-"})},"score-".concat(t,"-").concat(a))}),(0,i.jsx)("td",{className:"border border-gray-300 p-1 text-center bg-blue-50",style:{WebkitTextSizeAdjust:"100%",width:"152px",minWidth:"152px",maxWidth:"152px"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-mono font-bold text-blue-600 whitespace-nowrap",children:(0,b.LH)(BigInt(s[a]))}),(0,i.jsxs)("span",{className:"text-blue-500",children:["(",o>0?(0,b.rl)(s[a]/o*100):"0%",")"]})]})})]},"verifiee-".concat(a))}),(0,i.jsxs)("tr",{className:"",children:[(0,i.jsx)("td",{className:"border border-gray-300 p-2 bg-blue-50 sticky left-0 z-20 font-bold",style:{WebkitTextSizeAdjust:"100%",width:"156px",minWidth:"156px",maxWidth:"156px",backgroundColor:"#dbeafe",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1 text-sm text-blue-600",children:["汇总 (",t.length-1," 个地址)",(0,i.jsx)(v.Z,{title:"最大激励地址数说明",content:(0,i.jsxs)("p",{className:"leading-relaxed text-base",children:["每轮从所有参与行动的代币中，随机抽取",(0,i.jsx)("span",{className:"font-mono font-bold text-blue-600 mx-1 text-base",children:null==z?void 0:z.body.maxRandomAccounts.toString()}),"份代币，返回对应地址。若多份代币对应相同地址，则会合并为一个地址。"]})})]})}),(0,i.jsx)("td",{className:"border border-gray-300 p-1 bg-blue-50 sticky left-[156px] z-20 font-bold",style:{WebkitTextSizeAdjust:"100%",width:"46px",minWidth:"46px",maxWidth:"46px",backgroundColor:"#dbeafe",boxShadow:"1px 0 0 0 #d1d5db"},children:(0,i.jsx)("div",{className:"text-center text-xs text-blue-600",children:"100%"})}),e.map(function(e,t){var n=r[t];return(0,i.jsx)("td",{className:"border border-gray-300 p-1 text-center bg-blue-50",style:{WebkitTextSizeAdjust:"100%",width:"148px",minWidth:"148px",maxWidth:"148px"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-mono font-bold text-blue-600 whitespace-nowrap",children:(0,b.LH)(BigInt(n))}),(0,i.jsxs)("span",{className:"text-blue-500",children:["(",(0,b.rl)(o>0?n/o*100:0),")"]})]})},"summary-".concat(t))}),(0,i.jsx)("td",{className:"border border-gray-300 p-1 text-center bg-blue-50",style:{WebkitTextSizeAdjust:"100%",width:"152px",minWidth:"152px",maxWidth:"152px"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm font-mono font-bold text-blue-600 whitespace-nowrap",children:(0,b.LH)(BigInt(o))}),(0,i.jsx)("span",{className:"text-blue-500",children:"(100%)"})]})})]})]})]})})}),(0,i.jsx)("div",{className:"bg-white mx-4 mt-4 rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-3 text-xs text-gray-500",children:(0,i.jsx)("p",{className:"md:hidden text-blue-600",children:"• 手机端请左右滑动表格查看完整内容"})})})]})}():(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,i.jsx)("div",{className:"text-center text-yellow-600",children:"行动不存在：找不到指定的行动信息"})})})]})]})}}},function(e){e.O(0,[8501,4463,3798,8139,3494,3591,9419,8300,2112,6268,2888,9774,179],function(){return e(e.s=74341)}),_N_E=e.O()}]);