try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="a6952f35-2872-46fd-b01f-9563b041fe6b",e._sentryDebugIdIdentifier="sentry-dbid-a6952f35-2872-46fd-b01f-9563b041fe6b")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7690],{81130:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/action",function(){return t(27238)}])},20725:function(e,s,t){"use strict";var n=t(85893),r=t(67294),a=t(93566),i=t(73591),c=t(93778),l=t(91529),d=t(72107),o=t(31084),x=t(44746),u=t(27460),m=t(42083);s.Z=function(e){var s=e.actionId,t=e.round,h=e.showSubmitter,f=(e.showVerifyHistory,e.onActionInfo),j=((0,r.useContext)(c.M)||{}).token,g=(0,a.dI)(null==j?void 0:j.address,s),v=g.actionInfo,b=g.isPending,N=g.error;(0,r.useEffect)(function(){f&&v&&f(v)},[v]);var p=(0,a.sK)(null==j?void 0:j.address,h?t:BigInt(0),s),y=p.submitInfo,I=p.isPending,w=p.error,B=(null==y?void 0:y.submitter)||"N/A",Z=(0,i.S)().handleContractError;return((0,r.useEffect)(function(){N&&Z(N,"submit"),w&&Z(w,"submit")},[N,w]),b)?(0,n.jsx)(m.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==v?void 0:v.head.id.toString()]}),(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:null==v?void 0:v.body.title})]}),(0,n.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,n.jsx)(u.Z,{address:null==v?void 0:v.head.author})]}),h&&(0,n.jsxs)("div",{className:"flex items-center",children:["推举人"," ",I?(0,n.jsx)(m.Z,{}):(0,n.jsx)(u.Z,{address:B})]})]})]}),(0,n.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(0,l.LH)((null==v?void 0:v.body.minStake)||BigInt(0))})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最大激励地址数"}),(0,n.jsx)(x.Z,{title:"最大激励地址数说明",content:(0,n.jsxs)("p",{className:"leading-relaxed text-base",children:["每轮从所有参与行动的代币中，随机抽取",(0,n.jsx)("span",{className:"font-mono font-bold text-blue-600 mx-1 text-base",children:null==v?void 0:v.body.maxRandomAccounts.toString()}),"份代币，返回对应地址。若多份代币对应相同地址，则会合并为一个地址。"]})})]}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(null==v?void 0:v.body.maxRandomAccounts.toString())||"-"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold mb-2",children:"验证规则"}),(0,n.jsx)("div",{className:"text-greyscale-500",children:(0,n.jsx)(d.L,{text:null==v?void 0:v.body.verificationRule,preserveLineBreaks:!0})})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold mb-2",children:"报名参加行动时，行动者要提供的信息"}),(null==v?void 0:v.body.verificationKeys)&&(null==v?void 0:v.body.verificationKeys.length)>0?(0,n.jsx)("ul",{className:"list-disc pl-5",children:v.body.verificationKeys.map(function(e,s){return(0,n.jsxs)("li",{className:"text-greyscale-500",children:[(0,n.jsxs)("div",{className:"text-sm font-bold text-greyscale-900 mb-1",children:[(0,n.jsx)(o.Z,{text:e,showWarning:!0})," :"]}),(0,n.jsx)("div",{children:(0,n.jsx)(o.Z,{text:v.body.verificationInfoGuides[s],showWarning:!0,preserveLineBreaks:!0})})]},s)})}):(0,n.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,n.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==v?void 0:v.body.whiteListAddress)&&"0x0000000000000000000000000000000000000000"!==v.body.whiteListAddress?(0,n.jsx)("span",{className:"flex items-center mr-2",children:(0,n.jsx)(u.Z,{address:v.body.whiteListAddress})}):"无限制"})]})]})})]})}},44746:function(e,s,t){"use strict";t.d(s,{Z:function(){return u}});var n=t(72253),r=t(14932),a=t(91309),i=t(85893),c=t(67294),l=t(74598),d=t(35810),o=t(26986),x=t(79995);function u(e){var s=e.title,t=e.content,u=e.className,m=void 0===u?"":u,h=(0,a._)((0,c.useState)(!1),2),f=h[0],j=h[1],g=(0,x.Z)("(min-width: 768px)"),v=c.forwardRef(function(e,t){return(0,i.jsx)("button",(0,r._)((0,n._)({ref:t,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(m),"aria-label":"查看".concat(s)},e),{children:(0,i.jsx)(l.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});v.displayName="TriggerButton";var b=function(){return(0,i.jsx)("div",{className:"text-gray-700",children:"string"==typeof t?(0,i.jsx)("p",{className:"leading-relaxed text-sm",children:t}):t})};return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsxs)(d.Vq,{open:f,onOpenChange:j,children:[(0,i.jsx)(d.hg,{asChild:!0,children:(0,i.jsx)(v,{})}),(0,i.jsxs)(d.cZ,{className:"sm:max-w-[425px]",children:[(0,i.jsx)(d.$N,{className:"text-lg font-semibold",children:s}),(0,i.jsx)("div",{className:"pt-2 pb-4",children:(0,i.jsx)(b,{})})]})]}),!g&&(0,i.jsxs)(o.dy,{open:f,onOpenChange:j,children:[(0,i.jsx)(o.Qz,{asChild:!0,children:(0,i.jsx)(v,{})}),(0,i.jsxs)(o.sc,{className:"pb-safe",children:[(0,i.jsx)(o.OX,{children:(0,i.jsx)(o.iI,{className:"text-lg font-semibold",children:s})}),(0,i.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,i.jsx)(b,{})})]})]})]})}},64777:function(e,s,t){"use strict";var n=t(85893);s.Z=function(e){var s=e.title;return(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:s})})}},21338:function(e,s,t){"use strict";var n=t(91309),r=t(85893),a=t(67294),i=t(88504),c=t(93778),l=t(74089),d=t(42083);s.Z=function(e){var s=e.currentRound,t=e.roundType,o=e.showCountdown,x=(0,i.O)().data,u=(0,a.useContext)(c.M),m=u?u.token:void 0,h=!x||!m||void 0===m.voteOriginBlocks,f=(0,n._)((0,a.useState)(BigInt(0)),2),j=f[0],g=f[1],v=Number("30126")||0,b=Number("2868")||0,N=m?Number(m.voteOriginBlocks):0,p=v-(Number(x)-N)%v,y=p>0?Math.ceil(p*b/1e3):0,I=(0,n._)((0,a.useState)(y),2),w=I[0],B=I[1];(0,a.useEffect)(function(){if(x){var e=v-(Number(x)-N)%v;B(e>0?Math.ceil(e*b/1e3):0)}},[x,v,b,N]),(0,a.useEffect)(function(){s>BigInt(0)&&g(s)},[s]);var Z=null!=j?j.toString():"0";return j<=BigInt(0)?(0,r.jsx)(r.Fragment,{}):h||null==j||j<BigInt(0)?(null==j||BigInt(0),(0,r.jsx)(d.Z,{})):(0,r.jsx)("div",{className:"flex items-center mb-3",children:(0,r.jsxs)("span",{className:"text-sm text-greyscale-400",children:["(第",(0,r.jsx)("span",{className:"text-greyscale-400",children:Z}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,r.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,r.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*w/b)}),(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{initialTimeLeft:y,onTick:B})}):(0,r.jsx)("span",{className:"text-greyscale-400",children:w<60?"".concat(w,"秒"):w<=300?"".concat(Math.floor(w/60),"分钟").concat(w%60,"秒"):w<3600?"".concat(Math.floor(w/60),"分钟"):"".concat(Math.floor(w/3600),"小时").concat(Math.floor(w%3600/60),"分钟")}),(0,r.jsx)("span",{className:"text-greyscale-400",children:")"})]})})}},31084:function(e,s,t){"use strict";var n=t(85893);t(67294);var r=t(45655);s.Z=function(e){var s=e.text,t=e.className,a=e.maxLength,i=e.showWarning,c=e.preserveLineBreaks;if(!s)return null;var l=s;a&&s.length>a&&(l=s.substring(0,a)+"...");var d=(0,r.KL)(l,void 0!==c&&c),o=s!==l||/<[^>]*>/g.test(s)||/script|javascript|onclick|onerror|onload/gi.test(s);return(0,n.jsxs)("span",{className:void 0===t?"":t,children:[(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:d}}),void 0!==i&&i&&o&&(0,n.jsx)("span",{className:"text-yellow-500 text-xs ml-1",children:"⚠️ 内容已被安全过滤"})]})}},27238:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return V}});var n=t(91309),r=t(85893),a=t(11163),i=t(41664),c=t.n(i),l=t(67294),d=t(87250),o=t(73591),x=t(93778),u=t(83494),m=t(20725),h=t(64777),f=t(42130),j=t(7080),g=t(91529),v=t(42083),b=function(e){var s=e.currentRound,t=e.actionId,n=e.onRemainingVotesChange,a=((0,l.useContext)(x.M)||{}).token,i=(0,f.m)().address,c=(0,j.Ol)(null==a?void 0:a.address,s,i||"",t),u=c.votesNumByAccountByActionId,m=c.isPending,h=c.error,b=(0,d.Tl)(null==a?void 0:a.address,s,i||"",t),N=b.scoreByVerifierByActionId,p=b.isPending,y=b.error,I=m||p?BigInt(0):u-N;(0,l.useEffect)(function(){m||p||null==n||n(I)},[I,m,p]);var w=(0,o.S)().handleContractError;return((0,l.useEffect)(function(){h&&w(h,"vote"),y&&w(y,"verify")},[h,y]),I<=0)?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"px-4",children:(0,r.jsxs)("div",{className:"text-center bg-greyscale-100 p-4 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-greyscale-800 text-base",children:["我的剩余验证票数：",m||p?(0,r.jsx)(v.Z,{}):(0,r.jsx)("span",{className:"text-secondary",children:(0,g.LH)(I)})]}),(0,r.jsx)("div",{className:"mt-2 text-sm text-greyscale-500 text-center",children:"提示: 您的验证票，将按“打分比例”分配给行动参与者"})]})})},N=t(21338),p=t(75766),y=t(72253),I=t(14932),w=t(27245),B=t(86501),Z=t(39360),_=t(44746),C=t(93950),E=t(27460),S=t(44576),k=t(72107),A=t(1938),P=function(e){var s,t,i=e.currentRound,c=e.actionId,u=e.actionInfo,m=e.remainingVotes,h=((0,l.useContext)(x.M)||{}).token;(0,Z.x)(),(0,a.useRouter)();var f=(0,C.X5)(null==h?void 0:h.address,i,c),j=f.verificationInfos,b=f.isPending,N=f.error,P=(0,C.pK)(null==h?void 0:h.address,i,c),L=P.verifiedAddresses,R=(P.isPending,P.error),M=(0,d.LW)(null==h?void 0:h.address,i,c,"0x0000000000000000000000000000000000000000"),V=M.scoreByActionIdByAccount,O=(M.isPending,M.error),T=(0,n._)((0,l.useState)({}),2),K=T[0],D=T[1],F=(0,n._)((0,l.useState)("0"),2),W=F[0],X=F[1];(0,l.useEffect)(function(){if(j&&j.length>0){var e={};j.forEach(function(s){e[s.account]=""}),D(e),X("")}},[j]);var z=function(){var e=Object.values(K).map(function(e){return parseInt(e)||0}),s=parseInt(W)||0,t=e.reduce(function(e,s){return e+s},0)+s;if(0===t)return{addressPercentages:{},abstainPercentage:0};var n={};return Object.keys(K).forEach(function(e){var s=parseInt(K[e])||0;n[e]=s/t*100}),{addressPercentages:n,abstainPercentage:s/t*100}}(),H=z.addressPercentages,q=z.abstainPercentage,Y=(s={},(t=((null==L?void 0:L.reduce(function(e,s){return e+s.score},BigInt(0)))||BigInt(0))+(V||BigInt(0)))>BigInt(0)&&(null==j||j.forEach(function(e){var n=null==L?void 0:L.find(function(s){return s.account===e.account}),r=(null==n?void 0:n.score)||BigInt(0);s[e.account]=Number(r)/Number(t)*100})),{verificationPercentages:s,totalVerifiedVotes:t}),$=Y.verificationPercentages,G=Y.totalVerifiedVotes,Q=function(e,s){(""===s||/^[0-9]+$/.test(s))&&D((0,I._)((0,y._)({},K),(0,p._)({},e,s)))},U=function(e){(""===e||/^[0-9]+$/.test(e))&&X(e)},J=function(e,s){if("Enter"===e.key||"Tab"===e.key){e.preventDefault();var t=document.querySelectorAll('input[type="number"]:not([disabled])'),n=(s+1)%t.length,r=t[n];r&&(r.focus(),r.select())}},ee=(0,d.yl)(),es=ee.verify,et=ee.isPending,en=ee.isConfirming,er=ee.isConfirmed,ea=ee.writeError;(0,l.useEffect)(function(){er&&!ea&&(B.Am.success("提交成功",{duration:2e3}),setTimeout(function(){A.N.reloadWithOverlay()},2e3))},[er,ea]);var ei=(0,o.S)().handleContractError;return(0,l.useEffect)(function(){ea&&ei(ea,"verify"),N&&ei(N,"dataViewer"),R&&ei(R,"dataViewer"),O&&ei(O,"verify")},[ea,N,R,O]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{className:"pb-3 text-left text-sm text-greyscale-500",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["被抽中的行动参与者",(0,r.jsx)(_.Z,{title:"最大激励地址数说明",content:(0,r.jsxs)("p",{className:"leading-relaxed text-base",children:["每轮从所有参与行动的代币中，随机抽取",(0,r.jsx)("span",{className:"font-mono font-bold text-blue-600 mx-1 text-base",children:null==u?void 0:u.body.maxRandomAccounts.toString()}),"份代币，返回对应地址。若多份代币对应相同地址，则会合并为一个地址。"]})})]})}),(0,r.jsx)("th",{className:"pb-3 text-left whitespace-nowrap w-16 text-sm text-greyscale-500",children:"打分"}),(0,r.jsx)("th",{className:"pb-3 text-center whitespace-nowrap w-14 text-sm text-greyscale-500",children:"分配"})]})}),(0,r.jsxs)("tbody",{children:[b&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-4",children:(0,r.jsx)(v.Z,{})})}),j&&j.length>0?j.map(function(e,s){return(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{className:"py-1",children:(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-gray-500 min-w-[4px]",children:s+1}),(0,r.jsx)("div",{className:"font-mono",children:(0,r.jsx)(E.Z,{address:e.account,showCopyLast4Button:!0})})]}),u&&(0,r.jsx)("div",{className:"text-sm text-greyscale-800 ml-3",children:u.body.verificationKeys.map(function(s,t){return(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[s,":"]}),(0,r.jsx)("div",{children:(0,r.jsx)(k.L,{text:e.infos[t]})})]},t)})})]})}),(0,r.jsx)("td",{className:"py-1 w-16 px-1",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:K[e.account]||"",placeholder:"0",onChange:function(s){return Q(e.account,s.target.value)},onKeyDown:function(e){return J(e,s)},tabIndex:s+1,className:"w-10 px-1 py-1 border rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:et||er}),(0,r.jsx)("span",{className:"text-greyscale-500 text-xs",children:"分"})]})}),(0,r.jsx)("td",{className:"py-1 text-center w-14 whitespace-nowrap px-1",children:(0,r.jsxs)("div",{className:"leading-tight",children:[(0,r.jsx)("div",{className:"text-sm text-greyscale-600 ",children:(0,g.rl)(H[e.account]||0)}),(0,r.jsxs)("div",{className:"text-xs text-greyscale-500 ",children:["(当前",(0,g.rl)($[e.account]||0),")"]})]})})]},e.account)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-4",children:"暂无数据"})}),j&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)("div",{className:"text-left",children:(0,r.jsx)("div",{className:"text-sm text-greyscale-800",children:(0,r.jsx)("span",{children:"弃权票数："})})})}),(0,r.jsx)("td",{className:"py-2 w-16 px-1",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:W,placeholder:"0",onChange:function(e){return U(e.target.value)},onKeyDown:function(e){return J(e,(null==j?void 0:j.length)||0)},tabIndex:((null==j?void 0:j.length)||0)+1,className:"w-10 px-1 py-1 border rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:et||er}),(0,r.jsx)("span",{className:"text-greyscale-500 text-xs",children:"分"})]})}),(0,r.jsx)("td",{className:"py-2 text-center w-14 whitespace-nowrap px-1",children:(0,r.jsxs)("div",{className:"text-greyscale-500 text-xs leading-tight",children:[(0,r.jsx)("div",{children:(0,g.rl)(q)}),(0,r.jsxs)("div",{children:["(当前",(0,g.rl)(G>BigInt(0)?Number(V||BigInt(0))/Number(G)*100:0),")"]})]})})]})]})]})}),(0,r.jsxs)(w.z,{onClick:function(){if(m<=BigInt(2)?(B.Am.error("剩余票数不足，无法验证"),!1):!Object.values(K).every(function(e){return 0===parseInt(e)||""===e})||0!==parseInt(W)&&""!==W||(B.Am.error("请至少给一个地址或弃权投票打分"),!1)){var e=Object.values(K).reduce(function(e,s){return e+(parseInt(s)||0)},0)+(parseInt(W)||0),s=[],t=BigInt(0);j.forEach(function(n,r){var a=parseInt(K[n.account])||0,i=BigInt(Math.floor(Number(m)*(a/e)));if((t+=i)>m){var c=t-m;t-=c,s.push(i-c)}else s.push(i)});var n=s.reduce(function(e,s){return e+s},BigInt(0));if(parseInt(W)>0){var r=m>n?m-n:BigInt(0);es(null==h?void 0:h.address,c,r,s)}else{if(n<m){var a=s.findIndex(function(e){return e>BigInt(0)});-1!==a&&(s[a]+=m-n)}es(null==h?void 0:h.address,c,BigInt(0),s)}}},disabled:et||en||er,className:"mt-6 w-1/2",children:[!et&&!en&&!er&&"提交验证",et&&"提交中...",en&&"确认中...",er&&"已验证"]}),(0,r.jsx)(S.Z,{isLoading:et||en,text:et?"提交交易...":"确认交易..."})]})},L=t(42171),R=t(4307),M=function(e){var s=e.currentRound,t=e.actionId,a=e.actionInfo,i=((0,l.useContext)(x.M)||{}).token,c=(0,f.m)().address,u=(0,n._)((0,l.useState)(new Set),2),m=u[0],b=u[1],p=(0,d.LW)(null==i?void 0:i.address,s,t,"0x0000000000000000000000000000000000000000"),w=p.scoreByActionIdByAccount,B=p.isPending,Z=p.error,_=(0,C.pK)(null==i?void 0:i.address,s,t),S=_.verifiedAddresses,A=_.isPending,P=_.error,M=(0,C.X5)(null==i?void 0:i.address,s,t),V=M.verificationInfos,O=M.isPending,T=M.error,K=(0,j.wD)(null==i?void 0:i.address,s,t),D=K.votesNumByActionId,F=(K.isPending,K.error),W=(0,o.S)().handleContractError;(0,l.useEffect)(function(){P&&W(P,"dataViewer"),T&&W(T,"dataViewer"),Z&&W(Z,"verify"),F&&W(F,"vote")},[P,T,Z,F]);var X=function(e){var s=new Set(m);s.has(e)?s.delete(e):s.add(e),b(s)},z=((null==S?void 0:S.reduce(function(e,s){return e+s.score},BigInt(0)))||BigInt(0))+(w||BigInt(0)),H=Number(z)/Number(D||BigInt(0))*100;return(0,r.jsxs)("div",{className:"relative px-4 pb-4 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{title:"当前轮最新验证结果"}),(0,r.jsxs)("span",{className:"text-sm text-greyscale-500 ml-2",children:["(验证进度：",(0,g.rl)(H),")"]})]}),(0,r.jsx)("div",{className:"flex justify-left mt-2",children:(0,r.jsx)(N.Z,{currentRound:s,roundType:"verify"})}),O||A||B?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(v.Z,{})}):V&&0!==V.length?(0,r.jsxs)("table",{className:"table w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"被抽中地址"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"获得验证票"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"验证票占比"})]})}),(0,r.jsxs)("tbody",{children:[V.map(function(e){var s=null==S?void 0:S.find(function(s){return s.account===e.account});return(0,I._)((0,y._)({},e),{score:(null==s?void 0:s.score)||BigInt(0)})}).sort(function(e,s){return e.score>s.score?-1:e.score<s.score?1:0}).map(function(e){var s=null==S?void 0:S.find(function(s){return s.account===e.account}),t=m.has(e.account);return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-gray-100 ".concat(e.account===c?"text-secondary":""),children:[(0,r.jsx)("td",{className:"px-1 w-8",children:(0,r.jsx)("button",{onClick:function(){return X(e.account)},className:"text-greyscale-400 hover:text-greyscale-600",children:t?(0,r.jsx)(L.Z,{size:16}):(0,r.jsx)(R.Z,{size:16})})}),(0,r.jsx)("td",{className:"px-1",children:(0,r.jsx)(E.Z,{address:e.account,showCopyButton:!0,word:e.account===c?"(我)":""})}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,g.tY)((null==s?void 0:s.score)||BigInt(0))}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,g.rl)(Number((null==s?void 0:s.score)||BigInt(0))/Number(z||BigInt(0))*100)})]}),a&&t&&(0,r.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,r.jsx)("td",{}),(0,r.jsx)("td",{colSpan:3,className:"px-1 py-3",children:(0,r.jsxs)("div",{className:"text-sm text-greyscale-600",children:[(0,r.jsx)("div",{className:"text-xs text-greyscale-400 mb-2",children:"验证信息:"}),a.body.verificationKeys.map(function(s,t){return(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsxs)("span",{className:"text-greyscale-500",children:[s,":"]})," ",(0,r.jsx)(k.L,{text:e.infos[t]})]},t)})]})})]})]},e.account)}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"弃权票"}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,g.tY)(w||BigInt(0))}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,g.rl)(Number(w||BigInt(0))/Number(z||BigInt(0))*100)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"汇总 "}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,g.tY)(z||BigInt(0))}),(0,r.jsx)("td",{className:"px-1 text-right",children:"100%"})]})]})]}):(0,r.jsx)("div",{className:"text-center text-sm text-greyscale-400 p-4",children:"没有验证地址"})]})},V=function(){var e=BigInt((0,a.useRouter)().query.id||"0"),s=((0,l.useContext)(x.M)||{}).token,t=(0,d.Bk)(),i=t.currentRound,f=t.error,j=(0,o.S)().handleContractError;(0,l.useEffect)(function(){f&&j(f,"verify")},[f]);var g=(0,n._)((0,l.useState)(BigInt(-1)),2),p=g[0],y=g[1],I=(0,n._)((0,l.useState)(void 0),2),w=I[0],B=I[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{title:"验证",backUrl:"/verify/?symbol=".concat(null==s?void 0:s.symbol)}),(0,r.jsxs)("main",{className:"flex-grow",children:[p>0&&(0,r.jsxs)("div",{className:"px-4 pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(h.Z,{title:"请分配您的验证票："}),(0,r.jsx)(c(),{href:"/action/info/?id=".concat(e,"&symbol=").concat(null==s?void 0:s.symbol,"&tab=verify&tab2=current"),className:"text-blue-600 hover:text-blue-800 underline text-sm",children:"验证结果>>"})]}),(0,r.jsx)(N.Z,{currentRound:i,roundType:"verify",showCountdown:!1})]}),(0,r.jsx)(b,{currentRound:i,actionId:e,onRemainingVotesChange:function(e){y(e)}}),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4",children:[p>BigInt(1)&&(0,r.jsx)(P,{currentRound:i,actionId:e,actionInfo:w,remainingVotes:p}),p>=BigInt(0)&&p<=BigInt(1)&&(0,r.jsx)(M,{currentRound:i,actionId:e,actionInfo:w}),p<BigInt(0)&&(0,r.jsx)(v.Z,{})]}),(0,r.jsx)(m.Z,{actionId:e,round:BigInt(i||0),showSubmitter:!0,onActionInfo:B})]})]})}}},function(e){e.O(0,[8239,367,5249,3494,2252,3950,7724,7285,7250,1489,2888,9774,179],function(){return e(e.s=81130)}),_N_E=e.O()}]);