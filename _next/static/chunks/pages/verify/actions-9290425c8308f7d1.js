(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2455],{1709:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});var t=s(37876);let r=e=>{var a=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:a})})}},5006:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/actions",function(){return s(24633)}])},12293:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var t=s(37876),r=s(7446);let n=()=>(0,t.jsx)(r.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var t=s(76200);class r extends t.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new r({value:e});let[s,t="0"]=e.split("."),n=s.startsWith("-");if(n&&(s=s.slice(1)),t=t.replace(/(0+)$/,""),0===a)1===Math.round(Number(`.${t}`))&&(s=`${BigInt(s)+1n}`),t="";else if(t.length>a){let[e,r,n]=[t.slice(0,a-1),t.slice(a-1,a),t.slice(a)],c=Math.round(Number(`${r}.${n}`));(t=c>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${c}`).length>a&&(t=t.slice(1),s=`${BigInt(s)+1n}`),t=t.slice(0,a)}else t=t.padEnd(a,"0");return BigInt(`${n?"-":""}${s}${t}`)}},24633:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(37876),r=s(14232),n=s(29898),c=s(20451),l=s(60154),i=s(8047),d=s(14e3),o=s(6960),m=s(96108),u=s(48230),x=s.n(u),N=s(52372),h=s(83416),f=s(28638),v=s(1709),p=s(12293),j=s(20442);let y=e=>{var a,s=e.currentRound,n=((0,r.useContext)(h.N)||{}).token,l=(0,i.F)().address;(0,d.useRouter)();var u=(0,N.qL)((null==n?void 0:n.address)||"",s,l),y=u.verifyingActions,g=u.isPending,b=u.error,w=(0,c.g)().handleContractError;return((0,r.useEffect)(()=>{b&&w(b,"dataviewer")},[b]),!n||g)?(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(p.A,{})}):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(v.A,{title:"所有验证中行动"}),(0,t.jsx)(o.$,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,t.jsx)(x(),{href:"/gov?symbol=".concat(null==n?void 0:n.symbol),children:"返回治理首页"})})]}),!(null==y?void 0:y.length)&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮没有行动要验证"}),y&&y.length>0&&(0,t.jsx)("div",{className:"mt-4 space-y-4",children:null==y||null==(a=y.sort((e,a)=>{var s=BigInt(e.action.head.id),t=BigInt(a.action.head.id);return s<t?-1:+(s>t)}))?void 0:a.map(e=>(0,t.jsx)(f.Zp,{className:"shadow-none",children:(0,t.jsxs)(x(),{className:"relative block",href:"/verify/action?id=".concat(e.action.head.id,"&symbol=").concat(null==n?void 0:n.symbol),children:[(0,t.jsxs)(f.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No."}),(0,t.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,t.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]}),(0,t.jsx)(f.Wu,{className:"px-3 pt-1 pb-2",children:(0,t.jsxs)("div",{className:"text-xs mt-2 flex justify-between",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票数"}),(0,t.jsxs)("span",{className:"text-secondary",children:[" ",(0,j.NJ)(e.votesNum)]})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"已验证票数"}),(0,t.jsxs)("span",{className:"text-secondary",children:[" ",(0,j.NJ)(e.verificationScore)]})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-greyscale-400 mr-1",children:"进度"}),(0,t.jsx)("span",{className:"text-secondary",children:e.votesNum>0n?"".concat(Number(100n*e.verificationScore/e.votesNum),"%"):"0%"})]})]})}),(0,t.jsx)(m.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},g=()=>{var e=(0,n.vC)(),a=e.currentRound,s=e.error,i=(0,c.g)().handleContractError;return(0,r.useEffect)(()=>{s&&i(s,"verify")},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{title:"验证中的行动"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsx)(y,{currentRound:a})})]})}},28638:(e,a,s)=>{"use strict";s.d(a,{BT:()=>m,Wu:()=>u,ZB:()=>o,Zp:()=>i,aR:()=>d,wL:()=>x});var t=s(3576),r=s(65699),n=s(37876),c=s(14232),l=s(30684),i=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},c))});i.displayName="Card";var d=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s)},c))});d.displayName="CardHeader";var o=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s)},c))});o.displayName="CardTitle";var m=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s)},c))});m.displayName="CardDescription";var u=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("p-6 pt-0",s)},c))});u.displayName="CardContent";var x=c.forwardRef((e,a)=>{var s=e.className,c=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s)},c))});x.displayName="CardFooter"},69167:(e,a,s)=>{"use strict";s.d(a,{v:()=>d});var t=s(57616),r=s(94833),n=s(14237),c=s(66655),l=s(8481),i=s(57771);async function d(e,a){let{abi:s,address:d,args:o,dataSuffix:m,functionName:u,...x}=a,N=x.account?(0,t.J)(x.account):e.account,h=(0,n.p)({abi:s,args:o,functionName:u});try{let{data:t}=await (0,l.T)(e,i.T,"call")({batch:!1,data:`${h}${m?m.replace("0x",""):""}`,to:d,...x,account:N}),n=(0,r.e)({abi:s,args:o,functionName:u,data:t||"0x"}),c=s.filter(e=>"name"in e&&e.name===a.functionName);return{result:n,request:{abi:c,address:d,args:o,dataSuffix:m,functionName:u,...x,account:N}}}catch(e){throw(0,c.j)(e,{abi:s,address:d,args:o,docsPath:"/docs/contract/simulateContract",functionName:u,sender:N?.address})}}},81675:(e,a,s)=>{"use strict";s.d(a,{v:()=>c});var t=s(69167),r=s(629),n=s(90203);async function c(e,a){let s,{abi:c,chainId:l,connector:i,...d}=a;s=a.account?a.account:(await (0,n.r)(e,{chainId:l,connector:i})).account;let o=e.getClient({chainId:l}),m=(0,r.T)(o,t.v,"simulateContract"),{result:u,request:x}=await m({...d,abi:c,account:s});return{chainId:o.chain.id,result:u,request:{...x,chainId:l}}}}},e=>{var a=a=>e(e.s=a);e.O(0,[3308,9374,8230,154,3096,9898,636,6593,8792],()=>a(5006)),_N_E=e.O()}]);