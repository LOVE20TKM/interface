(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5860],{1709:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var n=t(37876);let r=e=>{var s=e.title;return(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:s})})}},10456:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/action",function(){return t(75690)}])},12293:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var n=t(37876),r=t(7446);let a=()=>(0,n.jsx)(r.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,s,t)=>{"use strict";t.d(s,{X:()=>a});var n=t(76200);class r extends n.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function a(e,s){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new r({value:e});let[t,n="0"]=e.split("."),a=t.startsWith("-");if(a&&(t=t.slice(1)),n=n.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${n}`))&&(t=`${BigInt(t)+1n}`),n="";else if(n.length>s){let[e,r,a]=[n.slice(0,s-1),n.slice(s-1,s),n.slice(s)],l=Math.round(Number(`${r}.${a}`));(n=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(n=n.slice(1),t=`${BigInt(t)+1n}`),n=n.slice(0,s)}else n=n.padEnd(s,"0");return BigInt(`${a?"-":""}${t}${n}`)}},18651:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var n=t(40854),r=t(37876),a=t(14232),l=t(63934),c=t(83416);let i=e=>{var s=e.initialTimeLeft,t=e.onTick,l=(0,n._)((0,a.useState)(Date.now()+1e3*s),2),c=l[0],i=l[1],d=(0,n._)((0,a.useState)(s),2),o=d[0],x=d[1];(0,a.useEffect)(()=>{i(Date.now()+1e3*s)},[s]),(0,a.useEffect)(()=>{var e=setInterval(()=>{var s=Math.max(0,Math.floor((c-Date.now())/1e3));x(s),t&&t(s),s<=0&&(clearInterval(e),window.location.reload())},1e3);return()=>clearInterval(e)},[c,t]);var u=Math.floor(o/86400),m=Math.floor(o%86400/3600),h=Math.floor(o%3600/60);return(0,r.jsxs)("div",{className:"inline-flex gap-1 text-greyscale-400",children:[u>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":u}})}),"天"]}),(m>0||u>0)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":m}})}),"时"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":h}})}),"分"]}),u<=0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":o%60}})}),"秒"]})]})};var d=t(12293);let o=e=>{var s=e.currentRound,t=e.roundType,o=e.showCountdown,x=(0,l.y)().data,u=(0,a.useContext)(c.N),m=u?u.token:void 0,h=!x||!m||void 0===m.voteOriginBlocks,j=(0,n._)((0,a.useState)(0n),2),v=j[0],f=j[1],g=Number("120")||0,N=Number("255")||0,p=m?Number(m.voteOriginBlocks):0,y=g-(Number(x)-p)%g,b=y>0?Math.ceil(y*N/100):0,w=(0,n._)((0,a.useState)(b),2),I=w[0],A=w[1];(0,a.useEffect)(()=>{if(x){var e=g-(Number(x)-p)%g;A(e>0?Math.ceil(e*N/100):0)}},[x,g,N,p]),(0,a.useEffect)(()=>{s>0n&&f(s)},[s]);var C=null!=v?v.toString():"0";return v<=0n?(0,r.jsx)(r.Fragment,{}):h||null==v||v<0n?((null==v||v<0n)&&(console.log("currentTokenRound",v),console.log("currentRound",s)),(0,r.jsx)(d.A,{})):(0,r.jsx)("div",{className:"flex items-center mb-3",children:(0,r.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,r.jsx)("span",{className:"text-greyscale-400",children:C}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,r.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,r.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(100*I/N)}),(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i,{initialTimeLeft:b,onTick:A})}):(0,r.jsx)("span",{className:"text-greyscale-400",children:I<60?"".concat(I,"秒"):I<=300?"".concat(Math.floor(I/60),"分钟").concat(I%60,"秒"):I<3600?"".concat(Math.floor(I/60),"分钟"):"".concat(Math.floor(I/3600),"小时").concat(Math.floor(I%3600/60),"分钟")}),(0,r.jsx)("span",{className:"text-greyscale-400",children:" )"})]})})}},42038:(e,s,t)=>{"use strict";t.d(s,{C:()=>r});var n=t(97685),r=e=>!!e||(n.oR.error("请先将钱包链接 ".concat("thinkium70001")),!1)},43885:(e,s,t)=>{"use strict";t.d(s,{H:()=>l});var n=t(37876);t(14232);var r=t(54680),a=e=>{if(!e)return e;var s=/(https?:\/\/[^\s]+)/g;if(!s.test(e))return e;var t=e.split(s),a=e.match(s)||[];return(0,n.jsx)(n.Fragment,{children:t.map((e,s)=>{if(s%2==0)return e;var t=a[(s-1)/2];return(0,n.jsx)("a",{href:t,onClick:e=>{e.preventDefault(),r.a.handleExternalLink(t)},className:"text-blue-500 underline hover:text-blue-700",target:"_blank",children:t},s)})})},l=e=>{var s=e.text;return(0,n.jsx)(n.Fragment,{children:a(s)})}},63934:(e,s,t)=>{"use strict";t.d(s,{y:()=>x});var n=t(63127),r=t(77434),a=t(629),l=t(24751),c=t(25503),i=t(1081),d=t(43387),o=t(79056);function x(e={}){let{query:s={},watch:t}=e,u=(0,d.U)(e),m=(0,n.jE)(),h=(0,i.i)({config:u}),j=e.chainId??h,v=function(e,s={}){return{gcTime:0,async queryFn({queryKey:s}){let{scopeKey:t,...n}=s[1];return await function(e,s={}){let{chainId:t,...n}=s,l=e.getClient({chainId:t});return(0,a.T)(l,r.G,"getBlockNumber")(n)}(e,n)??null},queryKey:function(e={}){return["blockNumber",(0,l.xO)(e)]}(s)}}(u,{...e,chainId:j});return(0,o.r)({...{config:e.config,chainId:e.chainId,..."object"==typeof t?t:{}},enabled:!!((s.enabled??!0)&&("object"==typeof t?t.enabled:t)),onBlockNumber(e){m.setQueryData(v.queryKey,e)}}),(0,c.IT)({...s,...v})}},75690:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var n=t(40854),r=t(37876),a=t(89099),l=t(14232),c=t(29898),i=t(20451),d=t(60154),o=t(92101),x=t(1709),u=t(8047),m=t(98684),h=t(83416),j=t(20442),v=t(12293);let f=e=>{var s=e.currentRound,t=e.actionId,n=e.onRemainingVotesChange,a=((0,l.useContext)(h.N)||{}).token,d=(0,u.F)().address,o=(0,m.$6)(null==a?void 0:a.address,s,d||"",t),x=o.votesNumByAccountByActionId,f=o.isPending,g=o.error,N=(0,c.XC)(null==a?void 0:a.address,s,d||"",t),p=N.scoreByVerifierByActionId,y=N.isPending,b=N.error,w=f||y?BigInt(0):x-p;(0,l.useEffect)(()=>{f||y||(console.log("remainingVotes",w),console.log("isPendingVotesNumByAccount",f),console.log("isPendingScoreByVerifier",y),null==n||n(w))},[w,f,y]);var I=(0,i.g)().handleContractError;return((0,l.useEffect)(()=>{g&&I(g,"vote"),b&&I(b,"verify")},[g,b]),w<=0)?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"px-4",children:(0,r.jsxs)("div",{className:"text-center bg-greyscale-100 p-4 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-greyscale-800 text-base",children:["我的剩余验证票数：",f||y?(0,r.jsx)(v.A,{}):(0,r.jsx)("span",{className:"text-secondary",children:(0,j.NJ)(w)})]}),(0,r.jsx)("div",{className:"mt-2 text-sm text-greyscale-500 text-center",children:"提示: 您的验证票，将按“打分比例”分配给行动参与者"})]})})};var g=t(18651),N=t(3576),p=t(62701),y=t(6960),b=t(97685),w=t(42038),I=t(52372),A=t(87577),C=t(99574),E=t(43885);let k=e=>{var s=e.currentRound,t=e.actionId,d=e.actionInfo,o=e.remainingVotes,x=((0,l.useContext)(h.N)||{}).token,m=(0,u.F)().chain,f=(0,a.useRouter)(),g=(0,I.Zp)(null==x?void 0:x.address,s,t),k=g.verificationInfos,_=g.isPending,B=g.error,S=(0,n._)((0,l.useState)({}),2),$=S[0],R=S[1],P=(0,n._)((0,l.useState)("0"),2),V=P[0],T=P[1];(0,l.useEffect)(()=>{if(k&&k.length>0){var e={};k.forEach(s=>{e[s.account]=""}),R(e),T("")}},[k]);var M=(()=>{var e=Object.values($).map(e=>parseInt(e)||0),s=parseInt(V)||0,t=e.reduce((e,s)=>e+s,0)+s;if(0===t)return{addressPercentages:{},abstainPercentage:0};var n={};return Object.keys($).forEach(e=>{var s=parseInt($[e])||0;n[e]=s/t*100}),{addressPercentages:n,abstainPercentage:s/t*100}})(),F=M.addressPercentages,O=M.abstainPercentage,L=(e,s)=>{(""===s||/^[0-9]+$/.test(s))&&R((0,p._)((0,N._)({},$),{[e]:s}))},D=e=>{(""===e||/^[0-9]+$/.test(e))&&T(e)},K=(0,c.VI)(),q=K.verify,H=K.isPending,X=K.isConfirming,z=K.isConfirmed,Z=K.writeError,G=()=>!!(0,w.C)(m)&&(o<=2n?(b.oR.error("剩余票数不足，无法验证"),!1):!Object.values($).every(e=>0===parseInt(e)||""===e)||0!==parseInt(V)&&""!==V||(b.oR.error("请至少给一个地址或弃权投票打分"),!1));(0,l.useEffect)(()=>{z&&!Z&&(b.oR.success("提交成功",{duration:2e3}),setTimeout(()=>{f.push("/verify/?symbol=".concat(null==x?void 0:x.symbol))},2e3))},[z,Z]);var J=(0,i.g)().handleContractError;return(0,l.useEffect)(()=>{Z&&J(Z,"verify"),B&&J(B,"dataViewer")},[Z,B]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{className:"pb-3 text-left text-sm text-greyscale-500",children:"被抽中的行动参与者"}),(0,r.jsx)("th",{className:"pb-3 pl-2 text-left whitespace-nowrap w-20 text-sm text-greyscale-500",children:"打分"}),(0,r.jsx)("th",{className:"pb-3 text-center whitespace-nowrap w-16 text-sm text-greyscale-500",children:"分配"})]})}),(0,r.jsxs)("tbody",{children:[_&&(0,r.jsx)(v.A,{}),k&&k.length>0?k.map((e,s)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{className:"py-2",children:(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-mono",children:(0,r.jsx)(A.A,{address:e.account})}),d&&(0,r.jsx)("div",{className:"text-sm text-greyscale-800",children:d.body.verificationKeys.map((s,t)=>(0,r.jsxs)("div",{children:[s,": ",(0,r.jsx)(E.H,{text:e.infos[t]})]},t))})]})}),(0,r.jsx)("td",{className:"py-2 w-20",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:$[e.account]||"",placeholder:"0",onChange:s=>L(e.account,s.target.value),className:"w-11 px-1 py-1 border rounded",disabled:H||z}),(0,r.jsx)("span",{className:"text-greyscale-500 text-sm",children:"分"})]})}),(0,r.jsx)("td",{className:"py-2 text-center w-16 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-greyscale-500 text-sm",children:(0,j.Ee)(F[e.account]||0)})})]},e.account)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-4",children:"暂无数据"})}),k&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)("div",{className:"text-left",children:(0,r.jsx)("div",{className:"text-sm text-greyscale-800",children:(0,r.jsx)("span",{children:"弃权票数："})})})}),(0,r.jsx)("td",{className:"py-2 w-20",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:V,placeholder:"0",onChange:e=>D(e.target.value),className:"w-11 px-1 py-1 border rounded",disabled:H||z}),(0,r.jsx)("span",{className:"text-greyscale-500 text-sm",children:"分"})]})}),(0,r.jsx)("td",{className:"py-2 text-center w-16 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-greyscale-500 text-sm",children:(0,j.Ee)(O)})})]})]})]})}),(0,r.jsxs)(y.$,{onClick:()=>{if(G()){var e=Object.values($).reduce((e,s)=>e+(parseInt(s)||0),0)+(parseInt(V)||0);console.log("-------handleSubmit()-------"),console.log("scoreSum",e);var s=[],n=0n;k.forEach((t,r)=>{var a=parseInt($[t.account])||0,l=BigInt(Math.floor(Number(o)*(a/e)));if((n+=l)>o){var c=n-o;n-=c,s.push(l-c)}else s.push(l)});var r=s.reduce((e,s)=>e+s,0n);if(console.log("remainingVotes",o),console.log("scoresArrayTotal",r),console.log("scoresArrayForSubmit",s),parseInt(V)>0){var a=o>r?o-r:0n;console.log("abstainVotes",a),q(null==x?void 0:x.address,t,a,s)}else{if(r<o){var l=s.findIndex(e=>e>0n);-1!==l&&(s[l]+=o-r)}console.log("abstainVotes",0n),q(null==x?void 0:x.address,t,0n,s)}}},disabled:H||X||z,className:"mt-6 w-1/2",children:[!H&&!X&&!z&&"提交验证",H&&"提交中...",X&&"确认中...",z&&"已验证"]}),(0,r.jsx)(C.A,{isLoading:H||X,text:H?"提交交易...":"确认交易..."})]})};var _=t(30822),B=t(96108);let S=e=>{var s=e.currentRound,t=e.actionId,a=e.actionInfo;e.remainingVotes;var d=((0,l.useContext)(h.N)||{}).token,o=(0,u.F)().address,f=(0,n._)((0,l.useState)(new Set),2),y=f[0],b=f[1],w=(0,c.YZ)(null==d?void 0:d.address,s,t,"0x0000000000000000000000000000000000000000"),C=w.scoreByActionIdByAccount,k=w.isPending,S=w.error,$=(0,I.p$)(null==d?void 0:d.address,s,t),R=$.verifiedAddresses,P=$.isPending,V=$.error,T=(0,I.Zp)(null==d?void 0:d.address,s,t),M=T.verificationInfos,F=T.isPending,O=T.error,L=(0,m.xe)(null==d?void 0:d.address,s,t),D=L.votesNumByActionId,K=(L.isPending,L.error),q=(0,i.g)().handleContractError;(0,l.useEffect)(()=>{V&&q(V,"dataViewer"),O&&q(O,"dataViewer"),S&&q(S,"verify"),K&&q(K,"vote")},[V,O,S,K]);var H=e=>{var s=new Set(y);s.has(e)?s.delete(e):s.add(e),b(s)},X=(null==R?void 0:R.reduce((e,s)=>e+s.score,0n))||0n,z=(Number(X)+Number(C||0n))/Number(D||0n)*100;return(0,r.jsxs)("div",{className:"relative px-4 pb-4 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.A,{title:"当前轮最新验证结果"}),(0,r.jsxs)("span",{className:"text-sm text-greyscale-500 ml-2",children:["(验证进度：",(0,j.Ee)(z),")"]})]}),(0,r.jsx)("div",{className:"flex justify-left mt-2",children:(0,r.jsx)(g.A,{currentRound:s,roundType:"verify"})}),F||P||k?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(v.A,{})}):M&&0!==M.length?(0,r.jsxs)("table",{className:"table w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"被抽中地址"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"获得验证票"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"验证票占比"})]})}),(0,r.jsxs)("tbody",{children:[M.map(e=>{var s=null==R?void 0:R.find(s=>s.account===e.account);return(0,p._)((0,N._)({},e),{score:(null==s?void 0:s.score)||0n})}).sort((e,s)=>e.score>s.score?-1:+(e.score<s.score)).map(e=>{var s=null==R?void 0:R.find(s=>s.account===e.account),t=y.has(e.account);return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-gray-100 ".concat(e.account===o?"text-secondary":""),children:[(0,r.jsx)("td",{className:"px-1 w-8",children:(0,r.jsx)("button",{onClick:()=>H(e.account),className:"text-greyscale-400 hover:text-greyscale-600",children:t?(0,r.jsx)(_.A,{size:16}):(0,r.jsx)(B.A,{size:16})})}),(0,r.jsx)("td",{className:"px-1",children:(0,r.jsx)(A.A,{address:e.account,showCopyButton:!0,word:e.account===o?"(我)":""})}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,j.$w)((null==s?void 0:s.score)||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,j.Ee)(Number((null==s?void 0:s.score)||0n)/Number(X||0n)*100)})]}),a&&t&&(0,r.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,r.jsx)("td",{}),(0,r.jsx)("td",{colSpan:2,className:"px-1 py-3",children:(0,r.jsxs)("div",{className:"text-sm text-greyscale-600",children:[(0,r.jsx)("div",{className:"text-xs text-greyscale-400 mb-2",children:"验证信息:"}),a.body.verificationKeys.map((s,t)=>(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsxs)("span",{className:"text-greyscale-500",children:[s,":"]})," ",(0,r.jsx)(E.H,{text:e.infos[t]})]},t))]})})]})]},e.account)}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"弃权票"}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,j.$w)(C||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,j.Ee)(Number(C||0n)/Number(X||0n)*100)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"汇总 "}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,j.$w)(X||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:"100%"})]})]})]}):(0,r.jsx)("div",{className:"text-center text-sm text-greyscale-400 p-4",children:"没有验证地址"})]})},$=()=>{var e=BigInt((0,a.useRouter)().query.id||"0"),s=(0,c.vC)(),t=s.currentRound,u=s.error,m=(0,i.g)().handleContractError;(0,l.useEffect)(()=>{u&&m(u,"verify")},[u]);var h=(0,n._)((0,l.useState)(BigInt(-1n)),2),j=h[0],N=h[1];console.log("remainingVotes",j);var p=(0,n._)((0,l.useState)(void 0),2),y=p[0],b=p[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{title:"验证"}),(0,r.jsxs)("main",{className:"flex-grow",children:[j>0&&(0,r.jsxs)("div",{className:"px-4 pt-4",children:[(0,r.jsx)(x.A,{title:"请分配您的验证票："}),(0,r.jsx)(g.A,{currentRound:t,roundType:"verify",showCountdown:!1})]}),(0,r.jsx)(f,{currentRound:t,actionId:e,onRemainingVotesChange:function(e){N(e)}}),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4",children:[j>1n&&(0,r.jsx)(k,{currentRound:t,actionId:e,actionInfo:y,remainingVotes:j}),j>=0n&&j<=1n&&(0,r.jsx)(S,{currentRound:t,actionId:e,actionInfo:y,remainingVotes:j}),j<0n&&(0,r.jsx)(v.A,{})]}),(0,r.jsx)(o.A,{actionId:e,round:BigInt(t||0),showSubmitter:!0,onActionInfo:b})]})]})}},79056:(e,s,t)=>{"use strict";t.d(s,{r:()=>i});var n=t(84194),r=t(629),a=t(14232),l=t(1081),c=t(43387);function i(e={}){let{enabled:s=!0,onBlockNumber:t,config:d,...o}=e,x=(0,c.U)(e),u=(0,l.i)({config:x}),m=e.chainId??u;(0,a.useEffect)(()=>{if(s&&t)return function(e,s){let t,a,{syncConnectedChain:l=e._internal.syncConnectedChain,...c}=s,i=s=>{t&&t();let a=e.getClient({chainId:s});return t=(0,r.T)(a,n.q,"watchBlockNumber")(c)},d=i(s.chainId);return l&&!s.chainId&&(a=e.subscribe(({chainId:e})=>e,async e=>i(e))),()=>{d?.(),a?.()}}(x,{...o,chainId:m,onBlockNumber:t})},[m,x,s,t,o.onError,o.emitMissed,o.emitOnBegin,o.poll,o.pollingInterval,o.syncConnectedChain])}},87577:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var n=t(40854),r=t(37876),a=t(14232),l=t(48447),c=t(33276),i=t(70801),d=t(97685),o=t(20442);let x=e=>{var s=e.address,t=e.word,x=e.showCopyButton,u=e.showAddress,m=void 0===u||u,h=e.colorClassName,j=void 0===h?"":h,v=e.colorClassName2,f=void 0===v?"":v,g=(0,n._)((0,a.useState)(!1),2),N=g[0],p=g[1];return(0,r.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[t&&(0,r.jsx)("span",{className:"text-xs",children:t}),m&&!f&&(0,r.jsx)("span",{className:"text-xs ".concat(null!=j?j:"text-greyscale-500"),children:(0,o.W_)(s)}),m&&f&&(0,r.jsxs)("span",{className:"text-[0px]",children:[(0,r.jsx)("span",{className:"text-xs ".concat(null!=j?j:"text-greyscale-500"),children:"".concat(s.substring(0,6),"...")}),(0,r.jsx)("span",{className:"text-xs ".concat(f),children:"".concat(s.substring(s.length-4))})]}),(void 0===x||x)&&(0,r.jsx)(l.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?p(!0):d.Ay.error("复制失败")},children:(0,r.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:N?(0,r.jsx)(c.A,{className:"h-4 w-4 ".concat(null!=j?j:"text-greyscale-500")}):(0,r.jsx)(i.A,{className:"h-4 w-4 ".concat(null!=j?j:"text-greyscale-500")})})})]})}},92101:(e,s,t)=>{"use strict";t.d(s,{A:()=>f});var n=t(37876),r=t(14232),a=t(6960),l=t(48230),c=t.n(l),i=t(64115),d=t(52372),o=t(20451),x=t(83416),u=t(20442),m=t(43885),h=t(87577),j=t(12293),v=t(1709);let f=e=>{var s,t=e.actionId,l=e.round,f=e.showSubmitter,g=e.showVerifyHistory,N=e.onActionInfo,p=((0,r.useContext)(x.N)||{}).token,y=(0,i.Y4)(null==p?void 0:p.address,t),b=y.actionInfo,w=y.isPending,I=y.error;(0,r.useEffect)(()=>{N&&b&&N(b)},[b]);var A=(0,d.VD)(null==p?void 0:p.address,f?l:0n),C=A.actionSubmits,E=A.isPending,k=A.error,_=(null==C||null==(s=C.find(e=>e.actionId==Number(t)))?void 0:s.submitter)||"N/A",B=(0,o.g)().handleContractError;return((0,r.useEffect)(()=>{I&&B(I,"submit"),k&&B(k,"submit")},[I,k]),w)?(0,n.jsx)(j.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mx-auto p-4 pb-2 border-t border-greyscale-100",children:(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(v.A,{title:"行动详情"}),(void 0===g||g)&&(0,n.jsx)(a.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/my/actrewards/?id=".concat(t,"&symbol=").concat(null==p?void 0:p.symbol),children:"查看铸造激励 >>"})})]})}),(0,n.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==b?void 0:b.head.id.toString()]}),(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:null==b?void 0:b.body.title})]}),(0,n.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,n.jsx)(h.A,{address:null==b?void 0:b.head.author})]}),f&&(0,n.jsxs)("div",{className:"flex items-center",children:["推举人"," ",E?(0,n.jsx)(j.A,{}):(0,n.jsx)(h.A,{address:_})]})]})]}),(0,n.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(0,u.NJ)((null==b?void 0:b.body.minStake)||BigInt(0))})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最大抽取验证地址数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(null==b?void 0:b.body.maxRandomAccounts.toString())||"-"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"验证规则"}),(0,n.jsx)("p",{className:"text-greyscale-500 whitespace-pre-wrap",children:(0,n.jsx)(m.H,{text:null==b?void 0:b.body.verificationRule})})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"报名参加行动时，行动者要提供的信息"}),(null==b?void 0:b.body.verificationKeys)&&(null==b?void 0:b.body.verificationKeys.length)>0?(0,n.jsx)("ul",{className:"list-disc pl-5",children:b.body.verificationKeys.map((e,s)=>(0,n.jsxs)("li",{className:"text-greyscale-500",children:[e," : ",b.body.verificationInfoGuides[s]]},s))}):(0,n.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,n.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==b?void 0:b.body.whiteListAddress)&&"0x0000000000000000000000000000000000000000"!==b.body.whiteListAddress?(0,n.jsx)("span",{className:"flex items-center mr-2",children:(0,n.jsx)(h.A,{address:b.body.whiteListAddress})}):"无限制"})]})]})})]})}},99574:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var n=t(37876);t(14232);var r=t(7446);let a=e=>{var s=e.isLoading,t=e.text;return s?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(r.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===t?"Loading":t})]})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[3308,7657,8230,154,3096,4115,9898,636,6593,8792],()=>s(10456)),_N_E=e.O()}]);