(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9497],{20053:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/actions",function(){return n(79185)}])},34680:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return a},aY:function(){return u},eW:function(){return d},ll:function(){return c}});var r=n(85893),i=n(67294),s=n(40108);let a=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...i})});a.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...i})});l.displayName="CardHeader";let c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...i})});c.displayName="CardTitle";let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...i})});o.displayName="CardDescription";let u=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...i})});u.displayName="CardContent";let d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...i})});d.displayName="CardFooter"},4307:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},68655:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23432:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64777:function(e,t,n){"use strict";var r=n(85893);t.Z=e=>{let{title:t}=e;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:t})})}},91529:function(e,t,n){"use strict";n.d(t,{LH:function(){return a},Vu:function(){return s},bM:function(){return c},cK:function(){return u},eb:function(){return d},kP:function(){return o},vz:function(){return l}});var r=n(21803),i=n(15229);let s=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=Number(c(e));if(e<10n)return"0";if(t>=1e5)return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t);if(t>=1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(t);if(t>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(t);{if(t>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:4}).format(t);if(0===t)return"0";let e=t.toFixed(14),n=e.split(".");if(n.length<2)return e;let r=n[1],i=0;for(let e of r)if("0"===e)i++;else break;let s=r.slice(i,i+4);return"0.0{".concat(i,"}").concat(s)}},l=e=>{let t=parseInt("18",10);try{let n=e.replace(/,/g,"");return(0,r.v)(n,t)}catch(e){return console.error("parseUnits error:",e),0n}},c=e=>{let t=parseInt("18",10);return(0,i.b)(e,t)},o=e=>e.includes(".")?parseFloat(e.replace(/,/g,"")).toString():e,u=(e,t)=>e&&t?e-BigInt(t.initialStakeRound)+1n:0n,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=Number(e);if(r>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:t}).format(r);if(r>=.001)return new Intl.NumberFormat("en-US",{maximumFractionDigits:n+1}).format(r);{if(0===r)return"0";let e=r.toFixed(n+10),t=e.split(".");if(t.length<2)return e;let i=t[1],s=0;for(let e of i)if("0"===e)s++;else break;let a=i.slice(s);return"0.0{".concat(s,"}").concat(a)}}},79185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(85893),i=n(67294),s=n(87250),a=n(67068),l=n(37436),c=n(92321),o=n(39332),u=n(27245),d=n(4307),f=n(41664),m=n.n(f),x=n(45551),h=n(93778),p=n(34680),N=n(64777),g=n(42083),b=n(91529),v=e=>{let{currentRound:t}=e,{token:n}=(0,i.useContext)(h.M)||{},{address:s}=(0,c.m)();(0,o.useRouter)();let{verifyingActions:l,isPending:f,error:v}=(0,x.Pu)((null==n?void 0:n.address)||"",t,s),{handleContractError:y}=(0,a.S)();return((0,i.useEffect)(()=>{v&&y(v,"dataviewer")},[v]),!n||f)?(0,r.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,r.jsx)(g.Z,{})}):(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(N.Z,{title:"所有验证中行动"}),(0,r.jsx)(u.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,r.jsx)(m(),{href:"/gov?symbol=".concat(null==n?void 0:n.symbol),children:"返回治理首页"})})]}),!(null==l?void 0:l.length)&&(0,r.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮没有行动要验证"}),l&&l.length>0&&(0,r.jsx)("div",{className:"mt-4 space-y-4",children:null==l?void 0:l.map(e=>(0,r.jsx)(p.Zb,{className:"shadow-none",children:(0,r.jsxs)(m(),{className:"relative block",href:"/verify/".concat(e.action.head.id,"?symbol=").concat(null==n?void 0:n.symbol),children:[(0,r.jsxs)(p.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,r.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.action.head.id)}),(0,r.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.action)})]}),(0,r.jsxs)(p.aY,{className:"px-3 pt-1 pb-2",children:[(0,r.jsx)("div",{className:"text-greyscale-500",children:e.action.body.consensus}),(0,r.jsxs)("div",{className:"text-xs text-greyscale-400 mt-2 flex justify-between",children:[(0,r.jsxs)("span",{children:["总票数: ",(0,b.LH)(e.votesNum,2)]}),(0,r.jsxs)("span",{children:["已验证票数: ",(0,b.LH)(e.verificationScore,2)]}),(0,r.jsxs)("span",{children:["进度:"," ",e.votesNum>0n?"".concat(Number(100n*e.verificationScore/e.votesNum),"%"):"0%"]})]})]}),(0,r.jsx)(d.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},y=()=>{let{currentRound:e,error:t}=(0,s.Bk)(),{handleContractError:n}=(0,a.S)();return(0,i.useEffect)(()=>{t&&n(t,"verify")},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{title:"验证中的行动"}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)(v,{currentRound:e})})]})}},9008:function(e,t,n){e.exports=n(23867)},21803:function(e,t,n){"use strict";function r(e,t){let[n,r="0"]=e.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[e,i,s]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],a=Math.round(Number(`${i}.${s}`));(r=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${r}`)}n.d(t,{v:function(){return r}})}},function(e){e.O(0,[7863,3317,2888,9774,179],function(){return e(e.s=20053)}),_N_E=e.O()}]);