try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="0ed872ad-1594-4f4e-851d-5a19d8cd1860",e._sentryDebugIdIdentifier="sentry-dbid-0ed872ad-1594-4f4e-851d-5a19d8cd1860")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{36611:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dex",function(){return t(91512)}])},35810:function(e,s,t){"use strict";t.d(s,{$N:function(){return v},Be:function(){return p},Vq:function(){return u},cN:function(){return b},cZ:function(){return g},fK:function(){return h},hg:function(){return m}});var a=t(72253),n=t(14932),r=t(47702),i=t(85893),l=t(67294),o=t(12854),c=t(62190),d=t(40108),u=o.fC,m=o.xz,f=o.h_;o.x8;var x=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.aV,(0,a._)({ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},n))});x.displayName=o.aV.displayName;var g=l.forwardRef(function(e,s){var t=e.className,l=e.children,u=(0,r._)(e,["className","children"]);return(0,i.jsxs)(f,{children:[(0,i.jsx)(x,{}),(0,i.jsxs)(o.VY,(0,n._)((0,a._)({ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},u),{children:[l,(0,i.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(c.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});g.displayName=o.VY.displayName;var h=function(e){var s=e.className,t=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},t))};h.displayName="DialogHeader";var b=function(e){var s=e.className,t=(0,r._)(e,["className"]);return(0,i.jsx)("div",(0,a._)({className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};b.displayName="DialogFooter";var v=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.Dx,(0,a._)({ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t)},n))});v.displayName=o.Dx.displayName;var p=l.forwardRef(function(e,s){var t=e.className,n=(0,r._)(e,["className"]);return(0,i.jsx)(o.dk,(0,a._)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t)},n))});p.displayName=o.dk.displayName},79e3:function(e,s,t){"use strict";t.d(s,{SP:function(){return u},dr:function(){return d},mQ:function(){return c},nU:function(){return m}});var a=t(72253),n=t(47702),r=t(85893),i=t(67294),l=t(60434),o=t(40108),c=l.fC,d=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(l.aV,(0,a._)({ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},i))});d.displayName=l.aV.displayName;var u=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(l.xz,(0,a._)({ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},i))});u.displayName=l.xz.displayName;var m=i.forwardRef(function(e,s){var t=e.className,i=(0,n._)(e,["className"]);return(0,r.jsx)(l.VY,(0,a._)({ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},i))});m.displayName=l.VY.displayName},13761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var a=(0,t(31134).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},55264:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var a=(0,t(31134).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},46611:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var a=(0,t(31134).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},18311:function(e,s,t){"use strict";t.d(s,{z:function(){return m}});var a=t(11010),n=t(72253),r=t(14932),i=t(97582),l=t(67294),o=t(62776),c=t(85794),d=t(26868),u=t(77580),m=function(e){var s=e.baseToken,t=e.targetToken,m=e.account,f="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",x=(0,d.N)(s.address,(null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",!!t),g=x.pairAddress,h=x.isLoading,b=(0,o.K)({address:m,query:{enabled:!!m&&s.isNative}}),v=b.data,p=b.isLoading,y=b.refetch,N=(0,c.hS)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m),j=N.balance,w=N.isPending,k=N.refetch,_=(0,c.hS)((null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",m),I=_.balance,B=_.isPending,C=_.refetch,T=(0,c.yG)(s.isNative?"0x0000000000000000000000000000000000000000":s.address,m,f),A=T.allowance,z=T.isPending,V=(0,c.yG)((null==t?void 0:t.address)||"0x0000000000000000000000000000000000000000",m,f),E=V.allowance,S=V.isPending,Z=(0,u.bQ)(g,m),q=Z.lpBalance,D=Z.isLoading,L=Z.refetch,M=(0,u.QX)(g),P=M.reserve0,R=M.reserve1,F=M.isLoading,W=M.refetch,U=(0,u.Oc)(g),$=U.token0,H=U.isLoading,J=(0,u.$C)(g),K=J.token1,Y=J.isLoading,Q=(0,u.A5)(g),G=Q.totalSupply,O=Q.isLoading,X=Q.refetch,ee=(0,l.useMemo)(function(){if(!g||!P||!R||!$||!K||!t)return{pairExists:!1,baseReserve:BigInt(0),targetReserve:BigInt(0),baseTokenIsToken0:!1};var e=s.address.toLowerCase()===$.toLowerCase(),a=e?P:R,n=e?R:P;return{pairExists:P>BigInt(0)&&R>BigInt(0),baseReserve:a,targetReserve:n,baseTokenIsToken0:e}},[g,P,R,$,K,s.address,t]),es=(0,l.useCallback)((0,a._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Promise.all([L(),W(),X(),C()])];case 1:return e.sent(),[4,s.isNative?y():k()];case 2:return e.sent(),[3,4];case 3:return console.error("刷新流动性数据失败:",e.sent()),[3,4];case 4:return[2]}})}),[L,W,X,C,y,k,s.isNative]);return(0,r._)((0,n._)({pairAddress:g,baseBalance:s.isNative?null==v?void 0:v.value:j,targetBalance:I,baseAllowance:s.isNative?void 0:A,targetAllowance:E,lpBalance:q,lpTotalSupply:G,reserve0:P,reserve1:R,token0:$,token1:K},ee),{isLoading:h||p||w||B||z||S||D||F||H||Y||O,refreshLiquidityData:es})}},91512:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a=t(72253),n=t(91309),r=t(85893),i=t(67294),l=t(11163),o=t(67997),c=t(79e3),d=t(83494),u=t(89126),m=t(11010),f=t(14932),x=t(97582),g=t(42130),h=t(86501),b=t(63448),v=t(56312),p=t(87536),y=t(13761),N=t(46611),j=t(55264),w=t(41664),k=t.n(w),_=t(27245),I=t(21774),B=t(34680),C=t(88659),T=t(74193),A=t(35810),z=t(26858),V=t(73591),E=t(85794),S=t(301),Z=t(18311),q=t(43032),D=t(64777),L=t(42083),M=t(44576),P=function(){var e=[],s="TUSDT",t="0x47Ba4471046fC0442078CF1519924cb205F02c7a";s&&t&&e.push({symbol:s,address:t,decimals:18,isNative:!1});var a="TKM20",n="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return a&&n&&e.push({symbol:a,address:n,decimals:18,isNative:!1}),e},R=function(){var e,s,t=(0,g.m)().address,l=(0,q.Z)().token,c=(0,i.useMemo)(function(){return P()},[]),d=(0,n._)((0,i.useState)(function(){return c.find(function(e){return"TUSDT"===e.symbol})||{symbol:"TKM20",address:"0xc3Da46ED14dBd79922027031BB5D688A81139e01",decimals:18,isNative:!1}}),2),u=d[0],w=d[1],R=(0,i.useMemo)(function(){return l?{symbol:l.symbol,address:l.address,decimals:18,isNative:!1}:null},[l]),F=(0,Z.z)({baseToken:u,targetToken:R,account:t}),W=F.baseBalance,U=F.targetBalance,$=F.baseAllowance,H=F.targetAllowance,J=F.lpBalance,K=F.lpTotalSupply,Y=(F.pairAddress,F.pairExists),Q=F.baseReserve,G=F.targetReserve,O=F.isLoading,X=F.refreshLiquidityData,ee=(0,p.cI)({resolver:(0,v.F)((e=W||BigInt(0),s=U||BigInt(0),b.Ry({baseTokenAmount:b.Z_().nonempty("请输入数量").refine(function(s){if(s.endsWith(".")||"0"===s)return!0;try{var t=(0,z.vz)(s);return t>BigInt(0)&&t<=e}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),tokenAmount:b.Z_().nonempty("请输入数量").refine(function(e){if(e.endsWith(".")||"0"===e)return!0;try{var t=(0,z.vz)(e);return t>BigInt(0)&&t<=s}catch(e){return!1}},{message:"输入数量必须大于0且不超过您的可用余额"}),baseTokenAddress:b.Z_()}))),defaultValues:{baseTokenAmount:"",tokenAmount:"",baseTokenAddress:u.address},mode:"onChange"});(0,i.useEffect)(function(){ee.setValue("baseTokenAddress",u.address)},[u.address,ee]);var es=(0,n._)((0,i.useState)(!1),2),et=es[0],ea=es[1],en=(0,n._)((0,i.useState)(!1),2),er=en[0],ei=en[1],el=ee.watch("baseTokenAmount"),eo=ee.watch("tokenAmount"),ec=(0,z.vz)(el),ed=(0,z.vz)(eo);(0,i.useEffect)(function(){if(et&&ec&&ec>BigInt(0)&&Y&&Q&&G){var e=ec*G/Q,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");ee.setValue("tokenAmount",s,{shouldValidate:!0}),ea(!1),ei(!1)}else!et||Y&&Q&&G||(ee.setValue("tokenAmount","",{shouldValidate:!0}),ea(!1),ei(!1))},[et,ec,Y,Q,G,ee]),(0,i.useEffect)(function(){if(er&&ed&&ed>BigInt(0)&&Y&&Q&&G){var e=ed*Q/G,s=Number((0,z.bM)(e)).toFixed(12).replace(/\.?0+$/,"");ee.setValue("baseTokenAmount",s,{shouldValidate:!0}),ea(!1),ei(!1)}else!er||Y&&Q&&G||(ee.setValue("baseTokenAmount","",{shouldValidate:!0}),ea(!1),ei(!1))},[er,ed,Y,Q,G,ee]);var eu=(0,n._)((0,i.useState)(!1),2),em=eu[0],ef=eu[1],ex=(0,n._)((0,i.useState)(!1),2),eg=ex[0],eh=ex[1];(0,i.useEffect)(function(){ec&&void 0!==$?ef($>=ec):u.isNative?ef(!0):ef(!1)},[ec,$,u.isNative]),(0,i.useEffect)(function(){ed&&void 0!==H?eh(H>=ed):eh(!1)},[ed,H]);var eb=(0,E.yA)(u.address),ev=eb.approve,ep=eb.isPending,ey=eb.isConfirming,eN=eb.isConfirmed,ej=eb.writeError,ew=(0,E.yA)(null==R?void 0:R.address),ek=ew.approve,e_=ew.isPending,eI=ew.isConfirming,eB=ew.isConfirmed,eC=ew.writeError,eT="0xBE7A91095198ddc6356CD7751c3dECa98321FE37",eA=ee.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ev(eT,(0,z.vz)(el||"0"))];case 1:return e.sent(),[3,3];case 2:return console.error(e.sent()),[3,3];case 3:return[2]}})})),ez=ee.handleSubmit((0,m._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ek(eT,(0,z.vz)(eo||"0"))];case 1:return e.sent(),[3,3];case 2:return console.error(e.sent()),[3,3];case 3:return[2]}})}));(0,i.useEffect)(function(){eN&&(ef(!0),h.Am.success("授权".concat(u.symbol,"成功")))},[eN,u.symbol]),(0,i.useEffect)(function(){eB&&(eh(!0),h.Am.success("授权".concat(null==R?void 0:R.symbol,"成功")))},[eB,null==R?void 0:R.symbol]);var eV=(0,S.X1)(),eE=eV.addLiquidity,eS=eV.isWriting,eZ=eV.isConfirming,eq=eV.isConfirmed,eD=eV.writeError,eL=(0,S.J8)(),eM=eL.addLiquidityETH,eP=eL.isWriting,eR=eL.isConfirming,eF=eL.isConfirmed,eW=eL.writeError,eU=ee.handleSubmit((0,m._)(function(){var e,s,a,n,r,i,l;return(0,x.Jh)(this,function(o){switch(o.label){case 0:if(!em||!eg)return h.Am.error("请先完成授权"),[2];if(!R)return h.Am.error("目标代币未加载"),[2];if(e=(0,z.vz)(el||"0"),s=(0,z.vz)(eo||"0"),!e||!s||e<=BigInt(0)||s<=BigInt(0))return h.Am.error("请输入有效的数量"),[2];o.label=1;case 1:if(o.trys.push([1,6,,7]),a=BigInt(Math.floor(Date.now()/1e3)+1200),n=BigInt(Math.round(10*eQ)),r=e*(BigInt(1e3)-n)/BigInt(1e3),i=s*(BigInt(1e3)-n)/BigInt(1e3),console.log("添加流动性参数:",{baseToken:u.symbol,targetToken:R.symbol,baseAmount:e.toString(),tokenAmount:s.toString(),baseAmountMin:r.toString(),tokenAmountMin:i.toString(),slippage:eQ,deadline:a.toString()}),!u.isNative)return[3,3];return[4,eM(R.address,s,i,r,t,a,e)];case 2:return o.sent(),[3,5];case 3:return[4,eE(u.address,R.address,e,s,r,i,t,a)];case 4:o.sent(),o.label=5;case 5:return h.Am.success("添加流动性交易已提交"),[3,7];case 6:return console.error("添加流动性失败",l=o.sent()),e4(l,"liquidity"),[3,7];case 7:return[2]}})})),e$=(0,n._)((0,i.useState)(!1),2),eH=e$[0],eJ=e$[1],eK=(0,i.useMemo)(function(){return Y&&Q&&G?{baseToTarget:G*BigInt(1e18)/Q,targetToBase:Q*BigInt(1e18)/G}:null},[Y,Q,G]),eY=(0,n._)((0,i.useState)(2.5),2),eQ=eY[0],eG=eY[1],eO=(0,n._)((0,i.useState)(!1),2),eX=eO[0],e0=eO[1],e1=(0,n._)((0,i.useState)(""),2),e2=e1[0],e3=e1[1];(0,i.useEffect)(function(){if(eq||eF){h.Am.success("添加流动性成功！"),ee.reset({baseTokenAmount:"",tokenAmount:"",baseTokenAddress:u.address}),ef(!1),eh(!1),X();var e=setTimeout(function(){X()},2e3),s=setInterval(function(){X()},3e3),t=setTimeout(function(){clearInterval(s)},1e4);return function(){clearTimeout(e),clearTimeout(t),clearInterval(s)}}},[eq,eF,ee,u.address,X]);var e4=(0,V.S)().handleContractError;if((0,i.useEffect)(function(){ej&&e4(ej,"liquidity"),eC&&e4(eC,"liquidity"),eD&&e4(eD,"liquidity"),eW&&e4(eW,"liquidity")},[ej,eC,eD,eW,e4]),!l||!R||O)return(0,r.jsx)(L.Z,{});var e7=ep||e_,e5=ey||eI,e8=eS||eP,e6=eZ||eR,e9=eq||eF;return(0,r.jsxs)("div",{className:"py-6 px-2",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"底池总LP:\xa0"}),(0,r.jsx)("span",{className:"text-secondary",children:(0,z.LH)(K||BigInt(0))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"我的LP:\xa0"}),(0,r.jsxs)("span",{className:"text-secondary",children:[(0,z.LH)(J||BigInt(0)),K&&K>BigInt(0)&&J&&J>BigInt(0)&&(0,r.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",(0,z.rl)(Number(J)/Number(K)*100),")"]})]})]}),(J||BigInt(0))>BigInt(0)&&(0,r.jsx)(k(),{href:"/dex/withdraw?baseToken=".concat(encodeURIComponent(u.symbol)),className:"inline-flex items-center gap-1 text-sm text-secondary hover:text-blue-800 transition-colors underline",title:"撤出流动性",children:"撤出"})]})]}),(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)(D.Z,{title:"流动性添加"})}),(0,r.jsx)("div",{className:"w-full max-w-md md:max-w-2xl lg:max-w-4xl mx-auto",children:(0,r.jsx)(T.l0,(0,f._)((0,a._)({},ee),{children:(0,r.jsxs)("form",{children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(T.Wi,{control:ee.control,name:"baseTokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(T.xJ,{children:[(0,r.jsx)(B.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(B.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,a._)({type:"number",placeholder:"0"},s),{disabled:O,onChange:function(e){s.onChange(e),ea(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)(T.Wi,{control:ee.control,name:"baseTokenAddress",render:function(e){var s=e.field;return(0,r.jsx)(T.xJ,{children:(0,r.jsx)(T.NI,{children:(0,r.jsxs)(C.Ph,{value:s.value,onValueChange:function(e){var t=c.find(function(s){return s.address===e});t&&(s.onChange(e),w(t))},disabled:O,children:[(0,r.jsx)(C.i4,{className:"w-auto border-none bg-white hover:bg-gray-50 px-3 py-1.5 rounded-full transition-colors border border-gray-200 font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:u.symbol})})}),(0,r.jsx)(C.Bw,{children:c.map(function(e){return(0,r.jsx)(C.Ql,{value:e.address,className:"font-mono",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-mono",children:e.symbol})})},e.address)})})]})})})}})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[[25,50,75].map(function(e){return(0,r.jsxs)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){var s=(null!=W?W:BigInt(0))*BigInt(e)/BigInt(100);ee.setValue("baseTokenAmount",(0,z.bM)(s)),ea(!0)},disabled:O||(W||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:[e,"%"]},e)}),(0,r.jsx)(_.z,{variant:"outline",size:"sm",type:"button",onClick:function(){ee.setValue("baseTokenAmount",(0,z.bM)(W||BigInt(0))),ea(!0)},disabled:O||(W||BigInt(0))<=BigInt(0),className:"text-xs h-7 px-2 rounded-lg",children:"最高"})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)(W||BigInt(0))," ",u.symbol]})]})]})}),(0,r.jsx)(T.zG,{})]})}})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(T.Wi,{control:ee.control,name:"tokenAmount",render:function(e){var s=e.field;return(0,r.jsxs)(T.xJ,{children:[(0,r.jsx)(B.Zb,{className:"bg-[#f7f8f9] border-none",children:(0,r.jsxs)(B.aY,{className:"py-4 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(I.I,(0,f._)((0,a._)({type:"number",placeholder:"0"},s),{disabled:O,onChange:function(e){s.onChange(e),ei(!0)},className:"text-xl border-none p-0 h-auto bg-transparent focus:ring-0 focus:outline-none mr-2"})),(0,r.jsx)("div",{className:"bg-white px-3 py-1.5 rounded-full border border-gray-200",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 font-mono",children:R.symbol})})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,z.LH)(U||BigInt(0))," ",R.symbol]})})]})}),(0,r.jsx)(T.zG,{})]})}})}),eK&&(0,r.jsxs)("div",{className:"space-y-1 text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"当前池价格："]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-gray-600",children:eH?(0,r.jsxs)(r.Fragment,{children:["1 ",R.symbol," = ",(0,z.LH)(eK.targetToBase)," ",u.symbol]}):(0,r.jsxs)(r.Fragment,{children:["1 ",u.symbol," = ",(0,z.LH)(eK.baseToTarget)," ",R.symbol]})}),(0,r.jsx)(_.z,{type:"button",variant:"ghost",size:"sm",onClick:function(){return eJ(!eH)},className:"h-6 w-6 p-0 hover:bg-gray-100 transition-colors",title:"切换价格显示",children:(0,r.jsx)(y.Z,{className:"h-3 w-3 text-gray-500"})})]})]}),!eK&&Y&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"正在加载价格信息..."]})}),!Y&&(0,r.jsx)("div",{className:"space-y-1 text-sm mb-4",children:(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"将创建新的流动性池"]})}),(0,r.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,r.jsxs)("div",{className:"text-gray-600 flex items-center gap-1 mr-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4"}),"滑点上限：",eQ,"%"]}),(0,r.jsxs)(A.Vq,{open:eX,onOpenChange:e0,children:[(0,r.jsx)(A.hg,{asChild:!0,children:(0,r.jsxs)(_.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs hover:bg-gray-100 transition-colors",title:"设置滑点",children:[(0,r.jsx)(j.Z,{className:"h-3 w-3"}),"设置"]})}),(0,r.jsxs)(A.cZ,{className:"sm:max-w-md",children:[(0,r.jsx)(A.fK,{children:(0,r.jsx)(A.$N,{children:"滑点设置"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"选择滑点"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[.5,1,2.5].map(function(e){return(0,r.jsxs)(_.z,{type:"button",variant:eQ===e?"default":"outline",size:"sm",onClick:function(){eG(e),e3(""),e0(!1)},className:"text-xs",children:[e,"%"]},e)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"自定义滑点"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.I,{type:"number",placeholder:"输入滑点百分比",value:e2,onChange:function(e){return e3(e.target.value)},className:"flex-1",min:"0",max:"50",step:"0.1"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]}),e2&&(0,r.jsx)(_.z,{type:"button",size:"sm",onClick:function(){var e=parseFloat(e2);e>=0&&e<=50?(eG(e),e0(!1)):h.Am.error("滑点应在 0-50% 之间")},className:"w-full",children:"应用自定义滑点"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-center lg:justify-start space-x-2",children:[(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:ep||ey||em,onClick:eA,children:ep?"1.授权中...":ey?"1.确认中...":em?"1.".concat(u.symbol,"已授权"):"1.授权".concat(u.symbol)}),(0,r.jsx)(_.z,{type:"button",className:"flex-1 lg:w-auto lg:px-4",disabled:!em||e_||eI||eg,onClick:ez,children:e_?"2.授权中...":eI?"2.确认中...":eg?"2.".concat(R.symbol,"已授权"):"2.授权".concat(R.symbol)}),(0,r.jsx)(_.z,{className:"flex-1 lg:w-auto lg:px-4",onClick:eU,disabled:!em||!eg||e8||e6||e9,children:e8?"3.提交中...":e6?"3.确认中...":e9?"3.已添加":"3.提交"})]})]})}))}),(0,r.jsx)(M.Z,{isLoading:e7||e5||e8||e6,text:e7||e8?"提交交易...":e5?"确认授权...":"确认添加流动性..."})]})},F=t(15911),W=t(93778);function U(){var e=(0,l.useRouter)(),s=((0,i.useContext)(W.M)||{}).token,t=(0,n._)((0,i.useState)("swap"),2),m=t[0],f=t[1];return(0,i.useEffect)(function(){var s=e.query.tab;s&&["swap","liquidity","liquidity-query"].includes(s)&&f(s)},[e.query]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"交易中心"}),(0,r.jsx)("main",{className:"flex-grow px-3 sm:px-0",children:(0,r.jsxs)(c.mQ,{value:m,onValueChange:function(s){f(s);var t=(0,a._)({},e.query);t.tab=s,e.push({pathname:e.pathname,query:t},void 0,{shallow:!0})},className:"w-full max-w-2xl mx-auto",children:[(0,r.jsxs)(c.dr,{className:"grid w-full grid-cols-3 mt-2 min-w-0",children:[(0,r.jsx)(c.SP,{value:"swap",className:"min-w-0 truncate",children:"兑换"}),(0,r.jsx)(c.SP,{value:"liquidity",className:"min-w-0 truncate",children:"流动性管理"}),(0,r.jsx)(c.SP,{value:"liquidity-query",className:"min-w-0 truncate",children:"流动性查询"})]}),(0,r.jsxs)(c.nU,{value:"swap",children:[(0,r.jsx)(u.Z,{showCurrentToken:!!s&&!!s.hasEnded}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"费用说明："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"手续费为 0.3%，滑点上限为 0.5%"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsxs)(c.nU,{value:"liquidity",children:[(0,r.jsx)(R,{}),(0,r.jsxs)("div",{className:"bg-green-50/30 border-l-4 border-l-green-50 rounded-r-lg p-2 mb-8 text-sm mt-0 mx-2 sm:mx-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-base font-bold text-green-800 pb-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"小贴士"]}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"添加流动性："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"提供流动性，可获得交易手续费分成(手续费为 0.3%)"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"LP代币："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"添加流动性后将获得 LP 代币，代表您在流动性池中的份额"}),(0,r.jsx)("div",{className:"text-base font-bold text-green-700 pt-2 pb-1",children:"交易协议："}),(0,r.jsx)("div",{className:"text-sm text-green-700",children:"本交易功能基于 Uniswap V2 协议实现，合约代码为官方最新版本"})]})]}),(0,r.jsx)(c.nU,{value:"liquidity-query",children:(0,r.jsx)(F.Z,{})})]})})]})}},60434:function(e,s,t){"use strict";t.d(s,{VY:function(){return z},aV:function(){return T},fC:function(){return C},xz:function(){return A}});var a=t(67294),n=t(36206),r=t(25360),i=t(66681),l=t(29115),o=t(75320),c=t(78990),d=t(77342),u=t(91276),m=t(85893),f="Tabs",[x,g]=(0,r.b)(f,[i.Pc]),h=(0,i.Pc)(),[b,v]=x(f),p=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:n,defaultValue:r,orientation:i="horizontal",dir:l,activationMode:x="automatic",...g}=e,h=(0,c.gm)(l),[v,p]=(0,d.T)({prop:a,onChange:n,defaultProp:r??"",caller:f});return(0,m.jsx)(b,{scope:t,baseId:(0,u.M)(),value:v,onValueChange:p,orientation:i,dir:h,activationMode:x,children:(0,m.jsx)(o.WV.div,{dir:h,"data-orientation":i,...g,ref:s})})});p.displayName=f;var y="TabsList",N=a.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...n}=e,r=v(y,t),l=h(t);return(0,m.jsx)(i.fC,{asChild:!0,...l,orientation:r.orientation,dir:r.dir,loop:a,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:s})})});N.displayName=y;var j="TabsTrigger",w=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:r=!1,...l}=e,c=v(j,t),d=h(t),u=I(c.baseId,a),f=B(c.baseId,a),x=a===c.value;return(0,m.jsx)(i.ck,{asChild:!0,...d,focusable:!r,active:x,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...l,ref:s,onMouseDown:(0,n.Mj)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,n.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,n.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||r||!e||c.onValueChange(a)})})})});w.displayName=j;var k="TabsContent",_=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,forceMount:r,children:i,...c}=e,d=v(k,t),u=I(d.baseId,n),f=B(d.baseId,n),x=n===d.value,g=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:r||x,children:({present:t})=>(0,m.jsx)(o.WV.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:f,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&i})})});function I(e,s){return`${e}-trigger-${s}`}function B(e,s){return`${e}-content-${s}`}_.displayName=k;var C=p,T=N,A=w,z=_}},function(e){e.O(0,[8501,4463,1617,246,5771,3494,3591,6127,2180,2467,9872,195,5911,2888,9774,179],function(){return e(e.s=36611)}),_N_E=e.O()}]);