try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="0b3f2941-0455-4a68-86ab-d893286b32f6",e._sentryDebugIdIdentifier="sentry-dbid-0b3f2941-0455-4a68-86ab-d893286b32f6")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{68786:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch",function(){return n(10423)}])},53696:function(e,s,n){"use strict";n.d(s,{Z:function(){return h}});var t=n(11010),a=n(91309),r=n(97582),l=n(85893),c=n(67294),i=n(23432),d=(0,n(31134).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),o=n(42130),x=n(30246),m=n(86501),u=n(55612);function h(e){var s,n=e.tokenAddress,h=e.tokenSymbol,f=e.tokenDecimals,j=e.tokenImage,p=(0,a._)((0,c.useState)(!1),2),g=p[0],v=p[1],b=(0,o.m)().isConnected,N=(0,x.p)().data,y=(s=(0,t._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:if(!b)return alert("请先连接你的钱包"),[2];v(!0),e.label=1;case 1:if(e.trys.push([1,3,4,5]),!N)return alert("无法获取钱包客户端"),[2];return[4,N.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:h,decimals:f,image:j}}})];case 2:return e.sent()?m.ZP.success("代币已成功添加到 MetaMask 钱包"):m.ZP.error("用户拒绝添加代币"),[3,5];case 3:return e.sent(),m.ZP.error("添加代币失败，请检查控制台以获取更多信息"),[3,5];case 4:return v(!1),[7];case 5:return[2]}})}),function(){return s.apply(this,arguments)});return h.length>11||(0,u.ON)()?null:(0,l.jsx)("button",{onClick:y,disabled:g,className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:g?(0,l.jsx)(i.Z,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(d,{className:"h-4 w-4 text-greyscale-500"})})}},66247:function(e,s,n){"use strict";n.d(s,{Z:function(){return N}});var t=n(91309),a=n(85893),r=n(27245),l=n(26986),c=n(35810),i=n(74598),d=n(79995),o=n(67294),x=n(91529),m=n(37413),u=n(93778),h=n(85794),f=n(73591),j=n(42083),p=n(12796),g=n(27460),v=n(53696),b=function(e){(0,p._)(e);var s=((0,o.useContext)(u.M)||{}).token;return s?(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"mr-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-bold text-2xl mr-2 font-mono",children:s.symbol}),(0,a.jsx)(g.Z,{address:s.address}),(0,a.jsx)(v.Z,{tokenAddress:s.address,tokenSymbol:s.symbol||"",tokenDecimals:s.decimals||0})]})})}):(0,a.jsx)(j.Z,{})};function N(){var e=((0,o.useContext)(u.M)||{}).token,s=(0,h.A5)((null==e?void 0:e.address)||""),n=s.totalSupply,p=s.isPending,g=s.error,v=(0,d.Z)("(min-width: 768px)"),N=(0,t._)((0,o.useState)(!1),2),y=N[0],k=N[1],w=(0,f.S)().handleContractError;return((0,o.useEffect)(function(){g&&w(g,"token")},[g]),null==e?void 0:e.address)?(0,a.jsxs)("div",{className:"px-4 pt-0 pb-3",children:[(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 text-sm mt-4",children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",onClick:function(){return k(!0)},children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-1 text-greyscale-500 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-greyscale-500 mr-1",children:"已铸币量:"}),(0,a.jsx)("span",{className:"text-sm text-secondary font-mono",children:p?(0,a.jsx)(j.Z,{}):(0,x.LH)(n||BigInt(0))})]})]}),v&&(0,a.jsxs)(c.Vq,{open:y,onOpenChange:k,children:[(0,a.jsx)(c.hg,{children:" "}),(0,a.jsxs)(c.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(c.$N,{children:"经济模型"}),(0,a.jsxs)("div",{className:"px-12 pt-2 pb-4 text-gray-800",children:[(0,a.jsxs)("p",{className:"font-bold text-large mb-2",children:["代币总量：",(0,a.jsx)("span",{children:(0,x.LH)(BigInt(m.v.totalSupply))})]}),(0,a.jsxs)("p",{children:["- 公平发射：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.fairLaunch))})," (10%)"]}),(0,a.jsxs)("p",{children:["- 治理激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.govRewards))})," (45%)"]}),(0,a.jsxs)("p",{children:["- 行动激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.actionRewards))})," (45%)"]})]})]})]}),!v&&(0,a.jsx)(l.dy,{open:y,onOpenChange:k,children:(0,a.jsxs)(l.sc,{children:[(0,a.jsxs)(l.OX,{children:[(0,a.jsx)(l.iI,{children:"经济模型"}),(0,a.jsx)(l.uh,{})]}),(0,a.jsxs)("div",{className:"px-12 pt-2 pb-4 text-gray-800 text-lg",children:[(0,a.jsxs)("p",{className:"font-bold text-xl mb-2",children:["代币总量：",(0,a.jsx)("span",{children:(0,x.LH)(BigInt(m.v.totalSupply))})]}),(0,a.jsxs)("p",{children:["- 公平发射：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.fairLaunch))})," (10%)"]}),(0,a.jsxs)("p",{children:["- 治理激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.govRewards))})," (45%)"]}),(0,a.jsxs)("p",{children:["- 行动激励：",(0,a.jsx)("span",{className:"text-secondary",children:(0,x.LH)(BigInt(m.v.actionRewards))})," (45%)"]})]}),(0,a.jsx)(l.ze,{children:(0,a.jsx)(l.uh,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"outline",className:"w-1/2 mx-auto text-secondary border-secondary",children:"关闭"})})})]})})]}):(0,a.jsx)(j.Z,{})}},37413:function(e,s,n){"use strict";n.d(s,{v:function(){return t}});var t={totalSupply:1e28,fairLaunch:1e27,govRewards:45e26,actionRewards:45e26}},10423:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return Z}});var t=n(72253),a=n(14932),r=n(85893),l=n(67294),c=n(93778),i=n(70019),d=n(73591),o=n(83494),x=n(42083),m=n(91309),u=n(88504),h=n(37413),f=n(91529),j=n(64777),p=n(74089),g=function(e){var s=e.token,n=e.launchInfo,t=Number(n.totalContributed)/Number(n.parentTokenFundraisingGoal),a=(100*t).toFixed(1),c=(0,u.O)().data,i=(0,m._)((0,l.useState)(0),2),d=i[0],o=i[1],g=(0,m._)((0,l.useState)(0),2),v=g[0],b=g[1],N=Number("2868")||0;if((0,l.useEffect)(function(){if(c&&n&&t>=.5){var e=Number(n.secondHalfStartBlock)+Number(n.secondHalfMinBlocks)-Number(c);b(e>0?e:0)}},[c,n,t]),!n)return(0,r.jsx)("div",{className:"text-red-500",children:"找不到发射信息"});if(!s)return(0,r.jsx)(x.Z,{});var y="TKM20"==s.parentTokenSymbol?"TKM":s.parentTokenSymbol;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex-col items-center mb-2 mt-4 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(j.Z,{title:"公平发射"})}),n.hasEnded&&(0,r.jsx)("span",{className:"stat-title text-base text-red-500",children:"（已结束）"}),!n.hasEnded&&t>=.5&&v>0&&(0,r.jsxs)("span",{className:"text-greyscale-500 text-sm",children:["(","距离结束还有"," ",(0,r.jsx)(p.Z,{initialTimeLeft:v>0?Math.ceil(v*N/1e3):0,onTick:o,forceShowSeconds:!0,fontClass:"text-greyscale-600"})," )"]})]}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center p-2",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6 ",children:"申购累计筹集到"}),(0,r.jsxs)("div",{className:"stat-value",children:[(0,r.jsx)("span",{className:"text-3xl text-secondary",children:(0,f.LH)(n.totalContributed)}),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:y})]}),(0,r.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,r.jsxs)("div",{className:"stat place-items-center pb-1 pl-0",children:[(0,r.jsxs)("div",{className:"stat-title text-sm",children:[(0,r.jsx)("span",{children:y}),"筹集目标"]}),(0,r.jsx)("div",{className:"stat-value text-xl",children:(0,f.LH)(n.parentTokenFundraisingGoal)})]}),(0,r.jsxs)("div",{className:"stat place-items-center pb-1 pl-0",children:[(0,r.jsxs)("div",{className:"stat-title text-sm",children:[(0,r.jsxs)("span",{children:[s.symbol," "]}),"发射总量"]}),(0,r.jsx)("div",{className:"stat-value text-xl",children:"".concat((0,f.LH)(BigInt(h.v.fairLaunch)))})]})]}),(0,r.jsxs)("div",{className:"text-center text-xs text-greyscale-500",children:["兑换比例：1 ",y," ="," ",(0,f.eb)((0,f.kP)((Number(h.v.fairLaunch)/Number(n.parentTokenFundraisingGoal)).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})))," ",s.symbol]}),(0,r.jsxs)("div",{className:"mt-2 rounded-lg text-sm",children:[(0,r.jsx)("p",{className:"mt-2 mb-1 font-medium",children:"发射结束条件："}),(0,r.jsxs)("p",{className:"text-greyscale-600",children:["1. 累计申购达到募资目标 100%",!n.hasEnded&&"（当前 ".concat(a,"%）")]}),(0,r.jsxs)("p",{className:"text-greyscale-600",children:["2. 最后一笔申购，距离首笔达成 50%募资目标的所在区块",!n.hasEnded&&t>=.5&&(v<=0?t>=1?"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块（已满足条件，任意一笔新的申购将触发公平发射结束）"):"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块（已满足条件）"):(0,r.jsxs)(r.Fragment,{children:["（第 ",n.secondHalfStartBlock.toString(),"区块），至少",n.secondHalfMinBlocks.toString(),"个区块（还需等待 ",Math.ceil(1e3*d/N),"个区块","）"]})),!n.hasEnded&&t<.5&&"，至少".concat(n.secondHalfMinBlocks.toString(),"个区块"),n.hasEnded&&"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块")]})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 mt-4 text-sm",children:[(0,r.jsx)("p",{className:"mt-1 font-medium",children:"经济模型："}),(0,r.jsxs)("p",{children:["1. 代币总量：",(0,f.LH)(BigInt(h.v.totalSupply))]}),(0,r.jsxs)("p",{children:["2. 发射数量：",(0,f.LH)(BigInt(h.v.fairLaunch))," (10%)"]}),(0,r.jsxs)("p",{children:["3. 治理激励：",(0,f.LH)(BigInt(h.v.govRewards))," (45%)"]}),(0,r.jsxs)("p",{children:["4. 行动激励：",(0,f.LH)(BigInt(h.v.actionRewards))," (45%)"]}),(0,r.jsx)("p",{className:"mt-3 font-medium",children:"发射规则："}),(0,r.jsx)("p",{children:"1. 代币发放：按申购数量占比发放"}),(0,r.jsx)("p",{children:"2. 超过募集目标的父币，将按申购比例返还"})]})]})})},v=n(11010),b=n(97582),N=n(27245),y=n(42130),k=n(11163),w=n(41664),S=n.n(w),B=n(86501),I=n(37742),C=n(44576),T=function(e){var s,n=e.token;e.launchInfo;var t=(0,y.m)(),a=t.address,c=t.isConnected,o=(0,u.O)().data,m=(0,k.useRouter)(),h=(0,i.ap)(null==n?void 0:n.address,c?a:"0x0000000000000000000000000000000000000000"),p=h.contributed,g=h.isPending,w=h.error,T=h.refetch,E=(0,i.oz)(null==n?void 0:n.address,c?a:"0x0000000000000000000000000000000000000000"),H=E.lastContributedBlock,Z=E.isPending,L=E.error,_=(0,I.Zu)("30126"),M=H||BigInt(0),P=_-((o?BigInt(o):BigInt(0))-M),z=(0,i.Qc)(),F=z.withdraw,R=z.isPending,K=z.writeError,D=z.isConfirming,O=z.isConfirmed,A=(s=(0,v._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:return[4,F(null==n?void 0:n.address)];case 1:return e.sent(),[2]}})}),function(){return s.apply(this,arguments)});(0,l.useEffect)(function(){O&&(B.ZP.success("撤回成功"),T(),setTimeout(function(){m.push("/launch/?symbol=".concat(null==n?void 0:n.symbol))},1e3))},[O]);var G=(0,d.S)().handleContractError;if((0,l.useEffect)(function(){w&&G(w,"launch"),L&&G(L,"launch"),K&&G(K,"launch")},[w,L,K]),!n||g||Z)return(0,r.jsx)(x.Z,{});var J="TKM20"==n.parentTokenSymbol?"TKM":n.parentTokenSymbol;return(0,r.jsxs)("div",{className:"px-6",children:[(0,r.jsx)(j.Z,{title:"参与申购"}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6",children:"我的申购质押"}),(0,r.jsxs)("div",{className:"stat-value text-secondary",children:[(0,f.LH)(p||BigInt(0)),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:J})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center -mx-2",children:[p&&p>BigInt(0)&&(0,r.jsx)(N.z,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary mx-2",onClick:A,disabled:R||D||O,children:R?"提交中...":D?"确认中...":O?"已撤回":"撤回申购"}),(0,r.jsx)(N.z,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary mx-2",asChild:!0,children:(0,r.jsx)(S(),{href:"/launch/contribute?symbol=".concat(null==n?void 0:n.symbol),children:p&&p>BigInt(0)?"增加申购":"去申购"})})]}),p&&p>BigInt(0)&&P>0&&(0,r.jsx)("div",{className:"mt-4 text-sm text-greyscale-500 text-center",children:(0,r.jsxs)("div",{children:["申购后需等 ","30126"," 个区块才能撤回（还需"," ",P>0?P.toString():"0"," 区块,大约"," ",(0,f.ZC)(Number(P)*Number("2868")/1e3),"）"]})}),(0,r.jsx)("div",{className:"border-t border-gray-200 mt-6 mb-6"}),(0,r.jsx)(C.Z,{isLoading:R||D,text:R?"提交交易...":"确认交易..."})]})},E=function(e){var s,n=e.token;e.launchInfo;var t=(0,y.m)().address,a=((0,l.useContext)(c.M)||{}).clearToken,o=(0,i.ap)(null==n?void 0:n.address,t),m=o.contributed,u=o.isPending,h=o.error,p=(0,i.r0)(null==n?void 0:n.address,t),g=p.receivedTokenAmount,k=p.extraRefund,w=p.isClaimed,I=p.isPending,T=p.error,E=(0,i.z7)(),H=E.claim,Z=E.isPending,L=E.writeError,_=E.isConfirming,M=E.isConfirmed,P=(s=(0,v._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,H(null==n?void 0:n.address)];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}})}),function(){return s.apply(this,arguments)});(0,l.useEffect)(function(){M?(B.ZP.success("领取成功"),null==a||a(),setTimeout(function(){window.location.reload()},1e3)):L&&B.ZP.error("领取失败")},[M,L]);var z=(0,d.S)().handleContractError;if((0,l.useEffect)(function(){L&&z(L,"launch"),T&&z(T,"launch"),h&&z(h,"launch")},[L,T,h]),!t)return"";if(I||u||!n)return(0,r.jsx)(x.Z,{});var F="TKM20"==n.parentTokenSymbol?"TKM":n.parentTokenSymbol;return(0,r.jsxs)("div",{className:"px-4 mt-2",children:[(0,r.jsx)(j.Z,{title:"我的申购"}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6",children:"共获得"}),(0,r.jsxs)("div",{className:"stat-value text-3xl text-secondary",children:[(0,f.LH)(null!=g?g:BigInt(0)),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:n.symbol})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[0>=Number(m)||!m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.z,{className:"w-1/2",disabled:!0,children:"未申购"}),(0,r.jsx)(N.z,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(S(),{href:"/launch/burn?symbol=".concat(null==n?void 0:n.symbol),children:"换回父币"})})]}),Number(m)>0&&!w&&(0,r.jsx)(N.z,{className:"w-1/2",onClick:P,disabled:Z||_||M,children:Z?"领取中...":_?"确认中...":M?"已领取":"领取"}),Number(m)>0&&w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.z,{className:"w-1/2",disabled:!0,children:"已领取"}),(0,r.jsx)(N.z,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(S(),{href:"/launch/burn?symbol=".concat(null==n?void 0:n.symbol),children:"换回父币"})})]})]}),Number(m)>0&&w&&(0,r.jsxs)("div",{className:"text-center text-sm my-2 text-greyscale-400",children:["我共申购了 ",(0,r.jsxs)("span",{className:"text-secondary",children:[(0,f.LH)(null!=m?m:BigInt(0))," "]}),F,"，申购返还了 ",(0,r.jsx)("span",{className:"text-secondary",children:(0,f.LH)(null!=k?k:BigInt(0))})," ",n.parentTokenSymbol,"TKM20"==n.parentTokenSymbol&&(0,r.jsxs)(S(),{href:"/dex/swap?from=".concat(n.parentTokenSymbol,"&to=").concat("TKM"),className:"text-secondary ml-1",children:["（转回 ","TKM","）"]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 mx-4 mt-4 mb-6"}),(0,r.jsx)(C.Z,{isLoading:Z||_,text:Z?"提交交易...":"确认交易..."})]})},H=n(66247);function Z(){var e=(0,l.useContext)(c.M)||{token:null,setToken:null},s=e.token,n=e.setToken,m=(0,i.kF)(s?s.address:"0x0000000000000000000000000000000000000000"),u=m.launchInfo,h=m.isPending,f=m.error,j=(0,d.S)().handleContractError;return((0,l.useEffect)(function(){f&&j(f,"launch")},[f]),(0,l.useEffect)(function(){u&&s&&u.hasEnded&&!s.hasEnded&&n((0,a._)((0,t._)({},s),{hasEnded:!0}))},[u,s]),h||u)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{title:"公平发射",showBackButton:(null==u?void 0:u.hasEnded)||!1}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsx)(H.Z,{}),h||!u?(0,r.jsx)(x.Z,{}):(0,r.jsxs)(r.Fragment,{children:[s&&(u.hasEnded?(0,r.jsx)(E,{token:s,launchInfo:u}):(0,r.jsx)(T,{token:s,launchInfo:u})),(0,r.jsx)(g,{token:s,launchInfo:u})]})]})]}):(0,r.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})}}},function(e){e.O(0,[8239,3615,246,1390,3494,3591,6127,6202,7285,2888,9774,179],function(){return e(e.s=68786)}),_N_E=e.O()}]);