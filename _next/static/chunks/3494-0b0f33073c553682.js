try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="c3d611ea-33b4-4f3e-9958-c962e0834cc0",e._sentryDebugIdIdentifier="sentry-dbid-c3d611ea-33b4-4f3e-9958-c962e0834cc0")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3494],{83494:function(e,r,t){t.d(r,{Z:function(){return G}});var n=t(91309),s=t(85893),a=t(9008),o=t.n(a),i=t(67294),c=t(11163),l=t(11010),d=t(97582),u=t(39360),m=t(42130),f=t(62776),h=t(43877),x=t(17105),p=t(27245),v=t(72253),g=t(14932),w=t(47702),N=t(93133),b=t(4307),y=t(78865),j=t(70162),_=t(40108),k=N.fC,Z=N.xz;N.ZA,N.Uv,N.Tr,N.Ee,i.forwardRef(function(e,r){var t=e.className,n=e.inset,a=e.children,o=(0,w._)(e,["className","inset","children"]);return(0,s.jsxs)(N.fF,(0,g._)((0,v._)({ref:r,className:(0,_.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t)},o),{children:[a,(0,s.jsx)(b.Z,{className:"ml-auto"})]}))}).displayName=N.fF.displayName,i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)(N.tu,(0,v._)({ref:r,className:(0,_.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},n))}).displayName=N.tu.displayName;var C=i.forwardRef(function(e,r){var t=e.className,n=e.sideOffset,a=(0,w._)(e,["className","sideOffset"]);return(0,s.jsx)(N.Uv,{children:(0,s.jsx)(N.VY,(0,v._)({ref:r,sideOffset:void 0===n?4:n,className:(0,_.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},a))})});C.displayName=N.VY.displayName;var E=i.forwardRef(function(e,r){var t=e.className,n=e.inset,a=(0,w._)(e,["className","inset"]);return(0,s.jsx)(N.ck,(0,v._)({ref:r,className:(0,_.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t)},a))});E.displayName=N.ck.displayName,i.forwardRef(function(e,r){var t=e.className,n=e.children,a=e.checked,o=(0,w._)(e,["className","children","checked"]);return(0,s.jsxs)(N.oC,(0,g._)((0,v._)({ref:r,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a},o),{children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(N.wU,{children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})})}),n]}))}).displayName=N.oC.displayName,i.forwardRef(function(e,r){var t=e.className,n=e.children,a=(0,w._)(e,["className","children"]);return(0,s.jsxs)(N.Rk,(0,g._)((0,v._)({ref:r,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},a),{children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(N.wU,{children:(0,s.jsx)(j.Z,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=N.Rk.displayName,i.forwardRef(function(e,r){var t=e.className,n=e.inset,a=(0,w._)(e,["className","inset"]);return(0,s.jsx)(N.__,(0,v._)({ref:r,className:(0,_.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t)},a))}).displayName=N.__.displayName,i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)(N.Z0,(0,v._)({ref:r,className:(0,_.cn)("-mx-1 my-1 h-px bg-muted",t)},n))}).displayName=N.Z0.displayName;var P=t(93974),R=i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)(P.fC,(0,v._)({ref:r,className:(0,_.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},n))});R.displayName=P.fC.displayName,i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)(P.Ee,(0,v._)({ref:r,className:(0,_.cn)("aspect-square h-full w-full",t)},n))}).displayName=P.Ee.displayName;var z=i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)(P.NY,(0,v._)({ref:r,className:(0,_.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},n))});z.displayName=P.NY.displayName;var I=t(23432),T=t(12797),S=t(42171),U=t(18289),A=t(70775),F=t(86501),D=t(74855),L=t(45631),J=t(55612),V=t(26858);function q(){var e,r,t,a,o,c=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className,v=(0,u.x)(),g=(0,m.m)(),w=g.address,N=g.isConnected,b=g.isConnecting,j=g.isReconnecting,P=(0,f.K)({address:w,chainId:v}).data,q=(0,h.$)(),M=q.connect,O=q.connectors,Y=q.error,B=q.isPending,H=(0,x.q)().disconnect,W=(0,n._)((0,i.useState)(!1),2),K=W[0],$=W[1],G=(0,n._)((0,i.useState)(null),2),Q=G[0],X=G[1],ee=(0,n._)((0,i.useState)(!1),2),er=ee[0],et=ee[1],en=(0,n._)((0,i.useState)(!1),2),es=en[0],ea=en[1],eo=O.find(function(e){return"injected"===e.id}),ei="Thinkium Mainnet Chain 1",ec=null===(o=L.v.chains[0])||void 0===o?void 0:o.id,el=(e=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(!window.ethereum)return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.ethereum.request({method:"eth_chainId"})];case 2:return X(e=parseInt(r.sent(),16)),et(!!ec&&e!==ec),[2,e];case 3:return console.error("检测钱包网络失败:",r.sent()),[2,null];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),ed=(r=(0,l._)(function(e){var r,t,n,s,a;return(0,d.Jh)(this,function(o){switch(o.label){case 0:if(!e)return F.ZP.error("未配置目标网络"),[2,!1];o.label=1;case 1:if(o.trys.push([1,4,12,13]),ea(!0),!window.ethereum)return F.ZP.error("未找到钱包"),[2,!1];if(!L.v.chains[0])return F.ZP.error("未配置目标网络"),[2,!1];return r="0x"+e.toString(16),console.log("切换到网络:",e,r),[4,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})];case 2:return o.sent(),F.ZP.success("已连接到 ".concat(ei)),[4,el()];case 3:return o.sent(),[2,!0];case 4:if(console.log("网络切换错误:",t=o.sent()),!(4902===t.code||-32603===t.code))return[3,10];o.label=5;case 5:return o.trys.push([5,8,,9]),n=L.v.chains[0],s={chainId:"0x"+e.toString(16),chainName:ei,nativeCurrency:n.nativeCurrency,rpcUrls:n.rpcUrls.default.http,blockExplorerUrls:n.blockExplorers?[n.blockExplorers.default.url]:void 0},[4,window.ethereum.request({method:"wallet_addEthereumChain",params:[s]})];case 6:return o.sent(),F.ZP.success("已添加并连接到 ".concat(ei)),[4,el()];case 7:return o.sent(),[2,!0];case 8:return console.error("添加网络失败:",a=o.sent()),F.ZP.error("添加网络失败: ".concat(a.message||"未知错误")),[2,!1];case 9:return[3,11];case 10:if(4001===t.code)return F.ZP.error("用户取消了网络切换"),[2,!1];return F.ZP.error("网络切换失败: ".concat(t.message||"未知错误")),[2,!1];case 11:return[3,13];case 12:return ea(!1),[7];case 13:return[2]}})}),function(e){return r.apply(this,arguments)}),eu=(t=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:if(!ec)return F.ZP.error("未配置目标网络"),[2];return[4,ed(ec)];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),em=(a=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){try{if(!window.ethereum)return F.ZP.error("请安装 MetaMask 或使用支持的钱包浏览器"),[2];if(!eo)return F.ZP.error("未找到可用的钱包连接器"),[2];if(B||b)return F.ZP.error("连接请求正在处理中，请稍候"),[2];M({connector:eo})}catch(r){console.error("连接钱包失败:",r),(null==r?void 0:r.name)==="UserRejectedRequestError"?F.ZP.error("用户取消了连接请求"):(null==r?void 0:null===(e=r.message)||void 0===e?void 0:e.includes("Connector not found"))?F.ZP.error("未找到钱包，请确保已安装并解锁钱包"):F.ZP.error("连接钱包失败，请重试")}return[2]})}),function(){return a.apply(this,arguments)});i.useEffect(function(){Y&&(Y.message.includes("User rejected")?F.ZP.error("用户取消了连接请求"):Y.message.includes("already pending")?F.ZP.error("已有连接请求在处理中"):F.ZP.error("连接失败: "+Y.message))},[Y]);var ef=(0,i.useRef)(N);(0,i.useEffect)(function(){var e,r=(e=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(!(!ef.current&&N&&w)||!v)return[3,2];return e="Thinkium Mainnet Chain 1",[4,ed(v)];case 1:r.sent()||F.ZP.error("网络切换失败，请手动切换到".concat(e)),r.label=2;case 2:return[2]}})}),function(){return e.apply(this,arguments)});(0,J.ON)()||r(),ef.current=N},[N,w]),(0,i.useEffect)(function(){if(window.ethereum){var e,r,t=(e=(0,l._)(function(e){var r,t;return(0,d.Jh)(this,function(n){return console.log("钱包网络已切换:",e),X(r=parseInt(e,16)),et(t=!!ec&&r!==ec),t&&F.ZP.error("网络不匹配，请及时切换"),[2]})}),function(r){return e.apply(this,arguments)}),n=(r=(0,l._)(function(e){return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(console.log("钱包账户已切换:",e),0!==e.length)return[3,1];return X(null),et(!1),[3,3];case 1:return[4,el()];case 2:r.sent(),r.label=3;case 3:return[2]}})}),function(e){return r.apply(this,arguments)});return window.ethereum.on("chainChanged",t),window.ethereum.on("accountsChanged",n),N&&el(),function(){window.ethereum&&(window.ethereum.removeListener("chainChanged",t),window.ethereum.removeListener("accountsChanged",n))}}},[N,ec]),(0,i.useEffect)(function(){var e=setTimeout(function(){window.ethereum||console.warn("未检测到注入式钱包")},1e3);return function(){return clearTimeout(e)}},[]);var eh=b||j||B;return N&&er?(0,s.jsx)(p.z,{onClick:eu,disabled:es,className:(0,_.cn)("bg-red-500 hover:bg-red-600 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",c),children:es?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"切换网络中..."]}):(0,s.jsx)(s.Fragment,{children:"网络错误，请切换"})}):N?(0,s.jsxs)(k,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(p.z,{variant:"outline",className:(0,_.cn)("h-auto px-3 py-1.5 rounded-xl border hover:border-blue-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",c),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(R,{className:"w-8 h-8 mr-3",children:(0,s.jsx)(z,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xs font-bold",children:w?w.slice(2,4).toUpperCase():"W"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start min-w-0 mr-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-mono text-sm font-medium text-gray-900 mr-2",children:w?"".concat(w.slice(0,6),"...").concat(w.slice(-4)):""}),Q&&ec&&Q!==ec&&(0,s.jsx)("span",{className:"text-xs text-red-500 font-medium",children:"网络不匹配"})]}),(0,s.jsx)("div",{className:"flex items-center text-xs text-gray-600",children:(0,s.jsxs)("span",{className:"font-semibold",children:[P?(0,V.LH)(P.value):"0"," ",(null==P?void 0:P.symbol)||"ETH"]})})]}),(0,s.jsx)(S.Z,{className:"w-4 h-4 text-gray-500"})]})})}),(0,s.jsxs)(C,{align:"end",className:"w-64 p-2 rounded-xl shadow-xl border",children:[(0,s.jsxs)("div",{className:"px-3 py-2 mb-2 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"钱包地址"}),w&&(0,s.jsx)(D.CopyToClipboard,{text:w,onCopy:function(e,r){r?($(!0),F.ZP.success("地址已复制到剪贴板"),setTimeout(function(){return $(!1)},2e3)):F.ZP.error("复制失败")},children:(0,s.jsx)(p.z,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"w-3 h-3 mr-1"}),"已复制"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{className:"w-3 h-3 mr-1"}),"复制"]})})})]}),(0,s.jsx)("p",{className:"font-mono text-xs text-gray-600 mt-1 break-all",children:w})]}),(0,s.jsxs)(E,{onClick:function(){try{H()}catch(e){console.error("断开连接失败:",e),F.ZP.error("断开连接失败")}},className:"rounded-lg text-red-600 focus:text-red-600 focus:bg-red-50",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-3"}),"断开连接"]})]})]}):(0,s.jsx)(p.z,{onClick:em,disabled:eh,className:(0,_.cn)("bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",c),children:eh?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"连接中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 mr-2"}),"连接钱包"]})})}var M=t(68655),O=(0,t(12003).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Y=i.forwardRef(function(e,r){var t=e.className,n=e.variant,a=(0,w._)(e,["className","variant"]);return(0,s.jsx)("div",(0,v._)({ref:r,role:"alert",className:(0,_.cn)(O({variant:n}),t)},a))});Y.displayName="Alert";var B=i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)("h5",(0,v._)({ref:r,className:(0,_.cn)("mb-1 font-medium leading-none tracking-tight",t)},n))});B.displayName="AlertTitle";var H=i.forwardRef(function(e,r){var t=e.className,n=(0,w._)(e,["className"]);return(0,s.jsx)("div",(0,v._)({ref:r,className:(0,_.cn)("text-sm [&_p]:leading-relaxed",t)},n))});H.displayName="AlertDescription";var W=t(95049),K=function(){var e=(0,W.V)(),r=e.error,t=e.setError,a=(0,n._)((0,i.useState)(!1),2),o=a[0],c=a[1];return((0,i.useEffect)(function(){r&&c(!0)},[r,t]),o&&r)?(0,s.jsxs)(Y,{variant:"destructive",children:[(0,s.jsx)(M.Z,{className:"h-4 w-4"}),(0,s.jsx)(B,{className:"break-words break-all whitespace-normal",children:r.name}),(0,s.jsx)(H,{className:"break-words break-all whitespace-pre-wrap",children:r.message})]}):null},$=t(93778),G=function(e){var r=e.title,t=e.showBackButton,a=e.backUrl,l=void 0===a?"":a,d=(0,m.m)(),f=d.address,h=d.status,x=(0,u.x)(),v="Thinkium Mainnet Chain 1",g=(0,W.V)().setError,w=((0,i.useContext)($.M)||{}).token,N=(0,c.useRouter)(),b=(0,n._)((0,i.useState)(0),2),y=b[0],j=b[1],_=(0,n._)((0,i.useState)(!1),2),k=_[0],Z=_[1];(0,i.useEffect)(function(){localStorage.getItem("networkAutoRefreshed")&&localStorage.removeItem("networkAutoRefreshed");var e=function(e){if(console.error("handleError:",e),e&&e.message&&(e.message.includes("f is not a function")||e.message.includes("User rejected")&&e.message.includes("Details:"))){var r=Date.now();r-y>3e4&&!k&&(j(r),Z(!0),setTimeout(function(){localStorage.setItem("networkAutoRefreshed","true"),window.location.reload()},2e3))}};window.addEventListener("error",function(r){r.error&&"object"==typeof r.error&&e(r.error)});var r=window.onerror;return window.onerror=function(t,n,s,a,o){return e(o),!!r&&r(t,n,s,a,o)},window.addEventListener("unhandledrejection",function(r){console.log("unhandledrejection:",r),e(r.reason)}),function(){window.onerror=r,window.removeEventListener("unhandledrejection",function(r){e(r.reason)})}},[y,k]),(0,i.useEffect)(function(){"connected"===h&&(f&&!x?g({name:"钱包网络错误",message:"请切换到 ".concat(v," 网络")}):g(null))},[f,x,h,v,g]);var C=w&&w.symbol?w.symbol:"LOVE20",E=w&&w.symbol?"".concat(r," - ").concat(w.symbol):r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:C}),(0,s.jsx)("meta",{name:E,content:"A Web3 DApp for LOVE20 token management"})]}),(0,s.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,s.jsx)("div",{className:"flex items-center",children:(void 0!==t&&t||""!==l)&&(0,s.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){l?N.push(l):N.back()},className:"flex items-center space-x-2 px-3 py-1 text-gray-500 border-gray-200 hover:bg-gray-50 hover:text-gray-900",title:"返回上一页",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:"<\xa0返回"})})}),(0,s.jsx)(q,{})]}),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsx)(K,{})})]})}}}]);