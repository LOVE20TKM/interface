"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4115],{64115:(e,t,n)=>{n.d(t,{Y4:()=>b,vC:()=>f,F6:()=>A,of:()=>g,SU:()=>v});var i=n(16927),a=n(40854),s=n(4902),r=n(14232),u=n(75569),p=n(40162),y=n(1160),d=n(99090),o=[{type:"constructor",inputs:[{name:"originBlocks",type:"uint256",internalType:"uint256"},{name:"phaseBlocks",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"MAX_VERIFICATION_KEY_LENGTH",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"SUBMIT_MIN_PER_THOUSAND",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"actionInfo",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct ActionInfo",components:[{name:"head",type:"tuple",internalType:"struct ActionHead",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"author",type:"address",internalType:"address"},{name:"createAtBlock",type:"uint256",internalType:"uint256"}]},{name:"body",type:"tuple",internalType:"struct ActionBody",components:[{name:"minStake",type:"uint256",internalType:"uint256"},{name:"maxRandomAccounts",type:"uint256",internalType:"uint256"},{name:"whiteListAddress",type:"address",internalType:"address"},{name:"title",type:"string",internalType:"string"},{name:"verificationRule",type:"string",internalType:"string"},{name:"verificationKeys",type:"string[]",internalType:"string[]"},{name:"verificationInfoGuides",type:"string[]",internalType:"string[]"}]}]}],stateMutability:"view"},{type:"function",name:"actionSubmitsAtIndex",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"},{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct ActionSubmitInfo",components:[{name:"submitter",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"actionSubmitsCount",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"actionsAtIndex",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct ActionInfo",components:[{name:"head",type:"tuple",internalType:"struct ActionHead",components:[{name:"id",type:"uint256",internalType:"uint256"},{name:"author",type:"address",internalType:"address"},{name:"createAtBlock",type:"uint256",internalType:"uint256"}]},{name:"body",type:"tuple",internalType:"struct ActionBody",components:[{name:"minStake",type:"uint256",internalType:"uint256"},{name:"maxRandomAccounts",type:"uint256",internalType:"uint256"},{name:"whiteListAddress",type:"address",internalType:"address"},{name:"title",type:"string",internalType:"string"},{name:"verificationRule",type:"string",internalType:"string"},{name:"verificationKeys",type:"string[]",internalType:"string[]"},{name:"verificationInfoGuides",type:"string[]",internalType:"string[]"}]}]}],stateMutability:"view"},{type:"function",name:"actionsCount",inputs:[{name:"tokenAddress",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"authorActionIdsAtIndex",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"author",type:"address",internalType:"address"},{name:"index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"authorActionIdsCount",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"author",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"canJoin",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"},{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"canSubmit",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"currentRound",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"stakeAddress_",type:"address",internalType:"address"},{name:"submitMinPerThousand",type:"uint256",internalType:"uint256"},{name:"maxVerificationKeyLength",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initialized",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isSubmitted",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"},{name:"actionId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"originBlocks",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"phaseBlocks",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"roundByBlockNumber",inputs:[{name:"blockNumber",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"stakeAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"submit",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"submitInfo",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"},{name:"actionId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"tuple",internalType:"struct ActionSubmitInfo",components:[{name:"submitter",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"submitInfoBySubmitter",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"},{name:"submitter",type:"address",internalType:"address"}],outputs:[{name:"",type:"tuple",internalType:"struct ActionSubmitInfo",components:[{name:"submitter",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"submitNewAction",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionBody",type:"tuple",internalType:"struct ActionBody",components:[{name:"minStake",type:"uint256",internalType:"uint256"},{name:"maxRandomAccounts",type:"uint256",internalType:"uint256"},{name:"whiteListAddress",type:"address",internalType:"address"},{name:"title",type:"string",internalType:"string"},{name:"verificationRule",type:"string",internalType:"string"},{name:"verificationKeys",type:"string[]",internalType:"string[]"},{name:"verificationInfoGuides",type:"string[]",internalType:"string[]"}]}],outputs:[{name:"actionId",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"event",name:"ActionCreate",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"round",type:"uint256",indexed:!1,internalType:"uint256"},{name:"author",type:"address",indexed:!0,internalType:"address"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"actionBody",type:"tuple",indexed:!1,internalType:"struct ActionBody",components:[{name:"minStake",type:"uint256",internalType:"uint256"},{name:"maxRandomAccounts",type:"uint256",internalType:"uint256"},{name:"whiteListAddress",type:"address",internalType:"address"},{name:"title",type:"string",internalType:"string"},{name:"verificationRule",type:"string",internalType:"string"},{name:"verificationKeys",type:"string[]",internalType:"string[]"},{name:"verificationInfoGuides",type:"string[]",internalType:"string[]"}]}],anonymous:!1},{type:"event",name:"ActionSubmit",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"round",type:"uint256",indexed:!1,internalType:"uint256"},{name:"submitter",type:"address",indexed:!0,internalType:"address"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ActionIdNotExist",inputs:[]},{type:"error",name:"AlreadyInitialized",inputs:[]},{type:"error",name:"AlreadySubmitted",inputs:[]},{type:"error",name:"CannotSubmitAction",inputs:[]},{type:"error",name:"MaxRandomAccountsZero",inputs:[]},{type:"error",name:"MinStakeZero",inputs:[]},{type:"error",name:"OnlyOneSubmitPerRound",inputs:[]},{type:"error",name:"RoundNotStarted",inputs:[]},{type:"error",name:"TitleEmpty",inputs:[]},{type:"error",name:"VerificationKeyLengthExceeded",inputs:[]},{type:"error",name:"VerificationRuleEmpty",inputs:[]}],m=n(65575),l=n(92165),c=n(38967),T="0x5a9042b5544B8f997e3F95D73928a3cAb2144203",b=(e,t)=>{var n=(0,u.Q)({address:T,abi:o,functionName:"actionInfo",args:[e,t||0n],query:{enabled:!!e&&void 0!==t}}),i=n.data;return{actionInfo:i,isPending:n.isPending,error:n.error}},f=()=>{var e=(0,u.Q)({address:T,abi:o,functionName:"currentRound",args:[]}),t=e.data,n=e.isPending,i=e.error;return{currentRound:(0,m.oQ)(t),isPending:n,error:i}},A=(e,t,n)=>{var i=(0,u.Q)({address:T,abi:o,functionName:"isSubmitted",args:[e,t,n]}),a=i.data;return{isSubmitted:a,isPending:i.isPending,error:i.error}};function g(){var e,t=(0,c.VR)(o,T,"submit"),n=t.execute,a=t.isPending,u=t.isConfirming,p=t.isConfirmed,y=t.error,d=t.hash,m=t.isTukeMode,b=(e=(0,i._)(function(e,t){return(0,s.YH)(this,function(i){switch(i.label){case 0:return console.log("提交submit交易:",{tokenAddress:e,actionId:t,isTukeMode:m}),[4,n([e,t])];case 1:return[2,i.sent()]}})}),function(t,n){return e.apply(this,arguments)});return(0,r.useEffect)(()=>{d&&console.log("submit tx hash:",d),y&&(console.log("提交submit交易错误:"),(0,l.YN)(y),(0,l.vV)(y)),p&&console.log("submit tx confirmed")},[d,y,p]),{submit:b,isPending:a,isConfirming:u,writeError:y,isConfirmed:p,hash:d,isTukeMode:m}}function v(){var e,t=(0,a._)((0,r.useState)(!1),2),n=t[0],u=t[1],m=(0,a._)((0,r.useState)(null),2),l=m[0],c=m[1],b=(0,a._)((0,r.useState)(),2),f=b[0],A=b[1],g=(e=(0,i._)(function(e,t){var n;return(0,s.YH)(this,function(i){switch(i.label){case 0:u(!0),c(null),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,y.E)(d.$,{address:T,abi:o,functionName:"submitNewAction",args:[e,t]})];case 2:return A(n=i.sent()),[2,n];case 3:return c(i.sent()),[3,5];case 4:return u(!1),[7];case 5:return[2]}})}),function(t,n){return e.apply(this,arguments)}),v=(0,p.g)({hash:f}),I=v.isLoading,k=v.isSuccess,h=v.error;return{submitNewAction:g,isPending:n,isConfirming:I,writeError:null!=l?l:h,isConfirmed:k}}}}]);