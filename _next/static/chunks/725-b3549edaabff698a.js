try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0bf5a941-331c-4cbc-b161-8cf29035432b",e._sentryDebugIdIdentifier="sentry-dbid-0bf5a941-331c-4cbc-b161-8cf29035432b")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{20725:function(e,n,t){var r=t(85893),s=t(67294),i=t(93566),a=t(73591),c=t(93778),l=t(91529),o=t(72107),d=t(31084),u=t(44746),f=t(27460),m=t(42083);n.Z=function(e){var n=e.actionId,t=e.round,x=e.showSubmitter,h=(e.showVerifyHistory,e.onActionInfo),g=((0,s.useContext)(c.M)||{}).token,p=(0,i.dI)(null==g?void 0:g.address,n),b=p.actionInfo,v=p.isPending,j=p.error;(0,s.useEffect)(function(){h&&b&&h(b)},[b]);var N=(0,i.sK)(null==g?void 0:g.address,x?t:BigInt(0),n),y=N.submitInfo,w=N.isPending,k=N.error,I=(null==y?void 0:y.submitter)||"N/A",L=(0,a.S)().handleContractError;return((0,s.useEffect)(function(){j&&L(j,"submit"),k&&L(k,"submit")},[j,k]),v)?(0,r.jsx)(m.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==b?void 0:b.head.id.toString()]}),(0,r.jsx)("span",{className:"text-xl font-bold text-black",children:null==b?void 0:b.body.title})]}),(0,r.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,r.jsx)(f.Z,{address:null==b?void 0:b.head.author})]}),x&&(0,r.jsxs)("div",{className:"flex items-center",children:["推举人"," ",w?(0,r.jsx)(m.Z,{}):(0,r.jsx)(f.Z,{address:I})]})]})]}),(0,r.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,r.jsx)("p",{className:"text-greyscale-500",children:(0,l.LH)((null==b?void 0:b.body.minStake)||BigInt(0))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"最大激励地址数"}),(0,r.jsx)(u.Z,{title:"最大激励地址数说明",content:(0,r.jsxs)("p",{className:"leading-relaxed text-base",children:["每轮从所有参与行动的代币中，随机抽取",(0,r.jsx)("span",{className:"font-mono font-bold text-blue-600 mx-1 text-base",children:null==b?void 0:b.body.maxRandomAccounts.toString()}),"份代币，返回对应地址。若多份代币对应相同地址，则会合并为一个地址。"]})})]}),(0,r.jsx)("p",{className:"text-greyscale-500",children:(null==b?void 0:b.body.maxRandomAccounts.toString())||"-"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold mb-2",children:"验证规则"}),(0,r.jsx)("div",{className:"text-greyscale-500",children:(0,r.jsx)(o.L,{text:null==b?void 0:b.body.verificationRule,preserveLineBreaks:!0})})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold mb-2",children:"报名参加行动时，行动者要提供的信息"}),(null==b?void 0:b.body.verificationKeys)&&(null==b?void 0:b.body.verificationKeys.length)>0?(0,r.jsx)("ul",{className:"list-disc pl-5",children:b.body.verificationKeys.map(function(e,n){return(0,r.jsxs)("li",{className:"text-greyscale-500",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-greyscale-900 mb-1",children:[(0,r.jsx)(d.Z,{text:e,showWarning:!0})," :"]}),(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{text:b.body.verificationInfoGuides[n],showWarning:!0,preserveLineBreaks:!0})})]},n)})}):(0,r.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,r.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==b?void 0:b.body.whiteListAddress)&&"0x0000000000000000000000000000000000000000"!==b.body.whiteListAddress?(0,r.jsx)("span",{className:"flex items-center mr-2",children:(0,r.jsx)(f.Z,{address:b.body.whiteListAddress})}):"无限制"})]})]})})]})}},44746:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(72253),s=t(14932),i=t(91309),a=t(85893),c=t(67294),l=t(74598),o=t(35810),d=t(26986),u=t(79995);function f(e){var n=e.title,t=e.content,f=e.className,m=void 0===f?"":f,x=(0,i._)((0,c.useState)(!1),2),h=x[0],g=x[1],p=(0,u.Z)("(min-width: 768px)"),b=c.forwardRef(function(e,t){return(0,a.jsx)("button",(0,s._)((0,r._)({ref:t,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(m),"aria-label":"查看".concat(n)},e),{children:(0,a.jsx)(l.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});b.displayName="TriggerButton";var v=function(){return(0,a.jsx)("div",{className:"text-gray-700",children:"string"==typeof t?(0,a.jsx)("p",{className:"leading-relaxed text-sm",children:t}):t})};return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsxs)(o.Vq,{open:h,onOpenChange:g,children:[(0,a.jsx)(o.hg,{asChild:!0,children:(0,a.jsx)(b,{})}),(0,a.jsxs)(o.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(o.$N,{className:"text-lg font-semibold",children:n}),(0,a.jsx)("div",{className:"pt-2 pb-4",children:(0,a.jsx)(v,{})})]})]}),!p&&(0,a.jsxs)(d.dy,{open:h,onOpenChange:g,children:[(0,a.jsx)(d.Qz,{asChild:!0,children:(0,a.jsx)(b,{})}),(0,a.jsxs)(d.sc,{className:"pb-safe",children:[(0,a.jsx)(d.OX,{children:(0,a.jsx)(d.iI,{className:"text-lg font-semibold",children:n})}),(0,a.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,a.jsx)(v,{})})]})]})]})}},42083:function(e,n,t){var r=t(85893),s=t(23432);n.Z=function(){return(0,r.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},31084:function(e,n,t){var r=t(85893);t(67294);var s=t(45655);n.Z=function(e){var n=e.text,t=e.className,i=e.maxLength,a=e.showWarning,c=e.preserveLineBreaks;if(!n)return null;var l=n;i&&n.length>i&&(l=n.substring(0,i)+"...");var o=(0,s.KL)(l,void 0!==c&&c),d=n!==l||/<[^>]*>/g.test(n)||/script|javascript|onclick|onerror|onload/gi.test(n);return(0,r.jsxs)("span",{className:void 0===t?"":t,children:[(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:o}}),void 0!==a&&a&&d&&(0,r.jsx)("span",{className:"text-yellow-500 text-xs ml-1",children:"⚠️ 内容已被安全过滤"})]})}},93566:function(e,n,t){t.d(n,{$A:function(){return x},Bk:function(){return m},Xo:function(){return p},dI:function(){return f},qd:function(){return g},sK:function(){return h}});var r=t(11010),s=t(97582),i=t(67294),a=t(71104),c=t(7724),l=t(37742),o=t(84689),d=t(37474),u="0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",f=function(e,n){var t=(0,a.u)({address:u,abi:c.d,functionName:"actionInfo",args:[e,n||BigInt(0)],query:{enabled:!!e&&void 0!==n}});return{actionInfo:t.data,isPending:t.isPending,error:t.error}},m=function(){var e=(0,a.u)({address:u,abi:c.d,functionName:"currentRound",args:[]}),n=e.data,t=e.isPending,r=e.error;return{currentRound:(0,l.Zu)(n),isPending:t,error:r}},x=function(e,n,t){var r=(0,a.u)({address:u,abi:c.d,functionName:"isSubmitted",args:[e,n,t]});return{isSubmitted:r.data,isPending:r.isPending,error:r.error}},h=function(e,n,t){var r=(0,a.u)({address:u,abi:c.d,functionName:"submitInfo",args:[e,n,t],query:{enabled:!!e&&!!n}});return{submitInfo:r.data,isPending:r.isPending,error:r.error}};function g(){var e,n=(0,d.e9)(c.d,u,"submit"),t=n.execute,a=n.isPending,l=n.isConfirming,f=n.isConfirmed,m=n.error,x=n.hash,h=n.isTukeMode,g=(e=(0,r._)(function(e,n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,t([e,n])];case 1:return[2,r.sent()]}})}),function(n,t){return e.apply(this,arguments)});return(0,i.useEffect)(function(){m&&((0,o.Vh)(m),(0,o.H)(m))},[x,m,f]),{submit:g,isPending:a,isConfirming:l,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}function p(){var e,n=(0,d.e9)(c.d,u,"submitNewAction"),t=n.execute,a=n.isPending,l=n.isConfirming,f=n.isConfirmed,m=n.error,x=n.hash,h=n.isTukeMode,g=(e=(0,r._)(function(e,n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,t([e,n])];case 1:return[2,r.sent()]}})}),function(n,t){return e.apply(this,arguments)});return(0,i.useEffect)(function(){m&&((0,o.Vh)(m),(0,o.H)(m))},[x,m,f]),{submitNewAction:g,isPending:a,isConfirming:l,writeError:m,isConfirmed:f,hash:x,isTukeMode:h}}},45655:function(e,n,t){t.d(n,{Hg:function(){return l},KL:function(){return a},lt:function(){return c},rJ:function(){return o}});var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};function s(e){return e?e.replace(/[&<>"'/]/g,function(e){return r[e]||e}):""}function i(e){if(!e)return"";var n=e.replace(/<[^>]*>/g,"");return s(n=(n=(n=n.replace(/javascript:/gi,"")).replace(/on\w+\s*=/gi,"")).replace(/data:[^;]*;base64,/gi,""))}function a(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var t=/(https?:\/\/[^\s]+)/g;if(0===(e.match(t)||[]).length){var r=s(e);return n?r.replace(/\n/g,"<br>"):r}var i=e;return i=(i=(i=(i=i.replace(/<script[^>]*>.*?<\/script>/gi,"")).replace(/<[^>]*on\w+\s*=\s*[^>]*>/gi,"")).replace(/javascript:/gi,"")).split(t).map(function(e,n){return n%2==0?function(e){if(!e)return"";var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,function(e){return n[e]||e})}(e):c(e)?e:s(e)}).join(""),n&&(i=i.replace(/\n/g,"<br>")),i}function c(e){if(!e)return!1;try{var n=new URL(e);if(!["https:","http:"].includes(n.protocol))return!1;var t=n.hostname.toLowerCase(),r=e.toLowerCase();if(r.includes("javascript:")||r.includes("data:")||r.includes("vbscript:")||r.includes("file:")||["phishing-site.com","fake-bank.com","malware-host.net"].some(function(e){return t===e||t.endsWith("."+e)})||["phishing","malware","trojan","keylogger","ransomware","exploit-kit"].some(function(e){return t.includes(e)})||/[\u0000-\u001f\u007f-\u009f]/.test(t)||!/^[a-zA-Z0-9.-]+$/.test(t))return!1;return/^\d+\.\d+\.\d+\.\d+$/.test(t),!0}catch(e){return!1}}function l(e){var n=[],t=e;if(!e||""===e.trim())return{isValid:!1,errors:["验证规则不能为空"],sanitizedRule:""};e.length>1e4&&n.push("验证规则不能超过10000字"),/<(?:script|iframe|object|embed|form|input|meta|link|style)[^>]*>/gi.test(e)&&(n.push("验证规则不能包含危险的HTML标签"),t=i(e)),RegExp("(?<!https?:\\/\\/[^\\s]*)(javascript:|onclick\\s*=|onerror\\s*=|onload\\s*=|<script)","gi").test(e)&&(n.push("验证规则不能包含可执行脚本代码"),t=i(e));var r=e.match(/(https?:\/\/[^\s]+)/g)||[];if(r.length>0){var s=r.filter(function(e){return!c(e)});s.length>0&&n.push("包含危险的链接，已被安全过滤器拦截: ".concat(s.join(", ")))}return{isValid:0===n.length,errors:n,sanitizedRule:t}}function o(e){var n=[];if(!e||""===e.trim())return{isValid:!1,errors:["验证名称不能为空"],sanitizedKey:""};var t=i(e);return t!==e&&n.push("验证名称包含不安全的内容"),{isValid:0===n.length,errors:n,sanitizedKey:t}}},72107:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(85893);t(67294);var s=t(1938),i=t(45655),a=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;var t=/(https?:\/\/[^\s]+)/g;if(!t.test(e)){var a=(0,i.KL)(e,n);return(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})}var c=e.split(t),l=e.match(t)||[];return(0,r.jsx)(r.Fragment,{children:c.map(function(e,t){if(t%2==0){var a=(0,i.KL)(e,n);return(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:a}},t)}var c=l[(t-1)/2];return(0,i.lt)(c)?(0,r.jsx)("a",{href:c,onClick:function(e){return(e.preventDefault(),e.stopPropagation(),(0,i.lt)(c))?s.N.handleExternalLink(c):alert("链接安全检查失败: ".concat(c.substring(0,50),"...")),!1},className:"text-blue-500 underline hover:text-blue-700 break-words break-all whitespace-normal",title:"外部链接: ".concat(c),rel:"noopener noreferrer",target:"_self",children:c.length>32?"".concat(c.substring(0,29),"..."):c},t):(0,r.jsx)("span",{className:"text-red-500 font-semibold",children:"[危险链接已被拦截]"},t)})})},c=function(e){var n=e.text,t=e.preserveLineBreaks;return(0,r.jsx)(r.Fragment,{children:a(n,void 0!==t&&t)})}}}]);