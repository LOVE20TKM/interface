"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1276],{42038:(e,s,r)=>{r.d(s,{C:()=>a});var t=r(97685),a=e=>!!e||(t.oR.error("请先将钱包链接 ".concat("thinkium70001")),!1)},51276:(e,s,r)=>{r.r(s),r.d(s,{default:()=>E});var t=r(16927),a=r(3576),n=r(62701),o=r(4902),l=r(37876),i=r(14232),c=r(89099),d=r(60513),m=r(13810),u=r(88992),f=r(8047),x=r(57238),v=r(6960),h=r(77932),p=r(92659),y=r(97685),b=r(48230),j=r.n(b),N=r(42038),g=r(20442),w=r(80693),_=r(9215),C=r(20451),k=r(25239),F=r(83416),I=r(1709),R=r(12293),T=r(99574),A=e=>d.z.object({depositAmount:d.z.string().nonempty("请输入兑换数量").refine(s=>{try{var r=(0,g.XS)(s);return r>0n&&r<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})});let E=()=>{var e=(0,c.useRouter)(),s=(0,f.F)(),r=s.address,d=s.chain,b=((0,i.useContext)(F.N)||{}).token,E=(0,x.A)({address:r}),M=E.data,S=E.error,D=E.isLoading,z=(0,_.lW)("0xDe2929C78Ebb5aa9eFA2032C9DD732f9F3C73F71",r),K=(z.balance,z.isPending),L=z.error,J=(0,w.qX)(),P=J.deposit,V=J.isPending,X=J.isConfirming,W=J.isConfirmed,$=J.writeError,q=(0,u.mN)({resolver:(0,m.u)(A((null==M?void 0:M.value)||0n)),defaultValues:{depositAmount:""},mode:"onChange"});function B(){return(B=(0,t._)(function(e){return(0,o.YH)(this,function(s){switch(s.label){case 0:if(!(0,N.C)(d))return y.oR.error("请切换到正确的网络"),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,P((0,g.XS)(e.depositAmount))];case 2:return s.sent(),[3,4];case 3:return console.error(s.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}var H=(0,k.q)().setError;(0,i.useEffect)(()=>{W&&(y.oR.success("兑换成功"),H(null),setTimeout(()=>{b&&!b.hasEnded?"TestTKM20"===b.parentTokenSymbol?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(b.symbol):e.back():b&&!b.initialStakeRound?window.location.href="".concat("/interface","/gov/stakelp/?symbol=").concat(b.symbol,"&first=true"):e.back()},2e3))},[W,e]);var O=()=>{q.setValue("depositAmount",(0,g.Js)((null==M?void 0:M.value)||0n))},Y=(0,C.g)().handleContractError;return((0,i.useEffect)(()=>{S&&Y(S,"token"),L&&Y(L,"token"),$&&Y($,"token")},[S,L,$,Y]),D||K)?(0,l.jsx)(R.A,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"p-6 pt-0",children:[(0,l.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,l.jsx)(I.A,{title:"存入".concat(null==M?void 0:M.symbol," 换取 ").concat("TestTKM20")}),(0,l.jsx)(v.$,{variant:"link",className:"text-secondary border-secondary m-0 p-0",asChild:!0,children:(0,l.jsxs)(j(),{href:"/dex/withdraw?symbol=".concat(null==b?void 0:b.symbol),children:["提现 ",null==M?void 0:M.symbol]})})]}),(0,l.jsx)(p.lV,(0,n._)((0,a._)({},q),{children:(0,l.jsxs)("form",{onSubmit:q.handleSubmit(function(e){return B.apply(this,arguments)}),className:"space-y-4",children:[(0,l.jsx)(p.zB,{control:q.control,name:"depositAmount",render:e=>{var s,r=e.field;return(0,l.jsxs)(p.eI,{children:[(0,l.jsx)(p.lR,{children:"存入数量："}),(0,l.jsx)(p.MJ,{children:(0,l.jsx)(h.p,(0,a._)({placeholder:"填写 ".concat(null!=(s=null==M?void 0:M.symbol)?s:""," 数量"),type:"number",disabled:V||X,className:"!ring-secondary-foreground"},r))}),(0,l.jsx)(p.C5,{}),(0,l.jsxs)(p.Rr,{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{children:["共 ",D?(0,l.jsx)(R.A,{}):(0,g.NJ)((null==M?void 0:M.value)||0n)," ",null==M?void 0:M.symbol]}),(0,l.jsx)(v.$,{type:"button",variant:"link",size:"sm",onClick:O,className:"text-secondary p-0 ml-2",disabled:D||V||X,children:"全部"})]})]})}}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(v.$,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:V||X||W,children:V?"存入中...":X?"确认中...":W?"存入成功":"存入"})}),(0,l.jsx)("div",{className:"flex justify-center mb-2",children:(0,l.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ","TestTKM20"," = 1 ",null==M?void 0:M.symbol]})})]})}))]}),(0,l.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:[(0,l.jsx)("p",{className:"mb-1",children:"说明："}),(0,l.jsxs)("p",{children:["1. ","TestTKM20"," 是用 WETH9 协议，将 ",null==M?void 0:M.symbol," 包装的符合 ERC20 协议的代币"]}),(0,l.jsxs)("p",{children:["2. 存入的 ",null==M?void 0:M.symbol," 会被协议锁定，随时可以通过提现功能，将"," ","TestTKM20"," 转回 ",null==M?void 0:M.symbol]})]}),(0,l.jsx)(T.A,{isLoading:V||X,text:V?"提交交易...":"确认交易..."})]})}},92659:(e,s,r)=>{r.d(s,{lV:()=>h,MJ:()=>w,Rr:()=>_,zB:()=>y,eI:()=>N,lR:()=>g,C5:()=>C});var t=r(81110),a=r(40120),n=r(3576),o=r(62701),l=r(65699),i=r(37876),c=r(14232),d=r(39358),m=r(88992),u=r(30684),f=r(49794),x=(0,r(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=c.forwardRef((e,s)=>{var r=e.className,t=(0,l._)(e,["className"]);return(0,i.jsx)(f.b,(0,n._)({ref:s,className:(0,u.cn)(x(),r)},t))});v.displayName=f.b.displayName;var h=m.Op,p=c.createContext({}),y=e=>{var s=(0,t._)({},(0,a._)(e));return(0,i.jsx)(p.Provider,{value:{name:s.name},children:(0,i.jsx)(m.xI,(0,n._)({},s))})},b=()=>{var e=c.useContext(p),s=c.useContext(j),r=(0,m.xW)(),t=r.getFieldState,a=r.formState,o=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var l=s.id;return(0,n._)({id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message")},o)},j=c.createContext({}),N=c.forwardRef((e,s)=>{var r=e.className,t=(0,l._)(e,["className"]),a=c.useId();return(0,i.jsx)(j.Provider,{value:{id:a},children:(0,i.jsx)("div",(0,n._)({ref:s,className:(0,u.cn)("space-y-2",r)},t))})});N.displayName="FormItem";var g=c.forwardRef((e,s)=>{var r=e.className,t=(0,l._)(e,["className"]),a=b(),o=a.error,c=a.formItemId;return(0,i.jsx)(v,(0,n._)({ref:s,className:(0,u.cn)(o&&"text-destructive",r),htmlFor:c},t))});g.displayName="FormLabel";var w=c.forwardRef((e,s)=>{var r=(0,t._)({},(0,a._)(e)),o=b(),l=o.error,c=o.formItemId,m=o.formDescriptionId,u=o.formMessageId;return(0,i.jsx)(d.DX,(0,n._)({ref:s,id:c,"aria-describedby":l?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!l},r))});w.displayName="FormControl";var _=c.forwardRef((e,s)=>{var r=e.className,t=(0,l._)(e,["className"]),a=b().formDescriptionId;return(0,i.jsx)("p",(0,n._)({ref:s,id:a,className:(0,u.cn)("text-sm text-muted-foreground",r)},t))});_.displayName="FormDescription";var C=c.forwardRef((e,s)=>{var r=e.className,t=e.children,a=(0,l._)(e,["className","children"]),c=b(),d=c.error,m=c.formMessageId,f=d?String(null==d?void 0:d.message):t;return f?(0,i.jsx)("p",(0,o._)((0,n._)({ref:s,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",r)},a),{children:f})):null});C.displayName="FormMessage"},99574:(e,s,r)=>{r.d(s,{A:()=>o});var t=r(37876),a=r(14232),n=r(7446);let o=e=>{var s=e.isLoading,r=e.text;return((0,a.useEffect)(()=>{if(s){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[s]),s)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 touch-none overscroll-none",onTouchMove:e=>{e.preventDefault()},onTouchStart:e=>{e.preventDefault()},style:{touchAction:"none"},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,t.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===r?"Loading":r})]})}):null}}}]);