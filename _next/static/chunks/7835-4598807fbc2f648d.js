"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7835],{22605:(e,s,t)=>{t.d(s,{A:()=>j});var n=t(37876),a=t(14232),i=t(8047),l=t(6960),r=t(48230),d=t.n(r),c=t(17660),o=t(52372),x=t(20451),m=t(83416),h=t(20442),v=t(12293),u=t(43885);let j=e=>{var s=e.actionId,t=e.onRoundChange,r=e.actionInfo,j=e.onStakedAmountChange,N=e.showJoinButton,f=(0,i.F)().address,b=((0,a.useContext)(m.N)||{}).token,y=(0,c.vC)(),g=y.currentRound,p=y.error;(0,a.useEffect)(()=>{t&&"function"==typeof t&&t(g)},[g,t]);var A=(0,c.vx)((null==b?void 0:b.address)||"",s,f||""),w=A.joinedAmountByActionIdByAccount,I=A.isPending,C=A.error,k=(0,c.p9)((null==b?void 0:b.address)||"",s),E=k.joinedAmountByActionId,B=k.isPending,F=k.error,R=w&&w>0&&E&&E>0,S=R?Number(w)/Number(E)*100:0,P=(0,h.Ee)(S),_=R?(0,h.Ee)(Math.min(S*Number(null==r?void 0:r.body.maxRandomAccounts),100)):"0%",J=(0,o.IJ)((null==b?void 0:b.address)||"",s,f||""),K=J.verificationKeys,L=J.verificationInfos,H=J.isPending,$=J.error;(0,a.useEffect)(()=>{I||null==j||j(w||BigInt(0))},[w,I]);var V=(0,x.g)().handleContractError;return((0,a.useEffect)(()=>{C&&V(C,"join"),F&&V(F,"join"),$&&V($,"join"),p&&V(p,"join")},[C,F,$,p]),I||B)?"":(0,n.jsxs)("div",{className:"flex flex-col items-center px-4 pt-1 pb-4",children:[R&&(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"我的参与"}),(0,n.jsx)("div",{className:"stat-value text-2xl text-secondary",children:B?(0,n.jsx)(v.A,{}):(0,h.NJ)(w||BigInt(0),0)}),(0,n.jsx)("div",{className:"stat-desc text-sm mt-2",children:"参与本行动的代币"})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"我的占比"}),(0,n.jsx)("div",{className:"stat-value text-2xl text-secondary",children:P}),(0,n.jsxs)("div",{className:"stat-desc text-sm mt-2",children:["被抽中验证概率 ",_]})]})]}),(void 0===N||N)&&(0,n.jsx)(n.Fragment,{children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.$,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(d(),{href:"/acting/join?id=".concat(s,"&symbol=").concat(null==b?void 0:b.symbol),children:"增加参与代币"})}),(0,n.jsx)("div",{className:"flex flex-col items-center mt-2",children:(0,n.jsxs)("div",{className:"text-sm text-greyscale-600",children:[H&&"加载中...",K&&K.length>0&&(0,n.jsx)("div",{children:K.map((e,s)=>(0,n.jsxs)("div",{children:[e,": ",(0,n.jsx)(u.H,{text:L[s]})]},s))})]})})]}):(0,n.jsx)(l.$,{variant:"outline",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(d(),{href:"/acting/join?id=".concat(s,"&symbol=").concat(null==b?void 0:b.symbol),children:"参与行动"})})})]})}},42038:(e,s,t)=>{t.d(s,{C:()=>a});var n=t(97685),a=e=>!!e||(n.oR.error("请先将钱包链接 ".concat("thinkium801")),!1)},43885:(e,s,t)=>{t.d(s,{H:()=>i});var n=t(37876);t(14232);var a=e=>{if(!e)return e;var s=/(https?:\/\/[^\s]+)/g;if(!s.test(e))return e;var t=e.split(s),a=e.match(s)||[];return(0,n.jsx)(n.Fragment,{children:t.map((e,s)=>{if(s%2==0)return e;var t=a[(s-1)/2];return(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline hover:text-blue-700",children:t},s)})})},i=e=>{var s=e.text;return(0,n.jsx)(n.Fragment,{children:a(s)})}},92101:(e,s,t)=>{t.d(s,{A:()=>u});var n=t(37876),a=t(14232),i=t(6960),l=t(48230),r=t.n(l),d=t(64115),c=t(20451),o=t(83416),x=t(20442),m=t(87577),h=t(12293),v=t(1709);let u=e=>{var s,t=e.actionId,l=e.round,u=e.showSubmitter,j=e.showVerifyHistory,N=e.onActionInfo,f=((0,a.useContext)(o.N)||{}).token,b=(0,d.Y4)(null==f?void 0:f.address,t),y=b.actionInfo,g=b.isPending,p=b.error;(0,a.useEffect)(()=>{N&&y&&N(y)},[y]);var A=(0,d.VD)(null==f?void 0:f.address,u?l:0n),w=A.actionSubmits,I=A.isPending,C=A.error,k=(null==w||null==(s=w.find(e=>e.actionId==Number(t)))?void 0:s.submitter)||"N/A",E=(0,c.g)().handleContractError;return((0,a.useEffect)(()=>{p&&E(p,"submit"),C&&E(C,"submit")},[p,C]),g)?(0,n.jsx)(h.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mx-auto p-4 pb-2 border-t border-greyscale-100",children:(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(v.A,{title:"行动详情"}),(void 0===j||j)&&(0,n.jsx)(i.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(r(),{href:"/my/actrewards/?id=".concat(t,"&symbol=").concat(null==f?void 0:f.symbol),children:"查看验证结果 >>"})})]})}),(0,n.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==y?void 0:y.head.id.toString()]}),(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:null==y?void 0:y.body.action})]}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)("span",{className:"text-greyscale-600",children:null==y?void 0:y.body.consensus})}),(0,n.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,n.jsx)(m.A,{address:null==y?void 0:y.head.author})]}),u&&(0,n.jsxs)("div",{className:"flex items-center",children:["推举人"," ",I?(0,n.jsx)(h.A,{}):(0,n.jsx)(m.A,{address:k})]})]})]}),(0,n.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(0,x.NJ)((null==y?void 0:y.body.minStake)||BigInt(0))})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最大抽取验证地址数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(null==y?void 0:y.body.maxRandomAccounts.toString())||"-"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"验证规则"}),(0,n.jsx)("p",{className:"text-greyscale-500 whitespace-pre-wrap",children:null==y?void 0:y.body.verificationRule})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"报名参加行动时，行动者要提供的信息"}),(null==y?void 0:y.body.verificationKeys)&&(null==y?void 0:y.body.verificationKeys.length)>0?(0,n.jsx)("ul",{className:"list-disc pl-5",children:y.body.verificationKeys.map((e,s)=>(0,n.jsxs)("li",{className:"text-greyscale-500",children:[e," : ",y.body.verificationInfoGuides[s]]},s))}):(0,n.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,n.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==y?void 0:y.body.whiteList.length)?y.body.whiteList.map((e,s)=>(0,n.jsx)("span",{className:"flex items-center mr-2",children:(0,n.jsx)(m.A,{address:e})},s)):"无限制"})]})]})})]})}},99574:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(37876);t(14232);var a=t(7446);let i=e=>{var s=e.isLoading,t=e.text;return s?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(a.A,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:void 0===t?"Loading":t})]})}):null}}}]);