try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="155f9bf9-7c3d-4a95-8eb1-aff824ff0702",e._sentryDebugIdIdentifier="sentry-dbid-155f9bf9-7c3d-4a95-8eb1-aff824ff0702")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5787],{42083:function(e,r,n){var i=n(85893),t=n(23432);r.Z=function(){return(0,i.jsx)(t.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},90278:function(e,r,n){n.d(r,{Cv:function(){return I},IB:function(){return y},Pu:function(){return b},WZ:function(){return c},X5:function(){return _},YK:function(){return g},_H:function(){return A},a6:function(){return h},dB:function(){return l},fT:function(){return d},jA:function(){return v},kw:function(){return C},pA:function(){return m},pK:function(){return P},s4:function(){return f}});var i=n(91309),t=n(4586),o=n(67294),s=n(71104),a=n(32848),u="0xa42CAcd51b0F27c863b0De3e7961590e00E3fc4a",c=function(e,r){var n=(0,s.u)({address:u,abi:a.C,functionName:"actionSubmits",args:[e,r],query:{enabled:!!e&&!!r}});return{actionSubmits:n.data,isPending:n.isPending,error:n.error}},d=function(e,r){var n=(0,s.u)({address:u,abi:a.C,functionName:"actionInfosByIds",args:[e,r],query:{enabled:!!e&&r.length>0}}),i=n.data,t=n.isPending,o=n.error;return 0===r.length?{actionInfos:[],isPending:!1,error:void 0}:{actionInfos:i,isPending:t,error:o}},f=function(e,r,n){var i=(0,s.u)({address:u,abi:a.C,functionName:"actionInfosByPage",args:[e,r,n],query:{enabled:!!e}});return{actionInfos:i.data,isPending:i.isPending,error:i.error}},g=function(e,r,n){var i=!!e&&!!n&&!!r,o=(0,s.u)({address:u,abi:a.C,functionName:"votingActions",args:[e,r,n],query:{enabled:i}}),c=o.data,d=o.isPending,f=o.error;return r!==BigInt(0)&&i?{votingActions:c?(0,t._)(c):[],isPending:d,error:f}:{votingActions:[],isPending:!1,error:void 0}},v=function(e,r,n){var i=!!e&&!!n&&!!r,o=(0,s.u)({address:u,abi:a.C,functionName:"joinableActions",args:[e,r,n],query:{enabled:i}}),c=o.data,d=o.isPending,f=o.error;return r!==BigInt(0)&&i?{joinableActions:c?(0,t._)(c):[],isPending:d,error:f}:{joinableActions:[],isPending:!1,error:void 0}},l=function(e,r){var n=(0,s.u)({address:u,abi:a.C,functionName:"joinedActions",args:[e,r],query:{enabled:!!e&&!!r}}),i=n.data,o=n.isPending,c=n.error;return{joinedActions:i?(0,t._)(i):[],isPending:o,error:c}},b=function(e,r,n){var i=!!e&&!!n&&!!r,o=(0,s.u)({address:u,abi:a.C,functionName:"verifyingActions",args:[e,r,n],query:{enabled:i}}),c=o.data,d=o.isPending,f=o.error;return r!==BigInt(0)&&i?{verifyingActions:c?(0,t._)(c):[],isPending:d,error:f}:{verifyingActions:[],isPending:!1,error:void 0}},y=function(e,r,n){var i=!!e&&!!n&&!!r,o=(0,s.u)({address:u,abi:a.C,functionName:"verifyingActionsByAccount",args:[e,r,n],query:{enabled:i}}),c=o.data,d=o.isPending,f=o.error;return r!==BigInt(0)&&i?{myVerifyingActions:c?(0,t._)(c):[],isPending:d,error:f}:{myVerifyingActions:[],isPending:!1,error:void 0}},P=function(e,r,n){var i=(0,s.u)({address:u,abi:a.C,functionName:"verifiedAddressesByAction",args:[e,r,n],query:{enabled:!!e&&!!r&&void 0!==n}});return{verifiedAddresses:i.data,isPending:i.isPending,error:i.error}},_=function(e,r,n){var i=(0,s.u)({address:u,abi:a.C,functionName:"verificationInfosByAction",args:[e,r,n],query:{enabled:!!e&&!!r&&void 0!==n}});return{verificationInfos:i.data,isPending:i.isPending,error:i.error}},I=function(e,r,n){var i=(0,s.u)({address:u,abi:a.C,functionName:"verificationInfosByAccount",args:[e,r,n],query:{enabled:!!e&&!!n&&void 0!==r}}),t=i.data,o=i.isPending,c=i.error;return{verificationKeys:null==t?void 0:t[0],verificationInfos:null==t?void 0:t[1],isPending:o,error:c}},A=function(e){var r=(0,s.u)({address:u,abi:a.C,functionName:"govData",args:[e],query:{enabled:!!e}});return{govData:r.data,isPending:r.isPending,error:r.error}},m=function(e,r,n){var i=(0,s.u)({address:u,abi:a.C,functionName:"actionVoters",args:[e,r,n],query:{enabled:!!e&&!!r&&void 0!==n}});return{actionVoters:i.data,isPending:i.isPending,error:i.error}},h=function(e,r,n,c){var d=(0,s.u)({address:u,abi:a.C,functionName:"accountVotingHistory",args:[e,r,n,c],query:{enabled:!!e&&!!r&&void 0!==n&&void 0!==c}}),f=d.data,g=d.isPending,v=d.error,l=(0,o.useMemo)(function(){if(f){var e=(0,i._)(f,2),r=e[0],n=e[1];return{accountActions:(0,t._)(r||[]),actionInfos:(0,t._)(n||[])}}},[f]);return{votingHistory:l,accountActions:null==l?void 0:l.accountActions,actionInfos:null==l?void 0:l.actionInfos,isPending:g,error:v}},C=function(e,r,n){var c,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,f=(0,i._)((0,o.useState)(void 0),2),g=f[0],v=f[1],l=(0,i._)((0,o.useState)(!1),2),b=l[0],y=l[1],P=(0,i._)((0,o.useState)(null),2),_=P[0],I=P[1],A=(0,i._)((0,o.useState)(0),2),m=A[0],h=A[1],C=(0,i._)((0,o.useState)(!0),2),N=C[0],B=C[1],q=(0,o.useRef)(null),D=e&&"0x"!==e&&42===e.length,p=!!r&&r>BigInt(0),S=void 0!==n&&n>BigInt(0),w=D&&p&&S,j=m*d,k=j+d,x=(0,s.u)({address:u,abi:a.C,functionName:"actionVerificationMatrixPaged",args:[e,r,n,BigInt(j),BigInt(k)],query:{enabled:w&&N,gcTime:0,staleTime:0,retry:2}}),V=x.data,E=x.isPending;return(0,o.useEffect)(function(){if(!w){v(void 0),I(null),y(!1);return}if(E){y(!0);return}if(!V&&!E){console.log("⚠️ 查询返回空数据，停止分页查询",{currentPage:m}),B(!1),y(!1),q.current?(console.log("✅ 分页查询完成，总验证者数: ".concat(q.current.verifiers.length)),v({verifiers:q.current.verifiers,verifiees:q.current.verifiees,scores:q.current.scores})):0===m&&(console.log("⚠️ 第一页返回空数据，无验证矩阵"),v({verifiers:[],verifiees:[],scores:[]}));return}if(V){var e,r,n;if(console.log("\uD83D\uDCC4 分页查询结果 (".concat(j,"-").concat(k,"):"),{verifiers:(null===(e=V.verifiers)||void 0===e?void 0:e.length)||0,verifiees:(null===(r=V.verifiees)||void 0===r?void 0:r.length)||0,scores:(null===(n=V.scores)||void 0===n?void 0:n.length)||0}),!V.verifiers||0===V.verifiers.length){B(!1),y(!1),q.current&&(console.log("✅ 分页查询完成（返回空数组），总验证者数:",q.current.verifiers.length),v({verifiers:q.current.verifiers,verifiees:q.current.verifiees,scores:q.current.scores}));return}q.current?(q.current.verifiers=(0,t._)(q.current.verifiers).concat((0,t._)(V.verifiers)),q.current.scores=(0,t._)(q.current.scores).concat((0,t._)(V.scores))):q.current={verifiers:(0,t._)(V.verifiers),verifiees:(0,t._)(V.verifiees),scores:(0,t._)(V.scores)},V.verifiers.length<d?(B(!1),y(!1),console.log("✅ 分页查询完成（最后一页），总验证者数:",q.current.verifiers.length),v({verifiers:q.current.verifiers,verifiees:q.current.verifiees,scores:q.current.scores})):h(function(e){return e+1})}},[V,E,w,m,d]),(0,o.useEffect)(function(){v(void 0),h(0),B(!0),I(null),y(w),q.current=null,console.log("\uD83D\uDD04 重置分页查询状态:",{tokenAddress:e,round:r.toString(),actionId:n.toString()})},[e,r.toString(),n.toString(),w]),{verificationMatrix:g,isPending:b||E,error:_,progress:{currentPage:m,loadedVerifiers:(null===(c=q.current)||void 0===c?void 0:c.verifiers.length)||0,hasMore:N}}}}}]);