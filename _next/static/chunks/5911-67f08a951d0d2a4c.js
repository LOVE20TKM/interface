try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="3aca8fa2-7b82-4dda-b206-b6cfe2bd11b7",e._sentryDebugIdIdentifier="sentry-dbid-3aca8fa2-7b82-4dda-b206-b6cfe2bd11b7")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5911],{15911:function(e,s,a){a.d(s,{Z:function(){return k}});var r=a(72253),n=a(14932),t=a(91309),i=a(85893),d=a(67294),l=a(63448),c=a(56312),o=a(87536),m=a(42130),u=a(27245),x=a(21774),f=a(34680),h=a(88659),g=a(74193),p=a(91529),b=a(26868),y=a(77580),j=function(e){var s=e.baseToken,a=e.targetToken,t=e.queryAddress,i=(0,b.N)(s.address,(null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",!!a&&!!t),l=i.pairAddress,c=i.isLoading,o=(0,y.bQ)(l,t),m=o.lpBalance,u=o.isLoading,x=(0,y.QX)(l),f=x.reserve0,h=x.reserve1,g=x.isLoading,p=(0,y.A5)(l),j=p.totalSupply,v=p.isLoading,N=(0,y.Oc)(l),T=N.token0,B=N.isLoading,L=(0,y.$C)(l),k=L.token1,I=L.isLoading,A=(0,d.useMemo)(function(){if(!l||!f||!h||!j||!T||!k||!a||!(f>BigInt(0)&&h>BigInt(0)))return{pairExists:!1,userLPBalance:BigInt(0),userBaseTokenAmount:BigInt(0),userTargetTokenAmount:BigInt(0),lpSharePercentage:0,baseTokenIsToken0:!1};var e=s.address.toLowerCase()===T.toLowerCase(),r=e?f:h,n=e?h:f,t=m||BigInt(0),i=j>BigInt(0)?Number(t)/Number(j)*100:0,d=j>BigInt(0)?t*r/j:BigInt(0),c=j>BigInt(0)?t*n/j:BigInt(0);return{pairExists:!0,userLPBalance:t,userBaseTokenAmount:d,userTargetTokenAmount:c,lpSharePercentage:i,baseTokenIsToken0:e,poolBaseReserve:r,poolTargetReserve:n,poolTotalSupply:j}},[l,m,f,h,j,T,k,s.address,a]);return(0,n._)((0,r._)({pairAddress:l},A),{isLoading:c||u||g||v||B||I,hasValidInput:!!t&&!!a})},v=a(87614),N=a(43032),T=a(42083),B=function(){var e=[],s="TUSDT",a="0x47Ba4471046fC0442078CF1519924cb205F02c7a";s&&a&&e.push({symbol:s,address:a,decimals:18,isNative:!1});var r="TKM20",n="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return r&&n&&e.push({symbol:r,address:n,decimals:18,isNative:!1}),e},L=l.Ry({queryAddress:l.Z_().min(1,"请输入查询地址").regex(/^0x[a-fA-F0-9]{40}$/,"请输入有效的以太坊地址"),baseTokenAddress:l.Z_().min(1,"请选择基础代币")}),k=function(){var e=(0,N.Z)().token,s=(0,m.m)(),a=s.address,l=s.isConnected,b=(0,t._)((0,d.useState)(!1),2),y=b[0],k=b[1],I=(0,t._)((0,d.useState)(!1),2),A=I[0],w=I[1],S=(0,d.useMemo)(function(){return B()},[]),_=(0,t._)((0,d.useState)(function(){return S.find(function(e){return"TUSDT"===e.symbol})||{symbol:"TKM20",address:"0xc3Da46ED14dBd79922027031BB5D688A81139e01",decimals:18,isNative:!1}}),2),P=_[0],C=_[1],E=(0,d.useMemo)(function(){return e?{symbol:e.symbol,address:e.address,decimals:18,isNative:!1}:null},[e]),q=(0,o.cI)({resolver:(0,c.F)(L),defaultValues:{queryAddress:a||"",baseTokenAddress:P.address},mode:"onChange"}),Z=q.watch("baseTokenAddress"),D=q.watch("queryAddress");(0,d.useEffect)(function(){!A&&a&&(q.setValue("queryAddress",a),w(!0),k(!0))},[a,q,A]);var R=D!==a;(0,d.useEffect)(function(){var e=D&&D.match(/^0x[a-fA-F0-9]{40}$/),s=q.formState.isValid,r=D===a;if(e&&s&&!y&&r&&a){var n=setTimeout(function(){k(!0)},100);return function(){return clearTimeout(n)}}},[D,q.formState.isValid,y,a]),(0,d.useMemo)(function(){var e=S.find(function(e){return e.address===Z});e&&C(e)},[Z,S]),(0,d.useEffect)(function(){y&&k(!1)},[Z]);var V=(0,d.useMemo)(function(){if(y&&D&&D.match(/^0x[a-fA-F0-9]{40}$/))return D},[D,y]),F=(0,v.a)({baseToken:P,targetToken:E}),H=F.pairExists,M=F.poolTotalSupply,Y=F.poolBaseReserve,Q=F.poolTargetReserve,$=F.baseToTargetPrice,z=F.targetToBasePrice,K=F.isLoading,O=j({baseToken:P,targetToken:E,queryAddress:V}),X=O.pairExists,J=O.userLPBalance,G=O.userBaseTokenAmount,U=O.userTargetTokenAmount,W=O.lpSharePercentage,ee=(O.poolBaseReserve,O.poolTargetReserve,O.poolTotalSupply,O.isLoading),es=O.hasValidInput,ea=q.handleSubmit(function(){k(!0)}),er=function(){q.reset({queryAddress:"",baseTokenAddress:P.address}),k(!1)};if(!e||!E)return(0,i.jsx)(T.Z,{});var en=y&&es,et=en&&X&&J>BigInt(0);return(0,i.jsx)("div",{className:"py-2 px-0",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)(g.l0,(0,n._)((0,r._)({},q),{children:(0,i.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3 font-bold",children:"选择交易对："}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsx)(g.Wi,{control:q.control,name:"baseTokenAddress",render:function(e){var s=e.field;return(0,i.jsxs)(g.xJ,{children:[(0,i.jsx)(g.NI,{children:(0,i.jsxs)(h.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,i.jsx)(h.i4,{className:"w-full",children:(0,i.jsx)(h.ki,{placeholder:"选择代币"})}),(0,i.jsx)(h.Bw,{children:S.map(function(e){return(0,i.jsx)(h.Ql,{value:e.address,children:e.symbol},e.address)})})]})}),(0,i.jsx)(g.zG,{})]})}}),(0,i.jsx)(g.xJ,{children:(0,i.jsx)("div",{className:"h-10 px-3 py-2 border border-gray-200 rounded-md bg-gray-50 flex items-center text-sm text-gray-700",children:E.symbol})})]})]})})}),E&&(0,i.jsx)(f.Zb,{children:(0,i.jsxs)(f.aY,{className:"p-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"交易对统计"}),K?(0,i.jsxs)("div",{className:"text-center py-4",children:[(0,i.jsx)(T.Z,{}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"加载中..."})]}):H?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"LP总数量："}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,p.LH)(M)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[P.symbol," 总数量："]}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,p.LH)(Y)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[E.symbol," 总数量："]}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,p.LH)(Q)})]})]}),(0,i.jsx)("div",{className:"border-t pt-4",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["1 ",P.symbol," = "]}),(0,i.jsxs)("span",{className:"font-medium",children:[(0,i.jsx)("span",{className:"text-secondary",children:(0,p.LH)($)})," ",E.symbol]})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["1 ",E.symbol," = "]}),(0,i.jsxs)("span",{className:"font-medium",children:[(0,i.jsx)("span",{className:"text-secondary",children:(0,p.LH)(z,5)})," ",P.symbol]})]})]})})]}):(0,i.jsx)("div",{className:"text-center py-4",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"交易对不存在"})})]})}),(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-4",children:(0,i.jsx)(g.Wi,{control:q.control,name:"queryAddress",render:function(e){var s=e.field;return(0,i.jsxs)(g.xJ,{children:[(0,i.jsx)(g.lX,{className:"text-base font-semibold text-gray-800 mb-4",children:"查询地址："}),(0,i.jsx)(g.NI,{children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(x.I,(0,n._)((0,r._)({placeholder:"请输入要查询的地址 (0x...)"},s),{className:"flex-1 font-mono text-sm",onKeyPress:function(e){"Enter"===e.key&&ea()}})),(0,i.jsx)(u.z,{type:"submit",disabled:!q.formState.isValid||y&&ee,children:y&&ee?"查询中...":R?"查询":"重新查询"}),y&&(0,i.jsx)(u.z,{variant:"outline",onClick:er,children:"重置"})]}),!l&&(0,i.jsx)("div",{className:"text-xs text-orange-600",children:"⚠️ 未连接钱包，请手动输入要查询的地址"})]})}),(0,i.jsx)(g.zG,{})]})}})})})]})})),en&&(0,i.jsx)("div",{className:"mt-6",children:ee?(0,i.jsx)(f.Zb,{children:(0,i.jsxs)(f.aY,{className:"p-6 text-center",children:[(0,i.jsx)(T.Z,{}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"查询中..."})]})}):X?et?(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"该地址LP情况："}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"LP代币数量"}),(0,i.jsx)("span",{className:"font-medium",children:(0,p.LH)(J)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"所占份额"}),(0,i.jsx)("span",{className:"font-medium",children:(0,p.rl)(W)})]})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"可兑换代币数量："}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:P.symbol}),(0,i.jsx)("span",{className:"font-medium",children:(0,p.LH)(G)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:E.symbol}),(0,i.jsx)("span",{className:"font-medium",children:(0,p.LH)(U)})]})]})]})]})})}):(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-6 text-center",children:(0,i.jsx)("div",{className:"text-gray-500",children:(0,i.jsx)("p",{className:"text-sm mt-1",children:"该地址在此交易对中，没有LP代币"})})})}):(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-6 text-center",children:(0,i.jsxs)("div",{className:"text-gray-500",children:[(0,i.jsx)("p",{className:"font-medium",children:"未找到流动性池"}),(0,i.jsxs)("p",{className:"text-sm mt-1",children:[P.symbol,"-",E.symbol," 交易对不存在"]})]})})})})]})})}},87614:function(e,s,a){a.d(s,{a:function(){return l}});var r=a(72253),n=a(14932),t=a(67294),i=a(26868),d=a(77580),l=function(e){var s=e.baseToken,a=e.targetToken,l=(0,i.N)(s.address,(null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",!!a),c=l.pairAddress,o=l.isLoading,m=(0,d.QX)(c),u=m.reserve0,x=m.reserve1,f=m.isLoading,h=(0,d.A5)(c),g=h.totalSupply,p=h.isLoading,b=(0,d.Oc)(c),y=b.token0,j=b.isLoading,v=(0,d.$C)(c),N=v.token1,T=v.isLoading,B=(0,t.useMemo)(function(){if(!c||!u||!x||!g||!y||!N||!a||!(u>BigInt(0)&&x>BigInt(0)))return{pairExists:!1,poolTotalSupply:BigInt(0),poolBaseReserve:BigInt(0),poolTargetReserve:BigInt(0),baseTokenIsToken0:!1,baseToTargetPrice:BigInt(0),targetToBasePrice:BigInt(0)};var e=s.address.toLowerCase()===y.toLowerCase(),r=e?u:x,n=e?x:u,t=r>BigInt(0)?n*BigInt(1e18)/r:BigInt(0),i=n>BigInt(0)?r*BigInt(1e18)/n:BigInt(0);return{pairExists:!0,poolTotalSupply:g,poolBaseReserve:r,poolTargetReserve:n,baseTokenIsToken0:e,baseToTargetPrice:t,targetToBasePrice:i}},[c,u,x,g,y,N,s.address,a]);return(0,n._)((0,r._)({pairAddress:c},B),{isLoading:o||f||p||j||T,hasValidTokens:!!a})}},26868:function(e,s,a){a.d(s,{N:function(){return t}});var r=a(71104),n=a(86171),t=function(e,s){var a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=(0,r.u)({address:"0x0ce7Aa2069d92De630AFf1B6b512f5E47af6Ffc8",abi:n.K,functionName:"getPair",args:[e,s],query:{enabled:!!e&&!!s&&e!==s&&a}});return{pairAddress:t.data,isLoading:t.isLoading,error:t.error}}},77580:function(e,s,a){a.d(s,{$C:function(){return c},A5:function(){return d},Oc:function(){return l},QX:function(){return i},bQ:function(){return t}});var r=a(71104),n=a(18456),t=function(e,s,a){var t=(0,r.u)({address:e,abi:n.y,functionName:"balanceOf",args:[s],query:{enabled:!!e&&!!s&&"0x0000000000000000000000000000000000000000"!==e,staleTime:3e3,refetchInterval:a||!1}});return{lpBalance:t.data,isLoading:t.isLoading,error:t.error,refetch:t.refetch}},i=function(e,s){var a=(0,r.u)({address:e,abi:n.y,functionName:"getReserves",query:{enabled:!!e&&"0x0000000000000000000000000000000000000000"!==e,staleTime:3e3,refetchInterval:s||!1}}),t=a.data,i=a.isLoading,d=a.error,l=a.refetch;return{reserve0:null==t?void 0:t[0],reserve1:null==t?void 0:t[1],blockTimestampLast:null==t?void 0:t[2],reserves:t,isLoading:i,error:d,refetch:l}},d=function(e){var s=(0,r.u)({address:e,abi:n.y,functionName:"totalSupply",query:{enabled:!!e&&"0x0000000000000000000000000000000000000000"!==e,staleTime:3e3}});return{totalSupply:s.data,isLoading:s.isLoading,error:s.error,refetch:s.refetch}},l=function(e){var s=(0,r.u)({address:e,abi:n.y,functionName:"token0",query:{enabled:!!e&&"0x0000000000000000000000000000000000000000"!==e}});return{token0:s.data,isLoading:s.isLoading,error:s.error}},c=function(e){var s=(0,r.u)({address:e,abi:n.y,functionName:"token1",query:{enabled:!!e&&"0x0000000000000000000000000000000000000000"!==e}});return{token1:s.data,isLoading:s.isLoading,error:s.error}}}}]);