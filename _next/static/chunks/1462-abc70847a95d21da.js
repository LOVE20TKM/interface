try{!function(){var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="97424b2d-36c0-44b6-97b3-026da810391c",n._sentryDebugIdIdentifier="sentry-dbid-97424b2d-36c0-44b6-97b3-026da810391c")}()}catch(n){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1462],{11418:function(n,e,t){t.d(e,{Z:function(){return x}});var r=t(85893),s=t(67294),i=t(42130),a=t(11163),o=t(41664),c=t.n(o),l=t(93778),d=t(26858),u=t(27245);function h(n){var e=n.isJoined,t=n.actionId,i=(n.userJoinedAmount,n.isPending),a=((0,s.useContext)(l.M)||{}).token;if(!a)return null;var o="/acting/join?symbol=".concat(a.symbol,"&id=").concat(t),d="/my/myaction?symbol=".concat(a.symbol,"&id=").concat(t);return void 0!==i&&i?(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("div",{className:"loading loading-spinner loading-md"})}):(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:e?(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:d,children:"我的参与 >>"}):(0,r.jsx)(u.z,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(c(),{href:o,children:"加入行动 >>"})})})}function x(n){var e=n.actionInfo,t=n.participantCount,o=n.totalAmount,u=n.isJoined,x=n.userJoinedAmount,f=n.isPending,m=n.showActionButtons,v=void 0===m||m,y=n.linkToActionInfo,b=void 0!==y&&y,g=((0,s.useContext)(l.M)||{}).token,j=(0,i.m)().address,p=(0,a.useRouter)();if(!g)return(0,r.jsx)("div",{children:"Token信息加载中..."});var N=o?(0,d.LH)(o):"0";return(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 pt-2 pb-2 text-sm my-4 ".concat(b?"cursor-pointer hover:bg-gray-200 transition-colors":""),onClick:function(){b&&g&&p.push("/action/info?symbol=".concat(g.symbol,"&id=").concat(e.head.id))},children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("h1",{className:"text-lg mb-1",children:(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"No."}),(0,r.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:e.head.id.toString()}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:e.body.title})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与代币总数:"}),(0,r.jsxs)("span",{className:"font-mono text-secondary",children:[N," "]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与地址数:"}),(0,r.jsx)("span",{className:"font-mono text-secondary",children:(null==t?void 0:t.toString())||"0"})]})]}),v&&e&&j&&(0,r.jsx)(h,{isJoined:u,actionId:e.head.id,userJoinedAmount:x,isPending:f}),!v&&(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?symbol=".concat(null==g?void 0:g.symbol,"&id=").concat(e.head.id),children:"行动详情 >>"})})]})}},90963:function(n,e,t){var r=t(91309),s=t(85893),i=t(67294),a=t(27245),o=t(26986);e.Z=function(n){var e=n.currentRound,t=n.handleChangedRound,c=(0,r._)((0,i.useState)(!1),2),l=c[0],d=c[1],u=function(n){t(n),d(!1)},h=(0,i.useRef)(null),x=(0,i.useRef)(!1);return(0,s.jsxs)(o.dy,{open:l,onOpenChange:d,children:[(0,s.jsx)(o.Qz,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"link",className:"text-secondary no-underline pl-2 pr-1",children:"切换轮次"})}),(0,s.jsxs)(o.sc,{className:"z-[9999] min-h-[25vh]",children:[(0,s.jsxs)(o.OX,{children:[(0,s.jsx)(o.iI,{}),(0,s.jsx)(o.u6,{})]}),(0,s.jsx)("div",{className:"px-4 flex-grow",children:(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:Array.from({length:Number(e)},function(n,t){var r=Number(e)-t;return(0,s.jsx)(a.z,{variant:"ghost",className:"w-full p-2 text-center rounded-none hover:bg-gray-100 touch-manipulation",onPointerDown:function(n){"touch"===n.pointerType?h.current=n.clientY:h.current=null,x.current=!1},onPointerMove:function(n){"touch"===n.pointerType&&null!==h.current&&Math.abs(n.clientY-h.current)>10&&(x.current=!0)},onPointerUp:function(n){"touch"===n.pointerType?(x.current||u(r),h.current=null,x.current=!1):u(r)},style:{touchAction:"manipulation"},children:(0,s.jsxs)("span",{className:"text-lg",children:["第 ",r," 轮"]})},r)})})}),(0,s.jsx)(o.ze,{children:(0,s.jsx)(o.uh,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"outline",children:"关闭"})})})]})]})}},44746:function(n,e,t){t.d(e,{Z:function(){return h}});var r=t(72253),s=t(14932),i=t(91309),a=t(85893),o=t(67294),c=t(74598),l=t(35810),d=t(26986),u=t(79995);function h(n){var e=n.title,t=n.content,h=n.className,x=void 0===h?"":h,f=(0,i._)((0,o.useState)(!1),2),m=f[0],v=f[1],y=(0,u.Z)("(min-width: 768px)"),b=o.forwardRef(function(n,t){return(0,a.jsx)("button",(0,s._)((0,r._)({ref:t,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(x),"aria-label":"查看".concat(e)},n),{children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});b.displayName="TriggerButton";var g=function(){return(0,a.jsx)("div",{className:"text-gray-700",children:"string"==typeof t?(0,a.jsx)("p",{className:"leading-relaxed text-sm",children:t}):t})};return(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsxs)(l.Vq,{open:m,onOpenChange:v,children:[(0,a.jsx)(l.hg,{asChild:!0,children:(0,a.jsx)(b,{})}),(0,a.jsxs)(l.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(l.$N,{className:"text-lg font-semibold",children:e}),(0,a.jsx)("div",{className:"pt-2 pb-4",children:(0,a.jsx)(g,{})})]})]}),!y&&(0,a.jsxs)(d.dy,{open:m,onOpenChange:v,children:[(0,a.jsx)(d.Qz,{asChild:!0,children:(0,a.jsx)(b,{})}),(0,a.jsxs)(d.sc,{className:"pb-safe",children:[(0,a.jsx)(d.OX,{children:(0,a.jsx)(d.iI,{className:"text-lg font-semibold",children:e})}),(0,a.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,a.jsx)(g,{})})]})]})]})}},64777:function(n,e,t){var r=t(85893);e.Z=function(n){var e=n.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:e})})}},36893:function(n,e,t){t.d(e,{r:function(){return d}});var r=t(91309),s=t(67294),i=t(67516),a=t(7724),o=t(98482),c=t(37742),l="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",d=function(n){var e=n.tokenAddress,t=n.actionId,d=n.account,u=(0,s.useMemo)(function(){if(!e||void 0===t)return[];var n=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:a.d,functionName:"actionInfo",args:[e,t]},{address:l,abi:o.S,functionName:"amountByActionId",args:[e,t]},{address:l,abi:o.S,functionName:"numOfAccounts",args:[e,t]},{address:l,abi:o.S,functionName:"currentRound",args:[]}];return d&&n.push({address:l,abi:o.S,functionName:"amountByActionIdByAccount",args:[e,t,d]}),n},[e,t,d]),h=(0,i.N)({contracts:u,query:{enabled:!!e&&void 0!==t&&u.length>0}}),x=h.data,f=h.isPending,m=h.error;return(0,s.useMemo)(function(){if(!x||!e||void 0===t)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,userJoinedAmount:void 0,isJoined:!1,currentRound:void 0,isPending:f,error:m};var n=(0,r._)(x,5),s=n[0],i=n[1],a=n[2],o=n[3],l=n[4],d=null==s?void 0:s.result,u=(null==i?void 0:i.result)?(0,c.Zu)(i.result):void 0,h=(null==a?void 0:a.result)?(0,c.Zu)(a.result):void 0,v=(null==o?void 0:o.result)?(0,c.Zu)(o.result):void 0,y=(null==l?void 0:l.result)?(0,c.Zu)(l.result):void 0,b=!!y&&y>BigInt(0);return{actionInfo:d,participantCount:h,totalAmount:u,userJoinedAmount:y,isJoined:b,currentRound:v,isPending:f,error:m}},[x,e,t,f,m])}},67516:function(n,e,t){t.d(e,{N:function(){return u}});var r=t(72253),s=t(14932),i=t(97995),a=t(36100),o=t(67294),c=t(95159),l=t(39360),d=t(78942);function u(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.contracts,u=void 0===t?[]:t,h=e.query,x=void 0===h?{}:h,f=(0,d.Z)(e),m=(0,l.x)({config:f}),v=function(n,e={}){return{async queryFn({queryKey:t}){let r=[],s=t[1].contracts.length;for(let n=0;n<s;n++){let s=t[1].contracts[n],i=(e.contracts?.[n]).abi;r.push({...s,abi:i})}let{scopeKey:a,...o}=t[1];return(0,i.J)(n,{...o,contracts:r})},queryKey:function(n={}){let e=[];for(let t of n.contracts??[]){let{abi:r,...s}=t;e.push({...s,chainId:s.chainId??n.chainId})}return["readContracts",(0,a.OP)({...n,contracts:e})]}(e)}}(f,(0,s._)((0,r._)({},e),{chainId:m})),y=(0,o.useMemo)(function(){var n,e=!1,t=!0,r=!1,s=void 0;try{for(var i,a=u[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,c=o.abi,l=o.address,d=o.functionName;if(!c||!l||!d){e=!1;break}e=!0}}catch(n){r=!0,s=n}finally{try{t||null==a.return||a.return()}finally{if(r)throw s}}return!!(e&&(null===(n=x.enabled)||void 0===n||n))},[u,x.enabled]);return(0,c.aM)((0,s._)((0,r._)({},v,x),{enabled:y,structuralSharing:null!==(n=x.structuralSharing)&&void 0!==n?n:a.if}))}}}]);