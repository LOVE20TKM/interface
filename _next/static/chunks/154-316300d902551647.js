"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{60154:(e,s,a)=>{a.d(s,{A:()=>Y});var r=a(40854),t=a(37876),n=a(77328),o=a.n(n),l=a(14232),d=a(16927),i=a(4902),c=a(1081),m=a(8047),u=a(57238),f=a(96409),x=a(11267),p=a(12305),h=a(6960),v=a(3576),N=a(62701),g=a(65699),w=a(11068),j=a(96108),y=a(33276),b=a(11988),_=a(30684),A=w.bL,k=w.l9;w.YJ,w.ZL,w.Pb,w.z6,l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=e.children,o=(0,g._)(e,["className","inset","children"]);return(0,t.jsxs)(w.ZP,(0,N._)((0,v._)({ref:s,className:(0,_.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a)},o),{children:[n,(0,t.jsx)(j.A,{className:"ml-auto"})]}))}).displayName=w.ZP.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)(w.G5,(0,v._)({ref:s,className:(0,_.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},r))}).displayName=w.G5.displayName;var R=l.forwardRef((e,s)=>{var a=e.className,r=e.sideOffset,n=(0,g._)(e,["className","sideOffset"]);return(0,t.jsx)(w.ZL,{children:(0,t.jsx)(w.UC,(0,v._)({ref:s,sideOffset:void 0===r?4:r,className:(0,_.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},n))})});R.displayName=w.UC.displayName;var E=l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=(0,g._)(e,["className","inset"]);return(0,t.jsx)(w.q7,(0,v._)({ref:s,className:(0,_.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a)},n))});E.displayName=w.q7.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.children,n=e.checked,o=(0,g._)(e,["className","children","checked"]);return(0,t.jsxs)(w.H_,(0,N._)((0,v._)({ref:s,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n},o),{children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(y.A,{className:"h-4 w-4"})})}),r]}))}).displayName=w.H_.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.children,n=(0,g._)(e,["className","children"]);return(0,t.jsxs)(w.hN,(0,N._)((0,v._)({ref:s,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},n),{children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(b.A,{className:"h-2 w-2 fill-current"})})}),r]}))}).displayName=w.hN.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=(0,g._)(e,["className","inset"]);return(0,t.jsx)(w.JU,(0,v._)({ref:s,className:(0,_.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a)},n))}).displayName=w.JU.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)(w.wv,(0,v._)({ref:s,className:(0,_.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=w.wv.displayName;var C=a(51660),F=l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)(C.bL,(0,v._)({ref:s,className:(0,_.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a)},r))});F.displayName=C.bL.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)(C._V,(0,v._)({ref:s,className:(0,_.cn)("aspect-square h-full w-full",a)},r))}).displayName=C._V.displayName;var L=l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)(C.H4,(0,v._)({ref:s,className:(0,_.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a)},r))});L.displayName=C.H4.displayName;var z=a(7446),U=a(6973),V=a(30822),S=a(70801),T=a(80395),q=a(97685),H=a(48447);function O(){var e,s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className,a=(0,c.i)(),n=(0,m.F)(),o=n.address,v=n.isConnected,N=n.isConnecting,g=n.isReconnecting,w=(0,u.A)({address:o,chainId:a}).data,j=(0,f.e)(),b=j.connect,C=j.connectors,O=j.error,D=j.isPending,P=(0,x.u)().disconnect,Z=(0,r._)((0,l.useState)(!1),2),I=Z[0],J=Z[1],$=C.find(e=>"injected"===e.id),G=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)),M=(e=(0,d._)(function(){var e;return(0,i.YH)(this,function(s){try{if(!window.ethereum)return q.Ay.error("请安装 MetaMask 或使用支持的钱包浏览器"),[2];if(!$)return q.Ay.error("未找到可用的钱包连接器"),[2];if(D||N)return q.Ay.error("连接请求正在处理中，请稍候"),[2];b({connector:$})}catch(s){console.error("连接钱包失败:",s),(null==s?void 0:s.name)==="UserRejectedRequestError"?q.Ay.error("用户取消了连接请求"):(null==s||null==(e=s.message)?void 0:e.includes("Connector not found"))?q.Ay.error("未找到钱包，请确保已安装并解锁钱包"):q.Ay.error("连接钱包失败，请重试")}return[2]})}),function(){return e.apply(this,arguments)});l.useEffect(()=>{O&&(O.message.includes("User rejected")?q.Ay.error("用户取消了连接请求"):O.message.includes("already pending")?q.Ay.error("已有连接请求在处理中"):q.Ay.error("连接失败: "+O.message))},[O]);var W=(0,l.useRef)(v);(0,l.useEffect)(()=>{!W.current&&v&&o&&q.Ay.success("已连接: ".concat(G(o))),W.current=v},[v,o]),(0,l.useEffect)(()=>{var e=setTimeout(()=>{window.ethereum||console.warn("未检测到注入式钱包")},1e3);return()=>clearTimeout(e)},[]);var Y=N||g||D;return v?(0,t.jsxs)(A,{children:[(0,t.jsx)(k,{asChild:!0,children:(0,t.jsx)(h.$,{variant:"outline",className:(0,_.cn)("h-auto px-3 py-1.5 rounded-xl border hover:border-blue-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",s),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(F,{className:"w-8 h-8",children:(0,t.jsx)(L,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xs font-bold",children:o?o.slice(2,4).toUpperCase():"W"})}),(0,t.jsxs)("div",{className:"flex flex-col items-start min-w-0",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"font-mono text-sm font-medium text-gray-900",children:o?G(o):""})}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:(0,t.jsxs)("span",{className:"font-semibold",children:[w?(e=>{if(!e)return"0";var s=parseFloat((0,p.c)(e));return 0===s?"0":s<1e-4?"<0.0001":s<1?s.toFixed(4):s<100?s.toFixed(2):s.toFixed(0)})(w.value):"0"," ",(null==w?void 0:w.symbol)||"ETH"]})})]}),(0,t.jsx)(V.A,{className:"w-4 h-4 text-gray-500 ml-2"})]})})}),(0,t.jsxs)(R,{align:"end",className:"w-64 p-2 rounded-xl shadow-xl border",children:[(0,t.jsxs)("div",{className:"px-3 py-2 mb-2 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"钱包地址"}),o&&(0,t.jsx)(H.CopyToClipboard,{text:o,onCopy:(e,s)=>{s?(J(!0),q.Ay.success("地址已复制到剪贴板"),setTimeout(()=>J(!1),2e3)):q.Ay.error("复制失败")},children:(0,t.jsx)(h.$,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.A,{className:"w-3 h-3 mr-1"}),"已复制"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"w-3 h-3 mr-1"}),"复制"]})})})]}),(0,t.jsx)("p",{className:"font-mono text-xs text-gray-600 mt-1 break-all",children:o})]}),(0,t.jsxs)(E,{onClick:()=>{try{P(),q.Ay.success("已断开钱包连接")}catch(e){console.error("断开连接失败:",e),q.Ay.error("断开连接失败")}},className:"rounded-lg text-red-600 focus:text-red-600 focus:bg-red-50",children:[(0,t.jsx)(T.A,{className:"w-4 h-4 mr-3"}),"断开连接"]})]})]}):(0,t.jsx)(h.$,{onClick:M,disabled:Y,className:(0,_.cn)("bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",s),children:Y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.A,{className:"w-4 h-4 mr-2 animate-spin"}),"连接中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.A,{className:"w-4 h-4 mr-2"}),"连接钱包"]})})}var D=a(86739),P=(0,a(47137).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Z=l.forwardRef((e,s)=>{var a=e.className,r=e.variant,n=(0,g._)(e,["className","variant"]);return(0,t.jsx)("div",(0,v._)({ref:s,role:"alert",className:(0,_.cn)(P({variant:r}),a)},n))});Z.displayName="Alert";var I=l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)("h5",(0,v._)({ref:s,className:(0,_.cn)("mb-1 font-medium leading-none tracking-tight",a)},r))});I.displayName="AlertTitle";var J=l.forwardRef((e,s)=>{var a=e.className,r=(0,g._)(e,["className"]);return(0,t.jsx)("div",(0,v._)({ref:s,className:(0,_.cn)("text-sm [&_p]:leading-relaxed",a)},r))});J.displayName="AlertDescription";var $=a(25239),G=()=>{var e=(0,$.q)(),s=e.error,a=e.setError,n=(0,r._)((0,l.useState)(!1),2),o=n[0],d=n[1];return((0,l.useEffect)(()=>{s&&d(!0)},[s,a]),o&&s)?(0,t.jsxs)(Z,{variant:"destructive",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),(0,t.jsx)(I,{children:s.name}),(0,t.jsx)(J,{children:s.message})]}):null},M=a(35405),W=a(43387);let Y=e=>{var s=e.title,a=(0,m.F)(),n=a.address,d=a.chain,i="thinkium70001",c=(0,$.q)().setError;(0,W.U)();var u=(0,r._)((0,l.useState)(0),2),f=u[0],x=u[1],p=(0,r._)((0,l.useState)(!1),2),h=p[0],v=p[1];return(0,l.useEffect)(()=>{localStorage.getItem("networkAutoRefreshed")&&localStorage.removeItem("networkAutoRefreshed");var e=e=>{if(console.error("handleError:",e),e&&e.message&&(e.message.includes("f is not a function")||e.message.includes("User rejected")&&e.message.includes("Details:"))){var s=Date.now();s-f>3e4&&!h&&(x(s),v(!0),setTimeout(()=>{localStorage.setItem("networkAutoRefreshed","true"),window.location.reload()},2e3))}};window.addEventListener("error",s=>{s.error&&"object"==typeof s.error&&e(s.error)});var s=window.onerror;return window.onerror=function(a,r,t,n,o){return e(o),!!s&&s(a,r,t,n,o)},window.addEventListener("unhandledrejection",s=>{e(s.reason)}),()=>{window.onerror=s,window.removeEventListener("unhandledrejection",s=>{e(s.reason)})}},[f,h]),(0,l.useEffect)(()=>{n&&!d?c({name:"钱包网络错误",message:"请切换到 ".concat(i," 网络")}):c(null)},[n,d,c,i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o(),{children:[(0,t.jsx)("title",{children:"".concat(s," - LOVE20")}),(0,t.jsx)("meta",{name:"".concat(s," - LOVE20"),content:"A Web3 DApp for LOVE20 token management"})]}),(0,t.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,t.jsx)(M.x2,{className:"-ml-1"}),(0,t.jsx)(O,{})]}),(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(G,{})})]})}}}]);