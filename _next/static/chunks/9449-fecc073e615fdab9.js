try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="7019f128-9242-45b8-9457-2b66cadf166f",e._sentryDebugIdIdentifier="sentry-dbid-7019f128-9242-45b8-9457-2b66cadf166f")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9449],{29449:function(e,s,a){a.d(s,{Z:function(){return I}});var n=a(72253),t=a(14932),r=a(91309),i=a(85893),d=a(67294),l=a(63448),c=a(56312),o=a(87536),m=a(42130),x=a(27245),u=a(21774),h=a(34680),p=a(88659),f=a(74193),j=a(91529),g=a(60696),y=a(34049),b=function(e){var s=e.baseToken,a=e.targetToken,r=e.queryAddress,i=(0,g.N)(s.address,(null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",!!a&&!!r),l=i.pairAddress,c=i.isLoading,o=(0,y.bQ)(l,r),m=o.lpBalance,x=o.isLoading,u=(0,y.QX)(l),h=u.reserve0,p=u.reserve1,f=u.isLoading,j=(0,y.A5)(l),b=j.totalSupply,N=j.isLoading,v=(0,y.Oc)(l),T=v.token0,B=v.isLoading,k=(0,y.$C)(l),I=k.token1,L=k.isLoading,A=(0,d.useMemo)(function(){if(!l||!h||!p||!b||!T||!I||!a||!(h>BigInt(0)&&p>BigInt(0)))return{pairExists:!1,userLPBalance:BigInt(0),userBaseTokenAmount:BigInt(0),userTargetTokenAmount:BigInt(0),lpSharePercentage:0,baseTokenIsToken0:!1};var e=s.address.toLowerCase()===T.toLowerCase(),n=e?h:p,t=e?p:h,r=m||BigInt(0),i=b>BigInt(0)?Number(r)/Number(b)*100:0,d=b>BigInt(0)?r*n/b:BigInt(0),c=b>BigInt(0)?r*t/b:BigInt(0);return{pairExists:!0,userLPBalance:r,userBaseTokenAmount:d,userTargetTokenAmount:c,lpSharePercentage:i,baseTokenIsToken0:e,poolBaseReserve:n,poolTargetReserve:t,poolTotalSupply:b}},[l,m,h,p,b,T,I,s.address,a]);return(0,t._)((0,n._)({pairAddress:l},A),{isLoading:c||x||f||N||B||L,hasValidInput:!!r&&!!a})},N=function(e){var s=e.baseToken,a=e.targetToken,r=(0,g.N)(s.address,(null==a?void 0:a.address)||"0x0000000000000000000000000000000000000000",!!a),i=r.pairAddress,l=r.isLoading,c=(0,y.QX)(i),o=c.reserve0,m=c.reserve1,x=c.isLoading,u=(0,y.A5)(i),h=u.totalSupply,p=u.isLoading,f=(0,y.Oc)(i),j=f.token0,b=f.isLoading,N=(0,y.$C)(i),v=N.token1,T=N.isLoading,B=(0,d.useMemo)(function(){if(!i||!o||!m||!h||!j||!v||!a||!(o>BigInt(0)&&m>BigInt(0)))return{pairExists:!1,poolTotalSupply:BigInt(0),poolBaseReserve:BigInt(0),poolTargetReserve:BigInt(0),baseTokenIsToken0:!1,baseToTargetPrice:BigInt(0),targetToBasePrice:BigInt(0)};var e=s.address.toLowerCase()===j.toLowerCase(),n=e?o:m,t=e?m:o,r=n>BigInt(0)?t*BigInt(1e18)/n:BigInt(0),d=t>BigInt(0)?n*BigInt(1e18)/t:BigInt(0);return{pairExists:!0,poolTotalSupply:h,poolBaseReserve:n,poolTargetReserve:t,baseTokenIsToken0:e,baseToTargetPrice:r,targetToBasePrice:d}},[i,o,m,h,j,v,s.address,a]);return(0,t._)((0,n._)({pairAddress:i},B),{isLoading:l||x||p||b||T,hasValidTokens:!!a})},v=a(43032),T=a(42083),B=function(){var e=[],s="TUSDT",a="0x47Ba4471046fC0442078CF1519924cb205F02c7a";s&&a&&e.push({symbol:s,address:a,decimals:18,isNative:!1});var n="TKM20",t="0xc3Da46ED14dBd79922027031BB5D688A81139e01";return n&&t&&e.push({symbol:n,address:t,decimals:18,isNative:!1}),e},k=l.Ry({queryAddress:l.Z_().min(1,"请输入查询地址").regex(/^0x[a-fA-F0-9]{40}$/,"请输入有效的以太坊地址"),baseTokenAddress:l.Z_().min(1,"请选择基础代币")}),I=function(){var e=(0,v.Z)().token,s=(0,m.m)(),a=s.address,l=s.isConnected,g=(0,r._)((0,d.useState)(!1),2),y=g[0],I=g[1],L=(0,r._)((0,d.useState)(!1),2),A=L[0],w=L[1],_=(0,d.useMemo)(function(){return B()},[]),S=(0,r._)((0,d.useState)(function(){return _.find(function(e){return"TUSDT"===e.symbol})||{symbol:"TKM20",address:"0xc3Da46ED14dBd79922027031BB5D688A81139e01",decimals:18,isNative:!1}}),2),P=S[0],C=S[1],E=(0,d.useMemo)(function(){return e?{symbol:e.symbol,address:e.address,decimals:18,isNative:!1}:null},[e]),Z=(0,o.cI)({resolver:(0,c.F)(k),defaultValues:{queryAddress:a||"",baseTokenAddress:P.address},mode:"onChange"}),D=Z.watch("baseTokenAddress"),R=Z.watch("queryAddress");(0,d.useEffect)(function(){!A&&a&&(Z.setValue("queryAddress",a),w(!0),I(!0))},[a,Z,A]);var V=R!==a;(0,d.useEffect)(function(){var e=R&&R.match(/^0x[a-fA-F0-9]{40}$/),s=Z.formState.isValid,n=R===a;if(e&&s&&!y&&n&&a){var t=setTimeout(function(){I(!0)},100);return function(){return clearTimeout(t)}}},[R,Z.formState.isValid,y,a]),(0,d.useMemo)(function(){var e=_.find(function(e){return e.address===D});e&&C(e)},[D,_]),(0,d.useEffect)(function(){y&&I(!1)},[D]);var q=(0,d.useMemo)(function(){if(y&&R&&R.match(/^0x[a-fA-F0-9]{40}$/))return R},[R,y]),H=N({baseToken:P,targetToken:E}),M=H.pairExists,Y=H.poolTotalSupply,F=H.poolBaseReserve,$=H.poolTargetReserve,z=H.baseToTargetPrice,Q=H.targetToBasePrice,J=H.isLoading,K=b({baseToken:P,targetToken:E,queryAddress:q}),X=K.pairExists,G=K.userLPBalance,O=K.userBaseTokenAmount,U=K.userTargetTokenAmount,W=K.lpSharePercentage,ee=(K.poolBaseReserve,K.poolTargetReserve,K.poolTotalSupply,K.isLoading),es=K.hasValidInput,ea=Z.handleSubmit(function(){I(!0)}),en=function(){Z.reset({queryAddress:"",baseTokenAddress:P.address}),I(!1)};if(!e||!E)return(0,i.jsx)(T.Z,{});var et=y&&es,er=et&&X&&G>BigInt(0);return(0,i.jsx)("div",{className:"py-2 px-0",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsx)(f.l0,(0,t._)((0,n._)({},Z),{children:(0,i.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,i.jsx)(h.Zb,{children:(0,i.jsx)(h.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3 font-bold",children:"选择交易对："}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsx)(f.Wi,{control:Z.control,name:"baseTokenAddress",render:function(e){var s=e.field;return(0,i.jsxs)(f.xJ,{children:[(0,i.jsx)(f.NI,{children:(0,i.jsxs)(p.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,i.jsx)(p.i4,{className:"w-full",children:(0,i.jsx)(p.ki,{placeholder:"选择代币"})}),(0,i.jsx)(p.Bw,{children:_.map(function(e){return(0,i.jsx)(p.Ql,{value:e.address,children:e.symbol},e.address)})})]})}),(0,i.jsx)(f.zG,{})]})}}),(0,i.jsx)(f.xJ,{children:(0,i.jsx)("div",{className:"h-10 px-3 py-2 border border-gray-200 rounded-md bg-gray-50 flex items-center text-sm text-gray-700",children:E.symbol})})]})]})})}),E&&(0,i.jsx)(h.Zb,{children:(0,i.jsxs)(h.aY,{className:"p-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3 text-center",children:"交易对统计"}),J?(0,i.jsxs)("div",{className:"text-center py-4",children:[(0,i.jsx)(T.Z,{}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"加载中..."})]}):M?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"LP总数量："}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,j.LH)(Y)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[P.symbol," 总数量："]}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,j.LH)(F)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[E.symbol," 总数量："]}),(0,i.jsx)("span",{className:"font-medium text-secondary",children:(0,j.LH)($)})]})]}),(0,i.jsx)("div",{className:"border-t pt-4",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["1 ",P.symbol," = "]}),(0,i.jsxs)("span",{className:"font-medium",children:[(0,i.jsx)("span",{className:"text-secondary",children:(0,j.LH)(z)})," ",E.symbol]})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("span",{className:"text-gray-600",children:["1 ",E.symbol," = "]}),(0,i.jsxs)("span",{className:"font-medium",children:[(0,i.jsx)("span",{className:"text-secondary",children:(0,j.LH)(Q,5)})," ",P.symbol]})]})]})})]}):(0,i.jsx)("div",{className:"text-center py-4",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"交易对不存在"})})]})}),(0,i.jsx)(h.Zb,{children:(0,i.jsx)(h.aY,{className:"p-4",children:(0,i.jsx)(f.Wi,{control:Z.control,name:"queryAddress",render:function(e){var s=e.field;return(0,i.jsxs)(f.xJ,{children:[(0,i.jsx)(f.lX,{className:"text-base font-semibold text-gray-800 mb-4",children:"查询地址："}),(0,i.jsx)(f.NI,{children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(u.I,(0,t._)((0,n._)({placeholder:"请输入要查询的地址 (0x...)"},s),{className:"flex-1 font-mono text-sm",onKeyPress:function(e){"Enter"===e.key&&ea()}})),(0,i.jsx)(x.z,{type:"submit",disabled:!Z.formState.isValid||y&&ee,children:y&&ee?"查询中...":V?"查询":"重新查询"}),y&&(0,i.jsx)(x.z,{variant:"outline",onClick:en,children:"重置"})]}),!l&&(0,i.jsx)("div",{className:"text-xs text-orange-600",children:"⚠️ 未连接钱包，请手动输入要查询的地址"})]})}),(0,i.jsx)(f.zG,{})]})}})})})]})})),et&&(0,i.jsx)("div",{className:"mt-6",children:ee?(0,i.jsx)(h.Zb,{children:(0,i.jsxs)(h.aY,{className:"p-6 text-center",children:[(0,i.jsx)(T.Z,{}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"查询中..."})]})}):X?er?(0,i.jsx)(h.Zb,{children:(0,i.jsx)(h.aY,{className:"p-6",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"该地址LP情况："}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"LP代币数量"}),(0,i.jsx)("span",{className:"font-medium",children:(0,j.LH)(G)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"所占份额"}),(0,i.jsx)("span",{className:"font-medium",children:(0,j.rl)(W)})]})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"可兑换代币数量："}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:P.symbol}),(0,i.jsx)("span",{className:"font-medium",children:(0,j.LH)(O)})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:E.symbol}),(0,i.jsx)("span",{className:"font-medium",children:(0,j.LH)(U)})]})]})]})]})})}):(0,i.jsx)(h.Zb,{children:(0,i.jsx)(h.aY,{className:"p-6 text-center",children:(0,i.jsx)("div",{className:"text-gray-500",children:(0,i.jsx)("p",{className:"text-sm mt-1",children:"该地址在此交易对中，没有LP代币"})})})}):(0,i.jsx)(h.Zb,{children:(0,i.jsx)(h.aY,{className:"p-6 text-center",children:(0,i.jsxs)("div",{className:"text-gray-500",children:[(0,i.jsx)("p",{className:"font-medium",children:"未找到流动性池"}),(0,i.jsxs)("p",{className:"text-sm mt-1",children:[P.symbol,"-",E.symbol," 交易对不存在"]})]})})})})]})})}}}]);