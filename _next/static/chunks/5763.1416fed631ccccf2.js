try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="48ab56d4-6f9c-4683-8aac-f339311eb87c",e._sentryDebugIdIdentifier="sentry-dbid-48ab56d4-6f9c-4683-8aac-f339311eb87c")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5763],{74193:function(e,n,r){r.d(n,{NI:function(){return N},Wi:function(){return p},l0:function(){return x},lX:function(){return j},pf:function(){return g},xJ:function(){return y},zG:function(){return _}});var s=r(34788),t=r(12796),a=r(72253),i=r(14932),o=r(47702),c=r(85893),l=r(67294),d=r(88426),u=r(87536),m=r(40108),f=r(94193),x=u.RV,b=l.createContext({}),p=function(e){var n=(0,s._)({},(0,t._)(e));return(0,c.jsx)(b.Provider,{value:{name:n.name},children:(0,c.jsx)(u.Qr,(0,a._)({},n))})},v=function(){var e=l.useContext(b),n=l.useContext(h),r=(0,u.Gc)(),s=r.getFieldState,t=r.formState,i=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");var o=n.id;return(0,a._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},i)},h=l.createContext({}),y=l.forwardRef(function(e,n){var r=e.className,s=(0,o._)(e,["className"]),t=l.useId();return(0,c.jsx)(h.Provider,{value:{id:t},children:(0,c.jsx)("div",(0,a._)({ref:n,className:(0,m.cn)("space-y-2",r)},s))})});y.displayName="FormItem";var j=l.forwardRef(function(e,n){var r=e.className,s=(0,o._)(e,["className"]),t=v(),i=t.error,l=t.formItemId;return(0,c.jsx)(f._,(0,a._)({ref:n,className:(0,m.cn)(i&&"text-destructive",r),htmlFor:l},s))});j.displayName="FormLabel";var N=l.forwardRef(function(e,n){var r=(0,s._)({},(0,t._)(e)),i=v(),o=i.error,l=i.formItemId,u=i.formDescriptionId,m=i.formMessageId;return(0,c.jsx)(d.g7,(0,a._)({ref:n,id:l,"aria-describedby":o?"".concat(u," ").concat(m):"".concat(u),"aria-invalid":!!o},r))});N.displayName="FormControl";var g=l.forwardRef(function(e,n){var r=e.className,s=(0,o._)(e,["className"]),t=v().formDescriptionId;return(0,c.jsx)("p",(0,a._)({ref:n,id:t,className:(0,m.cn)("text-sm text-muted-foreground",r)},s))});g.displayName="FormDescription";var _=l.forwardRef(function(e,n){var r=e.className,s=e.children,t=(0,o._)(e,["className","children"]),l=v(),d=l.error,u=l.formMessageId,f=d?String(null==d?void 0:d.message):s;return f?(0,c.jsx)("p",(0,i._)((0,a._)({ref:n,id:u,className:(0,m.cn)("text-sm font-medium text-destructive",r)},t),{children:f})):null});_.displayName="FormMessage"},94193:function(e,n,r){r.d(n,{_:function(){return u}});var s=r(72253),t=r(47702),a=r(85893),i=r(67294),o=r(49102),c=r(12003),l=r(40108),d=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef(function(e,n){var r=e.className,i=(0,t._)(e,["className"]);return(0,a.jsx)(o.f,(0,s._)({ref:n,className:(0,l.cn)(d(),r)},i))});u.displayName=o.f.displayName},15763:function(e,n,r){r.r(n);var s=r(11010),t=r(72253),a=r(14932),i=r(97582),o=r(85893),c=r(67294),l=r(11163),d=r(63448),u=r(56312),m=r(87536),f=r(42130),x=r(62776),b=r(27245),p=r(21774),v=r(74193),h=r(86501),y=r(41664),j=r.n(y),N=r(26858),g=r(33838),_=r(85794),w=r(73591),I=r(95049),k=r(93778),C=r(64777),E=r(42083),F=r(44576);n.default=function(){var e,n=(0,l.useRouter)(),r=(0,f.m)().address,y=((0,c.useContext)(k.M)||{}).token,D=(0,x.K)({address:r}),M=D.data,R=D.error,T=D.isLoading,S=(0,_.hS)("0xc3Da46ED14dBd79922027031BB5D688A81139e01",r),z=(S.balance,S.isPending),A=S.error,B=(0,g.Qo)(),K=B.deposit,Z=B.isPending,L=B.isConfirming,P=B.isConfirmed,V=B.writeError,G=(0,m.cI)({resolver:(0,u.F)((e=(null==M?void 0:M.value)||BigInt(0),d.Ry({depositAmount:d.Z_().nonempty("请输入兑换数量").refine(function(n){try{var r=(0,N.vz)(n);return r>BigInt(0)&&r<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})}))),defaultValues:{depositAmount:""},mode:"onChange"});function J(){return(J=(0,s._)(function(e){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,K((0,N.vz)(e.depositAmount))];case 1:return n.sent(),[3,3];case 2:return console.error(n.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}var W=(0,I.V)().setError;(0,c.useEffect)(function(){P&&(h.Am.success("兑换成功"),W(null),setTimeout(function(){y&&!y.hasEnded?"TKM20"===y.parentTokenSymbol?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(y.symbol):n.back():y&&!y.initialStakeRound?window.location.href="".concat("/interface","/stake/stakelp/?symbol=").concat(y.symbol,"&first=true"):n.back()},2e3))},[P,n]);var H=function(){G.setValue("depositAmount",(0,N.bM)((null==M?void 0:M.value)||BigInt(0)))},Q=(0,w.S)().handleContractError;return((0,c.useEffect)(function(){R&&Q(R,"token"),A&&Q(A,"token"),V&&Q(V,"token")},[R,A,V,Q]),T||z)?(0,o.jsx)(E.Z,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"p-6 pt-0",children:[(0,o.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,o.jsx)(C.Z,{title:"存入".concat(null==M?void 0:M.symbol," 换取 ").concat("TKM20")}),(0,o.jsx)(b.z,{variant:"link",className:"text-secondary border-secondary m-0 p-0",asChild:!0,children:(0,o.jsxs)(j(),{href:"/dex/withdraw?symbol=".concat(null==y?void 0:y.symbol),children:["提现 ",null==M?void 0:M.symbol]})})]}),(0,o.jsx)(v.l0,(0,a._)((0,t._)({},G),{children:(0,o.jsxs)("form",{onSubmit:G.handleSubmit(function(e){return J.apply(this,arguments)}),className:"space-y-4",children:[(0,o.jsx)(v.Wi,{control:G.control,name:"depositAmount",render:function(e){var n,r=e.field;return(0,o.jsxs)(v.xJ,{children:[(0,o.jsx)(v.lX,{children:"存入数量："}),(0,o.jsx)(v.NI,{children:(0,o.jsx)(p.I,(0,t._)({placeholder:"填写 ".concat(null!==(n=null==M?void 0:M.symbol)&&void 0!==n?n:""," 数量"),type:"number",disabled:Z||L,className:"!ring-secondary-foreground"},r))}),(0,o.jsx)(v.zG,{}),(0,o.jsxs)(v.pf,{className:"flex items-center justify-between",children:[(0,o.jsxs)("span",{children:["共 ",T?(0,o.jsx)(E.Z,{}):(0,N.LH)((null==M?void 0:M.value)||BigInt(0))," ",null==M?void 0:M.symbol]}),(0,o.jsx)(b.z,{type:"button",variant:"link",size:"sm",onClick:H,className:"text-secondary p-0 ml-2",disabled:T||Z||L,children:"全部"})]})]})}}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(b.z,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:Z||L||P,children:Z?"存入中...":L?"确认中...":P?"存入成功":"存入"})}),(0,o.jsx)("div",{className:"flex justify-center mb-2",children:(0,o.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ","TKM20"," = 1 ",null==M?void 0:M.symbol]})})]})}))]}),(0,o.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:[(0,o.jsx)("p",{className:"mb-1",children:"说明："}),(0,o.jsxs)("p",{children:["1. ","TKM20"," 是用 WETH9 协议，将 ",null==M?void 0:M.symbol," 包装的符合 ERC20 协议的代币"]}),(0,o.jsxs)("p",{children:["2. 存入的 ",null==M?void 0:M.symbol," 会被协议锁定，随时可以通过提现功能，将"," ","TKM20"," 转回 ",null==M?void 0:M.symbol]})]}),(0,o.jsx)(F.Z,{isLoading:Z||L,text:Z?"提交交易...":"确认交易..."})]})}}}]);