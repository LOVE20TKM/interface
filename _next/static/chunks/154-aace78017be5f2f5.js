"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{60154:(e,s,a)=>{a.d(s,{A:()=>B});var r=a(40854),t=a(37876),n=a(77328),o=a.n(n),l=a(14232),d=a(89099),i=a(16927),c=a(4902),m=a(1081),u=a(8047),f=a(57238),x=a(96409),p=a(11267),h=a(12305),v=a(6960),N=a(3576),g=a(62701),j=a(65699),w=a(50235),y=a(96108),b=a(33276),_=a(11988),A=a(30684),k=w.bL,R=w.l9;w.YJ,w.ZL,w.Pb,w.z6,l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=e.children,o=(0,j._)(e,["className","inset","children"]);return(0,t.jsxs)(w.ZP,(0,g._)((0,N._)({ref:s,className:(0,A.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a)},o),{children:[n,(0,t.jsx)(y.A,{className:"ml-auto"})]}))}).displayName=w.ZP.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)(w.G5,(0,N._)({ref:s,className:(0,A.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},r))}).displayName=w.G5.displayName;var E=l.forwardRef((e,s)=>{var a=e.className,r=e.sideOffset,n=(0,j._)(e,["className","sideOffset"]);return(0,t.jsx)(w.ZL,{children:(0,t.jsx)(w.UC,(0,N._)({ref:s,sideOffset:void 0===r?4:r,className:(0,A.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a)},n))})});E.displayName=w.UC.displayName;var C=l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=(0,j._)(e,["className","inset"]);return(0,t.jsx)(w.q7,(0,N._)({ref:s,className:(0,A.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a)},n))});C.displayName=w.q7.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.children,n=e.checked,o=(0,j._)(e,["className","children","checked"]);return(0,t.jsxs)(w.H_,(0,g._)((0,N._)({ref:s,className:(0,A.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n},o),{children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})}),r]}))}).displayName=w.H_.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.children,n=(0,j._)(e,["className","children"]);return(0,t.jsxs)(w.hN,(0,g._)((0,N._)({ref:s,className:(0,A.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},n),{children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(_.A,{className:"h-2 w-2 fill-current"})})}),r]}))}).displayName=w.hN.displayName,l.forwardRef((e,s)=>{var a=e.className,r=e.inset,n=(0,j._)(e,["className","inset"]);return(0,t.jsx)(w.JU,(0,N._)({ref:s,className:(0,A.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a)},n))}).displayName=w.JU.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)(w.wv,(0,N._)({ref:s,className:(0,A.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=w.wv.displayName;var F=a(51660),z=l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)(F.bL,(0,N._)({ref:s,className:(0,A.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a)},r))});z.displayName=F.bL.displayName,l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)(F._V,(0,N._)({ref:s,className:(0,A.cn)("aspect-square h-full w-full",a)},r))}).displayName=F._V.displayName;var L=l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)(F.H4,(0,N._)({ref:s,className:(0,A.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a)},r))});L.displayName=F.H4.displayName;var U=a(7446),S=a(6973),T=a(30822),q=a(70801),H=a(80395),V=a(97685),D=a(48447);function O(){var e,s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className,a=(0,m.i)(),n=(0,u.F)(),o=n.address,d=n.isConnected,N=n.isConnecting,g=n.isReconnecting,j=(0,f.A)({address:o,chainId:a}).data,w=(0,x.e)(),y=w.connect,_=w.connectors,F=w.error,O=w.isPending,P=(0,p.u)().disconnect,Z=(0,r._)((0,l.useState)(!1),2),I=Z[0],J=Z[1],$=_.find(e=>"injected"===e.id),G=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)),M=(e=(0,i._)(function(){var e;return(0,c.YH)(this,function(s){try{if(!window.ethereum)return V.Ay.error("请安装 MetaMask 或使用支持的钱包浏览器"),[2];if(!$)return V.Ay.error("未找到可用的钱包连接器"),[2];if(O||N)return V.Ay.error("连接请求正在处理中，请稍候"),[2];y({connector:$})}catch(s){console.error("连接钱包失败:",s),(null==s?void 0:s.name)==="UserRejectedRequestError"?V.Ay.error("用户取消了连接请求"):(null==s||null==(e=s.message)?void 0:e.includes("Connector not found"))?V.Ay.error("未找到钱包，请确保已安装并解锁钱包"):V.Ay.error("连接钱包失败，请重试")}return[2]})}),function(){return e.apply(this,arguments)});l.useEffect(()=>{F&&(F.message.includes("User rejected")?V.Ay.error("用户取消了连接请求"):F.message.includes("already pending")?V.Ay.error("已有连接请求在处理中"):V.Ay.error("连接失败: "+F.message))},[F]);var W=(0,l.useRef)(d);(0,l.useEffect)(()=>{!W.current&&d&&o&&V.Ay.success("已连接: ".concat(G(o))),W.current=d},[d,o]),(0,l.useEffect)(()=>{var e=setTimeout(()=>{window.ethereum||console.warn("未检测到注入式钱包")},1e3);return()=>clearTimeout(e)},[]);var Y=N||g||O;return d?(0,t.jsxs)(k,{children:[(0,t.jsx)(R,{asChild:!0,children:(0,t.jsx)(v.$,{variant:"outline",className:(0,A.cn)("h-auto px-3 py-1.5 rounded-xl border hover:border-blue-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",s),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(z,{className:"w-8 h-8",children:(0,t.jsx)(L,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xs font-bold",children:o?o.slice(2,4).toUpperCase():"W"})}),(0,t.jsxs)("div",{className:"flex flex-col items-start min-w-0",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"font-mono text-sm font-medium text-gray-900",children:o?G(o):""})}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:(0,t.jsxs)("span",{className:"font-semibold",children:[j?(e=>{if(!e)return"0";var s=parseFloat((0,h.c)(e));return 0===s?"0":s<1e-4?"<0.0001":s<1?s.toFixed(4):s<100?s.toFixed(2):s.toFixed(0)})(j.value):"0"," ",(null==j?void 0:j.symbol)||"ETH"]})})]}),(0,t.jsx)(T.A,{className:"w-4 h-4 text-gray-500 ml-2"})]})})}),(0,t.jsxs)(E,{align:"end",className:"w-64 p-2 rounded-xl shadow-xl border",children:[(0,t.jsxs)("div",{className:"px-3 py-2 mb-2 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"钱包地址"}),o&&(0,t.jsx)(D.CopyToClipboard,{text:o,onCopy:(e,s)=>{s?(J(!0),V.Ay.success("地址已复制到剪贴板"),setTimeout(()=>J(!1),2e3)):V.Ay.error("复制失败")},children:(0,t.jsx)(v.$,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"已复制"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.A,{className:"w-3 h-3 mr-1"}),"复制"]})})})]}),(0,t.jsx)("p",{className:"font-mono text-xs text-gray-600 mt-1 break-all",children:o})]}),(0,t.jsxs)(C,{onClick:()=>{try{P(),V.Ay.success("已断开钱包连接")}catch(e){console.error("断开连接失败:",e),V.Ay.error("断开连接失败")}},className:"rounded-lg text-red-600 focus:text-red-600 focus:bg-red-50",children:[(0,t.jsx)(H.A,{className:"w-4 h-4 mr-3"}),"断开连接"]})]})]}):(0,t.jsx)(v.$,{onClick:M,disabled:Y,className:(0,A.cn)("bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",s),children:Y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.A,{className:"w-4 h-4 mr-2 animate-spin"}),"连接中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"连接钱包"]})})}var P=a(86739),Z=(0,a(47137).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),I=l.forwardRef((e,s)=>{var a=e.className,r=e.variant,n=(0,j._)(e,["className","variant"]);return(0,t.jsx)("div",(0,N._)({ref:s,role:"alert",className:(0,A.cn)(Z({variant:r}),a)},n))});I.displayName="Alert";var J=l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)("h5",(0,N._)({ref:s,className:(0,A.cn)("mb-1 font-medium leading-none tracking-tight",a)},r))});J.displayName="AlertTitle";var $=l.forwardRef((e,s)=>{var a=e.className,r=(0,j._)(e,["className"]);return(0,t.jsx)("div",(0,N._)({ref:s,className:(0,A.cn)("text-sm [&_p]:leading-relaxed",a)},r))});$.displayName="AlertDescription";var G=a(25239),M=()=>{var e=(0,G.q)(),s=e.error,a=e.setError,n=(0,r._)((0,l.useState)(!1),2),o=n[0],d=n[1];return((0,l.useEffect)(()=>{s&&d(!0)},[s,a]),o&&s)?(0,t.jsxs)(I,{variant:"destructive",children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),(0,t.jsx)(J,{children:s.name}),(0,t.jsx)($,{children:s.message})]}):null},W=a(35405),Y=a(83416);let B=e=>{var s=e.title,a=(0,u.F)(),n=a.address,i=a.chain,c="thinkium70001",m=(0,G.q)().setError,f=((0,l.useContext)(Y.N)||{}).token,x=((0,d.useRouter)(),(0,r._)((0,l.useState)(0),2)),p=x[0],h=x[1],v=(0,r._)((0,l.useState)(!1),2),N=v[0],g=v[1];return(0,l.useEffect)(()=>{localStorage.getItem("networkAutoRefreshed")&&localStorage.removeItem("networkAutoRefreshed");var e=e=>{if(console.error("handleError:",e),e&&e.message&&(e.message.includes("f is not a function")||e.message.includes("User rejected")&&e.message.includes("Details:"))){var s=Date.now();s-p>3e4&&!N&&(h(s),g(!0),setTimeout(()=>{localStorage.setItem("networkAutoRefreshed","true"),window.location.reload()},2e3))}};window.addEventListener("error",s=>{s.error&&"object"==typeof s.error&&e(s.error)});var s=window.onerror;return window.onerror=function(a,r,t,n,o){return e(o),!!s&&s(a,r,t,n,o)},window.addEventListener("unhandledrejection",s=>{console.log("unhandledrejection:",s),e(s.reason)}),()=>{window.onerror=s,window.removeEventListener("unhandledrejection",s=>{e(s.reason)})}},[p,N]),(0,l.useEffect)(()=>{n&&!i?m({name:"钱包网络错误",message:"请切换到 ".concat(c," 网络")}):m(null)},[n,i,m,c]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o(),{children:[(0,t.jsx)("title",{children:"".concat(null==f?void 0:f.symbol)}),(0,t.jsx)("meta",{name:"".concat(s," - ").concat(null==f?void 0:f.symbol),content:"A Web3 DApp for LOVE20 token management"})]}),(0,t.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)(W.x2,{className:"-ml-1"})}),(0,t.jsx)(O,{})]}),(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(M,{})})]})}}}]);