try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5bcb302a-e30c-43ae-9e5f-45a7b08398f5",e._sentryDebugIdIdentifier="sentry-dbid-5bcb302a-e30c-43ae-9e5f-45a7b08398f5")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5763],{74193:function(e,n,r){r.d(n,{NI:function(){return j},Wi:function(){return b},l0:function(){return h},lX:function(){return y},pf:function(){return N},xJ:function(){return x},zG:function(){return w}});var t=r(34788),s=r(12796),o=r(72253),i=r(14932),a=r(47702),c=r(85893),l=r(67294),u=r(88426),d=r(87536),f=r(40108),m=r(94193),h=d.RV,v=l.createContext({}),b=function(e){var n=(0,t._)({},(0,s._)(e));return(0,c.jsx)(v.Provider,{value:{name:n.name},children:(0,c.jsx)(d.Qr,(0,o._)({},n))})},p=function(){var e=l.useContext(v),n=l.useContext(g),r=(0,d.Gc)(),t=r.getFieldState,s=r.formState,i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");var a=n.id;return(0,o._)({id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message")},i)},g=l.createContext({}),x=l.forwardRef(function(e,n){var r=e.className,t=(0,a._)(e,["className"]),s=l.useId();return(0,c.jsx)(g.Provider,{value:{id:s},children:(0,c.jsx)("div",(0,o._)({ref:n,className:(0,f.cn)("space-y-2",r)},t))})});x.displayName="FormItem";var y=l.forwardRef(function(e,n){var r=e.className,t=(0,a._)(e,["className"]),s=p(),i=s.error,l=s.formItemId;return(0,c.jsx)(m._,(0,o._)({ref:n,className:(0,f.cn)(i&&"text-destructive",r),htmlFor:l},t))});y.displayName="FormLabel";var j=l.forwardRef(function(e,n){var r=(0,t._)({},(0,s._)(e)),i=p(),a=i.error,l=i.formItemId,d=i.formDescriptionId,f=i.formMessageId;return(0,c.jsx)(u.g7,(0,o._)({ref:n,id:l,"aria-describedby":a?"".concat(d," ").concat(f):"".concat(d),"aria-invalid":!!a},r))});j.displayName="FormControl";var N=l.forwardRef(function(e,n){var r=e.className,t=(0,a._)(e,["className"]),s=p().formDescriptionId;return(0,c.jsx)("p",(0,o._)({ref:n,id:s,className:(0,f.cn)("text-sm text-muted-foreground",r)},t))});N.displayName="FormDescription";var w=l.forwardRef(function(e,n){var r=e.className,t=e.children,s=(0,a._)(e,["className","children"]),l=p(),u=l.error,d=l.formMessageId,m=u?String(null==u?void 0:u.message):t;return m?(0,c.jsx)("p",(0,i._)((0,o._)({ref:n,id:d,className:(0,f.cn)("text-sm font-medium text-destructive",r)},s),{children:m})):null});w.displayName="FormMessage"},94193:function(e,n,r){r.d(n,{_:function(){return d}});var t=r(72253),s=r(47702),o=r(85893),i=r(67294),a=r(49102),c=r(12003),l=r(40108),u=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(function(e,n){var r=e.className,i=(0,s._)(e,["className"]);return(0,o.jsx)(a.f,(0,t._)({ref:n,className:(0,l.cn)(u(),r)},i))});d.displayName=a.f.displayName},64777:function(e,n,r){var t=r(85893);n.Z=function(e){var n=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:n})})}},15763:function(e,n,r){r.r(n);var t=r(11010),s=r(72253),o=r(14932),i=r(97582),a=r(85893),c=r(67294),l=r(11163),u=r(45901),d=r(56312),f=r(87536),m=r(42130),h=r(62776),v=r(27245),b=r(21774),p=r(74193),g=r(86501),x=r(41664),y=r.n(x),j=r(91529),N=r(33838),w=r(85794),_=r(73591),k=r(95049),C=r(93778),I=r(64777),T=r(42083),P=r(44576);n.default=function(){var e,n=(0,l.useRouter)(),r=(0,m.m)().address,x=((0,c.useContext)(C.M)||{}).token,M=(0,h.K)({address:r}),E=M.data,F=M.error,D=M.isLoading,S=(0,w.hS)("0xc3Da46ED14dBd79922027031BB5D688A81139e01",r),R=(S.balance,S.isPending),A=S.error,z=(0,N.Qo)(),Z=z.deposit,O=z.isPending,B=z.isConfirming,V=z.isConfirmed,J=z.writeError,K=(0,f.cI)({resolver:(0,d.F)((e=(null==E?void 0:E.value)||BigInt(0),u.Ry({depositAmount:u.Z_().nonempty("请输入兑换数量").refine(function(n){try{var r=(0,j.vz)(n);return r>BigInt(0)&&r<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})}))),defaultValues:{depositAmount:""},mode:"onChange"});function H(){return(H=(0,t._)(function(e){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Z((0,j.vz)(e.depositAmount))];case 1:return n.sent(),[3,3];case 2:return console.error(n.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}var q=(0,k.V)().setError;(0,c.useEffect)(function(){V&&(g.Am.success("兑换成功"),q(null),setTimeout(function(){x&&!x.hasEnded?"TKM20"===x.parentTokenSymbol?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(x.symbol):n.back():x&&!x.initialStakeRound?window.location.href="".concat("/interface","/stake/stakelp/?symbol=").concat(x.symbol,"&first=true"):n.back()},2e3))},[V,n]);var G=function(){K.setValue("depositAmount",(0,j.bM)((null==E?void 0:E.value)||BigInt(0)))},L=(0,_.S)().handleContractError;return((0,c.useEffect)(function(){F&&L(F,"token"),A&&L(A,"token"),J&&L(J,"token")},[F,A,J,L]),D||R)?(0,a.jsx)(T.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6 pt-0",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)(I.Z,{title:"存入".concat(null==E?void 0:E.symbol," 换取 ").concat("TKM20")}),(0,a.jsx)(v.z,{variant:"link",className:"text-secondary border-secondary m-0 p-0",asChild:!0,children:(0,a.jsxs)(y(),{href:"/dex/withdraw?symbol=".concat(null==x?void 0:x.symbol),children:["提现 ",null==E?void 0:E.symbol]})})]}),(0,a.jsx)(p.l0,(0,o._)((0,s._)({},K),{children:(0,a.jsxs)("form",{onSubmit:K.handleSubmit(function(e){return H.apply(this,arguments)}),className:"space-y-4",children:[(0,a.jsx)(p.Wi,{control:K.control,name:"depositAmount",render:function(e){var n,r=e.field;return(0,a.jsxs)(p.xJ,{children:[(0,a.jsx)(p.lX,{children:"存入数量："}),(0,a.jsx)(p.NI,{children:(0,a.jsx)(b.I,(0,s._)({placeholder:"填写 ".concat(null!==(n=null==E?void 0:E.symbol)&&void 0!==n?n:""," 数量"),type:"number",disabled:O||B,className:"!ring-secondary-foreground"},r))}),(0,a.jsx)(p.zG,{}),(0,a.jsxs)(p.pf,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["共 ",D?(0,a.jsx)(T.Z,{}):(0,j.LH)((null==E?void 0:E.value)||BigInt(0))," ",null==E?void 0:E.symbol]}),(0,a.jsx)(v.z,{type:"button",variant:"link",size:"sm",onClick:G,className:"text-secondary p-0 ml-2",disabled:D||O||B,children:"全部"})]})]})}}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(v.z,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:O||B||V,children:O?"存入中...":B?"确认中...":V?"存入成功":"存入"})}),(0,a.jsx)("div",{className:"flex justify-center mb-2",children:(0,a.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ","TKM20"," = 1 ",null==E?void 0:E.symbol]})})]})}))]}),(0,a.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:[(0,a.jsx)("p",{className:"mb-1",children:"说明："}),(0,a.jsxs)("p",{children:["1. ","TKM20"," 是用 WETH9 协议，将 ",null==E?void 0:E.symbol," 包装的符合 ERC20 协议的代币"]}),(0,a.jsxs)("p",{children:["2. 存入的 ",null==E?void 0:E.symbol," 会被协议锁定，随时可以通过提现功能，将"," ","TKM20"," 转回 ",null==E?void 0:E.symbol]})]}),(0,a.jsx)(P.Z,{isLoading:O||B,text:O?"提交交易...":"确认交易..."})]})}},85794:function(e,n,r){r.d(n,{A5:function(){return h},DA:function(){return p},hS:function(){return f},l3:function(){return b},yA:function(){return v},yG:function(){return d},z4:function(){return m}});var t=r(11010),s=r(97582),o=r(67294),i=r(71104),a=r(37541),c=r(37742),l=r(37474),u=r(84689),d=function(e,n,r){var t=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=(0,i.u)({address:e,abi:a.O,functionName:"allowance",args:[n,r],query:{enabled:!!e&&!!n&&!!r&&t}}),o=s.data,l=s.isPending,u=s.error,d=s.refetch;return{allowance:void 0!==o?(0,c.Z)(o):void 0,isPending:l,error:u,refetch:d}},f=function(e,n){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],t=(0,i.u)({address:e,abi:a.O,functionName:"balanceOf",args:[n],query:{enabled:!!e&&!!n&&r}}),s=t.data,o=t.isPending,l=t.error,u=t.refetch;return{balance:void 0!==s?(0,c.Z)(s):void 0,isPending:o,error:l,refetch:u}},m=function(e){var n=(0,i.u)({address:e,abi:a.O,functionName:"symbol",args:[],query:{enabled:!!e}});return{symbol:n.data,isPending:n.isPending,error:n.error}},h=function(e){var n=(0,i.u)({address:e,abi:a.O,functionName:"totalSupply",args:[],query:{enabled:!!e}}),r=n.data,t=n.isPending,s=n.error;return{totalSupply:void 0!==r?(0,c.Z)(r):void 0,isPending:t,error:s}};function v(e){var n,r=(0,l.e9)(a.O,e,"approve"),i=r.execute,c=r.isPending,d=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,v=r.isTukeMode,b=(n=(0,t._)(function(n,r){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交approve交易:",{token:e,spender:n,value:r,isTukeMode:v}),[4,i([n,r])];case 1:return[2,t.sent()]}})}),function(e,r){return n.apply(this,arguments)});return(0,o.useEffect)(function(){h&&console.log("approve tx hash:",h),m&&(console.log("提交approve交易错误:"),(0,u.Vh)(m),(0,u.H)(m))},[h,m]),{approve:b,isPending:c,isConfirming:d,writeError:m,isConfirmed:f,hash:h,isTukeMode:v}}function b(e){var n,r=(0,l.e9)(a.O,e,"burnForParentToken"),i=r.execute,c=r.isPending,d=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,v=r.isTukeMode,b=(n=(0,t._)(function(n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return console.log("提交burnForParentToken交易:",{token:e,amount:n,isTukeMode:v}),[4,i([n])];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)});return(0,o.useEffect)(function(){h&&console.log("burnForParentToken tx hash:",h),m&&(console.log("提交burnForParentToken交易错误:"),(0,u.Vh)(m),(0,u.H)(m))},[h,m]),{burnForParentToken:b,isPending:c,isConfirming:d,writeError:m,isConfirmed:f,hash:h,isTukeMode:v}}function p(e){var n,r=(0,l.e9)(a.O,e,"transfer"),i=r.execute,c=r.isPending,d=r.isConfirming,f=r.isConfirmed,m=r.error,h=r.hash,v=r.isTukeMode,b=(n=(0,t._)(function(n,r){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return console.log("提交transfer交易:",{token:e,to:n,amount:r,isTukeMode:v}),[4,i([n,r])];case 1:return[2,t.sent()]}})}),function(e,r){return n.apply(this,arguments)});return(0,o.useEffect)(function(){h&&console.log("transfer tx hash:",h),m&&(console.log("提交transfer交易错误:"),(0,u.Vh)(m),(0,u.H)(m))},[h,m]),{transfer:b,isPending:c,isConfirming:d,writeError:m,isConfirmed:f,hash:h,isTukeMode:v}}}}]);