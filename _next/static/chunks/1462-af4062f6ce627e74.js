try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="aec1647e-2067-4ea9-928c-0ba3756e2d1f",e._sentryDebugIdIdentifier="sentry-dbid-aec1647e-2067-4ea9-928c-0ba3756e2d1f")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1462],{11418:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(85893),s=t(67294),i=t(42130),a=t(11163),o=t(41664),c=t.n(o),l=t(93778),d=t(91529),u=t(27245);function f(e){var n=e.isJoined,t=e.actionId,i=(e.userJoinedAmount,e.isPending),a=((0,s.useContext)(l.M)||{}).token;if(!a)return null;var o="/acting/join?symbol=".concat(a.symbol,"&id=").concat(t),d="/my/myaction?symbol=".concat(a.symbol,"&id=").concat(t);return void 0!==i&&i?(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("div",{className:"loading loading-spinner loading-md"})}):(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:n?(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:d,children:"我的参与 >>"}):(0,r.jsx)(u.z,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(c(),{href:o,children:"加入行动 >>"})})})}function h(e){var n=e.actionInfo,t=e.participantCount,o=e.totalAmount,u=e.isJoined,h=e.userJoinedAmount,x=e.isPending,m=e.showActionButtons,v=void 0===m||m,y=e.linkToActionInfo,g=void 0!==y&&y,j=((0,s.useContext)(l.M)||{}).token,p=(0,i.m)().address,b=(0,a.useRouter)();if(!j)return(0,r.jsx)("div",{children:"Token信息加载中..."});var N=o?(0,d.LH)(o):"0";return(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 pt-2 pb-2 text-sm my-4 ".concat(g?"cursor-pointer hover:bg-gray-200 transition-colors":""),onClick:function(){g&&j&&b.push("/action/info?symbol=".concat(j.symbol,"&id=").concat(n.head.id))},children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("h1",{className:"text-lg mb-1",children:(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"No."}),(0,r.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:n.head.id.toString()}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:n.body.title})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与代币总数:"}),(0,r.jsxs)("span",{className:"font-mono text-secondary",children:[N," "]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与地址数:"}),(0,r.jsx)("span",{className:"font-mono text-secondary",children:(null==t?void 0:t.toString())||"0"})]})]}),v&&n&&p&&(0,r.jsx)(f,{isJoined:u,actionId:n.head.id,userJoinedAmount:h,isPending:x}),!v&&(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?symbol=".concat(null==j?void 0:j.symbol,"&id=").concat(n.head.id),children:"行动详情 >>"})})]})}},90963:function(e,n,t){var r=t(91309),s=t(85893),i=t(67294),a=t(27245),o=t(26986);n.Z=function(e){var n=e.currentRound,t=e.handleChangedRound,c=(0,r._)((0,i.useState)(!1),2),l=c[0],d=c[1],u=function(e){t(e),d(!1)},f=(0,i.useRef)(null),h=(0,i.useRef)(!1);return(0,s.jsxs)(o.dy,{open:l,onOpenChange:d,children:[(0,s.jsx)(o.Qz,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"link",className:"text-secondary no-underline pl-2 pr-1",children:"切换轮次"})}),(0,s.jsxs)(o.sc,{className:"z-[9999] min-h-[25vh]",children:[(0,s.jsxs)(o.OX,{children:[(0,s.jsx)(o.iI,{}),(0,s.jsx)(o.u6,{})]}),(0,s.jsx)("div",{className:"px-4 flex-grow",children:(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:Array.from({length:Number(n)},function(e,t){var r=Number(n)-t;return(0,s.jsx)(a.z,{variant:"ghost",className:"w-full p-2 text-center rounded-none hover:bg-gray-100 touch-manipulation",onPointerDown:function(e){"touch"===e.pointerType?f.current=e.clientY:f.current=null,h.current=!1},onPointerMove:function(e){"touch"===e.pointerType&&null!==f.current&&Math.abs(e.clientY-f.current)>10&&(h.current=!0)},onPointerUp:function(e){"touch"===e.pointerType?(h.current||u(r),f.current=null,h.current=!1):u(r)},style:{touchAction:"manipulation"},children:(0,s.jsxs)("span",{className:"text-lg",children:["第 ",r," 轮"]})},r)})})}),(0,s.jsx)(o.ze,{children:(0,s.jsx)(o.uh,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"outline",children:"关闭"})})})]})]})}},44746:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(72253),s=t(14932),i=t(91309),a=t(85893),o=t(67294),c=t(74598),l=t(35810),d=t(26986),u=t(79995);function f(e){var n=e.title,t=e.content,f=e.className,h=void 0===f?"":f,x=(0,i._)((0,o.useState)(!1),2),m=x[0],v=x[1],y=(0,u.Z)("(min-width: 768px)"),g=o.forwardRef(function(e,t){return(0,a.jsx)("button",(0,s._)((0,r._)({ref:t,type:"button",className:"inline-flex items-center p-1 rounded hover:bg-gray-100 transition-colors ".concat(h),"aria-label":"查看".concat(n)},e),{children:(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-500 hover:text-gray-700"})}))});g.displayName="TriggerButton";var j=function(){return(0,a.jsx)("div",{className:"text-gray-700",children:"string"==typeof t?(0,a.jsx)("p",{className:"leading-relaxed text-sm",children:t}):t})};return(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsxs)(l.Vq,{open:m,onOpenChange:v,children:[(0,a.jsx)(l.hg,{asChild:!0,children:(0,a.jsx)(g,{})}),(0,a.jsxs)(l.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(l.$N,{className:"text-lg font-semibold",children:n}),(0,a.jsx)("div",{className:"pt-2 pb-4",children:(0,a.jsx)(j,{})})]})]}),!y&&(0,a.jsxs)(d.dy,{open:m,onOpenChange:v,children:[(0,a.jsx)(d.Qz,{asChild:!0,children:(0,a.jsx)(g,{})}),(0,a.jsxs)(d.sc,{className:"pb-safe",children:[(0,a.jsx)(d.OX,{children:(0,a.jsx)(d.iI,{className:"text-lg font-semibold",children:n})}),(0,a.jsx)("div",{className:"px-4 pb-8 mb-10",children:(0,a.jsx)(j,{})})]})]})]})}},64777:function(e,n,t){var r=t(85893);n.Z=function(e){var n=e.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:n})})}},36893:function(e,n,t){t.d(n,{r:function(){return d}});var r=t(91309),s=t(67294),i=t(67516),a=t(7724),o=t(98482),c=t(37742),l="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",d=function(e){var n=e.tokenAddress,t=e.actionId,d=e.account,u=(0,s.useMemo)(function(){if(!n||void 0===t)return[];var e=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:a.d,functionName:"actionInfo",args:[n,t]},{address:l,abi:o.S,functionName:"amountByActionId",args:[n,t]},{address:l,abi:o.S,functionName:"numOfAccounts",args:[n,t]},{address:l,abi:o.S,functionName:"currentRound",args:[]}];return d&&e.push({address:l,abi:o.S,functionName:"amountByActionIdByAccount",args:[n,t,d]}),e},[n,t,d]),f=(0,i.N)({contracts:u,query:{enabled:!!n&&void 0!==t&&u.length>0}}),h=f.data,x=f.isPending,m=f.error;return(0,s.useMemo)(function(){if(!h||!n||void 0===t)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,userJoinedAmount:void 0,isJoined:!1,currentRound:void 0,isPending:x,error:m};var e=(0,r._)(h,5),s=e[0],i=e[1],a=e[2],o=e[3],l=e[4],d=null==s?void 0:s.result,u=(null==i?void 0:i.result)?(0,c.Zu)(i.result):void 0,f=(null==a?void 0:a.result)?(0,c.Zu)(a.result):void 0,v=(null==o?void 0:o.result)?(0,c.Zu)(o.result):void 0,y=(null==l?void 0:l.result)?(0,c.Zu)(l.result):void 0,g=!!y&&y>BigInt(0);return{actionInfo:d,participantCount:f,totalAmount:u,userJoinedAmount:y,isJoined:g,currentRound:v,isPending:x,error:m}},[h,n,t,x,m])}},67516:function(e,n,t){t.d(n,{N:function(){return u}});var r=t(72253),s=t(14932),i=t(97995),a=t(36100),o=t(67294),c=t(95159),l=t(39360),d=t(78942);function u(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.contracts,u=void 0===t?[]:t,f=n.query,h=void 0===f?{}:f,x=(0,d.Z)(n),m=(0,l.x)({config:x}),v=function(e,n={}){return{async queryFn({queryKey:t}){let r=[],s=t[1].contracts.length;for(let e=0;e<s;e++){let s=t[1].contracts[e],i=(n.contracts?.[e]).abi;r.push({...s,abi:i})}let{scopeKey:a,...o}=t[1];return(0,i.J)(e,{...o,contracts:r})},queryKey:function(e={}){let n=[];for(let t of e.contracts??[]){let{abi:r,...s}=t;n.push({...s,chainId:s.chainId??e.chainId})}return["readContracts",(0,a.OP)({...e,contracts:n})]}(n)}}(x,(0,s._)((0,r._)({},n),{chainId:m})),y=(0,o.useMemo)(function(){var e,n=!1,t=!0,r=!1,s=void 0;try{for(var i,a=u[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,c=o.abi,l=o.address,d=o.functionName;if(!c||!l||!d){n=!1;break}n=!0}}catch(e){r=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw s}}return!!(n&&(null===(e=h.enabled)||void 0===e||e))},[u,h.enabled]);return(0,c.aM)((0,s._)((0,r._)({},v,h),{enabled:y,structuralSharing:null!==(e=h.structuralSharing)&&void 0!==e?e:a.if}))}}}]);