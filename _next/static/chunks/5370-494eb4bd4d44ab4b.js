try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="58a4d44d-73dc-40cc-b17c-38a963ad3ddd",e._sentryDebugIdIdentifier="sentry-dbid-58a4d44d-73dc-40cc-b17c-38a963ad3ddd")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5370],{20725:function(e,n,t){var r=t(85893),s=t(67294),i=t(93566),a=t(73591),o=t(93778),c=t(91529),l=t(72107),d=t(31084),u=t(27460),f=t(42083);n.Z=function(e){var n=e.actionId,t=e.round,h=e.showSubmitter,m=(e.showVerifyHistory,e.onActionInfo),x=((0,s.useContext)(o.M)||{}).token,g=(0,i.dI)(null==x?void 0:x.address,n),p=g.actionInfo,v=g.isPending,b=g.error;(0,s.useEffect)(function(){m&&p&&m(p)},[p]);var j=(0,i.sK)(null==x?void 0:x.address,h?t:BigInt(0),n),y=j.submitInfo,N=j.isPending,w=j.error,k=(null==y?void 0:y.submitter)||"N/A",I=(0,a.S)().handleContractError;return((0,s.useEffect)(function(){b&&I(b,"submit"),w&&I(w,"submit")},[b,w]),v)?(0,r.jsx)(f.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==p?void 0:p.head.id.toString()]}),(0,r.jsx)("span",{className:"text-xl font-bold text-black",children:null==p?void 0:p.body.title})]}),(0,r.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,r.jsx)(u.Z,{address:null==p?void 0:p.head.author})]}),h&&(0,r.jsxs)("div",{className:"flex items-center",children:["推举人"," ",N?(0,r.jsx)(f.Z,{}):(0,r.jsx)(u.Z,{address:k})]})]})]}),(0,r.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,r.jsx)("p",{className:"text-greyscale-500",children:(0,c.LH)((null==p?void 0:p.body.minStake)||BigInt(0))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"最大激励地址数"}),(0,r.jsx)("p",{className:"text-greyscale-500",children:(null==p?void 0:p.body.maxRandomAccounts.toString())||"-"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold mb-2",children:"验证规则"}),(0,r.jsx)("div",{className:"text-greyscale-500",children:(0,r.jsx)(l.L,{text:null==p?void 0:p.body.verificationRule,preserveLineBreaks:!0})})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold mb-2",children:"报名参加行动时，行动者要提供的信息"}),(null==p?void 0:p.body.verificationKeys)&&(null==p?void 0:p.body.verificationKeys.length)>0?(0,r.jsx)("ul",{className:"list-disc pl-5",children:p.body.verificationKeys.map(function(e,n){return(0,r.jsxs)("li",{className:"text-greyscale-500",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-greyscale-900 mb-1",children:[(0,r.jsx)(d.Z,{text:e,showWarning:!0})," :"]}),(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{text:p.body.verificationInfoGuides[n],showWarning:!0,preserveLineBreaks:!0})})]},n)})}):(0,r.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,r.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==p?void 0:p.body.whiteListAddress)&&"0x0000000000000000000000000000000000000000"!==p.body.whiteListAddress?(0,r.jsx)("span",{className:"flex items-center mr-2",children:(0,r.jsx)(u.Z,{address:p.body.whiteListAddress})}):"无限制"})]})]})})]})}},27460:function(e,n,t){var r=t(91309),s=t(85893),i=t(67294),a=t(74855),o=t(78865),c=t(18289),l=t(86501),d=t(91529);n.Z=function(e){var n=e.address,t=e.word,u=e.showCopyButton,f=e.showAddress,h=void 0===f||f,m=e.colorClassName,x=void 0===m?"":m,g=e.colorClassName2,p=void 0===g?"":g,v=(0,r._)((0,i.useState)(!1),2),b=v[0],j=v[1];return(0,i.useEffect)(function(){j(!1)},[n]),(0,s.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[t&&(0,s.jsx)("span",{className:"text-xs",children:t}),h&&!p&&(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=x?x:"text-greyscale-500"),children:(0,d.Vu)(n)}),h&&p&&(0,s.jsxs)("span",{className:"text-[0px]",children:[(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=x?x:"text-greyscale-500"),children:"".concat(n.substring(0,6),"...")}),(0,s.jsx)("span",{className:"font-mono text-xs ".concat(p),children:"".concat(n.substring(n.length-4))})]}),(void 0===u||u)&&(0,s.jsx)(a.CopyToClipboard,{text:n,onCopy:function(e,n){n?(j(!0),setTimeout(function(){return j(!1)},2e3)):l.ZP.error("复制失败")},children:(0,s.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:b?(0,s.jsx)(o.Z,{className:"h-4 w-4 ".concat(null!=x?x:"text-greyscale-500")}):(0,s.jsx)(c.Z,{className:"h-4 w-4 ".concat(null!=x?x:"text-greyscale-500")})})})]})}},42083:function(e,n,t){var r=t(85893),s=t(23432);n.Z=function(){return(0,r.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},31084:function(e,n,t){var r=t(85893);t(67294);var s=t(45655);n.Z=function(e){var n=e.text,t=e.className,i=e.maxLength,a=e.showWarning,o=e.preserveLineBreaks;if(!n)return null;var c=n;i&&n.length>i&&(c=n.substring(0,i)+"...");var l=(0,s.KL)(c,void 0!==o&&o),d=n!==c||/<[^>]*>/g.test(n)||/script|javascript|onclick|onerror|onload/gi.test(n);return(0,r.jsxs)("span",{className:void 0===t?"":t,children:[(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:l}}),void 0!==a&&a&&d&&(0,r.jsx)("span",{className:"text-yellow-500 text-xs ml-1",children:"⚠️ 内容已被安全过滤"})]})}},93566:function(e,n,t){t.d(n,{$A:function(){return m},Bk:function(){return h},Xo:function(){return p},dI:function(){return f},qd:function(){return g},sK:function(){return x}});var r=t(11010),s=t(97582),i=t(67294),a=t(71104),o=t(7724),c=t(37742),l=t(84689),d=t(37474),u="0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",f=function(e,n){var t=(0,a.u)({address:u,abi:o.d,functionName:"actionInfo",args:[e,n||BigInt(0)],query:{enabled:!!e&&void 0!==n}});return{actionInfo:t.data,isPending:t.isPending,error:t.error}},h=function(){var e=(0,a.u)({address:u,abi:o.d,functionName:"currentRound",args:[]}),n=e.data,t=e.isPending,r=e.error;return{currentRound:(0,c.Zu)(n),isPending:t,error:r}},m=function(e,n,t){var r=(0,a.u)({address:u,abi:o.d,functionName:"isSubmitted",args:[e,n,t]});return{isSubmitted:r.data,isPending:r.isPending,error:r.error}},x=function(e,n,t){var r=(0,a.u)({address:u,abi:o.d,functionName:"submitInfo",args:[e,n,t],query:{enabled:!!e&&!!n}});return{submitInfo:r.data,isPending:r.isPending,error:r.error}};function g(){var e,n=(0,d.e9)(o.d,u,"submit"),t=n.execute,a=n.isPending,c=n.isConfirming,f=n.isConfirmed,h=n.error,m=n.hash,x=n.isTukeMode,g=(e=(0,r._)(function(e,n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,t([e,n])];case 1:return[2,r.sent()]}})}),function(n,t){return e.apply(this,arguments)});return(0,i.useEffect)(function(){h&&((0,l.Vh)(h),(0,l.H)(h))},[m,h,f]),{submit:g,isPending:a,isConfirming:c,writeError:h,isConfirmed:f,hash:m,isTukeMode:x}}function p(){var e,n=(0,d.e9)(o.d,u,"submitNewAction"),t=n.execute,a=n.isPending,c=n.isConfirming,f=n.isConfirmed,h=n.error,m=n.hash,x=n.isTukeMode,g=(e=(0,r._)(function(e,n){return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,t([e,n])];case 1:return[2,r.sent()]}})}),function(n,t){return e.apply(this,arguments)});return(0,i.useEffect)(function(){h&&((0,l.Vh)(h),(0,l.H)(h))},[m,h,f]),{submitNewAction:g,isPending:a,isConfirming:c,writeError:h,isConfirmed:f,hash:m,isTukeMode:x}}},45655:function(e,n,t){t.d(n,{Hg:function(){return c},KL:function(){return a},lt:function(){return o},rJ:function(){return l}});var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};function s(e){return e?e.replace(/[&<>"'/]/g,function(e){return r[e]||e}):""}function i(e){if(!e)return"";var n=e.replace(/<[^>]*>/g,"");return s(n=(n=(n=n.replace(/javascript:/gi,"")).replace(/on\w+\s*=/gi,"")).replace(/data:[^;]*;base64,/gi,""))}function a(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var t=/(https?:\/\/[^\s]+)/g;if(0===(e.match(t)||[]).length){var r=s(e);return n?r.replace(/\n/g,"<br>"):r}var i=e;return i=(i=(i=(i=i.replace(/<script[^>]*>.*?<\/script>/gi,"")).replace(/<[^>]*on\w+\s*=\s*[^>]*>/gi,"")).replace(/javascript:/gi,"")).split(t).map(function(e,n){return n%2==0?function(e){if(!e)return"";var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,function(e){return n[e]||e})}(e):o(e)?e:s(e)}).join(""),n&&(i=i.replace(/\n/g,"<br>")),i}function o(e){if(!e)return!1;try{var n=new URL(e);if(!["https:","http:"].includes(n.protocol))return!1;var t=n.hostname.toLowerCase(),r=e.toLowerCase();if(r.includes("javascript:")||r.includes("data:")||r.includes("vbscript:")||r.includes("file:")||["phishing-site.com","fake-bank.com","malware-host.net"].some(function(e){return t===e||t.endsWith("."+e)})||["phishing","malware","trojan","keylogger","ransomware","exploit-kit"].some(function(e){return t.includes(e)})||/[\u0000-\u001f\u007f-\u009f]/.test(t)||!/^[a-zA-Z0-9.-]+$/.test(t))return!1;return/^\d+\.\d+\.\d+\.\d+$/.test(t),!0}catch(e){return!1}}function c(e){var n=[],t=e;if(!e||""===e.trim())return{isValid:!1,errors:["验证规则不能为空"],sanitizedRule:""};e.length>1e4&&n.push("验证规则不能超过10000字"),/<(?:script|iframe|object|embed|form|input|meta|link|style)[^>]*>/gi.test(e)&&(n.push("验证规则不能包含危险的HTML标签"),t=i(e)),RegExp("(?<!https?:\\/\\/[^\\s]*)(javascript:|onclick\\s*=|onerror\\s*=|onload\\s*=|<script)","gi").test(e)&&(n.push("验证规则不能包含可执行脚本代码"),t=i(e));var r=e.match(/(https?:\/\/[^\s]+)/g)||[];if(r.length>0){var s=r.filter(function(e){return!o(e)});s.length>0&&n.push("包含危险的链接，已被安全过滤器拦截: ".concat(s.join(", ")))}return{isValid:0===n.length,errors:n,sanitizedRule:t}}function l(e){var n=[];if(!e||""===e.trim())return{isValid:!1,errors:["验证名称不能为空"],sanitizedKey:""};var t=i(e);return t!==e&&n.push("验证名称包含不安全的内容"),{isValid:0===n.length,errors:n,sanitizedKey:t}}},72107:function(e,n,t){t.d(n,{L:function(){return o}});var r=t(85893);t(67294);var s=t(1938),i=t(45655),a=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;var t=/(https?:\/\/[^\s]+)/g;if(!t.test(e)){var a=(0,i.KL)(e,n);return(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})}var o=e.split(t),c=e.match(t)||[];return(0,r.jsx)(r.Fragment,{children:o.map(function(e,t){if(t%2==0){var a=(0,i.KL)(e,n);return(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:a}},t)}var o=c[(t-1)/2];return(0,i.lt)(o)?(0,r.jsx)("a",{href:o,onClick:function(e){return(e.preventDefault(),e.stopPropagation(),(0,i.lt)(o))?s.N.handleExternalLink(o):alert("链接安全检查失败: ".concat(o.substring(0,50),"...")),!1},className:"text-blue-500 underline hover:text-blue-700 break-words break-all whitespace-normal",title:"外部链接: ".concat(o),rel:"noopener noreferrer",target:"_self",children:o.length>32?"".concat(o.substring(0,29),"..."):o},t):(0,r.jsx)("span",{className:"text-red-500 font-semibold",children:"[危险链接已被拦截]"},t)})})},o=function(e){var n=e.text,t=e.preserveLineBreaks;return(0,r.jsx)(r.Fragment,{children:a(n,void 0!==t&&t)})}},21803:function(e,n,t){t.d(n,{v:function(){return r}});function r(e,n){let[t,r="0"]=e.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${r}`))&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>n){let[e,s,i]=[r.slice(0,n-1),r.slice(n-1,n),r.slice(n)],a=Math.round(Number(`${s}.${i}`));(r=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>n&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,n)}else r=r.padEnd(n,"0");return BigInt(`${s?"-":""}${t}${r}`)}}}]);