try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7a9c5444-6041-4868-b85c-b9cc26067c3f",e._sentryDebugIdIdentifier="sentry-dbid-7a9c5444-6041-4868-b85c-b9cc26067c3f")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4018],{99932:function(e,n,t){t.d(n,{l:function(){return s}});var s=[{type:"constructor",inputs:[{name:"groupActionFactoryAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"DEFAULT_MAX_RECIPIENTS",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PRECISION",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"actionIdsWithRecipients",inputs:[{name:"groupOwner",type:"address",internalType:"address"},{name:"tokenAddress",type:"address",internalType:"address"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"getDistribution",inputs:[{name:"groupOwner",type:"address",internalType:"address"},{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"},{name:"groupId",type:"uint256",internalType:"uint256"},{name:"groupReward",type:"uint256",internalType:"uint256"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"addrs",type:"address[]",internalType:"address[]"},{name:"ratios",type:"uint256[]",internalType:"uint256[]"},{name:"amounts",type:"uint256[]",internalType:"uint256[]"},{name:"ownerAmount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"groupIdsByActionIdWithRecipients",inputs:[{name:"groupOwner",type:"address",internalType:"address"},{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"recipients",inputs:[{name:"groupOwner",type:"address",internalType:"address"},{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"},{name:"groupId",type:"uint256",internalType:"uint256"},{name:"round",type:"uint256",internalType:"uint256"}],outputs:[{name:"addrs",type:"address[]",internalType:"address[]"},{name:"ratios",type:"uint256[]",internalType:"uint256[]"},{name:"remarks",type:"string[]",internalType:"string[]"}],stateMutability:"view"},{type:"function",name:"setRecipients",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"actionId",type:"uint256",internalType:"uint256"},{name:"groupId",type:"uint256",internalType:"uint256"},{name:"addrs",type:"address[]",internalType:"address[]"},{name:"ratios",type:"uint256[]",internalType:"uint256[]"},{name:"remarks",type:"string[]",internalType:"string[]"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"SetRecipients",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"},{name:"round",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actionId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"groupId",type:"uint256",indexed:!0,internalType:"uint256"},{name:"account",type:"address",indexed:!1,internalType:"address"},{name:"recipients",type:"address[]",indexed:!1,internalType:"address[]"},{name:"ratios",type:"uint256[]",indexed:!1,internalType:"uint256[]"},{name:"remarks",type:"string[]",indexed:!1,internalType:"string[]"}],anonymous:!1},{type:"error",name:"ArrayLengthMismatch",inputs:[]},{type:"error",name:"DuplicateAddress",inputs:[]},{type:"error",name:"InvalidRatio",inputs:[]},{type:"error",name:"InvalidRound",inputs:[]},{type:"error",name:"InvalidRound",inputs:[]},{type:"error",name:"InvalidRound",inputs:[]},{type:"error",name:"OnlyGroupOwner",inputs:[]},{type:"error",name:"RecipientCannotBeSelf",inputs:[]},{type:"error",name:"TooManyRecipients",inputs:[]},{type:"error",name:"ZeroAddress",inputs:[]},{type:"error",name:"ZeroRatio",inputs:[]}]},31084:function(e,n,t){var s=t(85893);t(67294);var i=t(45655);n.Z=function(e){var n=e.text,t=e.className,a=e.maxLength,d=e.showWarning,r=e.preserveLineBreaks;if(!n)return null;var o=n;a&&n.length>a&&(o=n.substring(0,a)+"...");var l=(0,i.KL)(o,void 0!==r&&r),u=n!==o||/<[^>]*>/g.test(n)||/script|javascript|onclick|onerror|onload/gi.test(n);return(0,s.jsxs)("span",{className:void 0===t?"":t,children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:l}}),void 0!==d&&d&&u&&(0,s.jsx)("span",{className:"text-yellow-500 text-xs ml-1",children:"⚠️ 内容已被安全过滤"})]})}},5971:function(e,n,t){t.d(n,{Z:function(){return A}});var s=t(85893);t(67294);var i=t(92261),a=t(67516),d=t(34146),r=t(37742),o=function(e){var n,t,s,i,o,l=(0,a.N)({contracts:[{address:e,abi:d.r,functionName:"TOKEN_ADDRESS"},{address:e,abi:d.r,functionName:"JOIN_TOKEN_ADDRESS"},{address:e,abi:d.r,functionName:"ACTIVATION_STAKE_AMOUNT"},{address:e,abi:d.r,functionName:"MAX_JOIN_AMOUNT_RATIO"},{address:e,abi:d.r,functionName:"ACTIVATION_MIN_GOV_RATIO"}],query:{enabled:!!e}}),u=l.data,c=l.isPending,m=l.error;return{tokenAddress:null==u?void 0:null===(n=u[0])||void 0===n?void 0:n.result,groupManagerAddress:"0xf2084E73bF047aF26d72CEFde25e22536a1f37C8",groupJoinAddress:"0xd94e4Fc2108B78Aa57438BFe5E85192687f74322",groupVerifyAddress:"0x6c720b8a9c4803E7D78849E10fe535d862ACbfD1",joinTokenAddress:null==u?void 0:null===(t=u[1])||void 0===t?void 0:t.result,activationStakeAmount:(0,r.Zu)(null==u?void 0:null===(s=u[2])||void 0===s?void 0:s.result),maxJoinAmountRatio:(0,r.Zu)(null==u?void 0:null===(i=u[3])||void 0===i?void 0:i.result),activationMinGovRatio:(0,r.Zu)(null==u?void 0:null===(o=u[4])||void 0===o?void 0:o.result),isPending:c,error:m}},l=t(85794),u=t(38442),c=t(42083),m=t(27460),p=t(91529),x=function(e){var n=e.extensionAddress;e.factoryAddress,e.actionId;var t=BigInt("10000000000000000"),i=o(n),a=i.tokenAddress,d=i.joinTokenAddress,r=i.activationStakeAmount,x=i.maxJoinAmountRatio,y=i.activationMinGovRatio,v=i.isPending,f=i.error,N=(0,l.z4)(a||"0x0000000000000000000000000000000000000000"),b=N.symbol,A=N.isPending,g=(0,l.z4)(d||"0x0000000000000000000000000000000000000000"),j=g.symbol,T=g.isPending,h=(0,u.r)({tokenAddress:d||"0x0000000000000000000000000000000000000000",tokenSymbol:j}),I=h.formattedSymbol,R=h.isPending;if(v||A||T||R)return(0,s.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"加载扩展部署参数..."})]})});if(f)return(0,s.jsx)("div",{className:"mt-6 bg-red-50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:"加载扩展部署参数失败"})});if(!a||!d||void 0===r||void 0===x||void 0===y)return null;var w=(0,p.rl)(Number(x)/Number(t)),_=(0,p.rl)(Number(y)/Number(t));return(0,s.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base mb-4",children:"扩展协议参数:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"参与行动时使用的代币:"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[I&&(0,s.jsx)("span",{className:"text-sm",children:I}),(0,s.jsx)(m.Z,{address:d,showCopyButton:!0,colorClassName:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"激活链群需质押的代币:"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[b&&(0,s.jsx)("span",{className:"text-sm",children:b}),(0,s.jsx)(m.Z,{address:a,showCopyButton:!0,colorClassName:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"激活链群需质押的代币数:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:(0,p.LH)(r)})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"最大参与代币占比:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:w}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"行动者最大参与代币数 = 已铸造代币总量 \xd7 最大参与代币占比 \xd7 该行动投票率"})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"激活链群最小治理票比例:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:_}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"服务者激活链群时，其治理票占比需不低于此值"})]})]})]})},y=t(30985),v=function(e){var n=e.extensionAddress;e.factoryAddress,e.actionId;var t=(0,y.l)(n),i=(t.tokenAddress,t.groupActionTokenAddress),a=t.groupActionFactoryAddress,d=t.maxRecipients,r=t.govRatioMultiplier,o=t.isPending,u=t.error,p=(0,l.z4)(i||"0x0000000000000000000000000000000000000000"),x=p.symbol,v=p.isPending;return o||v?(0,s.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"加载扩展部署参数..."})]})}):u?(0,s.jsx)("div",{className:"mt-6 bg-red-50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:"加载扩展部署参数失败"})}):i&&a&&void 0!==d&&void 0!==r?(0,s.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base mb-4",children:"扩展协议参数:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"链群行动所在代币地址:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{address:i,showCopyButton:!0,colorClassName:"text-sm"}),x&&(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["(",x,")"]})]})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"治理票占比倍数:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:r.toString()}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"服务者所属链群，参与代币总量占比，超过 (治理票占比 \xd7 治理票占比倍数) 的部分，不再有铸币激励"})]})]})]}):null},f=t(18790),N=function(e){var n,t,s,i,d,o=(0,a.N)({contracts:[{address:e,abi:f.H,functionName:"TOKEN_ADDRESS"},{address:e,abi:f.H,functionName:"JOIN_TOKEN_ADDRESS"},{address:e,abi:f.H,functionName:"WAITING_BLOCKS"},{address:e,abi:f.H,functionName:"GOV_RATIO_MULTIPLIER"},{address:e,abi:f.H,functionName:"MIN_GOV_RATIO"}],query:{enabled:!!e}}),l=o.data,u=o.isPending,c=o.error;return{tokenAddress:null==l?void 0:null===(n=l[0])||void 0===n?void 0:n.result,joinTokenAddress:null==l?void 0:null===(t=l[1])||void 0===t?void 0:t.result,waitingBlocks:(0,r.Zu)(null==l?void 0:null===(s=l[2])||void 0===s?void 0:s.result),govRatioMultiplier:(0,r.Zu)(null==l?void 0:null===(i=l[3])||void 0===i?void 0:i.result),minGovRatio:(0,r.Zu)(null==l?void 0:null===(d=l[4])||void 0===d?void 0:d.result),isPending:u,error:c}},b=function(e){var n=e.extensionAddress;e.factoryAddress,e.actionId;var t=N(n),i=(t.tokenAddress,t.joinTokenAddress),a=t.waitingBlocks,d=t.govRatioMultiplier,r=t.minGovRatio,o=t.isPending,x=t.error,y=(0,l.z4)(i||"0x0000000000000000000000000000000000000000"),v=y.symbol,f=y.isPending,b=(0,u.r)({tokenAddress:i||"0x0000000000000000000000000000000000000000",tokenSymbol:v}),A=b.formattedSymbol,g=b.isPending;return o||f||g?(0,s.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"加载扩展部署参数..."})]})}):x?(0,s.jsx)("div",{className:"mt-6 bg-red-50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:"加载扩展部署参数失败"})}):i&&void 0!==a&&void 0!==d&&void 0!==r?(0,s.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base mb-4",children:"扩展协议参数:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"加入行动所需代币:"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[A&&(0,s.jsx)("span",{className:"text-sm",children:A}),(0,s.jsx)(m.Z,{address:i,showCopyButton:!0,colorClassName:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"退出行动需等待的区块数:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:a.toString()})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"加入行动所需最小治理票占比:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:(0,p.rl)(Number(r)/1e18*100)})]}),(0,s.jsxs)("div",{className:"md:max-w-2xl",children:[(0,s.jsx)("div",{className:"text-sm font-bold mb-1",children:"治理票占比倍数:"}),(0,s.jsx)("div",{className:"font-mono text-secondary text-sm md:text-base",children:d.toString()}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"有效LP占比超过 (治理票占比 \xd7 治理比率乘数) 的部分，不再有收益"})]})]})]}):null},A=function(e){var n=e.extensionAddress,t=e.factoryAddress,a=e.actionId;e.actionInfo;var d=(0,i.qD)(t);if(!d)return null;switch(d.type){case i.nw.LP:return(0,s.jsx)(b,{extensionAddress:n,factoryAddress:t,actionId:a});case i.nw.GROUP_ACTION:return(0,s.jsx)(x,{extensionAddress:n,factoryAddress:t,actionId:a});case i.nw.GROUP_SERVICE:return(0,s.jsx)(v,{extensionAddress:n,factoryAddress:t,actionId:a});default:return null}}},45231:function(e,n,t){t.d(n,{Q:function(){return c}});var s=t(91309),i=t(67294),a=t(67516),d=t(7724),r=t(98482),o=t(37742),l=t(36268),u="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",c=function(e){var n=e.tokenAddress,t=e.actionId,c=e.account,m=(0,i.useMemo)(function(){if(!n||void 0===t)return[];var e=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:d.d,functionName:"actionInfo",args:[n,t]},{address:u,abi:r.S,functionName:"amountByActionId",args:[n,t]},{address:u,abi:r.S,functionName:"numOfAccounts",args:[n,t]},{address:u,abi:r.S,functionName:"currentRound",args:[]}];return c&&e.push({address:u,abi:r.S,functionName:"amountByActionIdByAccount",args:[n,t,c]}),e},[n,t,c]),p=(0,a.N)({contracts:m,query:{enabled:!!n&&void 0!==t&&m.length>0}}),x=p.data,y=p.isPending,v=p.error,f=(0,i.useMemo)(function(){if(!x||!n||void 0===t)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,isJoined:!1,currentRound:void 0};var e=(0,s._)(x,5),i=e[0],a=e[1],d=e[2],r=e[3],l=e[4],u=null==i?void 0:i.result,c=(null==a?void 0:a.result)?(0,o.Zu)(a.result):void 0,m=(null==d?void 0:d.result)?(0,o.Zu)(d.result):void 0,p=(null==r?void 0:r.result)?(0,o.Zu)(r.result):void 0;return{actionInfo:u,participantCount:m,totalAmount:c,isJoined:null!=l&&!!l.result&&(0,o.Zu)(l.result)>BigInt(0),currentRound:p}},[x,n,t]),N=(0,l.bX)(n,f.actionInfo,c,{participantCount:f.participantCount,totalAmount:f.totalAmount,isJoined:f.isJoined});return(0,i.useMemo)(function(){return{actionInfo:f.actionInfo,currentRound:f.currentRound,participantCount:N.participantCount,totalAmount:N.totalAmount,convertedTotalAmount:N.convertedTotalAmount,joinedAmountTokenAddress:N.joinedAmountTokenAddress,joinedAmountTokenSymbol:N.joinedAmountTokenSymbol,joinedAmountTokenIsLP:N.joinedAmountTokenIsLP,isJoined:N.isJoined,isExtensionAction:N.isExtensionAction,extensionAddress:N.extensionAddress,factory:N.factory,isPending:y||N.isPending,error:v||N.error}},[f,N,y,v])}},30985:function(e,n,t){t.d(n,{l:function(){return o}});var s=t(67516),i=t(89266),a=t(99932),d=t(37742),r="0x745470f219836deae285bD7E934CAD85958D1729",o=function(e){var n,t,o,l,u,c=(0,s.N)({contracts:[{address:e,abi:i.P,functionName:"TOKEN_ADDRESS"},{address:e,abi:i.P,functionName:"GROUP_ACTION_TOKEN_ADDRESS"},{address:e,abi:i.P,functionName:"GROUP_ACTION_FACTORY_ADDRESS"},{address:r,abi:a.l,functionName:"DEFAULT_MAX_RECIPIENTS"},{address:e,abi:i.P,functionName:"GOV_RATIO_MULTIPLIER"}],query:{enabled:!!e&&!!r}}),m=c.data,p=c.isPending,x=c.error;return{tokenAddress:null==m?void 0:null===(n=m[0])||void 0===n?void 0:n.result,groupActionTokenAddress:null==m?void 0:null===(t=m[1])||void 0===t?void 0:t.result,groupActionFactoryAddress:null==m?void 0:null===(o=m[2])||void 0===o?void 0:o.result,maxRecipients:(0,d.Zu)(null==m?void 0:null===(l=m[3])||void 0===l?void 0:l.result),govRatioMultiplier:(0,d.Zu)(null==m?void 0:null===(u=m[4])||void 0===u?void 0:u.result),isPending:p,error:x}}}}]);